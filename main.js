/*! For license information please see main.js.LICENSE.txt */
(()=>{var t,e={7808:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticsModule=void 0;var n=i(3339),r=i(7468),s=i(5242);e.AnalyticsModule=new n.ContainerModule((function(t){t(r.TypesAnalytics.tracker).to(s.AnalyticsTracker).inSingletonScope()}))},5242:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalyticsTracker=void 0;var n=i(4629),r=i(7468),s=i(4643),o=i(3339),a=function(){function t(){this.providers=new Set,this._useFb=!0}return t.prototype.init=function(){var t=s.di.get(r.TypesCore.gameConfig).analytics;if(t){var e=t.fb;t.firebase;"boolean"==typeof e&&(this._useFb=e)}},t.prototype.addProvider=function(t){this.providers.add(t)},t.prototype.removeProvider=function(t){this.providers.delete(t)},t.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=n.__read(t,3),r=i[0],s=i[1],o=i[2];"object"==typeof s&&(o=s,s=0),s||(s=0),r&&this.providers.forEach((function(t){return t.track(r,s,o)}))},t=n.__decorate([(0,o.injectable)()],t)}();e.AnalyticsTracker=a},9500:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(7808),e),n.__exportStar(i(5433),e)},7775:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FirebaseAnalyticsProvider=void 0;var n=i(4629),r=i(9076),s=i(3339),o=function(){function t(){}return t.prototype.init=function(t){var e=this;(0,r.isSupported)().then((function(i){i&&(e.firebaseAnalytics=(0,r.getAnalytics)(t))}))},t.prototype.track=function(t,e,i){this.logEvent(t,n.__assign({value:e},i))},t.prototype.logEvent=function(t,e){this.firebaseAnalytics&&(0,r.logEvent)(this.firebaseAnalytics,t,e)},t=n.__decorate([(0,s.injectable)()],t)}();e.FirebaseAnalyticsProvider=o},6317:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GTAGAnalyticsProvider=void 0;var n=i(4629),r=i(3339),s=function(){function t(){}return t.prototype.track=function(t,e,i){gtag&&gtag("event",t,i)},t=n.__decorate([(0,r.injectable)()],t)}();e.GTAGAnalyticsProvider=s},5433:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(7775),e),n.__exportStar(i(6317),e)},8888:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AudioModule=void 0;var n=i(3339),r=i(7468),s=i(3049),o=i(9509),a=i(5877),h=i(1648);e.AudioModule=new n.ContainerModule((function(t){t(r.TypesAudio.model).to(s.AudioModel).inSingletonScope(),t(r.TypesAudio.initAction).to(h.InitAudioAction),t(r.TypesAudio.soundAction).to(a.PlaySoundAction),t(r.TypesAudio.musicAction).to(o.PlayMusicAction)}))},1648:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InitAudioAction=void 0;var n=i(4629),r=i(7468),s=i(4643),o=i(7472),a=i(3339),h=i(3049),l=i(4643),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,i,r,a,l,c,u,d,p,f;return n.__generator(this,(function(m){switch(m.label){case 0:return(t=this.gameConfig.audio)?[4,this.cookie.get(h.AudioModel.COOKIE_KEY)]:[3,2];case 1:e=m.sent();try{for(i=n.__values(Object.keys(t)),r=i.next();!r.done;r=i.next())a=r.value,t[a]&&(l=new o.Howl(this.fixPaths(t[a])),c="howl_".concat(a),s.di.bind(c).toConstantValue(l))}catch(t){u={error:t}}finally{try{r&&!r.done&&(d=i.return)&&d.call(i)}finally{if(u)throw u.error}}return this.model.init(null===(p=e[h.AudioModel.COOKIE_KEY])||void 0===p?void 0:p.sounds,null===(f=e[h.AudioModel.COOKIE_KEY])||void 0===f?void 0:f.music),[3,2];case 2:return[2]}}))}))},e.prototype.fixPaths=function(t,e){return void 0===e&&(e=l.IS_ODR_BUILD?l.ODR_BUILD_ORIGIN:s.GAME_SCRIPT_ORIGIN),Array.isArray(t.src)?t.src=t.src.map((function(t){return"".concat(e).concat(t)})):"string"==typeof t.src&&(t.src="".concat(e).concat(t.src)),t},n.__decorate([(0,a.inject)(r.TypesCore.gameConfig),n.__metadata("design:type",Object)],e.prototype,"gameConfig",void 0),n.__decorate([(0,a.inject)(r.TypesAudio.model),n.__metadata("design:type",h.AudioModel)],e.prototype,"model",void 0),n.__decorate([(0,a.inject)(r.TypesSocial.cookie),n.__metadata("design:type",Object)],e.prototype,"cookie",void 0),e=n.__decorate([(0,a.injectable)()],e)}(s.Action);e.InitAudioAction=c},9509:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayMusicAction=void 0;var n=i(4629),r=i(4643),s=i(3339),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return n.__extends(e,t),i=e,e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,s,o,a,h;return n.__generator(this,(function(n){return e=t.active,s=t.sprite,o=t.howlInstance,(a=o||(0,r.lazyGet)("howl_music"))?(h=!isNaN(i.activeMusicState.instance),e?h?i.activeMusicState.playing||(i.activeMusicState.playing=!0,this.fadeTo(a,1,i.activeMusicState.instance)):(i.activeMusicState.instance=a.play(s||"track")||NaN,i.activeMusicState.playing=!0):i.activeMusicState.playing&&(i.activeMusicState.playing=!1,h&&this.fadeTo(a,0,i.activeMusicState.instance)),[2]):[2]}))}))},e.prototype.fadeTo=function(t,e,i,n){void 0===n&&(n=500);var r=t.volume();n*=Math.abs(Math.min(r,e)-Math.max(r,e)),t.fade(r,e,n,i)},e.activeMusicState={playing:!1},e=i=n.__decorate([(0,s.injectable)()],e)}(r.Action);e.PlayMusicAction=o},5877:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlaySoundAction=void 0;var n=i(4629),r=i(7468),s=i(4643),o=i(3339),a=i(3049),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i;return n.__generator(this,(function(n){return!this.model.soundsMuted()&&(e=this.transformSound(t))?[2,(null===(i=(0,s.lazyGet)("howl_sounds"))||void 0===i?void 0:i.play(e))||-1]:[2,-1]}))}))},e.prototype.transformSound=function(t){return t},n.__decorate([(0,o.inject)(r.TypesAudio.model),n.__metadata("design:type",a.AudioModel)],e.prototype,"model",void 0),e=n.__decorate([(0,o.injectable)()],e)}(s.Action);e.PlaySoundAction=h},9178:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(3049),e),n.__exportStar(i(9509),e),n.__exportStar(i(5877),e),n.__exportStar(i(8888),e)},3049:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AudioModel=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(3339),a=i(7472),h=function(t){function e(){var e=t.call(this)||this;return e._paused=!1,e._started=!1,e._ready=!1,e._isAdPlaying=!1,e._onBackgroundLoopEnded=function(){return e.onBackgroundLoopEnded()},e.backgroundSounds=[{id:"howl_music",default:!0}],e}var i;return n.__extends(e,t),i=e,e.prototype.initBackgroundSounds=function(){this.backgroundSounds.forEach((function(t){t.howl=(0,r.lazyGet)(t.id),t.initiated=!0}))},e.prototype.init=function(){return n.__awaiter(this,arguments,void 0,(function(t,e){var i;return void 0===t&&(t=!1),void 0===e&&(e=!1),n.__generator(this,(function(n){return this.initBackgroundSounds(),this.addListener(s.AdEvents.STARTED,this.onAdStarted),this.addListener(s.AdEvents.ENDED,this.onAdEnded),this.addListener(r.CommonEvents.PAUSE,this.onPause),this.muteMusic(e),this.muteSounds(t),(null==(i=this.backgroundSounds.find((function(t){return t.default})))?void 0:i.howl)&&(this.activeBackgroundHowl=i.howl),this._ready=!0,[2,this]}))}))},e.prototype.soundsMuted=function(){return this._sounds},e.prototype.musicMuted=function(){return this._music},e.prototype.muteSounds=function(t){return this._sounds!==t&&(this._sounds=t,this.dispatch(i.MUTE_SOUNDS,t),this.postData()),this._sounds},e.prototype.muteMusic=function(t){return this._music!==t&&(this._music=t,this.tapMusic(),this.dispatch(i.MUTE_MUSIC,t),this.postData()),this._music},e.prototype.activateBackgroundMusic=function(){this._started=!0,this.tapMusic()},Object.defineProperty(e.prototype,"ready",{get:function(){return this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.tapMusic()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"music",{get:function(){return this._music},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sounds",{get:function(){return this.sounds},enumerable:!1,configurable:!0}),e.prototype.onAdStarted=function(){this.isAdPlaying=!0},e.prototype.onAdEnded=function(){this.isAdPlaying=!1},Object.defineProperty(e.prototype,"isAdPlaying",{get:function(){return this._isAdPlaying},set:function(t){this._isAdPlaying=t,this.tapMusic()},enumerable:!1,configurable:!0}),e.prototype.onPause=function(t){this.paused=t},e.prototype.postData=function(){var t=this._sounds,e=this._music;this.cookie.save(i.COOKIE_KEY,{sounds:t,music:e})},e.prototype.tapMusic=function(){if(this._ready&&this._started){var t=this._isAdPlaying||!this._isAdPlaying&&this._paused;this.runMusicAction(!this._music&&!t)}},e.prototype.runMusicAction=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i;return n.__generator(this,(function(n){return e=this._activeBackgroundHowl,[2,null===(i=(0,r.lazyGet)(s.TypesAudio.musicAction))||void 0===i?void 0:i.run({active:t,howlInstance:e})]}))}))},e.prototype.onBackgroundLoopEnded=function(){this.changeBackgroundMusic()},e.prototype.changeBackgroundMusic=function(t){var e;this.activeBackgroundHowl=null===(e=this.backgroundSounds.find((function(e){return e.id===t})))||void 0===e?void 0:e.howl},e.prototype.disableOnBackgroundLoopEnded=function(t){t&&t.off("end",this._onBackgroundLoopEnded)},e.prototype.enableOnBackgroundLoopEnded=function(t){t&&t.on("end",this._onBackgroundLoopEnded)},Object.defineProperty(e.prototype,"activeBackgroundHowl",{get:function(){return this._activeBackgroundHowl},set:function(t){if(t&&this._activeBackgroundHowl!==t){var e=this._activeBackgroundHowl;this.disableOnBackgroundLoopEnded(this._activeBackgroundHowl),this._activeBackgroundHowl&&this.runMusicAction(!1),this._activeBackgroundHowl=t,this.enableOnBackgroundLoopEnded(this._activeBackgroundHowl),e!==this._activeBackgroundHowl&&this.activateBackgroundMusic()}},enumerable:!1,configurable:!0}),e.COOKIE_KEY="audio",e.MUTE_MUSIC="AudioModel.MUTE_MUSIC",e.MUTE_SOUNDS="AudioModel.MUTE_SOUNDS",n.__decorate([(0,r.lazyInject)("howl_sounds"),n.__metadata("design:type",a.Howl)],e.prototype,"howl",void 0),n.__decorate([(0,o.inject)(s.TypesSocial.cookie),n.__metadata("design:type",Object)],e.prototype,"cookie",void 0),e=i=n.__decorate([(0,o.injectable)(),n.__metadata("design:paramtypes",[])],e)}(r.GlobalEventProvider);e.AudioModel=h},2016:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoreModule=void 0;var n=i(7468),r=i(3339),s=i(113);e.CoreModule=new r.ContainerModule((function(t){t(n.TypesCore.gameConfig).toConstantValue({id:"unset",sid:"unset"}),t(n.TypesCore.dispatcher).to(s.EventDispatcher).inSingletonScope(),t(n.TypesCore.eventProvider).to(s.GlobalEventProvider)}))},5777:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var n=i(4629),r=i(3339),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.run=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r,s,o,a,h=this;return n.__generator(this,(function(n){switch(n.label){case 0:this.data=t,e=void 0,i=this.execute(this.data),r=new Promise((function(t,e){h._resolve=t,h._reject=e})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Promise.race([i,r])];case 2:return e=n.sent(),[3,4];case 3:if(s=n.sent(),!this.onFailed)throw s;return null===(o=this.onFailed)||void 0===o||o.call(null),[3,4];case 4:return null===(a=this.onFinish)||void 0===a||a.call(null),[2,e]}}))}))},e.prototype.terminate=function(t){var e;null===(e=this._reject)||void 0===e||e.call(null,t)},e.prototype.destroy=function(){delete this.data,delete this._resolve,delete this._reject,delete this.onFinish,delete this.onFailed},e=n.__decorate([(0,r.injectable)()],e)}(i(113).GlobalEventProvider);e.Action=s},1011:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LazyAction=void 0;var n=i(4629),r=function(t){function e(e){var i=t.call(this)||this;return i.callback=e,i}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(i){switch(i.label){case 0:return(e=this.callback(t))instanceof Promise?[4,e]:[3,2];case 1:return[2,i.sent()];case 2:return[2,e]}}))}))},e}(i(5777).Action);e.LazyAction=r},7498:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParallelAction=void 0;var n=i(4629),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r,s,o,a;return n.__generator(this,(function(h){switch(h.label){case 0:e=[];try{for(i=n.__values(t),r=i.next();!r.done;r=i.next())s=r.value,e.push(s.run())}catch(t){o={error:t}}finally{try{r&&!r.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}return[4,Promise.all(e)];case 1:return[2,h.sent()]}}))}))},e}(i(5777).Action);e.ParallelAction=r},6392:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceAction=void 0;var n=i(4629),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r,s,o;return n.__generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),e=n.__values(t),i=e.next(),a.label=1;case 1:return i.done?[3,4]:[4,i.value.run()];case 2:a.sent(),a.label=3;case 3:return i=e.next(),[3,1];case 4:return[3,7];case 5:return r=a.sent(),s={error:r},[3,7];case 6:try{i&&!i.done&&(o=e.return)&&o.call(e)}finally{if(s)throw s.error}return[7];case 7:return[2]}}))}))},e}(i(5777).Action);e.SequenceAction=r},5020:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WaitAction=void 0;var n=i(4629),r=i(3339),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return n.__extends(e,t),i=e,e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},e.ms=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return[2,(new i).run(t)]}))}))},e.sec=function(){return n.__awaiter(this,arguments,void 0,(function(t){return void 0===t&&(t=1),n.__generator(this,(function(e){return[2,(new i).run(1e3*t)]}))}))},e.frame=function(){return n.__awaiter(this,arguments,void 0,(function(t){return void 0===t&&(t=1),n.__generator(this,(function(e){switch(e.label){case 0:return--t>=0?[4,new Promise((function(t){return requestAnimationFrame(t)}))]:[3,2];case 1:return e.sent(),[3,0];case 2:return[2]}}))}))},e=i=n.__decorate([(0,r.injectable)()],e)}(i(5777).Action);e.WaitAction=s},6391:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(5777),e),n.__exportStar(i(1011),e),n.__exportStar(i(7498),e),n.__exportStar(i(6392),e),n.__exportStar(i(5020),e)},3366:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.ODR_BUILD_ORIGIN=e.IS_ODR_BUILD=e.GAME_SCRIPT_ORIGIN=e.CANVAS_ID=e.CommonEvents=void 0,function(t){t.UPDATED="updated",t.PAUSE="pause"}(i||(e.CommonEvents=i={})),e.CANVAS_ID="game-canvas",e.GAME_SCRIPT_ORIGIN=function(){var t=Array.from(window.document.getElementsByTagName("script")).filter((function(t){return-1!==t.src.indexOf("firebaseapp.com")})).filter((function(t){return t.src.indexOf("main.js")})).map((function(t){return t.src}))[0];if(t)return t.substr(0,t.lastIndexOf("/")+1)}()||"",e.IS_ODR_BUILD=!1,e.ODR_BUILD_ORIGIN=(e.IS_ODR_BUILD,"")},4740:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lazyRun=e.lazyGet=e.lazyInject=e.di=void 0;var n=i(4629),r=i(3339),s=n.__importDefault(i(5237)),o=new r.Container;e.di=o;var a=(0,s.default)(o).lazyInject;e.lazyInject=a;var h=function(t){return t&&o.isBound(t)?o.get(t):void 0};e.lazyGet=h;e.lazyRun=function(t,e){var i;return null===(i=h(t))||void 0===i?void 0:i.run(e)}},3588:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=void 0;var n=i(4629),r=i(3339),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e=n.__decorate([(0,r.injectable)()],e)}(i(9658).EventEmitter);e.EventDispatcher=s},8145:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalEventProvider=void 0;var n=i(4629),r=i(7468),s=i(3339),o=i(3588),a=function(){function t(){this.listenersMap={}}return t.prototype.destroy=function(){this.removeAllListeners()},t.prototype.dispatch=function(t,e){this._dispatcher.emit(t,e)},t.prototype.addListener=function(t,e){this.mapListenerToEvent(t,e,this.listenersMap)?this._dispatcher.on(t,e,this):console.warn("Listener "+e+" for event "+t+" is already exists")},t.prototype.addListenerOnce=function(t,e){var i=this,n=function(r){e.call(i,r),i.removeListener(t,n)};this.addListener(t,n)},t.prototype.removeListener=function(t,e){this.unMapListenerToEvent(t,e,this.listenersMap)?this._dispatcher.off(t,e,this):console.warn(e+" is not a listener for event "+t)},t.prototype.removeListeners=function(t){var e,i,r=this.listenersMap[t];if(r){try{for(var s=n.__values(r),o=s.next();!o.done;o=s.next()){var a=o.value;this._dispatcher.off(t,a,this)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}delete this.listenersMap[t]}else console.warn("There are no any listeners for event "+t)},t.prototype.removeAllListeners=function(){var t,e;try{for(var i=n.__values(Object.keys(this.listenersMap)),r=i.next();!r.done;r=i.next()){var s=r.value;this.removeListeners(s)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.listenersMap={}},t.prototype.hasListeners=function(){return 0!==Object.keys(this.listenersMap).length},t.prototype.mapListenerToEvent=function(t,e,i){var n=i[t];if(n){if(n.indexOf(e)>-1)return!1;n.push(e)}else n=[e],i[t]=n;return!0},t.prototype.unMapListenerToEvent=function(t,e,i){var n=i[t];if(n){var r=n.indexOf(e);if(r>-1)return n.splice(r,1),0===n.length&&delete i[t],!0}return!1},n.__decorate([(0,s.inject)(r.TypesCore.dispatcher),n.__metadata("design:type",o.EventDispatcher)],t.prototype,"_dispatcher",void 0),t=n.__decorate([(0,s.injectable)()],t)}();e.GlobalEventProvider=a},113:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629),r=n.__importDefault(i(9658)),s=i(3339);n.__exportStar(i(3588),e),n.__exportStar(i(8145),e),(0,s.decorate)((0,s.injectable)(),r.default)},4643:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);i(4937),n.__exportStar(i(6391),e),n.__exportStar(i(3366),e),n.__exportStar(i(2016),e),n.__exportStar(i(4740),e),n.__exportStar(i(113),e)},9658:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new r(n,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,r,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,s),!0;case 6:return c.fn.call(c.context,e,n,r,s,o),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||o(this,s);else{for(var h=0,l=[],c=a.length;h<c;h++)(a[h].fn!==e||r&&!a[h].once||n&&a[h].context!==n)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},3212:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameModuleBase=void 0;var n=i(9500),r=i(9178),s=i(4643),o=i(3886),a=i(7468),h=i(4639),l=i(3339),c=i(2203),u=i(8743),d=(i(932),i(8225)),p=i(5983);e.GameModuleBase=new l.ContainerModule((function(){s.di.load(s.CoreModule,h.AppModule,r.AudioModule,n.AnalyticsModule,o.GameFlowModule);var t={id:"427004178938893",sentry:null,audio:{sounds:{src:["assets/sounds/track.m4a","assets/sounds/track.mp3","assets/sounds/track.ac3","assets/sounds/track.ogg"],sprite:{sfx_bin_disposes_shape:[0,1138.4580498866212],sfx_bin_hint:[3e3,1341.2925170068029],sfx_bin_open:[6e3,1232.1768707482993],sfx_bomb_click:[9e3,125.01133786848051],sfx_bomb_explosion:[11e3,2644.104308390023],sfx_bonus_appeared:[15e3,1495.8049886621332],sfx_bonus_collected:[18e3,1826.0317460317451],sfx_combo_1:[21e3,2116.394557823128],sfx_combo_2:[25e3,2066.89342403628],sfx_combo_3:[29e3,2093.5827664399085],sfx_end_game:[33e3,6148.956916099771],sfx_last_move_warning:[41e3,1418.684807256234],sfx_light_hint_shaking:[44e3,2767.5283446711987],sfx_light_tick:[48e3,187.50566893424292],sfx_magic_sqare:[5e4,960.7256235827676],sfx_no_moves_shaking:[52e3,1536.8934240362792],sfx_revieve_Countdown_1:[55e3,750],sfx_revieve_Countdown_2:[57e3,687.505668934243],sfx_shape_breaks_1:[59e3,1804.8526077097476],sfx_shape_breaks_2:[62e3,1592.1315192743748],sfx_shape_breaks_3:[65e3,2027.5963718820833],sfx_shape_fly_back:[69e3,220.09070294784294],sfx_shape_place:[71e3,249.90929705215592],sfx_shape_snap_1:[73e3,180.5442176870713],sfx_shape_snap_2:[75e3,171.519274376422],sfx_shuffle_shapes:[77e3,815.3061224489733],sfx_ui_click:[79e3,771.3832199546431]}},relax:{src:["assets/music/relax.m4a","assets/music/relax.mp3","assets/music/relax.ac3","assets/music/relax.ogg"],sprite:{track:[0,101861.49659863947]},loop:!0},engrossed:{src:["assets/music/engrossed.m4a","assets/music/engrossed.mp3","assets/music/engrossed.ac3","assets/music/engrossed.ogg"],sprite:{track:[0,64000.1133786848]},loop:!0},immersive:{src:["assets/music/immersive.m4a","assets/music/immersive.mp3","assets/music/immersive.ac3","assets/music/immersive.ogg"],sprite:{track:[0,111e3]},loop:!0}},i18n:{revive:{default:"Revive?",localizations:{ru_RU:" "}},boom:{default:"BOOM",localizations:{ru_RU:"БУМ"}},combo:{default:"COMBO",localizations:{ru_RU:"КОМБО"}},share:{default:"Share",localizations:{ru_RU:"Поделиться",es_ES:"Compartir",es_LA:"Compartir",pt_PT:"Partilhar",pt_BR:"Compartilhar",fr_FR:"Partager",de_DE:"Teilen",zh_CN:"分享",zh_TW:"分享",ja_JP:"シェア",ko_KR:"공유",it_IT:"Condividi",pl_PL:"Udostępnij",tr_TR:"Paylaş",th_TH:"แชร์",hi_IN:"शेयर करें",vi_VN:"Chia sẻ",id_ID:"Bagikan",ms_MY:"Kongsi"}},game_claim:{default:"Claim",localizations:{ru_RU:"Получить",es_ES:"Solicitar",es_LA:"Solicitar",pt_PT:"Solicitar",pt_BR:"Resgatar",fr_FR:"Recevoir",de_DE:"Erhalten",zh_CN:"請求する",zh_TW:"획득",ja_JP:"领取",ko_KR:"領取",it_IT:"Richiedi",pl_PL:"Odbierz",tr_TR:"Almak",th_TH:"รับ",hi_IN:"दावा करें",vi_VN:"Nhận thưởng",id_ID:"Klaim",ms_MY:"Tuntut"}},game_continue:{default:"Continue?",localizations:{ru_RU:"Продолжить?",es_ES:"Seguir?",es_LA:"Avanzar?",pt_PT:"Continua?",pt_BR:"Continue?",fr_FR:"Continuer?",de_DE:"Weiter?",zh_CN:"继续?",zh_TW:"繼續?",ja_JP:"続行?",ko_KR:"계속하기?",it_IT:"Continua?",pl_PL:"Dalej?",tr_TR:"Devam et?",th_TH:"ไปต่อ?",hi_IN:"जारी रखें?",vi_VN:"Tiếp tục?",id_ID:"Lanjut?",ms_MY:"Teruskan?"}},game_no_thanks:{default:"No, thanks",localizations:{ru_RU:"НЕТ, СПАСИБО",es_ES:"NO, GRACIAS",es_LA:"NO, GRACIAS",pt_PT:"NÃO, OBRIGADO",pt_BR:"NÃO, VALEU",fr_FR:"NON, MERCI",de_DE:"NEIN DANKE",zh_CN:"不，谢谢",zh_TW:"不用啦",ja_JP:"要りません",ko_KR:"아니요, 감사합니다",it_IT:"NO, GRAZIE",pl_PL:"NIE, DZIĘKI",tr_TR:"HAYIR, TEŞEKKÜRLER",th_TH:"ไม่ ขอบคุณ",hi_IN:"नहीं धन्यवाद",vi_VN:"KHÔNG, CẢM ƠN",id_ID:"TIDAK, TERIMA KASIH",ms_MY:"TIDAK, TERIMA KASIH"}},game_invite:{default:"Invite",localizations:{ru_RU:"Пригласить",es_ES:"Invitar",es_LA:"Invitar",pt_PT:"Convidar",pt_BR:"Convidar",fr_FR:"Inviter",de_DE:"Einladen",zh_CN:"邀请",zh_TW:"邀請",ja_JP:"招待",ko_KR:"초대",it_IT:"Invita",pl_PL:"Zaproś",tr_TR:"Davet et",th_TH:"ชวนเพื่อน",hi_IN:"आमंत्रित करें",vi_VN:"Mời",id_ID:"Undang",ms_MY:"Jemput"}},game_login_btn:{default:"Login",localizations:{ru_RU:"Авторизация"}},game_login_text:{default:"Log in to compete with others.",localizations:{ru_RU:"Авторизуйтесь\n для соревнования с другими."}},game_pending:{default:"Pending...",localizations:{ru_RU:"Ожидание...",es_ES:"Cargando…",es_LA:"Cargando...",pt_PT:"Carregando...",pt_BR:"A carregar...",fr_FR:"Chargement...",de_DE:"Laden...",zh_CN:"加载...",zh_TW:"載入中……",ja_JP:"読み込み中...",ko_KR:"로딩...",it_IT:"Caricamento...",pl_PL:"Ładowanie...",tr_TR:"Yükleniyor...",th_TH:"กำลังโหลด...",hi_IN:"लोड हो रहा है..",vi_VN:"Đang tải...",id_ID:"Memuat...",ms_MY:"Memuatkan…"}},ui_tap_to_continue:{default:"Tap to continue",localizations:{ru_RU:"Нажмите, чтобы продолжить",de_DE:"Tippen Sie, um fortzufahren",fr_FR:"Appuyez pour continuer",es_ES:"Pulse para continuar",pt_PT:"Clique para continuar"}}}};t&&s.di.rebind(a.TypesCore.gameConfig).toConstantValue(t),s.di.bind("sentryAction").to(u.SetupSentryAction),s.di.bind("template.action").toConstantValue(new s.LazyAction((function(){var t,e;null===(t=(0,s.lazyGet)("sentryAction"))||void 0===t||t.run(),null===(e=(0,s.lazyGet)("fspMeterAction"))||void 0===e||e.run()}))),s.di.bind(a.TypesDevice.model).to(d.DeviceConfig).inSingletonScope(),s.di.bind(a.TypesDevice.initAction).to(c.InitDeviceConfigAction),s.di.bind(a.TypesDevice.browserPauseAction).to(p.BrowserPauseAction).inSingletonScope()}))},5983:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserPauseAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(3339),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return this.dispatcher.emit(s.TypesDevice.events.browserPause,t),[2]}))}))},n.__decorate([(0,o.inject)(s.TypesCore.dispatcher),n.__metadata("design:type",r.EventDispatcher)],e.prototype,"dispatcher",void 0),e=n.__decorate([(0,o.injectable)()],e)}(r.Action);e.BrowserPauseAction=a},6725:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateFPSMeterAction=void 0;var n=i(4629);i(2476);var r=i(3339),s=i(7461),o=i(4643),a=i(1794),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return void 0===t&&(t=a.Settings.debug.fpsMeter),n.__awaiter(this,void 0,void 0,(function(){var e,i,r,a;return n.__generator(this,(function(n){return s.log.debug("createFPSMeter"),"undefined"!=typeof FPSMeter&&(e=document.getElementById(o.CANVAS_ID),i=document.createElement("div"),document.body.insertBefore(i,e.parentElement),(r=new FPSMeter(i,t)).show(),(a=function(){r.tick(),requestAnimationFrame(a)})()),[2]}))}))},e=n.__decorate([(0,r.injectable)()],e)}(o.Action);e.CreateFPSMeterAction=h},5839:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InitDeviceConfigAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(3339),a=i(8533),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cssPrefix="detect-",e.cssPostfix="",e}return n.__extends(e,t),e.prototype.execute=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return this.addCssClassesByDeviceAndEnv(),this.addCssClassesByGameConfig(),[2]}))}))},e.prototype.getRoot=function(){return document.getElementById("game-root")},e.prototype.addCssClassesByDeviceAndEnv=function(){var t=this,e=this.getRoot(),i=[],n="social-".concat("bridge"),r=this.deviceConfigModel,s=r.isAndroid,o=r.isWebView,a=r.isDesktop,h=r.isMobile,l=r.isIphone;s&&i.push("android"),a&&i.push("desktop"),h&&i.push("mobile"),o&&i.push("webview"),l&&i.push("iphone"),i.push(n),e&&i.forEach((function(i){e.classList.add("".concat(t.cssPrefix).concat(i).concat(t.cssPostfix))}))},e.prototype.addCssClassesByGameConfig=function(){var t,e=this.getRoot(),i=!!(null===(t=(0,r.lazyGet)(s.TypesCore.gameConfig))||void 0===t?void 0:t.useBannerAd);e&&i&&e.classList.add("use-banner-ad")},n.__decorate([(0,o.inject)(s.TypesDevice.model),n.__metadata("design:type",a.DeviceConfig)],e.prototype,"deviceConfigModel",void 0),e=n.__decorate([(0,o.injectable)()],e)}(r.Action);e.InitDeviceConfigAction=h},8743:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SetupSentryAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=n.__importStar(i(7617)),a=i(728),h=i(3339),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var t,e=this;return n.__generator(this,(function(i){return(t=this.getConfig())&&(o.init(n.__assign(n.__assign({},t),{integrations:[new a.Integrations.BrowserTracing],tracesSampleRate:1})),o.configureScope((function(i){var r=function(e){return e.replace(/^(.*:)\/\/([A-z0-9\-.]+)(:[0-9]+)?\/(.*)\//,"~/".concat(t.project,"-").concat("bridge","/").concat(t.release,"/"))};i.addEventProcessor((function(t){return n.__awaiter(e,void 0,void 0,(function(){var e,i,s;return n.__generator(this,(function(n){return t.culprit&&(t.culprit=r(t.culprit)),(null===(s=null===(i=null===(e=t.exception)||void 0===e?void 0:e.values[0])||void 0===i?void 0:i.stacktrace)||void 0===s?void 0:s.frames)&&(t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames.map((function(t){return t.filename=r(t.filename),t}))),[2,t]}))}))}))}))),[2]}))}))},e.prototype.getConfig=function(){var t=this.gameConfig.sentry;return t&&(t.environment=["bridge","production"].filter((function(t){return!!t})).join("-")),t},n.__decorate([(0,h.inject)(s.TypesCore.gameConfig),n.__metadata("design:type",Object)],e.prototype,"gameConfig",void 0),e=n.__decorate([(0,h.injectable)()],e)}(r.Action);e.SetupSentryAction=l},2203:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(6725),e),n.__exportStar(i(8743),e),n.__exportStar(i(5839),e)},932:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebugModule=void 0;var n=i(4643),r=i(6725),s=i(3339);e.DebugModule=new s.ContainerModule((function(){n.di.bind("fspMeterAction").to(r.CreateFPSMeterAction)}))},4245:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.startGame=void 0;var n=i(4643),r=i(7468);e.startGame=function(){return n.di.get(r.TypesFlow.boot).run()}},4135:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(1794),e),n.__exportStar(i(2203),e),n.__exportStar(i(8225),e),n.__exportStar(i(3212),e),n.__exportStar(i(4245),e)},3139:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8533:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceConfig=void 0;var n=i(4629),r=i(3339),s=["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"],o=function(){function t(){var t,e,i;this._isIphone=!1,this._isAndroid=!1,this._isMobile=!1,this._isDesktop=!1,this._isWebView=!1,this._platform="UNKNOWN",this._isMobile=(e=!1,t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e),this._isDesktop=!this._isMobile,this._isIphone="undefined"!=typeof window&&"undefined"!=typeof navigator&&/iPhone/i.test(navigator.userAgent||navigator.vendor||window.opera&&"[object Opera]"===opera.toString()),this._isAndroid=(i=i||window.navigator.userAgent,/Android/i.test(i)),this._isWebView=function(t){t=t||window.navigator.userAgent;var e=new RegExp("("+s.join("|")+")","ig");return!!t.match(e)}()}return Object.defineProperty(t.prototype,"isDesktop",{get:function(){return this._isDesktop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobile",{get:function(){return this._isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAndroid",{get:function(){return this._isAndroid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isIphone",{get:function(){return this._isIphone},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWebView",{get:function(){return this._isWebView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),t=n.__decorate([(0,r.injectable)(),n.__metadata("design:paramtypes",[])],t)}();e.DeviceConfig=o},8225:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(8533),e),n.__exportStar(i(3139),e)},1794:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=void 0,e.Settings={debug:{fpsMeter:{theme:"transparent",heat:20,graph:1,history:20,zIndex:1e4,top:"80%"}}}},94:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameFlowModule=void 0;var n=i(7468),r=i(3339),s=i(1862);e.GameFlowModule=new r.ContainerModule((function(t){t(n.TypesFlow.boot).to(s.BootAction),t(n.TypesFlow.LevelStart).to(s.LevelStartAction),t(n.TypesFlow.LevelEnd).to(s.LevelEndAction),t(n.TypesFlow.LevelNext).to(s.LevelNextAction),t(n.TypesFlow.LevelRestart).to(s.LevelRestartAction),t(n.TypesFlow.PlayWith).to(s.PlayWithOpponentAction)}))},4218:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BootAction=void 0;var n=i(4629),r=i(9500),s=i(7468),o=i(7461),a=i(8600),h=i(4643),l=i(4639),c=n.__importStar(i(7617)),u=i(3339),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,i,u,d,p,f,m=this;return n.__generator(this,(function(n){switch(n.label){case 0:return null==(t=(0,h.lazyGet)(s.TypesAnalytics.tracker))||t.addProvider(new r.GTAGAnalyticsProvider),e=h.di.get(s.TypesCore.gameConfig),(0,h.lazyRun)("template.action"),(i=e.i18n)&&a.Localize.addTemplates(i),[4,Promise.all([this.page.isBusReadyAsync().then((function(){u=(0,h.lazyRun)(s.TypesApp.loginAction)})),(0,h.lazyRun)(s.TypesFlow.assetsPreload)])];case 1:return n.sent(),this.page.assetsProgress=1,o.log.trace("all done"),[4,this.social.startGameAsync()];case 2:return n.sent(),(0,h.lazyRun)(s.TypesAudio.initAction),[4,(0,h.lazyRun)(s.TypesFlow.UI.setupAction)];case 3:return n.sent(),Promise.all([s.TypesFlow.assetsProcess,s.TypesAds.initAction].map(h.lazyRun)).then(),[4,this.social.init(null===(d=this.page.bus)||void 0===d?void 0:d.params)];case 4:return n.sent(),function(){var t=m.social.me,e=t.id,i=t.name,n=t.photo;c.setUser({id:e,name:i,photo:n,locale:a.Localize.defaultLocale})}(),null===(p=(0,h.lazyGet)(s.TypesSocial.refRewardsModel))||void 0===p||p.init(),[4,u];case 5:return n.sent(),l.AdManagerBase.config.throttling.interstitial.systemStart=Date.now(),[4,(0,h.lazyRun)(s.TypesFlow.mainAction)];case 6:return n.sent(),[4,null===(f=(0,h.lazyGet)(s.TypesAudio.model))||void 0===f?void 0:f.activateBackgroundMusic()];case 7:return n.sent(),[2]}}))}))},n.__decorate([(0,u.inject)(s.TypesApp.pageModel),n.__metadata("design:type",l.PageModel)],e.prototype,"page",void 0),n.__decorate([(0,u.inject)(s.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),e=n.__decorate([(0,u.injectable)()],e)}(h.Action);e.BootAction=d},1278:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheatsAction=void 0;var n=i(4629),r=i(4643),s=i(3339),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,s,o,a;return n.__generator(this,(function(h){return e=document.getElementById(r.CANVAS_ID),i=n.__read(t,3),s=i[0],o=i[1],a=i[2],o||(o=s),a||(a=o||s),e&&(document.addEventListener("touchstart",(function(t){var e;switch(null===(e=null==t?void 0:t.touches)||void 0===e?void 0:e.length){case 2:s();break;case 3:o();break;case 4:a()}})),e.addEventListener("pointerdown",(function(t){return t.shiftKey&&t.altKey?a():t.altKey?o():t.shiftKey?s():void 0}))),[2]}))}))},e=n.__decorate([(0,s.injectable)()],e)}(r.Action);e.CheatsAction=o},7217:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelEndAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(3339),a=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.TRACK_EVENT="level_end",e}return n.__extends(e,t),e.prototype.beforeLaunch=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this._won=this.isWon(),this.tryToShowBanner(),[4,Promise.all([this.submitScore(),this.showAdIfNeeded()])];case 1:return t.sent(),[2]}}))}))},e.prototype.launch=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return this.sendPush(s.TypesNotification.finish,{isWon:this._won}),[4,null===(t=(0,r.lazyGet)(s.TypesFlow.UI.endScreenAction))||void 0===t?void 0:t.run(this._won)];case 1:return e.sent(),[2]}}))}))},e.prototype.submitScore=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,i;return n.__generator(this,(function(n){switch(n.label){case 0:return this.social.postSessionScore(),null===(t=this.leaderboardGlobal)||void 0===t||t.submit(this.social.me.scoreSession).then(),this.social.me.scoreSession>this.social.me.scoreGlobal&&(null===(e=(0,r.lazyGet)(s.TypesFlow.share))||void 0===e||e.run()),this.social.inSolo?[3,2]:[4,null===(i=this.leaderboardContext)||void 0===i?void 0:i.submit(this.social.me.scoreSession)];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.needToShowAD=function(){return!1},e.prototype.isWon=function(){if("boolean"==typeof this.data)return this.data;if(this.social.inSolo)return this.social.me.scoreSession>this.social.me.scoreGlobal;if(this.social.inBlindContext)return!0;if(this.social.inGroup){var t=n.__read(this.social.contextPlayers.sort((function(t,e){return e.scoreContext-t.scoreContext})),1)[0];if(t)return Math.max(this.social.me.scoreContext,this.social.me.scoreSession)>=t.scoreContext}return!!(this.social.opponent&&this.social.me.scoreSession>this.social.opponent.scoreContext)},Object.defineProperty(e.prototype,"leaderboardContext",{get:function(){return(0,r.lazyGet)(s.TypesSocial.leaderboardContext)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leaderboardGlobal",{get:function(){return(0,r.lazyGet)(s.TypesSocial.leaderboardGlobal)},enumerable:!1,configurable:!0}),e.prototype.track=function(){var t;null===(t=(0,r.lazyGet)(s.TypesAnalytics.tracker))||void 0===t||t.track(this.TRACK_EVENT,1,{status:this.isWon()?"won":"loose"})},e=n.__decorate([(0,o.injectable)()],e)}(i(3189).SocialFlowAction);e.LevelEndAction=a},8427:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelNextAction=void 0;var n=i(4629),r=i(4639),s=i(7468),o=i(3339),a=i(3189),h=i(3308),l=function(t){function e(){var e=t.call(this)||this;return e.TRACK_EVENT="level_next",e.onFailed=function(){throw new Error("Something went wrong")},e}var i;return n.__extends(e,t),i=e,e.prototype.launch=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return t?t!==this.social.opponent?[3,1]:[2,this.gotoNextLevel()]:(i.FREE_SOLO_ATTEMPTS--,[2,this.playNextSolo()]);case 1:return[4,this.social.playWith(t,!0)];case 2:switch(e.sent()){case r.SOCIAL_POPUP.ACCEPTED:return[2,this.gotoNextLevel(!0)];case r.SOCIAL_POPUP.CANCELLED:if(i.FREE_SOLO_ATTEMPTS>0)return i.FREE_SOLO_ATTEMPTS--,[2,this.playNextSolo()]}e.label=3;case 3:return[2]}}))}))},e.prototype.playNextSolo=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,Promise.all([this.social.playSolo(),this.gotoNextLevel()])];case 1:return t.sent(),[2]}}))}))},e.prototype.gotoNextLevel=function(){return n.__awaiter(this,arguments,void 0,(function(t){return void 0===t&&(t=!1),n.__generator(this,(function(e){switch(e.label){case 0:return this.levelStart.waitForContextChange=t,[4,this.levelStart.run()];case 1:return e.sent(),[2]}}))}))},e.prototype.needToShowAD=function(){return!1},e.FREE_SOLO_ATTEMPTS=Number.MAX_SAFE_INTEGER,n.__decorate([(0,o.inject)(s.TypesFlow.LevelStart),n.__metadata("design:type",h.LevelStartAction)],e.prototype,"levelStart",void 0),e=i=n.__decorate([(0,o.injectable)(),n.__metadata("design:paramtypes",[])],e)}(a.SocialFlowAction);e.LevelNextAction=l},9035:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelRestartAction=void 0;var n=i(4629),r=i(7468),s=i(3339),o=i(4643),a=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.TRACK_EVENT="level_restart",e.SHOW_AD_INTERVAL=10,e}var i;return n.__extends(e,t),i=e,e.prototype.needToShowAD=function(){return Date.now()-i.LAST_RESTART<1e3*this.SHOW_AD_INTERVAL},e.prototype.launch=function(t){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return this.social.me.scoreSession=0,[4,null===(t=(0,o.lazyGet)(r.TypesFlow.UI.startScreenAction))||void 0===t?void 0:t.run()];case 1:return e.sent(),i.LAST_RESTART=Date.now(),[2]}}))}))},e.LAST_RESTART=Date.now(),e=i=n.__decorate([(0,s.injectable)()],e)}(i(3189).SocialFlowAction);e.LevelRestartAction=a},3308:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelStartAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(4639),a=i(3339),h=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.TRACK_EVENT="level_start",e.waitForContextChange=!1,e}return n.__extends(e,t),e.prototype.launch=function(t){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return this.social.me.scoreSession=0,this.tryToShowBanner(),[4,null===(t=(0,r.lazyGet)(s.TypesFlow.UI.startScreenAction))||void 0===t?void 0:t.run()];case 1:return e.sent(),[2]}}))}))},e.prototype.beforeLaunch=function(){return n.__awaiter(this,void 0,void 0,(function(){var e=this;return n.__generator(this,(function(i){switch(i.label){case 0:return this._contextChangePromise=this.waitForContextChange?new Promise((function(t){return e.social.once(o.SocialEvents.CONTEXT_CHANGE,t)})):Promise.resolve(),[4,Promise.all([n.__awaiter(e,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this._contextChangePromise];case 1:return t.sent(),this.sendPush(s.TypesNotification.start),[2]}}))})),t.prototype.beforeLaunch.call(this)])];case 1:return i.sent(),[2]}}))}))},e=n.__decorate([(0,a.injectable)()],e)}(i(3189).SocialFlowAction);e.LevelStartAction=h},2493:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayWithOpponentAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(4639),a=i(3339),h=i(3886),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,this.social.playWith(t,!0)];case 1:return e.sent()!==o.SOCIAL_POPUP.ACCEPTED?[3,3]:[4,this.levelStart.run()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},n.__decorate([(0,a.inject)(s.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),n.__decorate([(0,a.inject)(s.TypesFlow.LevelStart),n.__metadata("design:type",h.LevelStartAction)],e.prototype,"levelStart",void 0),e}(r.Action);e.PlayWithOpponentAction=l},3189:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SocialFlowAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(4639),a=i(7461),h=i(3339),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return a.log.debug("#gameflow",this),[4,this.beforeLaunch()];case 1:return e.sent(),[4,this.launch(t)];case 2:return e.sent(),[4,this.afterLaunch()];case 3:return e.sent(),[2]}}))}))},e.prototype.beforeLaunch=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this.showAdIfNeeded()];case 1:return t.sent(),[2]}}))}))},e.prototype.afterLaunch=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return this.TRACK_EVENT&&this.track(),[2]}))}))},e.prototype.showAdIfNeeded=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return this.needToShowAD()?[4,this.showAd()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.sendPush=function(t,e){this.sendPushAsync(t,e).then()},e.prototype.sendPushAsync=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var i;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,null===(i=(0,r.lazyGet)(t))||void 0===i?void 0:i.run(e)];case 1:return n.sent(),[2]}}))}))},e.prototype.showAd=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,this.adAction.run()];case 1:return t.sent(),[2]}}))}))},e.prototype.needToShowAD=function(){return!0},e.prototype.tryToShowBanner=function(){var t,e;this.gameConfig.useBannerAd&&(null===(e=(t=this.adManager).showBanner)||void 0===e||e.call(t))},e.prototype.track=function(){var t;null===(t=(0,r.lazyGet)(s.TypesAnalytics.tracker))||void 0===t||t.track("".concat(this.social.session.ftue?"ftue_":"").concat(this.TRACK_EVENT))},n.__decorate([(0,h.inject)(s.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),n.__decorate([(0,h.inject)(s.TypesAds.adAction),n.__metadata("design:type",o.AdAction)],e.prototype,"adAction",void 0),n.__decorate([(0,r.lazyInject)(s.TypesCore.gameConfig),n.__metadata("design:type",Object)],e.prototype,"gameConfig",void 0),n.__decorate([(0,r.lazyInject)(s.TypesAds.manager),n.__metadata("design:type",Object)],e.prototype,"adManager",void 0),e=n.__decorate([(0,h.injectable)()],e)}(r.Action);e.SocialFlowAction=l},1862:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(3189),e),n.__exportStar(i(1278),e),n.__exportStar(i(4218),e),n.__exportStar(i(3308),e),n.__exportStar(i(9035),e),n.__exportStar(i(7217),e),n.__exportStar(i(8427),e),n.__exportStar(i(2493),e)},3886:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(1862),e),n.__exportStar(i(94),e)},5445:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Localize=void 0;var n=i(4629),r=function(){function t(){}return t.addTemplates=function(e){Object.keys(e).forEach((function(i){return t.templates.set(i,e[i])}))},t.get=function(e,i,r){void 0===r&&(r=t.defaultLocale);var s=this.templates.get(e);if(null==s?void 0:s.localizations){var o=function(t,e){var i=n.__read(t.split("_"),2),r=i[0],s=i[1];if(e&&"en"!==r){var o=Object.keys(e),a=o.filter((function(t){return r===t.split("_")[0]}));if(1==a.length)return a[0];if(a.length>1){var h=o.filter((function(t){return s===t.split("_")[1]}));if(1==h.length)return h[0];console.warn('Unable to determine locale for "'.concat(t,'"'))}}}(r,s.localizations);if(o){var a=s.localizations[o];if(a)return a}}return(null==s?void 0:s.default)||i||e},Object.defineProperty(t,"defaultLocale",{get:function(){return t._defaultLocale||(t._defaultLocale=function(t){if(t){var e=n.__read(t.split("-"),2),i=e[0],r=e[1];return r?"".concat(i,"_").concat(r.toLocaleUpperCase()):"".concat(i,"_").concat(i.toUpperCase())}return"en_US"}(null===window||void 0===window?void 0:window.navigator.language)),t._defaultLocale},set:function(e){t._defaultLocale=e},enumerable:!1,configurable:!0}),t.templates=new Map,t}();e.Localize=r},8600:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(641),e),n.__exportStar(i(5445),e)},5051:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1528:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},641:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(5051),e),n.__exportStar(i(1528),e)},6066:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2329:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9350:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8122:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},1401:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.AdEvents=void 0,function(t){t.STARTED="AdEvents.Started",t.ENDED="AdEvents.Ended",t.BANNER_SHOWN="AdEvents.BannerShown",t.BANNER_HIDDEN="AdEvents.BannerHidden"}(i||(e.AdEvents=i={}))},63:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.AdResponse=void 0,function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_SUPPORTED=1]="NOT_SUPPORTED",t[t.PLAYED=2]="PLAYED",t[t.THROTTLED=3]="THROTTLED",t[t.NO_FILL=4]="NO_FILL",t[t.CANCELLED=5]="CANCELLED",t[t.FAILED=6]="FAILED"}(i||(e.AdResponse=i={}))},2181:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(8122),e),n.__exportStar(i(1401),e),n.__exportStar(i(63),e)},5329:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},6785:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},209:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(5329),e),n.__exportStar(i(6785),e)},7468:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(9350),e),n.__exportStar(i(2329),e),n.__exportStar(i(6066),e),n.__exportStar(i(2181),e),n.__exportStar(i(209),e),n.__exportStar(i(5826),e),n.__exportStar(i(7865),e)},7803:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},7865:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(4629).__exportStar(i(7803),e)},8617:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Types2D=void 0,e.Types2D={screenContainer:"2d.screencontainer",overlay:"2d.overlay",finger:"2d.finger",preloadAssetsAction:"2d.preload",screenShotAction:"2d.screenshot",spriteRenderer:"2d.spriteRenderer",rootView:"2d.rootView",spinner:"2d.spinner",blackSquareGraphics:"2d.blackSquareGraphics",whiteSquareGraphics:"2d.whiteSquareGraphics",userPic:"2d.userPic",circleAvatar:"2d.circleAvatar"}},8485:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TypesAds=void 0,function(t){t.initAction="ads.initAction",t.manager="ads.manager",t.i18n="ads.i18n",t.adAction="ads.adAction"}(i||(e.TypesAds=i={}))},2231:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypesAnalytics=void 0,e.TypesAnalytics={tracker:"analytics.tracker"}},8408:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TypesApp=void 0,function(t){t.model="app.model",t.pageModel="page.model",t.loginAction="app.loginAction",t.authAction="app.authAction"}(i||(e.TypesApp=i={}))},9773:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TypesAudio=void 0,function(t){t.model="audio.model",t.initAction="audio.initAction",t.soundAction="audio.soundAction",t.musicAction="audio.musicAction"}(i||(e.TypesAudio=i={}))},5612:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypesCore=void 0,e.TypesCore={gameConfig:"app.data",dispatcher:"core.dispatcher",eventProvider:"core.eventProvider",runtimeData:"core.runtimeData"}},2621:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypesDevice=void 0,e.TypesDevice={initAction:"device.initAction",model:"device.model",browserPauseAction:"device.browserPauseAction",events:{browserPause:"device.events.browserPause"}}},375:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypesFlow=void 0,e.TypesFlow={boot:"flow.boot",mainAction:"flow.gameAction",assetsPreload:"assets.preload",assetsProcess:"assets.process",LoadRemoteConfigAction:"flow.remoteConfigAction",LevelStart:"flow.levelStart",LevelRestart:"flow.levelRestart",LevelNext:"flow.LevelNext",LevelEnd:"flow.levelEnd",PlayWith:"flow.PlayWith",share:"flow.share",UI:{setupAction:"ui.setupAction",startScreenAction:"ui.startScreenAction",endScreenAction:"ui.endScreenAction"}}},2756:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TypesNotification=void 0,function(t){t.start="ntf.start",t.finish="ntf.finish",t.leave="ntf.leave",t.i18n="ntf.localizations"}(i||(e.TypesNotification=i={}))},8356:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypesPromo=void 0,e.TypesPromo={config:"cross.config",component:"cross.component",random:"cross.randomized",randomComponent:"cross.randomGameConf"}},4840:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TypesSocial=void 0,function(t){t.model="social.model",t.vibrationManager="social.vibrationManager",t.auth="social.auth",t.cookie="social.cookie",t.user="social.user",t.payments="social.payments",t.refRewardsModel="social.irewards",t.notifications="social.notifications",t.dummyUser="social.dummyUser",t.userScore="social.user.score",t.leaderboardGlobal="social.leaderboard.global",t.leaderboardContext="social.leaderboard.context",t.pauseAction="social.pauseAction"}(i||(e.TypesSocial=i={}))},6781:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypesUI=void 0,e.TypesUI={root:"ui.root",uiRootClass:"ui.root.class",setupAction:"ui.setupAction",startScreenAction:"ui.startScreenAction",endScreenAction:"ui.endScreenAction",events:{SCREEN_CHANGED:"UIEvents.SCREEN_CHANGED",POPUP:"UIEvents.POPUP",SHOW_CUSTOM_ALERT:"UIEvents.SHOW_CUSTOM_ALERT"},screen:{GAME_OVER:"ui.screen.GAME_OVER",HOME:"ui.screen.HOME",WIN:"ui.screen.WIN",SHOP:"ui.screen.SHOP",LEADERBOARD:"ui.screen.LEADERBOARD",GAMEPLAY:"ui.screen.GAMEPLAY"},customComponent:{SOCIAL_BANNERS:"ui.customComponent.SOCIAL_BANNERS"}}},5826:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(8617),e),n.__exportStar(i(2231),e),n.__exportStar(i(9773),e),n.__exportStar(i(5612),e),n.__exportStar(i(375),e),n.__exportStar(i(8356),e),n.__exportStar(i(4840),e),n.__exportStar(i(2756),e),n.__exportStar(i(8485),e),n.__exportStar(i(8408),e),n.__exportStar(i(6781),e),n.__exportStar(i(2621),e)},7915:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdAction=void 0;var n=i(4629),r=i(7468),s=i(4643),o=i(3339),a=i(5210),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r;return n.__generator(this,(function(n){switch(n.label){case 0:return e=void 0,i=!1,r=!0,"boolean"==typeof t?i=t:void 0!==t&&(e=t.placement,i=t.reward,r=t.preloadNext),[4,this.showAd(e,i,r)];case 1:return n.sent(),[2]}}))}))},e.prototype.showAd=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e,i){var s;return void 0===e&&(e=!1),void 0===i&&(i=!0),n.__generator(this,(function(n){switch(n.label){case 0:return s=r.AdResponse.UNKNOWN,e?[4,this.ads.showRewardAd(t||a.AdManagerBase.config.ids.REWARD,i)]:[3,2];case 1:return s=n.sent(),[3,4];case 2:return[4,this.ads.showAd(t||a.AdManagerBase.config.ids.INTER,!1,i)];case 3:s=n.sent(),n.label=4;case 4:return[2,s]}}))}))},e.prototype.showRewardAd=function(){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===t&&(t=a.AdManagerBase.config.ids.REWARD),void 0===e&&(e=!0),n.__generator(this,(function(i){return[2,this.showAd(t,!0,e)]}))}))},n.__decorate([(0,o.inject)(r.TypesAds.manager),n.__metadata("design:type",Object)],e.prototype,"ads",void 0),e=n.__decorate([(0,o.injectable)()],e)}(s.Action);e.AdAction=h},9975:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdManagerBase=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(7461),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.needToThrottleAd=function(t){var e=t.systemStart,i=t.lastShow,n=e+t.showFirstDelay,r=Date.now();if(r<n)return o.log.trace("needToThrottleAdd until "+(n-r)),!0;if(i){var s=i+t.showNextDelay;if(r<s)return o.log.trace("needToThrottleAdd until "+(s-r)),!0}return!1},e.prototype.showAd=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=!0),n.__generator(this,(function(t){return[2,s.AdResponse.NOT_SUPPORTED]}))}))},e.prototype.showRewardAd=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===e&&(e=!0),n.__generator(this,(function(t){return[2,s.AdResponse.NOT_SUPPORTED]}))}))},e.prototype.preloadNextInter=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.preloadNextReward=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.onAdStarted=function(t){this.dispatch(s.AdEvents.STARTED,t)},e.prototype.onAdEnded=function(t){this.dispatch(s.AdEvents.ENDED,t)},e.config={ids:{INTER:"",BANNER:"",REWARD:""},throttling:{interstitial:{systemStart:Date.now(),showFirstDelay:2e4,showNextDelay:6e4,lastShow:0}},interstitialsDisabled:!1},e}(r.GlobalEventProvider);e.AdManagerBase=a},4520:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AdsModule=void 0;var n=i(3339),r=i(7468),s=i(9975),o=i(438),a=i(7915);e.AdsModule=new n.ContainerModule((function(t){t(r.TypesAds.adAction).to(a.AdAction),t(r.TypesAds.manager).to(s.AdManagerBase).inSingletonScope(),t(r.TypesAds.initAction).to(o.InitAdManagerAction)}))},438:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InitAdManagerAction=void 0;var n=i(4629),r=i(8600),s=i(4643),o=i(7468),a=i(9975),h=i(3339),l=i(6579),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return r.Localize.addTemplates({video_ad_failed:{default:"Video AD Failed",localizations:{ru_RU:"Ошибка видеорекламы",es_ES:"Error en el anuncio",es_LA:"Fallo en el anuncio",pt_PT:"Erro no anúncio",pt_BR:"Erro no vídeo de anúncio",fr_FR:"Échec de la pub vidéo",de_DE:"Videowerbung nicht verf.",zh_CN:"视频广告错误",zh_TW:"影片廣告錯誤",ja_JP:"動画広告の再生に失敗しました",ko_KR:"비디오 광고 시청 실패",it_IT:"Spot video non disponibile",pl_PL:"Reklama wideo błędna",tr_TR:"Reklam videosu gösterilemedi",th_TH:"แสดงวิดีโอโฆษณาไม่สำเร็จ",hi_IN:"वीडियो विज्ञापन विफल रहा",vi_VN:"Quảng cáo video không thành công",id_ID:"Iklan Video gagal",ms_MY:"Video AD gagal"}},no_video_ad:{default:"No Video ADs at the moment, sorry...",localizations:{ru_RU:"Видоереклама недоступна",es_ES:"¡Vaya! No hay anuncios ahora.",es_LA:"Qué pena, no hay anuncios disponibles.",pt_PT:"Infelizmente não há anúncios neste momento.",pt_BR:"Nenhum vídeo de anúncio no momento. Foi mal!",fr_FR:"Aucune pub vidéo pour l'instant...",de_DE:"Leider gibt es keine Videowerbungen im Moment …",zh_CN:"目前没有视频广告，抱歉……",zh_TW:"目前沒有影片廣告，抱歉……",ja_JP:"現在、動画広告はありません、ご理解ください",ko_KR:"죄송합니다, 지금 시청 가능한 비디오 광고가 없습니다",it_IT:"Non ci sono spot video disponibili al momento.",pl_PL:"W tej chwili brak reklam wideo, przykro nam…",tr_TR:"Üzgünüz, şu anda reklam videosu yok.",th_TH:"ขณะนี้ไม่มีวิดีโอโฆษณาพร้อมให้บริการ ขออภัยด้วย...",hi_IN:"क्षमा करें, इस समय कोई वीडियो विज्ञापन नहीं है",vi_VN:"Rất tiếc, hiện tại không có quảng cáo video…",id_ID:"Tidak ada iklan Video saat ini, maaf…",ms_MY:"Tiada Video AD buat masa ini, maaf..."}},video_ad_cancelled:{default:"Video AD Cancelled",localizations:{ru_RU:"Вы отменили просмотр видеорекламы",es_ES:"Anuncio cancelado",es_LA:"Anuncio cancelado",pt_PT:"Anúncio cancelado",pt_BR:"Vídeo de anúncio cancelado",fr_FR:"Pub vidéo annulée",de_DE:"Videowerbung abgebr.",zh_CN:"视频广告已取消",zh_TW:"影片廣告已取消",ja_JP:"動画広告がキャンセルされました",ko_KR:"비디오 광고 시청 취소",it_IT:"Spot video annullato",pl_PL:"Reklama wideo anulowana",tr_TR:"Reklam videosu iptal edildi",th_TH:"วิดีโอโฆษณาถูกยกเลิก",hi_IN:"वीडियो विज्ञापन रद्द कर दिया",vi_VN:"Đã hủy quảng cáo video",id_ID:"Iklan Video dibatalkan",ms_MY:"Video AD dibatalkan"}}}),[4,Promise.all([this.ads.preloadNextInter(a.AdManagerBase.config.ids.INTER),this.ads.preloadNextReward(a.AdManagerBase.config.ids.REWARD)])];case 1:return t.sent(),[2]}}))}))},n.__decorate([(0,h.inject)(o.TypesAds.manager),n.__metadata("design:type",Object)],e.prototype,"ads",void 0),n.__decorate([(0,h.inject)(o.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),n.__decorate([(0,h.inject)(o.TypesApp.pageModel),n.__metadata("design:type",l.PageModel)],e.prototype,"page",void 0),e=n.__decorate([(0,h.injectable)()],e)}(s.Action);e.InitAdManagerAction=c},3211:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showReward=e.showAd=void 0;var n=i(4629),r=i(4643),s=i(7468);e.showAd=function(t){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,r.di.get(s.TypesAds.adAction).showAd(t)];case 1:return[2,e.sent()]}}))}))};e.showReward=function(t){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,r.di.get(s.TypesAds.adAction).showAd(t,!0)];case 1:return[2,e.sent()]}}))}))}},5210:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(438),e),n.__exportStar(i(9975),e),n.__exportStar(i(7915),e),n.__exportStar(i(4520),e),n.__exportStar(i(3211),e)},3884:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppModule=void 0;var n=i(3339),r=i(1325),s=i(7468),o=i(9527),a=i(1479);e.AppModule=new n.ContainerModule((function(t){t(s.TypesApp.pageModel).to(o.PageModel).inSingletonScope(),t(s.TypesApp.model).to(r.AppModel).inSingletonScope(),t(s.TypesApp.loginAction).to(a.LoginAction)}))},9527:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PageModel=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(3339),a=function(t){function e(){var e=t.call(this)||this;return e._assetsProgress=0,e._gameStartedAtProgress=NaN,e._windowFocusHandler=function(t){return e.windowFocusHandler(t)},e._documentVisibilityHandler=e.documentVisibilityHandler.bind(e),e._windowBlured=document.hidden||!document.hasFocus(),["blur","focus"].forEach((function(t){return window.addEventListener(t,e._windowFocusHandler)})),document.addEventListener("visibilitychange",e._documentVisibilityHandler),e}return n.__extends(e,t),Object.defineProperty(e.prototype,"assetsProgress",{get:function(){return this._assetsProgress},set:function(t){this.bus&&(isNaN(this._gameStartedAtProgress)&&(this._gameStartedAtProgress=this.bus.loaded||0,"undefined"!=typeof gsap&&gsap.killTweensOf(this.bus)),this._assetsProgress=t,this.bus.loaded=this._gameStartedAtProgress+(100-this._gameStartedAtProgress)*this._assetsProgress)},enumerable:!1,configurable:!0}),e.prototype.isBusReadyAsync=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return(null===(t=this.bus)||void 0===t?void 0:t.ready)?[3,2]:[4,r.WaitAction.ms(10)];case 1:return e.sent(),[3,0];case 2:return[2]}}))}))},Object.defineProperty(e.prototype,"bus",{get:function(){return window.__diffbus},enumerable:!1,configurable:!0}),e.prototype.windowFocusHandler=function(t){switch(t.type){case"focus":this.windowBlured=!1;break;case"blur":this.windowBlured=!0}},e.prototype.documentVisibilityHandler=function(){document.hidden?this.windowBlured=!0:this.windowBlured=!1},Object.defineProperty(e.prototype,"windowBlured",{get:function(){return this._windowBlured},set:function(t){this._windowBlured!==t&&(this._windowBlured=t,this.callPagePauseAction(this._windowBlured))},enumerable:!1,configurable:!0}),e.prototype.callPagePauseAction=function(t){var e;null===(e=(0,r.lazyGet)(s.TypesSocial.pauseAction))||void 0===e||e.run(t)},e.prototype.destroy=function(){var e=this;["blur","focus"].forEach((function(t){return window.removeEventListener(t,e._windowFocusHandler)})),document.removeEventListener("visibilitychange",this._documentVisibilityHandler),t.prototype.destroy.call(this)},e=n.__decorate([(0,o.injectable)(),n.__metadata("design:paramtypes",[])],e)}(r.GlobalEventProvider);e.PageModel=a},2654:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AuthActionBase=void 0;var n=i(4629),r=i(7468),s=i(4643),o=i(7461),a=i(3339),h=i(1325),l=i(8088),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,i,r,s,o;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getPlayerInfo()];case 1:return t=n.sent(),e=t.id,i=t.name,r=t.photo,s=t.signature,this.model.signature=s,[4,this.model.post("auth",{user_id:e,signature:s},!1)];case 2:return(o=n.sent())?o.token?[3,4]:[4,this.model.post("auth",{user_id:e,user_photo:r,user_name:i,signature:s},!1)]:[3,4];case 3:o=n.sent(),n.label=4;case 4:return[4,this.proceedToken(null==o?void 0:o.token)];case 5:return n.sent(),[2]}}))}))},e.prototype.proceedToken=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r;return n.__generator(this,(function(n){switch(n.label){case 0:if(!t)return[3,5];e=void 0,i=void 0;try{i=(0,l.getAuth)(this.model.firebaseApp)}catch(t){return[2,o.log.warn("getAuth failed with error",t)]}n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,l.signInWithCustomToken)(i,t)];case 2:return e=n.sent(),[3,4];case 3:return r=n.sent(),[2,o.log.warn("signInWithCustomToken failed with error",r)];case 4:return o.log.info("#auth success",e),[3,6];case 5:o.log.warn("#auth missed token"),n.label=6;case 6:return[2]}}))}))},e.prototype.loadProfileImage=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i;return n.__generator(this,(function(n){switch(n.label){case 0:if(!t)return[3,6];n.label=1;case 1:return n.trys.push([1,5,,6]),[4,fetch(t)];case 2:return[4,n.sent().blob()];case 3:return i=n.sent(),[4,new Promise((function(t,e){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.onerror=e,n.readAsDataURL(i)}))];case 4:return e=n.sent(),[3,6];case 5:return n.sent(),o.log.warn("Failed to load profile image"),[3,6];case 6:return[2,e]}}))}))},e.prototype.auth=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},n.__decorate([(0,a.inject)(r.TypesApp.model),n.__metadata("design:type",h.AppModel)],e.prototype,"model",void 0),e=n.__decorate([(0,a.injectable)()],e)}(s.Action);e.AuthActionBase=c},3144:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoginAction=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(7461),a=i(3339),h=i(1325),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.execute=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e;return n.__generator(this,(function(i){switch(i.label){case 0:return(t=this.gameConfig.firebase)?[4,this.model.init({appId:this.gameConfig.id,firebase:t,host:null===(e=this.gameConfig.backend)||void 0===e?void 0:e.host,provider:this.social.socialPlatform,remoteConfigSettings:this.gameConfig.remoteConfigSettings})]:[3,2];case 1:return i.sent(),[3,3];case 2:return o.log.warn("Firebase analytics is not configured"),[2];case 3:return this.trackEntryPoint(),(0,r.lazyRun)(s.TypesApp.authAction),[2]}}))}))},e.prototype.trackEntryPoint=function(t){var e=(0,r.lazyGet)(s.TypesAnalytics.tracker);if(t&&t.ref){var i="game_entry_"+t.ref.source;this.social.session.ftue?e.track("ftue_".concat(i),t.ref):e.track(i,t.ref)}else this.social.session.ftue?e.track("ftue_game_entry"):e.track("game_entry")},n.__decorate([(0,a.inject)(s.TypesApp.model),n.__metadata("design:type",h.AppModel)],e.prototype,"model",void 0),n.__decorate([(0,a.inject)(s.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),n.__decorate([(0,a.inject)(s.TypesCore.gameConfig),n.__metadata("design:type",Object)],e.prototype,"gameConfig",void 0),n.__decorate([(0,a.inject)(s.TypesAnalytics.tracker),n.__metadata("design:type",Object)],e.prototype,"analytics",void 0),e=n.__decorate([(0,a.injectable)()],e)}(r.Action);e.LoginAction=l},1479:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(3144),e),n.__exportStar(i(2654),e)},6579:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(9527),e),n.__exportStar(i(1479),e),n.__exportStar(i(1325),e),n.__exportStar(i(3884),e)},1325:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppModel=void 0;var n=i(4629),r=i(3339),s=i(3316),o=i(7885),a=i(3829),h=i(7461),l=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e._defaultRemoteConfigSettings={minimumFetchIntervalMillis:432e5,fetchTimeoutMillis:6e4},e}return n.__extends(e,t),e.prototype.init=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r;return n.__generator(this,(function(n){switch(n.label){case 0:0,e=t.firebase,i=t.remoteConfigSettings,this._firebaseApp=(0,o.initializeApp)(e),this._remoteConfig=(0,a.getRemoteConfig)(),this.setRemoteConfigSettings(i),this._remoteConfig.defaultConfig=this.getDefaultRemoteConfig(t.host),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,(0,a.ensureInitialized)(this._remoteConfig).catch(h.log.warn)];case 2:return n.sent(),[4,(0,a.fetchAndActivate)(this._remoteConfig).catch(h.log.warn)];case 3:return n.sent(),[3,5];case 4:return r=n.sent(),h.log.warn("Failed to activate remote config",r),[3,5];case 5:return this._defaultPayload||(this._defaultPayload={}),this._defaultPayload.app_id=t.appId,this._defaultPayload.sn=t.provider,this._defaultHost="".concat((0,a.getString)(this._remoteConfig,"backend")),"undefined"!=typeof __BACKEND_HOST__&&__BACKEND_HOST__&&(this._defaultHost=__BACKEND_HOST__),this._defaultHost=this._defaultHost.replace(/\/+$/,""),h.log.info("defaultHost",this._defaultHost),[2]}}))}))},e.prototype.setRemoteConfigSettings=function(t){var e=this._defaultRemoteConfigSettings,i=e.minimumFetchIntervalMillis,n=e.fetchTimeoutMillis;if(this.remoteConfig.settings.minimumFetchIntervalMillis=i,this.remoteConfig.settings.fetchTimeoutMillis=n,t){var r=t.minimumFetchIntervalMillis,s=t.fetchTimeoutMillis;r&&(this.remoteConfig.settings.minimumFetchIntervalMillis=r),s&&(this.remoteConfig.settings.fetchTimeoutMillis=s)}},e.prototype.getAuthorizationHeader=function(){return this.signature?"Bearer ".concat(this.signature):t.prototype.getAuthorizationHeader.call(this)},Object.defineProperty(e.prototype,"firebaseApp",{get:function(){return this._firebaseApp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultEndpoint",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteConfig",{get:function(){return this._remoteConfig},enumerable:!1,configurable:!0}),e.prototype.getDefaultRemoteConfig=function(t){return void 0===t&&(t="http://localhost"),{backend:t,payments_backend_url:"".concat(t,"/purchase")}},e=n.__decorate([(0,r.injectable)()],e)}(s.BackendModel);e.AppModel=l},3316:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackendModel=void 0;var n=i(4629),r=i(3339),s=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e._defaultPayload={},e}return n.__extends(e,t),e.prototype.performHTTPRequest=function(){return n.__awaiter(this,arguments,void 0,(function(t,e,i,r){var s,o,a,h;return void 0===t&&(t="/"),void 0===i&&(i="GET"),void 0===r&&(r=!0),n.__generator(this,(function(l){return s=this._defaultHost+(t.startsWith("/")?t:"/"+t),o=n.__assign(n.__assign({},this.getDefaultPayload()),e),a={},r&&(h=this.getAuthorizationHeader())&&(a.Authorization=h),[2,this.json(s,o,i,a)]}))}))},e.prototype.post=function(t,e){return n.__awaiter(this,arguments,void 0,(function(t,e,i){return void 0===i&&(i=!0),n.__generator(this,(function(n){return[2,this.performHTTPRequest(t,e,"POST",i)]}))}))},e.prototype.put=function(t,e){return n.__awaiter(this,arguments,void 0,(function(t,e,i){return void 0===i&&(i=!0),n.__generator(this,(function(n){return[2,this.performHTTPRequest(t,e,"PUT",i)]}))}))},e.prototype.delete=function(t,e){return n.__awaiter(this,arguments,void 0,(function(t,e,i){return void 0===i&&(i=!0),n.__generator(this,(function(n){return[2,this.performHTTPRequest(t,e,"DELETE",i)]}))}))},e.prototype.get=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===e&&(e=!0),n.__generator(this,(function(i){return[2,this.performHTTPRequest(t,void 0,"GET",e)]}))}))},e.prototype.getDefaultPayload=function(){return this._defaultPayload||{}},Object.defineProperty(e.prototype,"defaultHost",{get:function(){return this._defaultHost},enumerable:!1,configurable:!0}),e.prototype.getAuthorizationHeader=function(){return null},e=n.__decorate([(0,r.injectable)()],e)}(i(6387).HTTPRequest);e.BackendModel=s},6387:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HTTPRequest=void 0;var n=i(4629),r=i(7461),s=i(3339),o=function(){function t(){}return t.prototype.json=function(t,e){return n.__awaiter(this,arguments,void 0,(function(t,e,i,s){var o,a,h;return void 0===i&&(i="GET"),void 0===s&&(s={}),n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),a={method:i},e&&(s.Accept="application/json",s["Content-Type"]="application/json",a.body=JSON.stringify(e)),a.headers=s,[4,fetch(t,a)];case 1:return o=n.sent(),[3,3];case 2:return h=n.sent(),r.log.warn(h),[3,3];case 3:if(o)try{return[2,o.json()]}catch(t){r.log.warn(t)}return[2]}}))}))},t=n.__decorate([(0,s.injectable)()],t)}();e.HTTPRequest=o},3288:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SessionData=void 0;var i=function(){function t(){this.data={gameSession:NaN,friends:[]}}return t.prototype.init=function(t){return this.data.gameSession=(parseInt(null==t?void 0:t.gameSession,10)||0)+1,this.data.friends=(null==t?void 0:t.friends)||[],this.getRawData()},t.prototype.getRawData=function(){return this.data},Object.defineProperty(t.prototype,"ftue",{get:function(){return this.data.gameSession<=1},enumerable:!1,configurable:!0}),t}();e.SessionData=i},3592:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataBase=void 0;var n=i(4629),r=i(3339),s=i(7461),o=function(){function t(){this.lastSaveCall=NaN,this.cache=new Map}var e;return e=t,t.prototype.get=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r,s=this;return n.__generator(this,(function(n){switch(n.label){case 0:return e=(Array.isArray(t)?t:[t])||[],(i=e.filter((function(t){return!s.cache.has(t)}))).forEach((function(t){return s.cache.set(t,void 0)})),[4,this.read(i)];case 1:return n.sent(),r={},e.forEach((function(t){return r[t]=s.cache.get(t)})),[2,r]}}))}))},t.prototype.save=function(t,i,n){var r=this;return void 0===n&&(n=e.DEFAULT_UPLOAD_DELAY),this.cache.set(t,i),this.canWrite()?this.internalWrite():(clearTimeout(this._uploadTimeout),this._uploadTimeout=setTimeout((function(){r.internalWrite()}),n)),i},t.prototype.internalWrite=function(){this.write(),this.lastSaveCall=Date.now()},t.prototype.canWrite=function(){var t=Date.now();return isNaN(this.lastSaveCall)?(this.lastSaveCall=t,!1):t-this.lastSaveCall>e.FORCED_WRITE_INTERVAL},t.prototype.erase=function(t){return n.__awaiter(this,void 0,void 0,(function(){var i=this;return n.__generator(this,(function(n){return this.cache.set(t,void 0),this.canWrite()?this.internalWrite():(clearTimeout(this._uploadTimeout),this._uploadTimeout=setTimeout((function(){return i.write()}),e.DEFAULT_UPLOAD_DELAY)),[2,!0]}))}))},t.prototype.write=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(i){return e={},this.cache.forEach((function(i,n){t&&!t.includes(n)||(e[n]=i)})),s.log.trace(this,"write",e),s.log.warn("UserDataBase::write. Not supported"),[2]}))}))},t.prototype.read=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){return s.log.trace(this,"read",t),s.log.warn("UserDataBase::read. Not supported"),[2]}))}))},t.DEFAULT_UPLOAD_DELAY=1e3,t.FORCED_WRITE_INTERVAL=3e4,t=e=n.__decorate([(0,r.injectable)()],t)}();e.UserDataBase=o},97:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataLocalStorage=void 0;var n=i(4629),r=i(7461),s=i(3339),o=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.ls=window.localStorage,e.keyPrefix="",e}return n.__extends(e,t),e.prototype.getCookie=function(t){return this.ls.getItem("".concat(this.keyPrefix).concat(t))||""},e.prototype.getCookieValue=function(t){var e=this.getCookie(t);if(e){var i=void 0;try{i=JSON.parse(e)}catch(t){r.log.warn(t,"raw dataString returned"),i=e}return i}},e.prototype.setCookie=function(t,e){try{this.ls.setItem("".concat(this.keyPrefix).concat(t),e)}catch(t){r.log.error(t)}},e=n.__decorate([(0,s.injectable)()],e)}(i(4119).UserDataWeb);e.UserDataLocalStorage=o},4119:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserDataWeb=void 0;var n=i(4629),r=i(3339),s=i(7461),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.read=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i,r=this;return n.__generator(this,(function(n){return e=Array.from(this.cache.keys()),i={},(t||e).forEach((function(t){var e=r.getCookieValue(t);i[t]=e,r.cache.set(t,e)})),s.log.trace(this,"read",i),this.lastSync=Date.now(),[2]}))}))},e.prototype.write=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e,i=this;return n.__generator(this,(function(n){return e={},this.cache.forEach((function(n,r){t&&!t.includes(r)||(e[r]=n,i.setCookieValue(r,n))})),s.log.trace(this,"write",e),[2]}))}))},e.prototype.getCookieValue=function(t){var e=this.getCookie(t);if(e)return JSON.parse(e)},e.prototype.setCookieValue=function(t,e){this.setCookie(t,"object"==typeof e?JSON.stringify(e):""+e)},e.prototype.setCookie=function(t,e,i){void 0===i&&(i=10080);var n=new Date;n.setMinutes(n.getMinutes()+i),document.cookie=t+"="+escape(e)+(null==i?"":";expires="+n.toUTCString())},e.prototype.getCookie=function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},e.COOKIE_NAME="dp-instant",e=n.__decorate([(0,r.injectable)()],e)}(i(3592).UserDataBase);e.UserDataWeb=o},8428:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CookieDataLocalStorage=e.CookieDataWeb=e.CookieDataBase=void 0;var n=i(4629),r=i(3592),s=i(4119),o=i(97);e.CookieDataBase=r.UserDataBase,e.CookieDataWeb=s.UserDataWeb,e.CookieDataLocalStorage=o.UserDataLocalStorage,n.__exportStar(i(3592),e),n.__exportStar(i(4119),e),n.__exportStar(i(97),e),n.__exportStar(i(3288),e)},4639:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(8308),e),n.__exportStar(i(6579),e),n.__exportStar(i(5210),e),n.__exportStar(i(8428),e),n.__exportStar(i(1376),e),n.__exportStar(i(6200),e),n.__exportStar(i(9094),e),n.__exportStar(i(7720),e),n.__exportStar(i(3362),e),n.__exportStar(i(2364),e),n.__exportStar(i(8400),e)},4627:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9284:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9707:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},7795:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},4957:(t,e)=>{"use strict";var i,n;Object.defineProperty(e,"__esModule",{value:!0}),e.ScoreEvent=e.ScoreType=void 0,function(t){t[t.SESSION=1]="SESSION",t[t.CONTEXT=2]="CONTEXT",t[t.GLOBAL=4]="GLOBAL"}(i||(e.ScoreType=i={})),function(t){t.UPDATED="UserScore.UPDATED",t.INCREASED="UserScore.INCREASED"}(n||(e.ScoreEvent=n={}))},8312:(t,e)=>{"use strict";var i,n;Object.defineProperty(e,"__esModule",{value:!0}),e.SocialEvents=e.SOCIAL_POPUP=void 0,function(t){t[t.ACCEPTED=0]="ACCEPTED",t[t.CANCELLED=1]="CANCELLED",t[t.REJECTED=2]="REJECTED",t[t.FAILED=3]="FAILED"}(i||(e.SOCIAL_POPUP=i={})),function(t){t.CONTEXT_CHANGE="context_change",t.SHOW_OVERLAY="show_social_overlay",t.HIDE_OVERLAY="hide_social_overlay"}(n||(e.SocialEvents=n={}))},4328:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},3043:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},7636:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},8308:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(7636),e),n.__exportStar(i(4627),e),n.__exportStar(i(9284),e),n.__exportStar(i(9707),e),n.__exportStar(i(7795),e),n.__exportStar(i(4957),e),n.__exportStar(i(8312),e),n.__exportStar(i(4328),e),n.__exportStar(i(3043),e)},7720:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LeaderboardContextExternal=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(7461),a=i(3339),h=i(6579),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.sync=function(){return n.__awaiter(this,void 0,void 0,(function(){var t,e,i,r,s,a;return n.__generator(this,(function(n){switch(n.label){case 0:if(this.social.inSolo)return[2,!1];n.label=1;case 1:return n.trys.push([1,3,,4]),e=this.social.context_id,[4,this.appModel.post("scores-context/get",{ctx_id:e})];case 2:return t=n.sent(),[3,4];case 3:return i=n.sent(),o.log.debug("failed to fetch",i),[2,!1];case 4:for(s in r=this.social.friends.concat(this.social.me),t)(a=this.social.getFriendById(s,r))&&a.scores.update(this.castLeaderboardEntry(t[s],a));return[2,!0]}}))}))},e.prototype.submit=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var i,r,s,a,h;return n.__generator(this,(function(n){switch(n.label){case 0:if(this.social.inSolo)return[2,!1];n.label=1;case 1:return n.trys.push([1,3,,4]),r=this.social.context_id,s=this.social.me.id,a="string"==typeof e?e:JSON.stringify(e),[4,this.appModel.post("scores-context/post",{ctx_id:r,user_id:s,score:t,extData:a})];case 2:return i=n.sent(),[3,4];case 3:return h=n.sent(),o.log.debug("failed to fetch",h),[2,!1];case 4:return this.social.me.scores.update(this.castLeaderboardEntry(i,this.social.me)),[2,!0]}}))}))},e.prototype.castLeaderboardEntry=function(t,e){if(t)return{getScore:function(){return t.score},getFormattedScore:function(){return"".concat(t.score)},getTimestamp:function(){return-1},getRank:function(){},getExtraData:function(){return t.extData},getPlayer:function(){return e.rawData}}},n.__decorate([(0,a.inject)(s.TypesApp.model),n.__metadata("design:type",h.AppModel)],e.prototype,"appModel",void 0),n.__decorate([(0,r.lazyInject)(s.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),e=n.__decorate([(0,a.injectable)()],e)}(r.EventDispatcher);e.LeaderboardContextExternal=l},9094:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LeaderboardGlobalExternal=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(7461),a=i(3339),h=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.__SYNCED=!1,e}return n.__extends(e,t),e.prototype.sync=function(){return n.__awaiter(this,arguments,void 0,(function(t){var e,i,s,o,a,h;return void 0===t&&(t=100),n.__generator(this,(function(t){switch(t.label){case 0:if(this.__SYNCED)return[2,!0];e=this.social.me.id,i=this.social.friends.map((function(t){return t.id})),s=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.appSend("scores/get",{user_id:e,friends:i})];case 2:return s=t.sent(),[3,4];case 3:return t.sent(),[2,!1];case 4:for(a in o=this.social.friends.concat(this.social.me),s)null==(h=this.social.getFriendById(a,o))||h.scores.update(void 0,this.castLeaderboardEntry(s[a],h));return this.__SYNCED=!0,this.emit(r.CommonEvents.UPDATED),[2,!0]}}))}))},e.prototype.submit=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var i;return n.__generator(this,(function(n){switch(n.label){case 0:return i={user_id:this.social.me.id,score:t,extData:e},t<this.social.me.scoreGlobal?[2,!1]:(this.social.me.scores.update(void 0,this.castLeaderboardEntry(i,this.social.me)),[4,this.appSend("scores/post",i)]);case 1:return n.sent(),[2,!0]}}))}))},e.prototype.appSend=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var i;return n.__generator(this,(function(n){return(i=(0,r.lazyGet)(s.TypesApp.model))?[2,i.post(t,e)]:(o.log.warn("Failed to send request"),[2])}))}))},e.prototype.castLeaderboardEntry=function(t,e){if(t)return{getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return-1},getRank:function(){return 0},getExtraData:function(){return t.extData},getPlayer:function(){return null==e?void 0:e.rawData}}},n.__decorate([(0,r.lazyInject)(s.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),e=n.__decorate([(0,a.injectable)()],e)}(r.EventDispatcher);e.LeaderboardGlobalExternal=h},8400:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaymentsModelBase=void 0;var n=i(4629),r=n.__importStar(i(7617)),s=i(3339),o=i(7461),a=i(4643),h=i(7468),l=function(t,e){return n.__awaiter(void 0,void 0,void 0,(function(){var i;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()];case 3:return i=n.sent(),o.log.warn(i),[3,4];case 4:return[2,{}]}}))}))},c=function(){function t(){}return t.prototype.init=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},t.prototype.getById=function(t){},t.prototype.getAll=function(){return[]},t.prototype.isPaid=function(t){return!1},t.prototype.consume=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,!1]}))}))},t.prototype.purchase=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,!1]}))}))},t.prototype.buy=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===e&&(e=!1),n.__generator(this,(function(t){throw new Error("Method not implemented.")}))}))},Object.defineProperty(t.prototype,"supported",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.validateRemotely=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){var i,s,o;return n.__generator(this,(function(n){switch(n.label){case 0:i=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l(t,e)];case 2:return s=n.sent(),this.trackPurchase("validate",s.success),i=!!s.success,[3,4];case 3:return o=n.sent(),r.captureException(o),[3,4];case 4:return[2,i]}}))}))},t.prototype.viewItems=function(t){o.log.warn("viewItems not implemented")},t.prototype.trackEcommerce=function(t,e){this.trackEvent(t,{currency:e.currency,value:e.value,items:[{item_id:e.item_id,item_name:e.item_id,price:e.value}]})},t.prototype.trackPurchase=function(t,e){this.trackEvent(t,e,1,"purchase_")},t.prototype.trackEvent=function(t,e,i,n){var r;void 0===i&&(i=1),void 0===n&&(n=""),null===(r=(0,a.lazyGet)(h.TypesAnalytics.tracker))||void 0===r||r.track("".concat(n).concat(t),i,e)},t=n.__decorate([(0,s.injectable)()],t)}();e.PaymentsModelBase=c},6200:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SocialModelBase=void 0;var n=i(4629),r=i(4643),s=i(7468),o=i(3339),a=i(8428),h=i(8308),l=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.session=new a.SessionData,e.showPauseOverlay=i.SHOW_PAUSE_OVERLAY,e}var i;return n.__extends(e,t),i=e,e.prototype.startGameAsync=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.getFriendById=function(t,e){},e.prototype.init=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.playSolo=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.playOffline=function(){return n.__awaiter(this,arguments,void 0,(function(t){return void 0===t&&(t="default"),n.__generator(this,(function(t){return[2,h.SOCIAL_POPUP.FAILED]}))}))},e.prototype.playWith=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===e&&(e=!1),n.__generator(this,(function(t){return[2,h.SOCIAL_POPUP.FAILED]}))}))},e.prototype.notify=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,!1]}))}))},e.prototype.showShortcutPopup=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,!1]}))}))},e.prototype.showBotPopup=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,!1]}))}))},e.prototype.share=function(t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,!1]}))}))},e.prototype.switchGame=function(t,e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.invite=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===e&&(e=!1),n.__generator(this,(function(t){return[2,h.SOCIAL_POPUP.FAILED]}))}))},e.prototype.getRandomChallenger=function(t){void 0===t&&(t=[])},e.prototype.getRandomOpponent=function(){},e.prototype.syncLeaderboards=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2]}))}))},e.prototype.postSessionScore=function(t){},Object.defineProperty(e.prototype,"me",{get:function(){return this.nobody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opponent",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contextPlayers",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inSolo",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inGroup",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"friends",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socialPlatform",{get:function(){return"web"},enumerable:!1,configurable:!0}),e.SHOW_PAUSE_OVERLAY=!1,n.__decorate([(0,o.inject)(s.TypesSocial.cookie),n.__metadata("design:type",Object)],e.prototype,"cookie",void 0),n.__decorate([(0,o.inject)(s.TypesSocial.payments),n.__metadata("design:type",Object)],e.prototype,"payments",void 0),n.__decorate([(0,r.lazyInject)(s.TypesSocial.dummyUser),n.__metadata("design:type",Object)],e.prototype,"nobody",void 0),e=i=n.__decorate([(0,o.injectable)()],e)}(r.EventDispatcher);e.SocialModelBase=l},2364:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReferralRewardsModel=void 0;var n=i(4629),r=i(3339),s=i(7468),o=i(8308),a=i(4643),h="pending",l=function(t,e,i){var n;return void 0===e&&(e=1),null===(n=(0,a.lazyGet)(s.TypesAnalytics.tracker))||void 0===n?void 0:n.track("social_rf_"+t,e,i)},c=function(){function t(){this._items=[]}var e;return e=t,t.prototype.init=function(){return n.__awaiter(this,arguments,void 0,(function(t){var i,r,s,o,a,l,c,u=this;return void 0===t&&(t=3),n.__generator(this,(function(d){switch(d.label){case 0:return[4,this.social.cookie.get(e.COOKIE_KEY)];case 1:for(i=d.sent().irewards,r=this.social.friends.filter((function(t){return t.isNew})).map((function(t){return t.id})),this._items=i||[],this.generateNext&&(s=t-this._items.length)>0&&(c=this._items).push.apply(c,n.__spreadArray([],n.__read(new Array(s).fill(0).map((function(){return{value:u.generateNext()}}))),!1)),o=this._items.filter((function(t){return t.rf===h}));r.length;)a=r.pop(),(l=o.pop())&&(l.rf=a);return this.postData(),[2,this]}}))}))},t.prototype.request=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(i){switch(i.label){case 0:return[4,this.social.invite({filters:["NEW_PLAYERS_ONLY"],maxSize:2},!0)];case 1:return e=i.sent(),l("request_attempt"),e===o.SOCIAL_POPUP.ACCEPTED?(l("request"),this._request(t,h),this.postData(!0),[2,!0]):[2,!1]}}))}))},t.prototype.claim=function(t){if(t)for(var e=0;e<this._items.length;e++)if(this._items[e].rf===t)return this._items.splice(e,1),this.postData(),l("claim"),!0;return!1},Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),t.prototype.getPendingItems=function(){return this._items.filter((function(t){return!t.rf||t.rf===h})).sort((function(t,e){return t.rf===h?1:-1}))},t.prototype.getAvailableItems=function(){return this._items.filter((function(t){return!!t.rf&&t.rf!==h}))},t.prototype._request=function(t,e){if(e&&e!==h)for(var i=0;i<this._items.length;i++)if(this._items[i].rf===e)return this._items[i];var n=this._items.filter((function(e){return e.value===t}))[0];return n?n.rf=e:(n={value:t,rf:e},this._items.push(n)),this.postData(),n},t.prototype.postData=function(t){void 0===t&&(t=!1),this.social.cookie.save(e.COOKIE_KEY,this._items,t?0:void 0)},t.COOKIE_KEY="irewards",n.__decorate([(0,r.inject)(s.TypesSocial.model),n.__metadata("design:type",Object)],t.prototype,"social",void 0),t=e=n.__decorate([(0,r.injectable)()],t)}();e.ReferralRewardsModel=c},3362:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserScore=void 0;var n=i(4629),r=i(4643),s=i(8308),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.setScoreSession=function(t){if(isNaN(t))this._sessionScore=NaN;else{var e=this._sessionScore||0;this._sessionScore=t,t>=e&&this.emit(s.ScoreEvent.INCREASED),this.emit(s.ScoreEvent.UPDATED)}},e.prototype.update=function(t,e){this._contextScore=t||this._contextScore,this._globalScore=e||this._globalScore,(e||t)&&this.emit(s.ScoreEvent.UPDATED)},e.prototype.getScore=function(t){void 0===t&&(t=s.ScoreType.SESSION|s.ScoreType.CONTEXT|s.ScoreType.GLOBAL);var e=function(t,e){return!!(e&t)},i=[];if(e(s.ScoreType.SESSION,t)&&i.push(this._sessionScore),e(s.ScoreType.CONTEXT,t)&&i.push(this._contextScore&&this._contextScore.getScore()),e(s.ScoreType.GLOBAL,t)&&i.push(this._globalScore&&this._globalScore.getScore()),(i=i.filter((function(t){return!isNaN(t)}))).length)return Math.max.apply(null,i)},e.prototype.getEntry=function(t){switch(t){case s.ScoreType.GLOBAL:return this._globalScore;case s.ScoreType.CONTEXT:return this._contextScore}},e.prototype.flush=function(){delete this._contextScore,delete this._sessionScore},e}(r.EventDispatcher);e.UserScore=o},5812:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAFinish=void 0;var n=i(4629),r=i(1376),s=i(3339),o=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.strategy="IMMEDIATE",e.template="play_won",e}return n.__extends(e,t),e.prototype.getI18NKey=function(){var t,e=this.social.me.scoreSession;return(null===(t=this.data)||void 0===t?void 0:t.isWon)?e>0?"play_won_0":"play_won_1":e>0?"play_won_2":"play_won_3"},e=n.__decorate([(0,s.injectable)()],e)}(r.NotificationAction);e.NAFinish=o},2764:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NALeave=void 0;var n=i(4629),r=i(1376),s=i(3339),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e=n.__decorate([(0,s.injectable)()],e)}(r.NotificationAction);e.NALeave=o},1283:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAStart=void 0;var n=i(4629),r=i(1376),s=i(3339),o=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.strategy="LAST",e}return n.__extends(e,t),e=n.__decorate([(0,s.injectable)()],e)}(r.NotificationAction);e.NAStart=o},3747:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotificationAction=void 0;var n=i(4629),r=i(7461),s=i(4643),o=i(3339),a=i(7468),h=function(t){function e(){var e=t.apply(this,n.__spreadArray([],n.__read(arguments),!1))||this;return e.action="CUSTOM",e.template="play_turn",e.notification="PUSH",e}var i;return n.__extends(e,t),i=e,e.prototype.execute=function(t){return n.__awaiter(this,void 0,void 0,(function(){var e;return n.__generator(this,(function(i){switch(i.label){case 0:return this.data=t,[4,this.getPayload()];case 1:return e=i.sent(),[4,this.social.notify(e)];case 2:return i.sent()?r.log.trace("notification",e.text,e.strategy):r.log.warn("notification",e.text,e.strategy),[2]}}))}))},e.prototype.getPayload=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return t={action:this.action,template:this.template,strategy:this.strategy,notification:this.notification,cta:this.cta,text:this.getText()},[4,this.getImage()];case 1:return[2,(t.image=e.sent(),t)]}}))}))},e.prototype.getEmoji=function(){return i.EMOJI?i.EMOJI+" ":""},e.prototype.getI18NKey=function(){return"play_turn"},e.prototype.getText=function(){var t=this,e=this.getEmoji();return function(t,e){var i={default:e(t.default),localizations:{}};for(var n in t.localizations)i.localizations[n]=e(t.localizations[n]);return i}(this.i18n[this.getI18NKey()],(function(i){return e+i.replace(/{username}|{score}/g,(function(e){switch(e){case"{username}":return t.social.me.name;case"{score}":return""+t.social.me.scoreSession}return e}))}))},e.prototype.getImage=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return[2,this.loadImage("./assets/Notification.png")]}))}))},e.prototype.loadImage=function(t){return n.__awaiter(this,arguments,void 0,(function(t,e){return void 0===e&&(e=!0),n.__generator(this,(function(n){return e&&i.IMAGES_CACHE[t]?[2,i.IMAGES_CACHE[t]]:[2,new Promise((function(n){var r=new Image;r.crossOrigin="Anonymous",r.src=t,r.style.visibility="hidden",document.body.appendChild(r),r.addEventListener("load",(function(){document.body.removeChild(r);var s=document.createElement("canvas"),o=s.getContext("2d");s.width=r.width,s.height=r.height,o.drawImage(r,0,0);var a=s.toDataURL("image/jpeg");e&&(i.IMAGES_CACHE[t]=a),n(a)}))}))]}))}))},e.IMAGES_CACHE={},e.EMOJI="",e.WIDTH_FULL=1200,e.HEIGHT_FULL=627,n.__decorate([(0,o.inject)(a.TypesSocial.model),n.__metadata("design:type",Object)],e.prototype,"social",void 0),n.__decorate([(0,o.inject)(a.TypesNotification.i18n),n.__metadata("design:type",Object)],e.prototype,"i18n",void 0),e=i=n.__decorate([(0,o.injectable)()],e)}(s.Action);e.NotificationAction=h},1552:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotificationsModule=void 0;var n=i(3339),r=i(7468),s=i(1376);e.NotificationsModule=new n.ContainerModule((function(t){t(r.TypesNotification.i18n).toConstantValue({play_turn:{default:"{username} is playing with you.",localizations:{zh_TW:"{username}正在與你一同遊玩。",zh_CN:"{username} 正在和你玩。",fr_FR:"{username} joue avec vous.",de_DE:"{username} spielt mit dir.",id_ID:"{username} bermain bersamamu.",it_IT:"{username} sta giocando con te.",ja_JP:"{username} があなたとプレイしています。",ko_KR:"{username}이 여러분과 함께 플레이하고 있습니다.",ms_MY:"{username} sedang bermain dengan anda.",pl_PL:"{username} gra z Tobą.",pt_BR:"{username} está jogando com você.",pt_PT:"{username} está a jogar contigo.",es_ES:"{username} está jugando contigo.",es_LA:"{username} está jugando contigo.",th_TH:"{username} กำลังเล่นกับคุณ",tr_TR:"{username} seninle oynuyor.",vi_VN:"{username} đang chơi với bạn.",ru_RU:"{username} играет с вами."}},play_won_0:{default:"{username} won with score {score}.",localizations:{zh_TW:"{username}獲得了{score}分。",zh_CN:"{username} 获胜，得分 {score}。",fr_FR:"{username} a gagné avec un score de {score}.",de_DE:"{username} hat gewonnen mit dem Ergebnis {score}.",id_ID:"{username} menang dengan skor {score}.",it_IT:"{username} ha vinto con {score} punti.",ja_JP:"{username} はスコア {score} で勝ちました。",ko_KR:"{username}이 {score}을 득점하여 승리했습니다.",ms_MY:"{username} menang dengan skor {score}.",pl_PL:"{username} zdobył {score} i wygrał.`",pt_BR:"{username} venceu, com uma pontuação de {score}.",pt_PT:"{username} venceu, com uma pontuação de {score}.",es_ES:"{username} ha ganado con una puntuación de {score}.",es_LA:"{username} ganó con un puntaje de {score}.",th_TH:"{username} ชนะด้วยคะแนน {score}",tr_TR:"{username}, {score} puan alarak oyunu kazandı.",vi_VN:"{username} đã chiến thắng với số điểm {score}.",ru_RU:"{username} побеждает со счетом {score}."}},play_won_1:{default:"{username} wins!",localizations:{zh_TW:"{username}獲勝了！",zh_CN:"{username} 获胜！",fr_FR:"Victoire de {username} !",de_DE:"{username} gewinnt!",id_ID:"{username} menang!",it_IT:"{username} ha vinto!",ja_JP:"{username} の勝ち！",ko_KR:"{username} 승리!",ms_MY:"{username} menang! ",pl_PL:"Wygrywa {username}!",pt_BR:"Vitória de {username}!",pt_PT:"Vitória do {username}!",es_ES:"¡Victoria para {username}!",es_LA:"¡Gana {username}!",th_TH:"{username} ชนะ!",tr_TR:"{username} kazandı!",vi_VN:"{username} chiến thắng!",ru_RU:"{username} побеждает!"}},play_won_2:{default:"{username} scored {score}. Try to beat!",localizations:{zh_TW:"{username}獲得了{score}分。試著打敗他吧！",zh_CN:"{username} 得分 {score}。努力打败！",fr_FR:"Le score de {username} est {score}. Essayez de le battre !",de_DE:"{username} hat {score}. Schlage ihn!",id_ID:"{username} meraih skor {score}. Coba kalahkan!",it_IT:"{username} ha realizzato {score}. Prova a superare il suo punteggio!",ja_JP:"{username} のスコアは {score}でした。打倒だ！",ko_KR:"{username} 득점 {score}. 겨루어 보세요!",ms_MY:"{username} mendapat skor {score}. Cuba tewaskan!",pl_PL:"{username} zdobył {score}. Spróbuj pobić ten wynik!",pt_BR:"{username} marcou {score}. Tente superar essa marca!",pt_PT:"{username} marcou {score}. Tenta superar essa marca!",es_ES:"{username} ha obtenido una puntuación de {score}. ¡Intenta superarla!",es_LA:"{username} tiene un puntaje de {score}. ¡Intenta vencerlo!",th_TH:"{username} ทำคะแนนได้ {score} พยายามเอาชนะเขาให้ได้!",tr_TR:"{username}, {score} puan aldı. Geçmeyi dene!",vi_VN:"{username} đã ghi điểm {score}. Cố gắng đánh bại!",ru_RU:"{username} набрал {score}. Попробуй набрать больше!"}},play_won_3:{default:"Try to beat {username}!",localizations:{zh_TW:"挑戰{username}吧！",zh_CN:"努力打败 {username}！",fr_FR:"Essayez de battre {username} !",de_DE:"Versuche {username}, zu schlagen!",id_ID:"Coba kalahkan {username}!",it_IT:"Prova a superare il punteggio di {username}!",ja_JP:"{username}に勝とう！",ko_KR:"{username}과 겨루어 보세요!",ms_MY:"Cuba tewaskan {username}!",pl_PL:"Spróbuj pokonać gracza {username}!",pt_BR:"Tente superar {username}!",pt_PT:"Tenta superar {username}!",es_ES:"¡Intenta vencer a {username}!",es_LA:"¡Intenta vencer a {username}!",th_TH:"พยายามเอาชนะ{username}ให้ได้!",tr_TR:"{username} adlı oyuncuyu geçmeyi dene!",vi_VN:"Cố gắng đánh bại {username}!",ru_RU:"Попробуй набрать больше, чем {username}!"}}}),t(r.TypesNotification.start).to(s.NAStart),t(r.TypesNotification.leave).to(s.NALeave),t(r.TypesNotification.finish).to(s.NAFinish)}))},1376:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(3747),e),n.__exportStar(i(1283),e),n.__exportStar(i(5812),e),n.__exportStar(i(2764),e),n.__exportStar(i(1552),e)},5811:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cookie=void 0;var i=function(){function t(){}return t.get=function(t){for(var e=t+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},t.set=function(t,e,i){void 0===i&&(i=10080);var n=new Date;n.setMinutes(n.getMinutes()+i),document.cookie=t+"="+escape(e)+(null==i?"":";expires="+n.toUTCString())},t.clear=function(e){t.set(e,"",-1)},t}();e.Cookie=i},466:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Random=void 0;var i=function(){function t(){}return t.rangeFloat=function(t,e){return void 0===e&&(e=0),t+Math.random()*(e-t)},t.range=function(e,i){return Math.floor(t.rangeFloat(e,i))},t.bool=function(t){return void 0===t&&(t=.5),Math.random()<=t},t.sign=function(e){return void 0===e&&(e=.5),t.bool(e)?1:-1},t.UUID=function(t){return void 0===t&&(t=Date.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}))},t.from=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)return t[Math.floor(t.length*Math.random())];var i=t[0];return Array.isArray(i)?i[Math.floor(i.length*Math.random())]:i},t}();e.Random=i},4751:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlParser=void 0;var n=i(4629),r=function(){function t(){this.params={}}return t.prototype.parseUri=function(){var t=this,e=window.location.search.substr(1).split("&");e.length&&e.forEach((function(e){var i=n.__read(e.split("="),2),r=i[0],s=i[1];t.params[r]=s}))},t.prototype.getParam=function(t){return void 0!==this.params[t]?this.params[t]:null},t}();e.UrlParser=r},7461:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629);n.__exportStar(i(9659),e),n.__exportStar(i(466),e),n.__exportStar(i(4751),e),n.__exportStar(i(5811),e)},9659:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=void 0;var n=i(7668);n.log.setLevel(3);var r=n.log.scope("#dp");e.log=r},3910:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3299),r=i(4629),s=i(624),o=i(9532),a=i(667);i(37);var h,l="analytics",c="https://www.googletagmanager.com/gtag/js",u=new s.Logger("@firebase/analytics"),d=((h={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",h["already-initialized"]="initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",h["already-initialized-settings"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",h["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",h["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",h["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",h["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",h["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",h["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',h["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',h["no-client-id"]='The "client_id" field is empty.',h["invalid-gtag-resource"]="Trusted Types detected an invalid gtag resource: {$gtagURL}.",h),p=new o.ErrorFactory("analytics","Analytics",d);function f(t){if(!t.startsWith(c)){var e=p.create("invalid-gtag-resource",{gtagURL:t});return u.warn(e.message),""}return t}function m(t){return Promise.all(t.map((function(t){return t.catch((function(t){return t}))})))}function g(t,e){var i=function(t,e){var i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(t,e)),i}("firebase-js-sdk-policy",{createScriptURL:f}),n=document.createElement("script"),r="".concat(c,"?l=").concat(t,"&id=").concat(e);n.src=i?null==i?void 0:i.createScriptURL(r):r,n.async=!0,document.head.appendChild(n)}function _(t,e,i,n,s,o){return r.__awaiter(this,void 0,void 0,(function(){var a,h,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:a=n[s],r.label=1;case 1:return r.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return r.sent(),[3,6];case 3:return[4,m(i)];case 4:return h=r.sent(),(l=h.find((function(t){return t.measurementId===s})))?[4,e[l.appId]]:[3,6];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:return c=r.sent(),u.error(c),[3,8];case 8:return t("config",s,o),[2]}}))}))}function y(t,e,i,n,s){return r.__awaiter(this,void 0,void 0,(function(){var o,a,h,l,c,d,p,f;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),o=[],s&&s.send_to?(a=s.send_to,Array.isArray(a)||(a=[a]),[4,m(i)]):[3,2];case 1:for(h=r.sent(),l=function(t){var i=h.find((function(e){return e.measurementId===t})),n=i&&e[i.appId];if(!n)return o=[],"break";o.push(n)},c=0,d=a;c<d.length&&(p=d[c],"break"!==l(p));c++);r.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return r.sent(),t("event",n,s||{}),[3,5];case 4:return f=r.sent(),u.error(f),[3,5];case 5:return[2]}}))}))}function v(t,e,i,n,s){var o=function(){window[n].push(arguments)};return window[s]&&"function"==typeof window[s]&&(o=window[s]),window[s]=function(t,e,i,n){return function(s){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return r.__awaiter(this,void 0,void 0,(function(){var a,h,l,c,d,p;return r.__generator(this,(function(f){switch(f.label){case 0:return f.trys.push([0,6,,7]),"event"!==s?[3,2]:(h=o[0],a=o[1],[4,y(t,e,i,h,a)]);case 1:return f.sent(),[3,5];case 2:return"config"!==s?[3,4]:(h=o[0],a=o[1],[4,_(t,e,i,n,h,a)]);case 3:return f.sent(),[3,5];case 4:"consent"===s?(a=o[0],t("consent","update",a)):"get"===s?(h=o[0],l=o[1],c=o[2],t("get",h,l,c)):"set"===s?(d=o[0],t("set",d)):t.apply(void 0,r.__spreadArray([s],o,!1)),f.label=5;case 5:return[3,7];case 6:return p=f.sent(),u.error(p),[3,7];case 7:return[2]}}))}))}}(o,t,e,i),{gtagCore:o,wrappedGtag:window[s]}}var b=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function w(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function S(t){var e;return r.__awaiter(this,void 0,void 0,(function(){var i,n,s,o,a,h,l;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t.appId,n=t.apiKey,s={method:"GET",headers:w(n)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",i),[4,fetch(o,s)];case 1:if(200===(a=r.sent()).status||304===a.status)return[3,6];h="",r.label=2;case 2:return r.trys.push([2,4,,5]),[4,a.json()];case 3:return l=r.sent(),(null===(e=l.error)||void 0===e?void 0:e.message)&&(h=l.error.message),[3,5];case 4:return r.sent(),[3,5];case 5:throw p.create("config-fetch-failed",{httpStatus:a.status,responseMessage:h});case 6:return[2,a.json()]}}))}))}function T(t,e,i,n){var s,a=e.throttleEndTimeMillis,h=e.backoffCount;return void 0===n&&(n=b),r.__awaiter(this,void 0,void 0,(function(){var e,l,c,d,p,f,m,g;return r.__generator(this,(function(r){switch(r.label){case 0:e=t.appId,l=t.measurementId,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,x(i,a)];case 2:return r.sent(),[3,4];case 3:if(c=r.sent(),l)return u.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==c?void 0:c.message,"]")),[2,{appId:e,measurementId:l}];throw c;case 4:return r.trys.push([4,6,,7]),[4,S(t)];case 5:return d=r.sent(),n.deleteThrottleMetadata(e),[2,d];case 6:if(p=r.sent(),!function(t){if(!(t instanceof o.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(f=p)){if(n.deleteThrottleMetadata(e),l)return u.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null==f?void 0:f.message,"]")),[2,{appId:e,measurementId:l}];throw p}return m=503===Number(null===(s=null==f?void 0:f.customData)||void 0===s?void 0:s.httpStatus)?o.calculateBackoffMillis(h,n.intervalMillis,30):o.calculateBackoffMillis(h,n.intervalMillis),g={throttleEndTimeMillis:Date.now()+m,backoffCount:h+1},n.setThrottleMetadata(e,g),u.debug("Calling attemptFetch again in ".concat(m," millis")),[2,T(t,g,i,n)];case 7:return[2]}}))}))}function x(t,e){return new Promise((function(i,n){var r=Math.max(e-Date.now(),0),s=setTimeout(i,r);t.addEventListener((function(){clearTimeout(s),n(p.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var E,A,I=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function C(t,e){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return i=n.sent(),[2,new Promise((function(e,n){t("get",i,"client_id",(function(t){t||n(p.create("no-client-id")),e(t)}))}))]}}))}))}function P(t){A=t}function R(t){E=t}function O(t,e,i,n,s,a,h){var l;return r.__awaiter(this,void 0,void 0,(function(){var d,f,m,_,y,v;return r.__generator(this,(function(w){switch(w.label){case 0:return d=function(t,e,i){return void 0===e&&(e=b),r.__awaiter(this,void 0,void 0,(function(){var n,s,o,a,h,l,c=this;return r.__generator(this,(function(u){if(n=t.options,s=n.appId,o=n.apiKey,a=n.measurementId,!s)throw p.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:s}];throw p.create("no-api-key")}return h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new I,setTimeout((function(){return r.__awaiter(c,void 0,void 0,(function(){return r.__generator(this,(function(t){return l.abort(),[2]}))}))}),void 0!==i?i:6e4),[2,T({appId:s,apiKey:o,measurementId:a},h,l,e)]}))}))}(t),d.then((function(e){i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&u.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return u.error(t)})),e.push(d),f=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return o.isIndexedDBAvailable()?[3,1]:(u.warn(p.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,o.validateIndexedDBOpenable()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),u.warn(p.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?n.getId():void 0})),[4,Promise.all([d,f])];case 1:return m=w.sent(),_=m[0],y=m[1],function(t){for(var e=window.document.getElementsByTagName("script"),i=0,n=Object.values(e);i<n.length;i++){var r=n[i];if(r.src&&r.src.includes(c)&&r.src.includes(t))return r}return null}(a)||g(a,_.measurementId),A&&(s("consent","default",A),P(void 0)),s("js",new Date),(v=null!==(l=null==h?void 0:h.config)&&void 0!==l?l:{}).origin="firebase",v.update=!0,null!=y&&(v.firebase_id=y),s("config",_.measurementId,v),E&&(s("set",E),R(void 0)),[2,_.measurementId]}}))}))}var k,M,D=function(){function t(t){this.app=t}return t.prototype._delete=function(){return delete N[this.app.options.appId],Promise.resolve()},t}(),N={},L=[],B={},F="dataLayer",U="gtag",G=!1;function j(t,e,i){!function(){var t=[];if(o.isBrowserExtension()&&t.push("This is a browser extension environment."),o.areCookiesEnabled()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"(".concat(e+1,") ").concat(t)})).join(" "),i=p.create("invalid-analytics-context",{errorInfo:e});u.warn(i.message)}}();var n=t.options.appId;if(!n)throw p.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw p.create("no-api-key");u.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(t.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=N[n])throw p.create("already-exists",{id:n});if(!G){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(F);var r=v(N,L,B,F,U),s=r.wrappedGtag,a=r.gtagCore;M=s,k=a,G=!0}return N[n]=O(t,L,B,e,k,F,i),new D(t)}function H(t,e){void 0===e&&(e={});var i=n._getProvider(t,l);if(i.isInitialized()){var r=i.getImmediate();if(o.deepEqual(e,i.getOptions()))return r;throw p.create("already-initialized")}return i.initialize({options:e})}function z(t,e,i,n){t=o.getModularInstance(t),function(t,e,i,n,s){return r.__awaiter(this,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(h){switch(h.label){case 0:return s&&s.global?(t("event",i,n),[2]):[3,1];case 1:return[4,e];case 2:o=h.sent(),a=r.__assign(r.__assign({},n),{send_to:o}),t("event",i,a),h.label=3;case 3:return[2]}}))}))}(M,N[t.app.options.appId],e,i,n).catch((function(t){return u.error(t)}))}var W="@firebase/analytics",V="0.10.0";n._registerComponent(new a.Component(l,(function(t,e){var i=e.options;return j(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),i)}),"PUBLIC")),n._registerComponent(new a.Component("analytics-internal",(function(t){try{var e=t.getProvider(l).getImmediate();return{logEvent:function(t,i,n){return z(e,t,i,n)}}}catch(t){throw p.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),n.registerVersion(W,V),n.registerVersion(W,V,"cjs5"),e.getAnalytics=function(t){void 0===t&&(t=n.getApp()),t=o.getModularInstance(t);var e=n._getProvider(t,l);return e.isInitialized()?e.getImmediate():H(t)},e.getGoogleAnalyticsClientId=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t=o.getModularInstance(t),[2,C(M,N[t.app.options.appId])]}))}))},e.initializeAnalytics=H,e.isSupported=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:if(o.isBrowserExtension())return[2,!1];if(!o.areCookiesEnabled())return[2,!1];if(!o.isIndexedDBAvailable())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o.validateIndexedDBOpenable()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))},e.logEvent=z,e.setAnalyticsCollectionEnabled=function(t,e){t=o.getModularInstance(t),function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,t];case 1:return i=n.sent(),window["ga-disable-".concat(i)]=!e,[2]}}))}))}(N[t.app.options.appId],e).catch((function(t){return u.error(t)}))},e.setConsent=function(t){M?M("consent","update",t):P(t)},e.setCurrentScreen=function(t,e,i){t=o.getModularInstance(t),function(t,e,i,n){return r.__awaiter(this,void 0,void 0,(function(){var s;return r.__generator(this,(function(r){switch(r.label){case 0:return n&&n.global?(t("set",{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:s=r.sent(),t("config",s,{update:!0,screen_name:i}),r.label=3;case 3:return[2]}}))}))}(M,N[t.app.options.appId],e,i).catch((function(t){return u.error(t)}))},e.setDefaultEventParameters=function(t){M?M("set",t):R(t)},e.setUserId=function(t,e,i){t=o.getModularInstance(t),function(t,e,i,n){return r.__awaiter(this,void 0,void 0,(function(){var s;return r.__generator(this,(function(r){switch(r.label){case 0:return n&&n.global?(t("set",{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:s=r.sent(),t("config",s,{update:!0,user_id:i}),r.label=3;case 3:return[2]}}))}))}(M,N[t.app.options.appId],e,i).catch((function(t){return u.error(t)}))},e.setUserProperties=function(t,e,i){t=o.getModularInstance(t),function(t,e,i,n){return r.__awaiter(this,void 0,void 0,(function(){var s,o,a,h,l;return r.__generator(this,(function(r){switch(r.label){case 0:if(!n||!n.global)return[3,1];for(s={},o=0,a=Object.keys(i);o<a.length;o++)h=a[o],s["user_properties.".concat(h)]=i[h];return t("set",s),[2,Promise.resolve()];case 1:return[4,e];case 2:l=r.sent(),t("config",l,{update:!0,user_properties:i}),r.label=3;case 3:return[2]}}))}))}(M,N[t.app.options.appId],e,i).catch((function(t){return u.error(t)}))},e.settings=function(t){if(G)throw p.create("already-initialized");t.dataLayerName&&(F=t.dataLayerName),t.gtagName&&(U=t.gtagName)}},3299:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(667),r=i(4629),s=i(624),o=i(9532),a=i(9442),h=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")},t}();var l,c,u="@firebase/app",d="0.9.13",p=new s.Logger("@firebase/app"),f="[DEFAULT]",m=((l={})[u]="fire-core",l["@firebase/app-compat"]="fire-core-compat",l["@firebase/analytics"]="fire-analytics",l["@firebase/analytics-compat"]="fire-analytics-compat",l["@firebase/app-check"]="fire-app-check",l["@firebase/app-check-compat"]="fire-app-check-compat",l["@firebase/auth"]="fire-auth",l["@firebase/auth-compat"]="fire-auth-compat",l["@firebase/database"]="fire-rtdb",l["@firebase/database-compat"]="fire-rtdb-compat",l["@firebase/functions"]="fire-fn",l["@firebase/functions-compat"]="fire-fn-compat",l["@firebase/installations"]="fire-iid",l["@firebase/installations-compat"]="fire-iid-compat",l["@firebase/messaging"]="fire-fcm",l["@firebase/messaging-compat"]="fire-fcm-compat",l["@firebase/performance"]="fire-perf",l["@firebase/performance-compat"]="fire-perf-compat",l["@firebase/remote-config"]="fire-rc",l["@firebase/remote-config-compat"]="fire-rc-compat",l["@firebase/storage"]="fire-gcs",l["@firebase/storage-compat"]="fire-gcs-compat",l["@firebase/firestore"]="fire-fst",l["@firebase/firestore-compat"]="fire-fst-compat",l["fire-js"]="fire-js",l.firebase="fire-js-all",l),g=new Map,_=new Map;function y(t,e){try{t.container.addComponent(e)}catch(i){p.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),i)}}function v(t){var e,i,n=t.name;if(_.has(n))return p.debug("There were multiple attempts to register component ".concat(n,".")),!1;_.set(n,t);try{for(var s=r.__values(g.values()),o=s.next();!o.done;o=s.next()){y(o.value,t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}return!0}function b(t,e){var i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(e)}var w=((c={})["no-app"]="No Firebase App '{$appName}' has been created - call initializeApp() first",c["bad-app-name"]="Illegal App name: '{$appName}",c["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",c["app-deleted"]="Firebase App named '{$appName}' already deleted",c["no-options"]="Need to provide options, when not being deployed to hosting via source.",c["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",c["invalid-log-argument"]="First argument to `onLog` must be null or a function.",c["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",c["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",c["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",c["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",c),S=new o.ErrorFactory("app","Firebase",w),T=function(){function t(t,e,i){var s=this;this._isDeleted=!1,this._options=r.__assign({},t),this._config=r.__assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new n.Component("app",(function(){return s}),"PUBLIC"))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(t){this._isDeleted=t},enumerable:!1,configurable:!0}),t.prototype.checkDestroyed=function(){if(this.isDeleted)throw S.create("app-deleted",{appName:this._name})},t}();function x(t,e){var i,s;void 0===e&&(e={});var a=t;"object"!=typeof e&&(e={name:e});var h=r.__assign({name:f,automaticDataCollectionEnabled:!1},e),l=h.name;if("string"!=typeof l||!l)throw S.create("bad-app-name",{appName:String(l)});if(a||(a=o.getDefaultAppConfig()),!a)throw S.create("no-options");var c=g.get(l);if(c){if(o.deepEqual(a,c.options)&&o.deepEqual(h,c.config))return c;throw S.create("duplicate-app",{appName:l})}var u=new n.ComponentContainer(l);try{for(var d=r.__values(_.values()),p=d.next();!p.done;p=d.next()){var m=p.value;u.addComponent(m)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}var y=new T(a,h,u);return g.set(l,y),y}function E(t,e,i){var r,s=null!==(r=m[t])&&void 0!==r?r:t;i&&(s+="-".concat(i));var o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var h=['Unable to register library "'.concat(s,'" with version "').concat(e,'":')];return o&&h.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),o&&a&&h.push("and"),a&&h.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void p.warn(h.join(" "))}v(new n.Component("".concat(s,"-version"),(function(){return{library:s,version:e}}),"VERSION"))}var A="firebase-heartbeat-store",I=null;function C(){return I||(I=a.openDB("firebase-heartbeat-database",1,{upgrade:function(t,e){if(0===e)t.createObjectStore(A)}}).catch((function(t){throw S.create("idb-open",{originalErrorMessage:t.message})}))),I}function P(t){return r.__awaiter(this,void 0,void 0,(function(){var e,i;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,C()];case 1:return[4,n.sent().transaction(A).objectStore(A).get(O(t))];case 2:return[2,n.sent()];case 3:return(e=n.sent())instanceof o.FirebaseError?p.warn(e.message):(i=S.create("idb-get",{originalErrorMessage:null==e?void 0:e.message}),p.warn(i.message)),[3,4];case 4:return[2]}}))}))}function R(t,e){return r.__awaiter(this,void 0,void 0,(function(){var i,n,s,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,C()];case 1:return i=r.sent(),n=i.transaction(A,"readwrite"),[4,n.objectStore(A).put(e,O(t))];case 2:return r.sent(),[4,n.done];case 3:return r.sent(),[3,5];case 4:return(s=r.sent())instanceof o.FirebaseError?p.warn(s.message):(a=S.create("idb-set",{originalErrorMessage:null==s?void 0:s.message}),p.warn(a.message)),[3,5];case 5:return[2]}}))}))}function O(t){return"".concat(t.name,"!").concat(t.options.appId)}var k=function(){function t(t){var e=this;this.container=t,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new N(i),this._heartbeatsCachePromise=this._storage.read().then((function(t){return e._heartbeatsCache=t,t}))}return t.prototype.triggerHeartbeat=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,i,n;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.container.getProvider("platform-logger").getImmediate(),e=t.getPlatformInfoString(),i=M(),null!==this._heartbeatsCache?[3,2]:(n=this,[4,this._heartbeatsCachePromise]);case 1:n._heartbeatsCache=r.sent(),r.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some((function(t){return t.date===i}))?[2]:(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(t){var e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),[2,this._storage.overwrite(this._heartbeatsCache)])}}))}))},t.prototype.getHeartbeatsHeader=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,i,n,s;return r.__generator(this,(function(a){switch(a.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:a.sent(),a.label=2;case 2:return null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=M(),e=function(t,e){var i,n;void 0===e&&(e=1024);var s=[],o=t.slice(),a=function(t){var i=s.find((function(e){return e.agent===t.agent}));if(i){if(i.dates.push(t.date),L(s)>e)return i.dates.pop(),"break"}else if(s.push({agent:t.agent,dates:[t.date]}),L(s)>e)return s.pop(),"break";o=o.slice(1)};try{for(var h=r.__values(t),l=h.next();!l.done;l=h.next()){if("break"===a(l.value))break}}catch(t){i={error:t}}finally{try{l&&!l.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}return{heartbeatsToSend:s,unsentEntries:o}}(this._heartbeatsCache.heartbeats),i=e.heartbeatsToSend,n=e.unsentEntries,s=o.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return a.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),a.label=5;case 5:return[2,s]}}))}))},t}();function M(){return(new Date).toISOString().substring(0,10)}var D,N=function(){function t(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return t.prototype.runIndexedDBEnvironmentCheck=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return o.isIndexedDBAvailable()?[2,o.validateIndexedDBOpenable().then((function(){return!0})).catch((function(){return!1}))]:[2,!1]}))}))},t.prototype.read=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return t.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,P(this.app)];case 3:return[2,t.sent()||{heartbeats:[]}]}}))}))},t.prototype.overwrite=function(t){var e;return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return n.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return i=n.sent(),[2,R(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})]}}))}))},t.prototype.add=function(t){var e;return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return n.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return i=n.sent(),[2,R(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:i.lastSentHeartbeatDate,heartbeats:r.__spreadArray(r.__spreadArray([],r.__read(i.heartbeats),!1),r.__read(t.heartbeats),!1)})]}}))}))},t}();function L(t){return o.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}D="node",v(new n.Component("platform-logger",(function(t){return new h(t)}),"PRIVATE")),v(new n.Component("heartbeat",(function(t){return new k(t)}),"PRIVATE")),E(u,d,D),E(u,d,"cjs5"),E("fire-js",""),Object.defineProperty(e,"FirebaseError",{enumerable:!0,get:function(){return o.FirebaseError}}),e.SDK_VERSION="9.23.0",e._DEFAULT_ENTRY_NAME=f,e._addComponent=y,e._addOrOverwriteComponent=function(t,e){t.container.addOrOverwriteComponent(e)},e._apps=g,e._clearComponents=function(){_.clear()},e._components=_,e._getProvider=b,e._registerComponent=v,e._removeServiceInstance=function(t,e,i){void 0===i&&(i=f),b(t,e).clearInstance(i)},e.deleteApp=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(i){switch(i.label){case 0:return e=t.name,g.has(e)?(g.delete(e),[4,Promise.all(t.container.getProviders().map((function(t){return t.delete()})))]):[3,2];case 1:i.sent(),t.isDeleted=!0,i.label=2;case 2:return[2]}}))}))},e.getApp=function(t){void 0===t&&(t=f);var e=g.get(t);if(!e&&t===f&&o.getDefaultAppConfig())return x();if(!e)throw S.create("no-app",{appName:t});return e},e.getApps=function(){return Array.from(g.values())},e.initializeApp=x,e.onLog=function(t,e){if(null!==t&&"function"!=typeof t)throw S.create("invalid-log-argument");s.setUserLogHandler(t,e)},e.registerVersion=E,e.setLogLevel=function(t){s.setLogLevel(t)}},4460:(t,e,i)=>{"use strict";var n=i(9532),r=i(3299),s=i(4629),o=i(624),a=i(667);function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},c=h,u=new n.ErrorFactory("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new o.Logger("@firebase/auth");function p(t,...e){d.logLevel<=o.LogLevel.ERROR&&d.error(`Auth (${r.SDK_VERSION}): ${t}`,...e)}function f(t,...e){throw y(t,...e)}function m(t,...e){return y(t,...e)}function g(t,e,i){const r=Object.assign(Object.assign({},c()),{[e]:i});return new n.ErrorFactory("auth","Firebase",r).create(e,{appName:t.name})}function _(t,e,i){if(!(e instanceof i))throw i.name!==e.constructor.name&&f(t,"argument-error"),g(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function y(t,...e){if("string"!=typeof t){const i=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(i,...n)}return u.create(t,...e)}function v(t,e,...i){if(!t)throw y(e,...i)}function b(t){const e="INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function w(t,e){t||b(e)}function S(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function T(){return"http:"===x()||"https:"===x()}function x(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class E{constructor(t,e){this.shortDelay=t,this.longDelay=e,w(e>t,"Short delay should be less than long delay!"),this.isMobile=n.isMobileCordova()||n.isReactNative()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(T()||n.isBrowserExtension()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(t,e){w(t.emulator,"Emulator should always be set here");const{url:i}=t.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}class I{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},P=new E(3e4,6e4);function R(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function O(t,e,i,r,s={}){return k(t,s,(async()=>{let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=n.querystring(Object.assign({key:t.config.apiKey},o)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),I.fetch()(D(t,t.config.apiHost,i,a),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},s))}))}async function k(t,e,i){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},C),e);try{const e=new N(t),n=await Promise.race([i(),e.promise]);e.clearNetworkTimeout();const s=await n.json();if("needConfirmation"in s)throw L(t,"account-exists-with-different-credential",s);if(n.ok&&!("errorMessage"in s))return s;{const e=n.ok?s.errorMessage:s.error.message,[i,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===i)throw L(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===i)throw L(t,"email-already-in-use",s);if("USER_DISABLED"===i)throw L(t,"user-disabled",s);const a=r[i]||i.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw g(t,a,o);f(t,a)}}catch(e){if(e instanceof n.FirebaseError)throw e;f(t,"network-request-failed",{message:String(e)})}}async function M(t,e,i,n,r={}){const s=await O(t,e,i,n,r);return"mfaPendingCredential"in s&&f(t,"multi-factor-auth-required",{_serverResponse:s}),s}function D(t,e,i,n){const r=`${e}${i}?${n}`;return t.config.emulator?A(t.config,r):`${t.config.apiScheme}://${r}`}class N{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(m(this.auth,"network-request-failed"))),P.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function L(t,e,i){const n={appName:t.name};i.email&&(n.email=i.email),i.phoneNumber&&(n.phoneNumber=i.phoneNumber);const r=m(t,e,n);return r.customData._tokenResponse=i,r}function B(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}async function F(t,e=!1){const i=n.getModularInstance(t),r=await i.getIdToken(e),s=G(r);v(s&&s.exp&&s.auth_time&&s.iat,i.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:B(U(s.auth_time)),issuedAtTime:B(U(s.iat)),expirationTime:B(U(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function U(t){return 1e3*Number(t)}function G(t){const[e,i,r]=t.split(".");if(void 0===e||void 0===i||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const t=n.base64Decode(i);return t?JSON.parse(t):(p("Failed to decode base64 JWT payload"),null)}catch(t){return p("Caught error parsing JWT payload as JSON",null==t?void 0:t.toString()),null}}async function j(t,e,i=!1){if(i)return e;try{return await e}catch(e){throw e instanceof n.FirebaseError&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class H{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class z{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=B(this.lastLoginAt),this.creationTime=B(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function W(t){var e;const i=t.auth,n=await t.getIdToken(),r=await j(t,async function(t,e){return O(t,"POST","/v1/accounts:lookup",e)}(i,{idToken:n}));v(null==r?void 0:r.users.length,i,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,i=s.__rest(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})):[];const h=(l=t.providerData,c=a,[...l.filter((t=>!c.some((e=>e.providerId===t.providerId)))),...c]);var l,c;const u=t.isAnonymous,d=!(t.email&&o.passwordHash||(null==h?void 0:h.length)),p=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new z(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,f)}async function V(t){const e=n.getModularInstance(t);await W(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){v(t.idToken,"internal-error"),v(void 0!==t.idToken,"internal-error"),v(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=G(t);return v(e,"internal-error"),v(void 0!==e.exp,"internal-error"),v(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return v(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:s}=await async function(t,e){const i=await k(t,{},(async()=>{const i=n.querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=D(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",I.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}(t,e);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(t,e){const{refreshToken:i,accessToken:n,expirationTime:r}=e,s=new X;return i&&(v("string"==typeof i,"internal-error",{appName:t}),s.refreshToken=i),n&&(v("string"==typeof n,"internal-error",{appName:t}),s.accessToken=n),r&&(v("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return b("not implemented")}}function Y(t,e){v("string"==typeof t||void 0===t,"internal-error",{appName:e})}class q{constructor(t){var{uid:e,auth:i,stsTokenManager:n}=t,r=s.__rest(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new H(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new z(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await j(this,this.stsTokenManager.getToken(this.auth,t));return v(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return F(this,t)}reload(){return V(this)}_assign(t){this!==t&&(v(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new q(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await W(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await j(this,async function(t,e){return O(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,n,r,s,o,a,h,l;const c=null!==(i=e.displayName)&&void 0!==i?i:void 0,u=null!==(n=e.email)&&void 0!==n?n:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,m=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(h=e.createdAt)&&void 0!==h?h:void 0,_=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:S,stsTokenManager:T}=e;v(y&&T,t,"internal-error");const x=X.fromJSON(this.name,T);v("string"==typeof y,t,"internal-error"),Y(c,t.name),Y(u,t.name),v("boolean"==typeof b,t,"internal-error"),v("boolean"==typeof w,t,"internal-error"),Y(d,t.name),Y(p,t.name),Y(f,t.name),Y(m,t.name),Y(g,t.name),Y(_,t.name);const E=new q({uid:y,auth:t,email:u,emailVerified:b,displayName:c,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:x,createdAt:g,lastLoginAt:_});return S&&Array.isArray(S)&&(E.providerData=S.map((t=>Object.assign({},t)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(t,e,i=!1){const n=new X;n.updateFromServerResponse(e);const r=new q({uid:e.localId,auth:t,stsTokenManager:n,isAnonymous:i});return await W(r),r}}const $=new Map;function K(t){w(t instanceof Function,"Expected a class definition");let e=$.get(t);return e?(w(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$.set(t,e),e)}class J{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}J.type="NONE";const Z=J;function Q(t,e,i){return`firebase:${t}:${e}:${i}`}class tt{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:n,name:r}=this.auth;this.fullUserKey=Q(this.userKey,n.apiKey,r),this.fullPersistenceKey=Q("persistence",n.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?q._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new tt(K(Z),t,i);const n=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=n[0]||K(Z);const s=Q(i,t.config.apiKey,t.name);let o=null;for(const i of e)try{const e=await i._get(s);if(e){const n=q._fromJSON(t,e);i!==r&&(o=n),r=i;break}}catch(t){}const a=n.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new tt(r,t,i)):new tt(r,t,i)}}function et(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(st(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(it(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(at(e))return"Blackberry";if(ht(e))return"Webos";if(nt(e))return"Safari";if((e.includes("chrome/")||rt(e))&&!e.includes("edge/"))return"Chrome";if(ot(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(e);if(2===(null==i?void 0:i.length))return i[1]}return"Other"}function it(t=n.getUA()){return/firefox\//i.test(t)}function nt(t=n.getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rt(t=n.getUA()){return/crios\//i.test(t)}function st(t=n.getUA()){return/iemobile/i.test(t)}function ot(t=n.getUA()){return/android/i.test(t)}function at(t=n.getUA()){return/blackberry/i.test(t)}function ht(t=n.getUA()){return/webos/i.test(t)}function lt(t=n.getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ct(t=n.getUA()){return lt(t)||ot(t)||ht(t)||at(t)||/windows phone/i.test(t)||st(t)}function ut(t,e=[]){let i;switch(t){case"Browser":i=et(n.getUA());break;case"Worker":i=`${et(n.getUA())}-${t}`;break;default:i=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${r.SDK_VERSION}/${s}`}async function dt(t,e){return O(t,"GET","/v2/recaptchaConfig",R(t,e))}function pt(t){return void 0!==t&&void 0!==t.getResponse}function ft(t){return void 0!==t&&void 0!==t.enterprise}class mt{constructor(t){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState))}}function gt(t){return new Promise(((e,i)=>{const n=document.createElement("script");var r,s;n.setAttribute("src",t),n.onload=e,n.onerror=t=>{const e=m("internal-error");e.customData=t,i(e)},n.type="text/javascript",n.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(n)}))}function _t(t){return`__${t}${Math.floor(1e6*Math.random())}`}class yt{constructor(t){this.type="recaptcha-enterprise",this.auth=St(t)}async verify(t="verify",e=!1){function i(e,i,n){const r=window.grecaptcha;ft(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{i(t)})).catch((()=>{i("NO_RECAPTCHA")}))})):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,n)=>{(async function(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,i)=>{dt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((n=>{if(void 0!==n.recaptchaKey){const i=new mt(n);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,e(i.siteKey)}i(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{i(t)}))}))})(this.auth).then((r=>{if(!e&&ft(window.grecaptcha))i(r,t,n);else{if("undefined"==typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));gt("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{i(r,t,n)})).catch((t=>{n(t)}))}})).catch((t=>{n(t)}))}))}}async function vt(t,e,i,n=!1){const r=new yt(t);let s;try{s=await r.verify(i)}catch(t){s=await r.verify(i,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class bt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=e=>new Promise(((i,n)=>{try{i(t(e))}catch(t){n(t)}}));i.onAbort=e,this.queue.push(i);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==t?void 0:t.message})}}}class wt{constructor(t,e,i,n){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tt(this),this.idTokenSubscription=new Tt(this),this.beforeStateQueue=new bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=K(e)),this._initializationPromise=this.queue((async()=>{var i,n;if(!this._deleted&&(this.persistenceManager=await tt.create(this,t),!this._deleted)){if(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const i=await this.assertedPersistence.getCurrentUser();let n=i,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==n?void 0:n._redirectEventId,o=await this.tryRedirectSignIn(t);i&&i!==s||!(null==o?void 0:o.user)||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(t){n=i,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await W(t)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?n.getModularInstance(t):null;return e&&v(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&v(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(K(t))}))}async initializeRecaptchaConfig(){const t=await dt(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),e=new mt(t);if(null==this.tenantId?this._agentRecaptchaConfig=e:this._tenantRecaptchaConfigs[this.tenantId]=e,e.emailPasswordEnabled){new yt(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new n.ErrorFactory("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return null===t?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&K(t)||this._popupRedirectResolver;v(e,this,"argument-error"),this.redirectPersistenceManager=await tt.create(this,[K(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,n){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return v(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,i,n):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ut(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null==e?void 0:e.error)&&function(t,...e){d.logLevel<=o.LogLevel.WARN&&d.warn(`Auth (${r.SDK_VERSION}): ${t}`,...e)}(`Error while retrieving App Check token: ${e.error}`),null==e?void 0:e.token}}function St(t){return n.getModularInstance(t)}class Tt{constructor(t){this.auth=t,this.observer=null,this.addObserver=n.createSubscribe((t=>this.observer=t))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xt(t,e){const i=r._getProvider(t,"auth");if(i.isInitialized()){const t=i.getImmediate(),r=i.getOptions();if(n.deepEqual(r,null!=e?e:{}))return t;f(t,"already-initialized")}return i.initialize({options:e})}function Et(t,e,i){const n=St(t);v(n._canInitEmulator,n,"emulator-config-failed"),v(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const r=!!(null==i?void 0:i.disableWarnings),s=At(e),{host:o,port:a}=function(t){const e=At(t),i=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!i)return{host:"",port:null};const n=i[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){const t=r[1];return{host:t,port:It(n.substr(t.length+1))}}{const[t,e]=n.split(":");return{host:t,port:It(e)}}}(e),h=null===a?"":`:${a}`;n.config.emulator={url:`${s}//${o}${h}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function At(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function It(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Ct{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return b("not implemented")}_getIdTokenResponse(t){return b("not implemented")}_linkToIdToken(t,e){return b("not implemented")}_getReauthenticationResolver(t){return b("not implemented")}}async function Pt(t,e){return O(t,"POST","/v1/accounts:resetPassword",R(t,e))}async function Rt(t,e){return O(t,"POST","/v1/accounts:update",e)}async function Ot(t,e){return M(t,"POST","/v1/accounts:signInWithPassword",R(t,e))}async function kt(t,e){return O(t,"POST","/v1/accounts:sendOobCode",R(t,e))}async function Mt(t,e){return kt(t,e)}async function Dt(t,e){return kt(t,e)}class Nt extends Ct{constructor(t,e,i,n=null){super("password",i),this._email=t,this._password=e,this._tenantId=n}static _fromEmailAndPassword(t,e){return new Nt(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Nt(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){var e;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(e=t._getRecaptchaConfig())||void 0===e?void 0:e.emailPasswordEnabled){const e=await vt(t,i,"signInWithPassword");return Ot(t,e)}return Ot(t,i).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await vt(t,i,"signInWithPassword");return Ot(t,e)}return Promise.reject(e)}));case"emailLink":return async function(t,e){return M(t,"POST","/v1/accounts:signInWithEmailLink",R(t,e))}(t,{email:this._email,oobCode:this._password});default:f(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Rt(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return M(t,"POST","/v1/accounts:signInWithEmailLink",R(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:f(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Lt(t,e){return M(t,"POST","/v1/accounts:signInWithIdp",R(t,e))}class Bt extends Ct{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Bt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):f("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:i,signInMethod:n}=e,r=s.__rest(e,["providerId","signInMethod"]);if(!i||!n)return null;const o=new Bt(i,n);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){return Lt(t,this.buildRequest())}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Lt(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Lt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=n.querystring(e)}return t}}const Ft={USER_NOT_FOUND:"user-not-found"};class Ut extends Ct{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Ut({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Ut({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return M(t,"POST","/v1/accounts:signInWithPhoneNumber",R(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const i=await M(t,"POST","/v1/accounts:signInWithPhoneNumber",R(t,e));if(i.temporaryProof)throw L(t,"account-exists-with-different-credential",i);return i}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return M(t,"POST","/v1/accounts:signInWithPhoneNumber",R(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ft)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:i,verificationCode:n}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:i,code:n}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:i,phoneNumber:n,temporaryProof:r}=t;return i||e||n||r?new Ut({verificationId:e,verificationCode:i,phoneNumber:n,temporaryProof:r}):null}}class Gt{constructor(t){var e,i,r,s,o,a;const h=n.querystringDecode(n.extractQuerystring(t)),l=null!==(e=h.apiKey)&&void 0!==e?e:null,c=null!==(i=h.oobCode)&&void 0!==i?i:null,u=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=h.mode)&&void 0!==r?r:null);v(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=h.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=h.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=h.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=n.querystringDecode(n.extractQuerystring(t)).link,i=e?n.querystringDecode(n.extractQuerystring(e)).deep_link_id:null,r=n.querystringDecode(n.extractQuerystring(t)).deep_link_id;return(r?n.querystringDecode(n.extractQuerystring(r)).link:null)||r||i||e||t}(t);try{return new Gt(e)}catch(t){return null}}}class jt{constructor(){this.providerId=jt.PROVIDER_ID}static credential(t,e){return Nt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Gt.parseLink(e);return v(i,"argument-error"),Nt._fromEmailAndCode(t,i.code,i.tenantId)}}jt.PROVIDER_ID="password",jt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",jt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ht{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class zt extends Ht{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Wt extends zt{static credentialFromJSON(t){const e="string"==typeof t?JSON.parse(t):t;return v("providerId"in e&&"signInMethod"in e,"argument-error"),Bt._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return v(t.idToken||t.accessToken,"argument-error"),Bt._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return Wt.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Wt.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:n,pendingToken:r,nonce:s,providerId:o}=t;if(!(i||n||e||r))return null;if(!o)return null;try{return new Wt(o)._credential({idToken:e,accessToken:i,nonce:s,pendingToken:r})}catch(t){return null}}}class Vt extends zt{constructor(){super("facebook.com")}static credential(t){return Bt._fromParams({providerId:Vt.PROVIDER_ID,signInMethod:Vt.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vt.credentialFromTaggedObject(t)}static credentialFromError(t){return Vt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vt.credential(t.oauthAccessToken)}catch(t){return null}}}Vt.FACEBOOK_SIGN_IN_METHOD="facebook.com",Vt.PROVIDER_ID="facebook.com";class Xt extends zt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Bt._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Xt.credentialFromTaggedObject(t)}static credentialFromError(t){return Xt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Xt.credential(e,i)}catch(t){return null}}}Xt.GOOGLE_SIGN_IN_METHOD="google.com",Xt.PROVIDER_ID="google.com";class Yt extends zt{constructor(){super("github.com")}static credential(t){return Bt._fromParams({providerId:Yt.PROVIDER_ID,signInMethod:Yt.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Yt.credentialFromTaggedObject(t)}static credentialFromError(t){return Yt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Yt.credential(t.oauthAccessToken)}catch(t){return null}}}Yt.GITHUB_SIGN_IN_METHOD="github.com",Yt.PROVIDER_ID="github.com";class qt extends Ct{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){return Lt(t,this.buildRequest())}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Lt(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Lt(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:i,signInMethod:n,pendingToken:r}=e;return i&&n&&r&&i===n?new qt(i,r):null}static _create(t,e){return new qt(t,e)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $t extends Ht{constructor(t){v(t.startsWith("saml."),"argument-error"),super(t)}static credentialFromResult(t){return $t.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return $t.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=qt.fromJSON(t);return v(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:i}=t;if(!e||!i)return null;try{return qt._create(i,e)}catch(t){return null}}}class Kt extends zt{constructor(){super("twitter.com")}static credential(t,e){return Bt._fromParams({providerId:Kt.PROVIDER_ID,signInMethod:Kt.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Kt.credentialFromTaggedObject(t)}static credentialFromError(t){return Kt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Kt.credential(e,i)}catch(t){return null}}}async function Jt(t,e){return M(t,"POST","/v1/accounts:signUp",R(t,e))}Kt.TWITTER_SIGN_IN_METHOD="twitter.com",Kt.PROVIDER_ID="twitter.com";class Zt{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,n=!1){const r=await q._fromIdTokenResponse(t,i,n),s=Qt(i);return new Zt({user:r,providerId:s,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const n=Qt(i);return new Zt({user:t,providerId:n,_tokenResponse:i,operationType:e})}}function Qt(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class te extends n.FirebaseError{constructor(t,e,i,n){var r;super(e.code,e.message),this.operationType=i,this.user=n,Object.setPrototypeOf(this,te.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,n){return new te(t,e,i,n)}}function ee(t,e,i,n){return("reauthenticate"===e?i._getReauthenticationResolver(t):i._getIdTokenResponse(t)).catch((i=>{if("auth/multi-factor-auth-required"===i.code)throw te._fromErrorAndOperation(t,i,e,n);throw i}))}function ie(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}async function ne(t,e,i=!1){const n=await j(t,e._linkToIdToken(t.auth,await t.getIdToken()),i);return Zt._forOperation(t,"link",n)}async function re(t,e,i){await W(e);const n=!1===t?"provider-already-linked":"no-such-provider";v(ie(e.providerData).has(i)===t,e.auth,n)}async function se(t,e,i=!1){const{auth:n}=t,r="reauthenticate";try{const s=await j(t,ee(n,r,e,t),i);v(s.idToken,n,"internal-error");const o=G(s.idToken);v(o,n,"internal-error");const{sub:a}=o;return v(t.uid===a,n,"user-mismatch"),Zt._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&f(n,"user-mismatch"),t}}async function oe(t,e,i=!1){const n="signIn",r=await ee(t,n,e),s=await Zt._fromIdTokenResponse(t,n,r);return i||await t._updateCurrentUser(s.user),s}async function ae(t,e){return oe(St(t),e)}async function he(t,e){const i=n.getModularInstance(t);return await re(!1,i,e.providerId),ne(i,e)}async function le(t,e){return se(n.getModularInstance(t),e)}class ce{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?ue._fromServerResponse(t,e):"totpInfo"in e?de._fromServerResponse(t,e):f(t,"internal-error")}}class ue extends ce{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new ue(e)}}class de extends ce{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new de(e)}}function pe(t,e,i){var n;v((null===(n=i.url)||void 0===n?void 0:n.length)>0,t,"invalid-continue-uri"),v(void 0===i.dynamicLinkDomain||i.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=i.url,e.dynamicLinkDomain=i.dynamicLinkDomain,e.canHandleCodeInApp=i.handleCodeInApp,i.iOS&&(v(i.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=i.iOS.bundleId),i.android&&(v(i.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=i.android.installApp,e.androidMinimumVersionCode=i.android.minimumVersion,e.androidPackageName=i.android.packageName)}async function fe(t,e){const i=n.getModularInstance(t),r=await Pt(i,{oobCode:e}),s=r.requestType;switch(v(s,i,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":v(r.newEmail,i,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":v(r.mfaInfo,i,"internal-error");default:v(r.email,i,"internal-error")}let o=null;return r.mfaInfo&&(o=ce._fromServerResponse(St(i),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function me(t,e,i){const{auth:n}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),i&&(r.password=i);const s=await j(t,Rt(n,r));await t._updateTokensIfNecessary(s,!0)}class ge{constructor(t,e,i={}){this.isNewUser=t,this.providerId=e,this.profile=i}}class _e extends ge{constructor(t,e,i,n){super(t,e,i),this.username=n}}class ye extends ge{constructor(t,e){super(t,"facebook.com",e)}}class ve extends _e{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class be extends ge{constructor(t,e){super(t,"google.com",e)}}class we extends _e{constructor(t,e,i){super(t,"twitter.com",e,i)}}function Se(t,e,i,r){return n.getModularInstance(t).onIdTokenChanged(e,i,r)}function Te(t,e,i){return n.getModularInstance(t).beforeAuthStateChanged(e,i)}class xe{constructor(t,e,i){this.type=t,this.credential=e,this.auth=i}static _fromIdtoken(t,e){return new xe("enroll",t,e)}static _fromMfaPendingCredential(t){return new xe("signin",t)}toJSON(){const t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[t]:this.credential}}}static fromJSON(t){var e,i;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return xe._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(i=t.multiFactorSession)||void 0===i?void 0:i.idToken)return xe._fromIdtoken(t.multiFactorSession.idToken)}return null}}class Ee{constructor(t,e,i){this.session=t,this.hints=e,this.signInResolver=i}static _fromError(t,e){const i=St(t),n=e.customData._serverResponse,r=(n.mfaInfo||[]).map((t=>ce._fromServerResponse(i,t)));v(n.mfaPendingCredential,i,"internal-error");const s=xe._fromMfaPendingCredential(n.mfaPendingCredential);return new Ee(s,r,(async t=>{const r=await t._process(i,s);delete n.mfaInfo,delete n.mfaPendingCredential;const o=Object.assign(Object.assign({},n),{idToken:r.idToken,refreshToken:r.refreshToken});switch(e.operationType){case"signIn":const t=await Zt._fromIdTokenResponse(i,e.operationType,o);return await i._updateCurrentUser(t.user),t;case"reauthenticate":return v(e.user,i,"internal-error"),Zt._forOperation(e.user,e.operationType,o);default:f(i,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}class Ae{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>ce._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new Ae(t)}async getSession(){return xe._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(t,e){const i=t,n=await this.getSession(),r=await j(this.user,i._process(this.user.auth,n,e));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(t){const e="string"==typeof t?t:t.uid,i=await this.user.getIdToken();try{const t=await j(this.user,(n=this.user.auth,r={idToken:i,mfaEnrollmentId:e},O(n,"POST","/v2/accounts/mfaEnrollment:withdraw",R(n,r))));this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(t),await this.user.reload()}catch(t){throw t}var n,r}}const Ie=new WeakMap;const Ce="__sak";class Pe{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ce,"1"),this.storage.removeItem(Ce),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Re extends Pe{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=n.getUA();return nt(t)||lt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=ct(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),n=this.localCache[e];i!==n&&t(e,n,i)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,i)=>{this.notifyListeners(t,i)}));const i=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const n=this.storage.getItem(i);if(t.newValue!==n)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(i);(e||this.localCache[i]!==t)&&this.notifyListeners(i,t)},s=this.storage.getItem(i);n.isIE()&&10===document.documentMode&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const t of Array.from(i))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Re.type="LOCAL";const Oe=Re;class ke extends Pe{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}ke.type="SESSION";const Me=ke;class De{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const i=new De(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:n,data:r}=e.data,s=this.handlersMap[n];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:n});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:i,eventType:n,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ne(t="",e=10){let i="";for(let t=0;t<e;t++)i+=Math.floor(10*Math.random());return t+i}De.receivers=[];class Le{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const n="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const h=Ne("",20);n.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),i);s={messageChannel:n,onMessage(t){const e=t;if(e.data.eventId===h)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),n.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[n.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Be(){return window}function Fe(){return void 0!==Be().WorkerGlobalScope&&"function"==typeof Be().importScripts}const Ue="firebaseLocalStorageDb",Ge="firebaseLocalStorage",je="fbase_key";class He{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function ze(t,e){return t.transaction([Ge],e?"readwrite":"readonly").objectStore(Ge)}function We(){const t=indexedDB.open(Ue,1);return new Promise(((e,i)=>{t.addEventListener("error",(()=>{i(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Ge,{keyPath:je})}catch(t){i(t)}})),t.addEventListener("success",(async()=>{const i=t.result;i.objectStoreNames.contains(Ge)?e(i):(i.close(),await function(){const t=indexedDB.deleteDatabase(Ue);return new He(t).toPromise()}(),e(await We()))}))}))}async function Ve(t,e,i){const n=ze(t,!0).put({[je]:e,value:i});return new He(n).toPromise()}function Xe(t,e){const i=ze(t,!0).delete(e);return new He(i).toPromise()}class Ye{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await We()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=De._getInstance(Fe()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Le(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&(null===(t=i[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=i[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await We();return await Ve(t,Ce,"1"),await Xe(t,Ce),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((i=>Ve(i,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const i=ze(t,!1).get(e),n=await new He(i).toPromise();return void 0===n?null:n.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>Xe(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=ze(t,!1).getAll();return new He(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],i=new Set;for(const{fbase_key:n,value:r}of t)i.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(r)&&(this.notifyListeners(n,r),e.push(n));for(const t of Object.keys(this.localCache))this.localCache[t]&&!i.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const t of Array.from(i))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ye.type="LOCAL";const qe=Ye;const $e=1e12;class Ke{constructor(t){this.auth=t,this.counter=$e,this._widgets=new Map}render(t,e){const i=this.counter;return this._widgets.set(i,new Je(t,this.auth.name,e||{})),this.counter++,i}reset(t){var e;const i=t||$e;null===(e=this._widgets.get(i))||void 0===e||e.delete(),this._widgets.delete(i)}getResponse(t){var e;const i=t||$e;return(null===(e=this._widgets.get(i))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const i=t||$e;return null===(e=this._widgets.get(i))||void 0===e||e.execute(),""}}class Je{constructor(t,e,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const n="string"==typeof t?document.getElementById(t):t;v(n,"argument-error",{appName:e}),this.container=n,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(t){const e=[],i="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<t;n++)e.push(i.charAt(Math.floor(Math.random()*i.length)));return e.join("")}(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(t){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(t){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ze=_t("rcb"),Qe=new E(3e4,6e4);class ti{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Be().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return v(function(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}(e),t,"argument-error"),this.shouldResolveImmediately(e)&&pt(Be().grecaptcha)?Promise.resolve(Be().grecaptcha):new Promise(((i,r)=>{const s=Be().setTimeout((()=>{r(m(t,"network-request-failed"))}),Qe.get());Be()[Ze]=()=>{Be().clearTimeout(s),delete Be()[Ze];const n=Be().grecaptcha;if(!n||!pt(n))return void r(m(t,"internal-error"));const o=n.render;n.render=(t,e)=>{const i=o(t,e);return this.counter++,i},this.hostLanguage=e,i(n)};gt(`https://www.google.com/recaptcha/api.js??${n.querystring({onload:Ze,render:"explicit",hl:e})}`).catch((()=>{clearTimeout(s),r(m(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=Be().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ei{async load(t){return new Ke(t)}clearedOneInstance(){}}const ii="recaptcha",ni={theme:"light",type:"image"};class ri{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=Ut._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function si(t,e,i){var n;const r=await i.verify();try{let s;if(v("string"==typeof r,t,"argument-error"),v(i.type===ii,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){v("enroll"===e.type,t,"internal-error");const i=await function(t,e){return O(t,"POST","/v2/accounts/mfaEnrollment:start",R(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return i.phoneSessionInfo.sessionInfo}{v("signin"===e.type,t,"internal-error");const i=(null===(n=s.multiFactorHint)||void 0===n?void 0:n.uid)||s.multiFactorUid;v(i,t,"missing-multi-factor-info");const o=await function(t,e){return O(t,"POST","/v2/accounts/mfaSignIn:start",R(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:i,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return O(t,"POST","/v1/accounts:sendVerificationCode",R(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{i._reset()}}class oi{constructor(t){this.providerId=oi.PROVIDER_ID,this.auth=St(t)}verifyPhoneNumber(t,e){return si(this.auth,t,n.getModularInstance(e))}static credential(t,e){return Ut._fromVerification(t,e)}static credentialFromResult(t){const e=t;return oi.credentialFromTaggedObject(e)}static credentialFromError(t){return oi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:i}=t;return e&&i?Ut._fromTokenResponse(e,i):null}}function ai(t,e){return e?K(e):(v(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}oi.PROVIDER_ID="phone",oi.PHONE_SIGN_IN_METHOD="phone";class hi extends Ct{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Lt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Lt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Lt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function li(t){return oe(t.auth,new hi(t),t.bypassAuthState)}function ci(t){const{auth:e,user:i}=t;return v(i,e,"internal-error"),se(i,new hi(t),t.bypassAuthState)}async function ui(t){const{auth:e,user:i}=t;return v(i,e,"internal-error"),ne(i,new hi(t),t.bypassAuthState)}class di{constructor(t,e,i,n,r=!1){this.auth=t,this.resolver=i,this.user=n,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:n,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:i,tenantId:r||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return li;case"linkViaPopup":case"linkViaRedirect":return ui;case"reauthViaPopup":case"reauthViaRedirect":return ci;default:f(this.auth,"internal-error")}}resolve(t){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pi=new E(2e3,1e4);class fi extends di{constructor(t,e,i,n,r){super(t,e,n,r),this.provider=i,this.authWindow=null,this.pollId=null,fi.currentPopupAction&&fi.currentPopupAction.cancel(),fi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return v(t,this.auth,"internal-error"),t}async onExecution(){w(1===this.filter.length,"Popup operations only handle one event");const t=Ne();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(m(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;(null===(i=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===i?void 0:i.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,pi.get())};t()}}fi.currentPopupAction=null;const mi=new Map;class gi extends di{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=mi.get(this.auth._key());if(!t){try{const e=await async function(t,e){const i=bi(e),n=vi(t);if(!await n._isAvailable())return!1;const r="true"===await n._get(i);return await n._remove(i),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}mi.set(this.auth._key(),t)}return this.bypassAuthState||mi.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function _i(t,e){return vi(t)._set(bi(e),"true")}function yi(t,e){mi.set(t._key(),e)}function vi(t){return K(t._redirectPersistence)}function bi(t){return Q("pendingRedirect",t.config.apiKey,t.name)}async function wi(t,e,i=!1){const n=St(t),r=ai(n,e),s=new gi(n,r,i),o=await s.execute();return o&&!i&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}async function Si(t){const e=Ne(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}class Ti{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ei(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!Ei(t)){const n=(null===(i=t.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";e.onError(m(this.auth,n))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xi(t))}saveEventToCache(t){this.cachedEventUids.add(xi(t)),this.lastProcessedEventTime=Date.now()}}function xi(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Ei({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}async function Ai(t,e={}){return O(t,"GET","/v1/projects",e)}const Ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ci=/^https?/;function Pi(t){const e=S(),{protocol:i,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===n?"chrome-extension:"===i&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===i&&r.hostname===n}if(!Ci.test(i))return!1;if(Ii.test(t))return n===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}const Ri=new E(3e4,6e4);function Oi(){const t=Be().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let ki=null;function Mi(t){return ki=ki||function(t){return new Promise(((e,i)=>{var n,r,s;function o(){Oi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Oi(),i(m(t,"network-request-failed"))},timeout:Ri.get()})}if(null===(r=null===(n=Be().gapi)||void 0===n?void 0:n.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Be().gapi)||void 0===s?void 0:s.load)){const e=_t("iframefcb");return Be()[e]=()=>{gapi.load?o():i(m(t,"network-request-failed"))},gt(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>i(t)))}o()}})).catch((t=>{throw ki=null,t}))}(t),ki}const Di=new E(5e3,15e3),Ni={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Li=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bi(t){const e=t.config;v(e.authDomain,t,"auth-domain-config-required");const i=e.emulator?A(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,s={apiKey:e.apiKey,appName:t.name,v:r.SDK_VERSION},o=Li.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${i}?${n.querystring(s).slice(1)}`}const Fi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ui{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Gi(t,e,i,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const l=Object.assign(Object.assign({},Fi),{width:r.toString(),height:s.toString(),top:o,left:a}),c=n.getUA().toLowerCase();i&&(h=rt(c)?"_blank":i),it(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((t,[e,i])=>`${t}${e}=${i},`),"");if(function(t=n.getUA()){var e;return lt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==h)return function(t,e){const i=document.createElement("a");i.href=t,i.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(n)}(e||"",h),new Ui(null);const d=window.open(e||"",h,u);v(d,t,"popup-blocked");try{d.focus()}catch(t){}return new Ui(d)}const ji="__/auth/handler",Hi="emulator/auth/handler",zi=encodeURIComponent("fac");async function Wi(t,e,i,s,o,a){v(t.config.authDomain,t,"auth-domain-config-required"),v(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:i,redirectUrl:s,v:r.SDK_VERSION,eventId:o};if(e instanceof Ht){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",n.isEmpty(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))h[t]=e}if(e instanceof zt){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(h.scopes=t.join(","))}t.tenantId&&(h.tid=t.tenantId);const l=h;for(const t of Object.keys(l))void 0===l[t]&&delete l[t];const c=await t._getAppCheckToken(),u=c?`#${zi}=${encodeURIComponent(c)}`:"";return`${function({config:t}){if(!t.emulator)return`https://${t.authDomain}/${ji}`;return A(t,Hi)}(t)}?${n.querystring(l).slice(1)}${u}`}const Vi="webStorageSupport";const Xi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Me,this._completeRedirectFn=wi,this._overrideRedirectResult=yi}async _openPopup(t,e,i,n){var r;w(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Gi(t,await Wi(t,e,i,S(),n),Ne())}async _openRedirect(t,e,i,n){await this._originValidation(t);return function(t){Be().location.href=t}(await Wi(t,e,i,S(),n)),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:i}=this.eventManagers[e];return t?Promise.resolve(t):(w(i,"If manager is not set, promise should be"),i)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch((()=>{delete this.eventManagers[e]})),i}async initAndGetManager(t){const e=await async function(t){const e=await Mi(t),i=Be().gapi;return v(i,t,"internal-error"),e.open({where:document.body,url:Bi(t),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ni,dontclear:!0},(e=>new Promise((async(i,n)=>{await e.restyle({setHideOnLeave:!1});const r=m(t,"network-request-failed"),s=Be().setTimeout((()=>{n(r)}),Di.get());function o(){Be().clearTimeout(s),i(e)}e.ping(o).then(o,(()=>{n(r)}))}))))}(t),i=new Ti(t);return e.register("authEvent",(e=>{v(null==e?void 0:e.authEvent,t,"invalid-auth-event");return{status:i.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Vi,{type:Vi},(i=>{var n;const r=null===(n=null==i?void 0:i[0])||void 0===n?void 0:n[Vi];void 0!==r&&e(!!r),f(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ai(t);for(const t of e)try{if(Pi(t))return}catch(t){}f(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return ct()||nt()||lt()}};class Yi{constructor(t){this.factorId=t}_process(t,e,i){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,i);case"signin":return this._finalizeSignIn(t,e.credential);default:return b("unexpected MultiFactorSessionType")}}}class qi extends Yi{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new qi(t)}_finalizeEnroll(t,e,i){return function(t,e){return O(t,"POST","/v2/accounts/mfaEnrollment:finalize",R(t,e))}(t,{idToken:e,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return function(t,e){return O(t,"POST","/v2/accounts/mfaSignIn:finalize",R(t,e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class $i{constructor(){}static assertion(t){return qi._fromCredential(t)}}$i.FACTOR_ID="phone";class Ki{static assertionForEnrollment(t,e){return Ji._fromSecret(t,e)}static assertionForSignIn(t,e){return Ji._fromEnrollmentId(t,e)}static async generateSecret(t){const e=t;v(void 0!==e.auth,"internal-error");const i=await(n=e.auth,r={idToken:e.credential,totpEnrollmentInfo:{}},O(n,"POST","/v2/accounts/mfaEnrollment:start",R(n,r)));var n,r;return Zi._fromStartTotpMfaEnrollmentResponse(i,e.auth)}}Ki.FACTOR_ID="totp";class Ji extends Yi{constructor(t,e,i){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=i}static _fromSecret(t,e){return new Ji(e,void 0,t)}static _fromEnrollmentId(t,e){return new Ji(e,t)}async _finalizeEnroll(t,e,i){return v(void 0!==this.secret,t,"argument-error"),function(t,e){return O(t,"POST","/v2/accounts/mfaEnrollment:finalize",R(t,e))}(t,{idToken:e,displayName:i,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){v(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error");const i={verificationCode:this.otp};return function(t,e){return O(t,"POST","/v2/accounts/mfaSignIn:finalize",R(t,e))}(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:i})}}class Zi{constructor(t,e,i,n,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=i,this.codeIntervalSeconds=n,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(t,e){return new Zi(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){var i;let n=!1;return(Qi(t)||Qi(e))&&(n=!0),n&&(Qi(t)&&(t=(null===(i=this.auth.currentUser)||void 0===i?void 0:i.email)||"unknownuser"),Qi(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Qi(t){return void 0===t||0===(null==t?void 0:t.length)}var tn="@firebase/auth",en="0.23.2";class nn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(t)}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null==e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const rn=n.getExperimentalSetting("authIdTokenMaxAge")||300;let sn=null;var on;on="Browser",r._registerComponent(new a.Component("auth",((t,{options:e})=>{const i=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=i.options;v(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const a={apiKey:s,authDomain:o,clientPlatform:on,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ut(on)},h=new wt(i,n,r,a);return function(t,e){const i=(null==e?void 0:e.persistence)||[],n=(Array.isArray(i)?i:[i]).map(K);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,null==e?void 0:e.popupRedirectResolver)}(h,e),h}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,i)=>{t.getProvider("auth-internal").initialize()}))),r._registerComponent(new a.Component("auth-internal",(t=>(t=>new nn(t))(St(t.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),r.registerVersion(tn,en,function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(on)),r.registerVersion(tn,en,"cjs2017"),e.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},e.ActionCodeOperation={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},e.ActionCodeURL=Gt,e.AuthCredential=Ct,e.AuthEventManager=Ti,e.AuthImpl=wt,e.AuthPopup=Ui,e.EmailAuthCredential=Nt,e.EmailAuthProvider=jt,e.FacebookAuthProvider=Vt,e.FactorId={PHONE:"phone",TOTP:"totp"},e.FetchProvider=I,e.GithubAuthProvider=Yt,e.GoogleAuthProvider=Xt,e.OAuthCredential=Bt,e.OAuthProvider=Wt,e.OperationType={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},e.PhoneAuthCredential=Ut,e.PhoneAuthProvider=oi,e.PhoneMultiFactorGenerator=$i,e.ProviderId={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},e.RecaptchaVerifier=class{constructor(t,e=Object.assign({},ni),i){this.parameters=e,this.type=ii,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=St(i),this.isInvisible="invisible"===this.parameters.size,v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const n="string"==typeof t?document.getElementById(t):t;v(n,this.auth,"argument-error"),this.container=n,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ei:new ti,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),i=e.getResponse(t);return i||new Promise((i=>{const n=t=>{t&&(this.tokenChangeListeners.delete(n),i(t))};this.tokenChangeListeners.add(n),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){v(!this.parameters.sitekey,this.auth,"argument-error"),v(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"==typeof t)t(e);else if("string"==typeof t){const i=Be()[t];"function"==typeof i&&i(e)}}}assertNotDestroyed(){v(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){v(T()&&!Fe(),this.auth,"internal-error"),await function(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await async function(t){return(await O(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);v(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return v(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},e.SAMLAuthCredential=qt,e.SAMLAuthProvider=$t,e.SignInMethod={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},e.TotpMultiFactorGenerator=Ki,e.TotpSecret=Zi,e.TwitterAuthProvider=Kt,e.UserImpl=q,e._assert=v,e._castAuth=St,e._clearRedirectOutcomes=function(){mi.clear()},e._createError=m,e._fail=f,e._generateEventId=Ne,e._getClientVersion=ut,e._getInstance=K,e._getProjectConfig=Ai,e._getRedirectResult=wi,e._getRedirectUrl=Wi,e._isAndroid=ot,e._isIOS=lt,e._isIOS7Or8=function(t=n.getUA()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)},e._overrideRedirectResult=yi,e._persistenceKeyName=Q,e.applyActionCode=async function(t,e){await async function(t,e){return O(t,"POST","/v1/accounts:update",R(t,e))}(n.getModularInstance(t),{oobCode:e})},e.beforeAuthStateChanged=Te,e.browserLocalPersistence=Oe,e.browserPopupRedirectResolver=Xi,e.browserSessionPersistence=Me,e.checkActionCode=fe,e.confirmPasswordReset=async function(t,e,i){await Pt(n.getModularInstance(t),{oobCode:e,newPassword:i})},e.connectAuthEmulator=Et,e.createUserWithEmailAndPassword=async function(t,e,i){var n;const r=St(t),s={returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(n=r._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled){const t=await vt(r,s,"signUpPassword");o=Jt(r,t)}else o=Jt(r,s).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const t=await vt(r,s,"signUpPassword");return Jt(r,t)}return Promise.reject(t)}));const a=await o.catch((t=>Promise.reject(t))),h=await Zt._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(h.user),h},e.debugAssert=w,e.debugErrorMap=l,e.deleteUser=async function(t){return n.getModularInstance(t).delete()},e.fetchSignInMethodsForEmail=async function(t,e){const i={identifier:e,continueUri:T()?S():"http://localhost"},{signinMethods:r}=await async function(t,e){return O(t,"POST","/v1/accounts:createAuthUri",R(t,e))}(n.getModularInstance(t),i);return r||[]},e.getAdditionalUserInfo=function(t){const{user:e,_tokenResponse:i}=t;return e.isAnonymous&&!i?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,i;if(!t)return null;const{providerId:n}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!n&&(null==t?void 0:t.idToken)){const n=null===(i=null===(e=G(t.idToken))||void 0===e?void 0:e.firebase)||void 0===i?void 0:i.sign_in_provider;if(n)return new ge(s,"anonymous"!==n&&"custom"!==n?n:null)}if(!n)return null;switch(n){case"facebook.com":return new ye(s,r);case"github.com":return new ve(s,r);case"google.com":return new be(s,r);case"twitter.com":return new we(s,r,t.screenName||null);case"custom":case"anonymous":return new ge(s,null);default:return new ge(s,n,r)}}(i)},e.getAuth=function(t=r.getApp()){const e=r._getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const i=xt(t,{popupRedirectResolver:Xi,persistence:[qe,Oe,Me]}),s=n.getExperimentalSetting("authTokenSyncURL");if(s){const t=(o=s,async t=>{const e=t&&await t.getIdTokenResult(),i=e&&((new Date).getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>rn)return;const n=null==e?void 0:e.token;sn!==n&&(sn=n,await fetch(o,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))});Te(i,t,(()=>t(i.currentUser))),Se(i,(e=>t(e)))}var o;const a=n.getDefaultEmulatorHost("auth");return a&&Et(i,`http://${a}`),i},e.getIdToken=function(t,e=!1){return n.getModularInstance(t).getIdToken(e)},e.getIdTokenResult=F,e.getMultiFactorResolver=function(t,e){var i;const r=n.getModularInstance(t),s=e;return v(e.customData.operationType,r,"argument-error"),v(null===(i=s.customData._serverResponse)||void 0===i?void 0:i.mfaPendingCredential,r,"argument-error"),Ee._fromError(r,s)},e.getRedirectResult=async function(t,e){return await St(t)._initializationPromise,wi(t,e,!1)},e.inMemoryPersistence=Z,e.indexedDBLocalPersistence=qe,e.initializeAuth=xt,e.initializeRecaptchaConfig=function(t){return St(t).initializeRecaptchaConfig()},e.isSignInWithEmailLink=function(t,e){const i=Gt.parseLink(e);return"EMAIL_SIGNIN"===(null==i?void 0:i.operation)},e.linkWithCredential=he,e.linkWithPhoneNumber=async function(t,e,i){const r=n.getModularInstance(t);await re(!1,r,"phone");const s=await si(r.auth,e,n.getModularInstance(i));return new ri(s,(t=>he(r,t)))},e.linkWithPopup=async function(t,e,i){const r=n.getModularInstance(t);_(r.auth,e,Ht);const s=ai(r.auth,i);return new fi(r.auth,"linkViaPopup",e,s,r).executeNotNull()},e.linkWithRedirect=function(t,e,i){return async function(t,e,i){const r=n.getModularInstance(t);_(r.auth,e,Ht),await r.auth._initializationPromise;const s=ai(r.auth,i);await re(!1,r,e.providerId),await _i(s,r.auth);const o=await Si(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}(t,e,i)},e.multiFactor=function(t){const e=n.getModularInstance(t);return Ie.has(e)||Ie.set(e,Ae._fromUser(e)),Ie.get(e)},e.onAuthStateChanged=function(t,e,i,r){return n.getModularInstance(t).onAuthStateChanged(e,i,r)},e.onIdTokenChanged=Se,e.parseActionCodeURL=function(t){return Gt.parseLink(t)},e.prodErrorMap=c,e.reauthenticateWithCredential=le,e.reauthenticateWithPhoneNumber=async function(t,e,i){const r=n.getModularInstance(t),s=await si(r.auth,e,n.getModularInstance(i));return new ri(s,(t=>le(r,t)))},e.reauthenticateWithPopup=async function(t,e,i){const r=n.getModularInstance(t);_(r.auth,e,Ht);const s=ai(r.auth,i);return new fi(r.auth,"reauthViaPopup",e,s,r).executeNotNull()},e.reauthenticateWithRedirect=function(t,e,i){return async function(t,e,i){const r=n.getModularInstance(t);_(r.auth,e,Ht),await r.auth._initializationPromise;const s=ai(r.auth,i);await _i(s,r.auth);const o=await Si(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}(t,e,i)},e.reload=V,e.sendEmailVerification=async function(t,e){const i=n.getModularInstance(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&pe(i.auth,r,e);const{email:s}=await async function(t,e){return kt(t,e)}(i.auth,r);s!==t.email&&await t.reload()},e.sendPasswordResetEmail=async function(t,e,i){var n;const r=St(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(null===(n=r._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled){const t=await vt(r,s,"getOobCode",!0);i&&pe(r,t,i),await Mt(r,t)}else i&&pe(r,s,i),await Mt(r,s).catch((async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const t=await vt(r,s,"getOobCode",!0);i&&pe(r,t,i),await Mt(r,t)}}))},e.sendSignInLinkToEmail=async function(t,e,i){var n;const r=St(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(t,e){v(e.handleCodeInApp,r,"argument-error"),e&&pe(r,t,e)}if(null===(n=r._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled){const t=await vt(r,s,"getOobCode",!0);o(t,i),await Dt(r,t)}else o(s,i),await Dt(r,s).catch((async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await vt(r,s,"getOobCode",!0);o(t,i),await Dt(r,t)}}))},e.setPersistence=function(t,e){return n.getModularInstance(t).setPersistence(e)},e.signInAnonymously=async function(t){var e;const i=St(t);if(await i._initializationPromise,null===(e=i.currentUser)||void 0===e?void 0:e.isAnonymous)return new Zt({user:i.currentUser,providerId:null,operationType:"signIn"});const n=await Jt(i,{returnSecureToken:!0}),r=await Zt._fromIdTokenResponse(i,"signIn",n,!0);return await i._updateCurrentUser(r.user),r},e.signInWithCredential=ae,e.signInWithCustomToken=async function(t,e){const i=St(t),n=await async function(t,e){return M(t,"POST","/v1/accounts:signInWithCustomToken",R(t,e))}(i,{token:e,returnSecureToken:!0}),r=await Zt._fromIdTokenResponse(i,"signIn",n);return await i._updateCurrentUser(r.user),r},e.signInWithEmailAndPassword=function(t,e,i){return ae(n.getModularInstance(t),jt.credential(e,i))},e.signInWithEmailLink=async function(t,e,i){const r=n.getModularInstance(t),s=jt.credentialWithLink(e,i||S());return v(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ae(r,s)},e.signInWithPhoneNumber=async function(t,e,i){const r=St(t),s=await si(r,e,n.getModularInstance(i));return new ri(s,(t=>ae(r,t)))},e.signInWithPopup=async function(t,e,i){const n=St(t);_(t,e,Ht);const r=ai(n,i);return new fi(n,"signInViaPopup",e,r).executeNotNull()},e.signInWithRedirect=function(t,e,i){return async function(t,e,i){const n=St(t);_(t,e,Ht),await n._initializationPromise;const r=ai(n,i);return await _i(r,n),r._openRedirect(n,e,"signInViaRedirect")}(t,e,i)},e.signOut=function(t){return n.getModularInstance(t).signOut()},e.unlink=async function(t,e){const i=n.getModularInstance(t);await re(!0,i,e);const{providerUserInfo:r}=await async function(t,e){return O(t,"POST","/v1/accounts:update",e)}(i.auth,{idToken:await i.getIdToken(),deleteProvider:[e]}),s=ie(r||[]);return i.providerData=i.providerData.filter((t=>s.has(t.providerId))),s.has("phone")||(i.phoneNumber=null),await i.auth._persistUserIfCurrent(i),i},e.updateCurrentUser=function(t,e){return n.getModularInstance(t).updateCurrentUser(e)},e.updateEmail=function(t,e){return me(n.getModularInstance(t),e,null)},e.updatePassword=function(t,e){return me(n.getModularInstance(t),null,e)},e.updatePhoneNumber=async function(t,e){await ne(n.getModularInstance(t),e)},e.updateProfile=async function(t,{displayName:e,photoURL:i}){if(void 0===e&&void 0===i)return;const r=n.getModularInstance(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:i,returnSecureToken:!0},o=await j(r,async function(t,e){return O(t,"POST","/v1/accounts:update",e)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find((({providerId:t})=>"password"===t));a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)},e.useDeviceLanguage=function(t){n.getModularInstance(t).useDeviceLanguage()},e.verifyBeforeUpdateEmail=async function(t,e,i){const r=n.getModularInstance(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};i&&pe(r.auth,s,i);const{email:o}=await async function(t,e){return kt(t,e)}(r.auth,s);o!==t.email&&await t.reload()},e.verifyPasswordResetCode=async function(t,e){const{data:i}=await fe(n.getModularInstance(t),e);return i.email}},678:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4460);i(9532),i(3299),i(4629),i(624),i(667),e.ActionCodeOperation=n.ActionCodeOperation,e.ActionCodeURL=n.ActionCodeURL,e.AuthCredential=n.AuthCredential,e.AuthErrorCodes=n.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY,e.EmailAuthCredential=n.EmailAuthCredential,e.EmailAuthProvider=n.EmailAuthProvider,e.FacebookAuthProvider=n.FacebookAuthProvider,e.FactorId=n.FactorId,e.GithubAuthProvider=n.GithubAuthProvider,e.GoogleAuthProvider=n.GoogleAuthProvider,e.OAuthCredential=n.OAuthCredential,e.OAuthProvider=n.OAuthProvider,e.OperationType=n.OperationType,e.PhoneAuthCredential=n.PhoneAuthCredential,e.PhoneAuthProvider=n.PhoneAuthProvider,e.PhoneMultiFactorGenerator=n.PhoneMultiFactorGenerator,e.ProviderId=n.ProviderId,e.RecaptchaVerifier=n.RecaptchaVerifier,e.SAMLAuthProvider=n.SAMLAuthProvider,e.SignInMethod=n.SignInMethod,e.TotpMultiFactorGenerator=n.TotpMultiFactorGenerator,e.TotpSecret=n.TotpSecret,e.TwitterAuthProvider=n.TwitterAuthProvider,e.applyActionCode=n.applyActionCode,e.beforeAuthStateChanged=n.beforeAuthStateChanged,e.browserLocalPersistence=n.browserLocalPersistence,e.browserPopupRedirectResolver=n.browserPopupRedirectResolver,e.browserSessionPersistence=n.browserSessionPersistence,e.checkActionCode=n.checkActionCode,e.confirmPasswordReset=n.confirmPasswordReset,e.connectAuthEmulator=n.connectAuthEmulator,e.createUserWithEmailAndPassword=n.createUserWithEmailAndPassword,e.debugErrorMap=n.debugErrorMap,e.deleteUser=n.deleteUser,e.fetchSignInMethodsForEmail=n.fetchSignInMethodsForEmail,e.getAdditionalUserInfo=n.getAdditionalUserInfo,e.getAuth=n.getAuth,e.getIdToken=n.getIdToken,e.getIdTokenResult=n.getIdTokenResult,e.getMultiFactorResolver=n.getMultiFactorResolver,e.getRedirectResult=n.getRedirectResult,e.inMemoryPersistence=n.inMemoryPersistence,e.indexedDBLocalPersistence=n.indexedDBLocalPersistence,e.initializeAuth=n.initializeAuth,e.initializeRecaptchaConfig=n.initializeRecaptchaConfig,e.isSignInWithEmailLink=n.isSignInWithEmailLink,e.linkWithCredential=n.linkWithCredential,e.linkWithPhoneNumber=n.linkWithPhoneNumber,e.linkWithPopup=n.linkWithPopup,e.linkWithRedirect=n.linkWithRedirect,e.multiFactor=n.multiFactor,e.onAuthStateChanged=n.onAuthStateChanged,e.onIdTokenChanged=n.onIdTokenChanged,e.parseActionCodeURL=n.parseActionCodeURL,e.prodErrorMap=n.prodErrorMap,e.reauthenticateWithCredential=n.reauthenticateWithCredential,e.reauthenticateWithPhoneNumber=n.reauthenticateWithPhoneNumber,e.reauthenticateWithPopup=n.reauthenticateWithPopup,e.reauthenticateWithRedirect=n.reauthenticateWithRedirect,e.reload=n.reload,e.sendEmailVerification=n.sendEmailVerification,e.sendPasswordResetEmail=n.sendPasswordResetEmail,e.sendSignInLinkToEmail=n.sendSignInLinkToEmail,e.setPersistence=n.setPersistence,e.signInAnonymously=n.signInAnonymously,e.signInWithCredential=n.signInWithCredential,e.signInWithCustomToken=n.signInWithCustomToken,e.signInWithEmailAndPassword=n.signInWithEmailAndPassword,e.signInWithEmailLink=n.signInWithEmailLink,e.signInWithPhoneNumber=n.signInWithPhoneNumber,e.signInWithPopup=n.signInWithPopup,e.signInWithRedirect=n.signInWithRedirect,e.signOut=n.signOut,e.unlink=n.unlink,e.updateCurrentUser=n.updateCurrentUser,e.updateEmail=n.updateEmail,e.updatePassword=n.updatePassword,e.updatePhoneNumber=n.updatePhoneNumber,e.updateProfile=n.updateProfile,e.useDeviceLanguage=n.useDeviceLanguage,e.verifyBeforeUpdateEmail=n.verifyBeforeUpdateEmail,e.verifyPasswordResetCode=n.verifyPasswordResetCode},667:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4629),r=i(9532),s=function(){function t(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var i=new r.Deferred;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{var n=this.getOrInitializeService({instanceIdentifier:e});n&&i.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,i=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),n=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(n)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,i;if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}try{for(var r=n.__values(this.instancesDeferred.entries()),s=r.next();!s.done;s=r.next()){var a=n.__read(s.value,2),h=a[0],l=a[1],c=this.normalizeInstanceIdentifier(h);try{var u=this.getOrInitializeService({instanceIdentifier:c});l.resolve(u)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(n.__spreadArray(n.__spreadArray([],n.__read(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))),!1),n.__read(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))),!1))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=o),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,i;void 0===t&&(t={});var r=t.options,s=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error("".concat(this.name,"(").concat(o,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var h=n.__values(this.instancesDeferred.entries()),l=h.next();!l.done;l=h.next()){var c=n.__read(l.value,2),u=c[0],d=c[1];o===this.normalizeInstanceIdentifier(u)&&d.resolve(a)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var i,n=this.normalizeInstanceIdentifier(e),r=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;r.add(t),this.onInitCallbacks.set(n,r);var s=this.instances.get(n);return s&&t(s,n),function(){r.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var i,r,s=this.onInitCallbacks.get(e);if(s)try{for(var o=n.__values(s),a=o.next();!a.done;a=o.next()){var h=a.value;try{h(t,e)}catch(t){}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},t.prototype.getOrInitializeService=function(t){var e,i=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,s=this.instances.get(i);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=i,e===o?void 0:e),options:r}),this.instances.set(i,s),this.instancesOptions.set(i,r),this.invokeOnInitCallbacks(s,i),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,i,s)}catch(t){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=s,e.ComponentContainer=h,e.Provider=a},37:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(3299),s=i(667),o=i(4629),a=i(9532),h=i(1827),l="@firebase/installations",c="0.6.4",u=1e4,d="w:".concat(c),p="FIS_v2",f=36e5,m=((n={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',n["not-registered"]="Firebase Installation is not registered.",n["installation-not-found"]="Firebase Installation not found.",n["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',n["app-offline"]="Could not process request. Application offline.",n["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",n),g=new a.ErrorFactory("installations","Installations",m);function _(t){return t instanceof a.FirebaseError&&t.code.includes("request-failed")}function y(t){var e=t.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(e,"/installations")}function v(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function b(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return i=r.sent(),n=i.error,[2,g.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}}))}))}function w(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function S(t,e){var i=e.refreshToken,n=w(t);return n.append("Authorization",function(t){return"".concat(p," ").concat(t)}(i)),n}function T(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,t()];case 1:return(e=i.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function x(t,e){var i=t.appConfig,n=t.heartbeatServiceProvider,r=e.fid;return o.__awaiter(this,void 0,void 0,(function(){var t,e,s,a,h,l,c,u;return o.__generator(this,(function(o){switch(o.label){case 0:return t=y(i),e=w(i),(s=n.getImmediate({optional:!0}))?[4,s.getHeartbeatsHeader()]:[3,2];case 1:(a=o.sent())&&e.append("x-firebase-client",a),o.label=2;case 2:return h={fid:r,authVersion:p,appId:i.appId,sdkVersion:d},l={method:"POST",headers:e,body:JSON.stringify(h)},[4,T((function(){return fetch(t,l)}))];case 3:return(c=o.sent()).ok?[4,c.json()]:[3,5];case 4:return u=o.sent(),[2,{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:v(u.authToken)}];case 5:return[4,b("Create Installation",c)];case 6:throw o.sent()}}))}))}function E(t){return new Promise((function(e){setTimeout(e,t)}))}var A=/^[cdef][\w-]{21}$/;function I(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){var e=(i=t,btoa(String.fromCharCode.apply(String,o.__spreadArray([],o.__read(i),!1))).replace(/\+/g,"-").replace(/\//g,"_"));var i;return e.substr(0,22)}(t);return A.test(e)?e:""}catch(t){return""}}function C(t){return"".concat(t.appName,"!").concat(t.appId)}var P=new Map;function R(t,e){var i=C(t);O(i,e),function(t,e){var i=M();i&&i.postMessage({key:t,fid:e});D()}(i,e)}function O(t,e){var i,n,r=P.get(t);if(r)try{for(var s=o.__values(r),a=s.next();!a.done;a=s.next()){(0,a.value)(e)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}}var k=null;function M(){return!k&&"BroadcastChannel"in self&&((k=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){O(t.data.key,t.data.fid)}),k}function D(){0===P.size&&k&&(k.close(),k=null)}var N="firebase-installations-store",L=null;function B(){return L||(L=h.openDB("firebase-installations-database",1,{upgrade:function(t,e){if(0===e)t.createObjectStore(N)}})),L}function F(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n,r,s,a;return o.__generator(this,(function(o){switch(o.label){case 0:return i=C(t),[4,B()];case 1:return n=o.sent(),r=n.transaction(N,"readwrite"),[4,(s=r.objectStore(N)).get(i)];case 2:return a=o.sent(),[4,s.put(e,i)];case 3:return o.sent(),[4,r.done];case 4:return o.sent(),a&&a.fid===e.fid||R(t,e.fid),[2,e]}}))}))}function U(t){return o.__awaiter(this,void 0,void 0,(function(){var e,i,n;return o.__generator(this,(function(r){switch(r.label){case 0:return e=C(t),[4,B()];case 1:return i=r.sent(),[4,(n=i.transaction(N,"readwrite")).objectStore(N).delete(e)];case 2:return r.sent(),[4,n.done];case 3:return r.sent(),[2]}}))}))}function G(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n,r,s,a,h;return o.__generator(this,(function(o){switch(o.label){case 0:return i=C(t),[4,B()];case 1:return n=o.sent(),r=n.transaction(N,"readwrite"),[4,(s=r.objectStore(N)).get(i)];case 2:return a=o.sent(),void 0!==(h=e(a))?[3,4]:[4,s.delete(i)];case 3:return o.sent(),[3,6];case 4:return[4,s.put(h,i)];case 5:o.sent(),o.label=6;case 6:return[4,r.done];case 7:return o.sent(),!h||a&&a.fid===h.fid||R(t,h.fid),[2,h]}}))}))}function j(t){return o.__awaiter(this,void 0,void 0,(function(){var e,i,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,G(t.appConfig,(function(i){var n=function(t){var e=t||{fid:I(),registrationStatus:0};return W(e)}(i),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(g.create("app-offline"))};var i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n;return o.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,7]),[4,x(t,e)];case 1:return i=r.sent(),[2,F(t.appConfig,i)];case 2:return _(n=r.sent())&&409===n.customData.serverCode?[4,U(t.appConfig)]:[3,4];case 3:return r.sent(),[3,6];case 4:return[4,F(t.appConfig,{fid:e.fid,registrationStatus:0})];case 5:r.sent(),r.label=6;case 6:throw n;case 7:return[2]}}))}))}(t,i);return{installationEntry:i,registrationPromise:n}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:H(t)}:{installationEntry:e}}(t,n);return e=r.registrationPromise,r.installationEntry}))];case 1:return""!==(i=r.sent()).fid?[3,3]:(n={},[4,e]);case 2:return[2,(n.installationEntry=r.sent(),n)];case 3:return[2,{installationEntry:i,registrationPromise:e}]}}))}))}function H(t){return o.__awaiter(this,void 0,void 0,(function(){var e,i,n,r;return o.__generator(this,(function(s){switch(s.label){case 0:return[4,z(t.appConfig)];case 1:e=s.sent(),s.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,E(100)];case 3:return s.sent(),[4,z(t.appConfig)];case 4:return e=s.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,j(t)];case 6:return i=s.sent(),n=i.installationEntry,(r=i.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}}))}))}function z(t){return G(t,(function(t){if(!t)throw g.create("installation-not-found");return W(t)}))}function W(t){return 1===(e=t).registrationStatus&&e.registrationTime+u<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function V(t,e){var i=t.appConfig,n=t.heartbeatServiceProvider;return o.__awaiter(this,void 0,void 0,(function(){var t,r,s,a,h,l,c,u;return o.__generator(this,(function(o){switch(o.label){case 0:return t=function(t,e){var i=e.fid;return"".concat(y(t),"/").concat(i,"/authTokens:generate")}(i,e),r=S(i,e),(s=n.getImmediate({optional:!0}))?[4,s.getHeartbeatsHeader()]:[3,2];case 1:(a=o.sent())&&r.append("x-firebase-client",a),o.label=2;case 2:return h={installation:{sdkVersion:d,appId:i.appId}},l={method:"POST",headers:r,body:JSON.stringify(h)},[4,T((function(){return fetch(t,l)}))];case 3:return(c=o.sent()).ok?[4,c.json()]:[3,5];case 4:return u=o.sent(),[2,v(u)];case 5:return[4,b("Generate Auth Token",c)];case 6:throw o.sent()}}))}))}function X(t,e){return void 0===e&&(e=!1),o.__awaiter(this,void 0,void 0,(function(){var i,n,r;return o.__generator(this,(function(s){switch(s.label){case 0:return[4,G(t.appConfig,(function(n){if(!q(n))throw g.create("not-registered");var r=n.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+f}(t)}(r))return n;if(1===r.requestStatus)return i=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,Y(t.appConfig)];case 1:i=r.sent(),r.label=2;case 2:return 1!==i.authToken.requestStatus?[3,5]:[4,E(100)];case 3:return r.sent(),[4,Y(t.appConfig)];case 4:return i=r.sent(),[3,2];case 5:return 0===(n=i.authToken).requestStatus?[2,X(t,e)]:[2,n]}}))}))}(t,e),n;if(!navigator.onLine)throw g.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return o.__assign(o.__assign({},t),{authToken:e})}(n);return i=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n,r;return o.__generator(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,V(t,e)];case 1:return i=s.sent(),r=o.__assign(o.__assign({},e),{authToken:i}),[4,F(t.appConfig,r)];case 2:return s.sent(),[2,i];case 3:return!_(n=s.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,U(t.appConfig)];case 4:return s.sent(),[3,7];case 5:return r=o.__assign(o.__assign({},e),{authToken:{requestStatus:0}}),[4,F(t.appConfig,r)];case 6:s.sent(),s.label=7;case 7:throw n;case 8:return[2]}}))}))}(t,s),s}))];case 1:return n=s.sent(),i?[4,i]:[3,3];case 2:return r=s.sent(),[3,4];case 3:r=n.authToken,s.label=4;case 4:return[2,r]}}))}))}function Y(t){return G(t,(function(t){if(!q(t))throw g.create("not-registered");var e,i=t.authToken;return 1===(e=i).requestStatus&&e.requestTime+u<Date.now()?o.__assign(o.__assign({},t),{authToken:{requestStatus:0}}):t}))}function q(t){return void 0!==t&&2===t.registrationStatus}function $(t){return o.__awaiter(this,void 0,void 0,(function(){var e,i,n,r;return o.__generator(this,(function(s){switch(s.label){case 0:return[4,j(e=t)];case 1:return i=s.sent(),n=i.installationEntry,(r=i.registrationPromise)?r.catch(console.error):X(e).catch(console.error),[2,n.fid]}}))}))}function K(t,e){return void 0===e&&(e=!1),o.__awaiter(this,void 0,void 0,(function(){var i;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,J(i=t)];case 1:return n.sent(),[4,X(i,e)];case 2:return[2,n.sent().token]}}))}))}function J(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,j(t)];case 1:return(e=i.sent().registrationPromise)?[4,e]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Z(t,e){return o.__awaiter(this,void 0,void 0,(function(){var i,n,r,s;return o.__generator(this,(function(o){switch(o.label){case 0:return i=function(t,e){var i=e.fid;return"".concat(y(t),"/").concat(i)}(t,e),n=S(t,e),r={method:"DELETE",headers:n},[4,T((function(){return fetch(i,r)}))];case 1:return(s=o.sent()).ok?[3,3]:[4,b("Delete Installation",s)];case 2:throw o.sent();case 3:return[2]}}))}))}function Q(t){return g.create("missing-app-config-values",{valueName:t})}var tt="installations",et=function(t){var e=t.getProvider("app").getImmediate(),i=function(t){var e,i;if(!t||!t.options)throw Q("App Configuration");if(!t.name)throw Q("App Name");try{for(var n=o.__values(["projectId","apiKey","appId"]),r=n.next();!r.done;r=n.next()){var s=r.value;if(!t.options[s])throw Q(s)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:i,heartbeatServiceProvider:r._getProvider(e,"heartbeat"),_delete:function(){return Promise.resolve()}}},it=function(t){var e=t.getProvider("app").getImmediate(),i=r._getProvider(e,tt).getImmediate();return{getId:function(){return $(i)},getToken:function(t){return K(i,t)}}};r._registerComponent(new s.Component(tt,et,"PUBLIC")),r._registerComponent(new s.Component("installations-internal",it,"PRIVATE")),r.registerVersion(l,c),r.registerVersion(l,c,"cjs5"),e.deleteInstallations=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,i;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,G(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(i=n.sent()))return[3,6];if(1!==i.registrationStatus)return[3,2];throw g.create("delete-pending-registration");case 2:if(2!==i.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw g.create("app-offline");case 3:return[4,Z(e,i)];case 4:return n.sent(),[4,U(e)];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},e.getId=$,e.getInstallations=function(t){return void 0===t&&(t=r.getApp()),r._getProvider(t,"installations").getImmediate()},e.getToken=K,e.onIdChange=function(t,e){var i=t.appConfig;return function(t,e){M();var i=C(t),n=P.get(i);n||(n=new Set,P.set(i,n)),n.add(e)}(i,e),function(){!function(t,e){var i=C(t),n=P.get(i);n&&(n.delete(e),0===n.size&&P.delete(i),D())}(i,e)}}},624:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,s=i(4629),o=[];e.LogLevel=void 0,(r=e.LogLevel||(e.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var a={debug:e.LogLevel.DEBUG,verbose:e.LogLevel.VERBOSE,info:e.LogLevel.INFO,warn:e.LogLevel.WARN,error:e.LogLevel.ERROR,silent:e.LogLevel.SILENT},h=e.LogLevel.INFO,l=((n={})[e.LogLevel.DEBUG]="log",n[e.LogLevel.VERBOSE]="log",n[e.LogLevel.INFO]="info",n[e.LogLevel.WARN]="warn",n[e.LogLevel.ERROR]="error",n),c=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(!(e<t.logLevel)){var r=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));console[o].apply(console,s.__spreadArray(["[".concat(r,"]  ").concat(t.name,":")],i,!1))}},u=function(){function t(t){this.name=t,this._logLevel=h,this._logHandler=c,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.DEBUG],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.DEBUG],t,!1))},t.prototype.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.VERBOSE],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.VERBOSE],t,!1))},t.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.INFO],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.INFO],t,!1))},t.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.WARN],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.WARN],t,!1))},t.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._userLogHandler&&this._userLogHandler.apply(this,s.__spreadArray([this,e.LogLevel.ERROR],t,!1)),this._logHandler.apply(this,s.__spreadArray([this,e.LogLevel.ERROR],t,!1))},t}();e.Logger=u,e.setLogLevel=function(t){o.forEach((function(e){e.setLogLevel(t)}))},e.setUserLogHandler=function(t,i){for(var n=function(n){var r=null;i&&i.level&&(r=a[i.level]),n.userLogHandler=null===t?null:function(i,n){for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];var a=s.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:i.logLevel)&&t({level:e.LogLevel[n].toLowerCase(),message:a,args:s,type:i.name})}},r=0,s=o;r<s.length;r++){n(s[r])}}},5911:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3299),r=i(9532),s=i(667),o=i(624),a=i(4629);i(37);var h,l="@firebase/remote-config",c="0.4.4",u=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),d="remote-config",p=((h={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",h["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",h["registration-api-key"]="Undefined API key. Check Firebase app initialization.",h["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",h["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",h["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",h["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",h["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",h["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",h["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',h["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',h["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",h["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",h["indexed-db-unavailable"]="Indexed DB is not supported by current browser",h),f=new r.ErrorFactory("remoteconfig","Remote Config",p);var m=["1","true","t","yes","y","on"],g=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&m.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}();function _(t){return a.__awaiter(this,void 0,void 0,(function(){var e,i,n,s;return a.__generator(this,(function(o){switch(o.label){case 0:return e=r.getModularInstance(t),[4,Promise.all([e._storage.getLastSuccessfulFetchResponse(),e._storage.getActiveConfigEtag()])];case 1:return i=o.sent(),n=i[0],s=i[1],n&&n.config&&n.eTag&&n.eTag!==s?[4,Promise.all([e._storageCache.setActiveConfig(n.config),e._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return o.sent(),[2,!0]}}))}))}function y(t){var e=r.getModularInstance(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),e._initializePromise}function v(t){return a.__awaiter(this,void 0,void 0,(function(){var e,i,n,s,o=this;return a.__generator(this,(function(h){switch(h.label){case 0:e=r.getModularInstance(t),i=new u,setTimeout((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.abort(),[2]}))}))}),e.settings.fetchTimeoutMillis),h.label=1;case 1:return h.trys.push([1,4,,6]),[4,e._client.fetch({cacheMaxAgeMillis:e.settings.minimumFetchIntervalMillis,signal:i})];case 2:return h.sent(),[4,e._storageCache.setLastFetchStatus("success")];case 3:return h.sent(),[3,6];case 4:return n=h.sent(),c="fetch-throttle",s=(l=n)instanceof r.FirebaseError&&-1!==l.code.indexOf(c)?"throttle":"failure",[4,e._storageCache.setLastFetchStatus(s)];case 5:throw h.sent(),n;case 6:return[2]}var l,c}))}))}function b(t,e){var i=r.getModularInstance(t);i._isInitializationComplete||i._logger.debug('A value was requested for key "'.concat(e,'" before SDK initialization completed.')+" Await on ensureInitialized if the intent was to get a previously activated value.");var n=i._storageCache.getActiveConfig();return n&&void 0!==n[e]?new g("remote",n[e]):i.defaultConfig&&void 0!==i.defaultConfig[e]?new g("default",String(i.defaultConfig[e])):(i._logger.debug('Returning static value for key "'.concat(e,'".')+" Define a default or remote value if this is unintentional."),new g("static"))}var w=function(){function t(t,e,i,n){this.client=t,this.storage=e,this.storageCache=i,this.logger=n}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var i=Date.now()-e,n=i<=t;return this.logger.debug("Config fetch cache check."+" Cache age millis: ".concat(i,".")+" Cache max age millis (minimumFetchIntervalMillis setting): ".concat(t,".")+" Is cache hit: ".concat(n,".")),n},t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s;return a.__generator(this,(function(o){switch(o.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=o.sent(),i=e[0],(n=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,i)?[2,n]:(t.eTag=n&&n.eTag,[4,this.client.fetch(t)]);case 2:return r=o.sent(),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===r.status&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),[4,Promise.all(s)];case 3:return o.sent(),[2,r]}}))}))},t}();var S=function(){function t(t,e,i,n,r,s){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=i,this.projectId=n,this.apiKey=r,this.appId=s}return t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,i,n,r,s,o,h,l,c,u,d,p,m,g,_,y,v,b,w;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=a.sent(),i=e[0],n=e[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s="".concat(r,"/v1/projects/").concat(this.projectId,"/namespaces/").concat(this.namespace,":fetch?key=").concat(this.apiKey),o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},h={sdk_version:this.sdkVersion,app_instance_id:i,app_instance_id_token:n,app_id:this.appId,language_code:(void 0===S&&(S=navigator),S.languages&&S.languages[0]||S.language)},l={method:"POST",headers:o,body:JSON.stringify(h)},c=fetch(s,l),u=new Promise((function(e,i){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",i(t)}))})),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Promise.race([c,u])];case 3:return a.sent(),[4,c];case 4:return d=a.sent(),[3,6];case 5:throw p=a.sent(),m="fetch-client-network","AbortError"===(null==p?void 0:p.name)&&(m="fetch-timeout"),f.create(m,{originalErrorMessage:null==p?void 0:p.message});case 6:if(g=d.status,_=d.headers.get("ETag")||void 0,200!==d.status)return[3,11];b=void 0,a.label=7;case 7:return a.trys.push([7,9,,10]),[4,d.json()];case 8:return b=a.sent(),[3,10];case 9:throw w=a.sent(),f.create("fetch-client-parse",{originalErrorMessage:null==w?void 0:w.message});case 10:y=b.entries,v=b.state,a.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===v?g=500:"NO_CHANGE"===v?g=304:"NO_TEMPLATE"!==v&&"EMPTY_CONFIG"!==v||(y={}),304!==g&&200!==g)throw f.create("fetch-status",{httpStatus:g});return[2,{status:g,eTag:_,config:y}]}var S}))}))},t}();function T(t,e){return new Promise((function(i,n){var r=Math.max(e-Date.now(),0),s=setTimeout(i,r);t.addEventListener((function(){clearTimeout(s),n(f.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var x=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=i.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var i=e.throttleEndTimeMillis,n=e.backoffCount;return a.__awaiter(this,void 0,void 0,(function(){var e,s,o;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,T(t.signal,i)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof r.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s=a.sent()))throw s;return o={throttleEndTimeMillis:Date.now()+r.calculateBackoffMillis(n),backoffCount:n+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),E=function(){function t(t,e,i,n,r){this.app=t,this._client=e,this._storageCache=i,this._storage=n,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t}();function A(t,e){var i=t.target.error||void 0;return f.create(e,{originalErrorMessage:i&&(null==i?void 0:i.message)})}var I="app_namespace_store";var C=function(){function t(t,e,i,n){void 0===n&&(n=new Promise((function(t,e){try{var i=indexedDB.open("firebase_remote_config",1);i.onerror=function(t){e(A(t,"storage-open"))},i.onsuccess=function(e){t(e.target.result)},i.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(I,{keyPath:"compositeKey"})}}catch(t){e(f.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}))),this.appId=t,this.appName=e,this.namespace=i,this.openDbPromise=n}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,i=this;return a.__generator(this,(function(n){switch(n.label){case 0:return[4,this.openDbPromise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var s=e.transaction([I],"readonly").objectStore(I),o=i.createCompositeKey(t);try{var a=s.get(o);a.onerror=function(t){r(A(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){r(f.create("storage-get",{originalErrorMessage:null==t?void 0:t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var i,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return i=r.sent(),[2,new Promise((function(r,s){var o=i.transaction([I],"readwrite").objectStore(I),a=n.createCompositeKey(t);try{var h=o.put({compositeKey:a,value:e});h.onerror=function(t){s(A(t,"storage-set"))},h.onsuccess=function(){r()}}catch(t){s(f.create("storage-set",{originalErrorMessage:null==t?void 0:t.message}))}}))]}}))}))},t.prototype.delete=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,i=this;return a.__generator(this,(function(n){switch(n.label){case 0:return[4,this.openDbPromise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var s=e.transaction([I],"readwrite").objectStore(I),o=i.createCompositeKey(t);try{var a=s.delete(o);a.onerror=function(t){r(A(t,"storage-delete"))},a.onsuccess=function(){n()}}catch(t){r(f.create("storage-delete",{originalErrorMessage:null==t?void 0:t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),P=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,i,n,r,s;return a.__generator(this,(function(o){switch(o.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),[4,t];case 1:return(n=o.sent())&&(this.lastFetchStatus=n),[4,e];case 2:return(r=o.sent())&&(this.lastSuccessfulFetchTimestampMillis=r),[4,i];case 3:return(s=o.sent())&&(this.activeConfig=s),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();n._registerComponent(new s.Component(d,(function(t,e){var i=e.instanceIdentifier,s=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw f.create("registration-window");if(!r.isIndexedDBAvailable())throw f.create("indexed-db-unavailable");var h=s.options,c=h.projectId,u=h.apiKey,d=h.appId;if(!c)throw f.create("registration-project-id");if(!u)throw f.create("registration-api-key");if(!d)throw f.create("registration-app-id");i=i||"firebase";var p=new C(d,s.name,i),m=new P(p),g=new o.Logger(l);g.logLevel=o.LogLevel.ERROR;var _=new S(a,n.SDK_VERSION,i,c,u,d),v=new x(_,p),b=new w(v,p,m,g),T=new E(s,b,m,p,g);return y(T),T}),"PUBLIC").setMultipleInstances(!0)),n.registerVersion(l,c),n.registerVersion(l,c,"cjs5"),e.activate=_,e.ensureInitialized=y,e.fetchAndActivate=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,v(t=r.getModularInstance(t))];case 1:return e.sent(),[2,_(t)]}}))}))},e.fetchConfig=v,e.getAll=function(t){var e=r.getModularInstance(t);return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(a.__assign(a.__assign({},t),e))}(e._storageCache.getActiveConfig(),e.defaultConfig).reduce((function(e,i){return e[i]=b(t,i),e}),{})},e.getBoolean=function(t,e){return b(r.getModularInstance(t),e).asBoolean()},e.getNumber=function(t,e){return b(r.getModularInstance(t),e).asNumber()},e.getRemoteConfig=function(t){return void 0===t&&(t=n.getApp()),t=r.getModularInstance(t),n._getProvider(t,d).getImmediate()},e.getString=function(t,e){return b(r.getModularInstance(t),e).asString()},e.getValue=b,e.isSupported=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:if(!r.isIndexedDBAvailable())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.validateIndexedDBOpenable()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))},e.setLogLevel=function(t,e){var i=r.getModularInstance(t);switch(e){case"debug":i._logger.logLevel=o.LogLevel.DEBUG;break;case"silent":i._logger.logLevel=o.LogLevel.SILENT;break;default:i._logger.logLevel=o.LogLevel.ERROR}}},9532:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+n.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[i++]=r:r<2048?(e[i++]=r>>6|192,e[i++]=63&r|128):55296==(64512&r)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++n)),e[i++]=r>>18|240,e[i++]=r>>12&63|128,e[i++]=r>>6&63|128,e[i++]=63&r|128):(e[i++]=r>>12|224,e[i++]=r>>6&63|128,e[i++]=63&r|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,h=a?t[e+2]:0,l=r>>2,c=(3&r)<<4|o>>4;let u=(15&o)<<2|h>>6,d=63&h;a||(d=64,s||(u=64)),n.push(i[l],i[c],i[u],i[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(o(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let i=0,n=0;for(;i<t.length;){const r=t[i++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[i++];e[n++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else{const s=t[i++],o=t[i++];e[n++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){const r=i[t.charAt(e++)],s=e<t.length?i[t.charAt(e)]:0;++e;const o=e<t.length?i[t.charAt(e)]:64;++e;const a=e<t.length?i[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw new h;const l=r<<2|s>>4;if(n.push(l),64!==o){const t=s<<4&240|o>>2;if(n.push(t),64!==a){const t=o<<6&192|a;n.push(t)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(t){const e=o(t);return a.encodeByteArray(e,!0)},c=function(t){return l(t).replace(/\./g,"")},u=function(t){try{return a.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const i in e)e.hasOwnProperty(i)&&"__proto__"!==i&&(t[i]=d(t[i],e[i]));return t}function p(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}const f=()=>{try{return p().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&u(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},m=t=>{var e,i;return null===(i=null===(e=f())||void 0===e?void 0:e.emulatorHosts)||void 0===i?void 0:i[t]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,i))}}}function _(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){var t;const e=null===(t=f())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(i.g.process)}catch(t){return!1}}class v extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,b.prototype.create)}}class b{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},n=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(w,((t,i)=>{const n=e[i];return null!=n?String(n):`<${i}?>`}))}(r,i):"Error",o=`${this.serviceName}: ${s} (${n}).`;return new v(n,o,i)}}const w=/\{\$([^}]+)}/g;function S(t){return JSON.parse(t)}const T=function(t){let e={},i={},n={},r="";try{const s=t.split(".");e=S(u(s[0])||""),i=S(u(s[1])||""),r=s[2],n=i.d||{},delete i.d}catch(t){}return{header:e,claims:i,data:n,signature:r}};function x(t){return null!==t&&"object"==typeof t}class E{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,i){let n;if(void 0===t&&void 0===e&&void 0===i)throw new Error("Missing Observer.");n=function(t,e){if("object"!=typeof t||null===t)return!1;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:i},void 0===n.next&&(n.next=A),void 0===n.error&&(n.error=A),void 0===n.complete&&(n.complete=A);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(t){}})),this.observers.push(n),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function A(){}function I(t,e){return`${t} failed: ${e} argument `}const C=144e5;e.CONSTANTS=n,e.DecodeBase64StringError=h,e.Deferred=g,e.ErrorFactory=b,e.FirebaseError=v,e.MAX_VALUE_MILLIS=C,e.RANDOM_FACTOR=.5,e.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if("string"==typeof t)for(let n=0;n<16;n++)i[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let n=0;n<16;n++)i[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){const e=i[t-3]^i[t-8]^i[t-14]^i[t-16];i[t]=4294967295&(e<<1|e>>>31)}let n,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(n=h^o&(a^h),r=1518500249):(n=o^a^h,r=1859775393):t<60?(n=o&a|h&(o|a),r=2400959708):(n=o^a^h,r=3395469782);const e=(s<<5|s>>>27)+n+l+r+i[t]&4294967295;l=h,h=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const i=e-this.blockSize;let n=0;const r=this.buf_;let s=this.inbuf_;for(;n<e;){if(0===s)for(;n<=i;)this.compress_(t,n),n+=this.blockSize;if("string"==typeof t){for(;n<e;)if(r[s]=t.charCodeAt(n),++s,++n,s===this.blockSize){this.compress_(r),s=0;break}}else for(;n<e;)if(r[s]=t[n],++s,++n,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let i=0;for(let e=0;e<5;e++)for(let n=24;n>=0;n-=8)t[i]=this.chain_[e]>>n&255,++i;return t}},e.areCookiesEnabled=function(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)},e.assert=r,e.assertionError=s,e.async=function(t,e){return(...i)=>{Promise.resolve(!0).then((()=>{t(...i)})).catch((t=>{e&&e(t)}))}},e.base64=a,e.base64Decode=u,e.base64Encode=l,e.base64urlEncodeWithoutPadding=c,e.calculateBackoffMillis=function(t,e=1e3,i=2){const n=e*Math.pow(i,t),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(C,n+r)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createMockUserToken=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",n=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:n,exp:n+3600,auth_time:n,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")},e.createSubscribe=function(t,e){const i=new E(t,e);return i.subscribe.bind(i)},e.decode=T,e.deepCopy=function(t){return d(void 0,t)},e.deepEqual=function t(e,i){if(e===i)return!0;const n=Object.keys(e),r=Object.keys(i);for(const s of n){if(!r.includes(s))return!1;const n=e[s],o=i[s];if(x(n)&&x(o)){if(!t(n,o))return!1}else if(n!==o)return!1}for(const t of r)if(!n.includes(t))return!1;return!0},e.deepExtend=d,e.errorPrefix=I,e.extractQuerystring=function(t){const e=t.indexOf("?");if(!e)return"";const i=t.indexOf("#",e);return t.substring(e,i>0?i:void 0)},e.getDefaultAppConfig=()=>{var t;return null===(t=f())||void 0===t?void 0:t.config},e.getDefaultEmulatorHost=m,e.getDefaultEmulatorHostnameAndPort=t=>{const e=m(t);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(i+1),10);return"["===e[0]?[e.substring(1,i-1),n]:[e.substring(0,i),n]},e.getDefaults=f,e.getExperimentalSetting=t=>{var e;return null===(e=f())||void 0===e?void 0:e[`_${t}`]},e.getGlobal=p,e.getModularInstance=function(t){return t&&t._delegate?t._delegate:t},e.getUA=_,e.isAdmin=function(t){const e=T(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return _().indexOf("Electron/")>=0},e.isEmpty=function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){const t=_();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(t){return!1}},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())},e.isNode=y,e.isNodeSdk=function(){return!0===n.NODE_CLIENT||!0===n.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return _().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){const e=T(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){const e=T(t).claims,i=Math.floor((new Date).getTime()/1e3);let n=0,r=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?n=e.nbf:e.hasOwnProperty("iat")&&(n=e.iat),r=e.hasOwnProperty("exp")?e.exp:n+86400),!!i&&!!n&&!!r&&i>=n&&i<=r},e.issuedAtTime=function(t){const e=T(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=S,e.map=function(t,e,i){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e.call(i,t[r],r,t));return n},e.ordinal=function(t){return Number.isFinite(t)?t+function(t){t=Math.abs(t);const e=t%100;if(e>=10&&e<=20)return"th";const i=t%10;if(1===i)return"st";if(2===i)return"nd";if(3===i)return"rd";return"th"}(t):`${t}`},e.promiseWithTimeout=function(t,e=2e3){const i=new g;return setTimeout((()=>i.reject("timeout!")),e),t.then(i.resolve,i.reject),i.promise},e.querystring=function(t){const e=[];for(const[i,n]of Object.entries(t))Array.isArray(n)?n.forEach((t=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[i,n]=t.split("=");e[decodeURIComponent(i)]=decodeURIComponent(n)}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){let e=0;for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,i++):e+=3}return e},e.stringToByteArray=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s>=55296&&s<=56319){const e=s-55296;n++,r(n<t.length,"Surrogate pair missing trail surrogate.");s=65536+(e<<10)+(t.charCodeAt(n)-56320)}s<128?e[i++]=s:s<2048?(e[i++]=s>>6|192,e[i++]=63&s|128):s<65536?(e[i++]=s>>12|224,e[i++]=s>>6&63|128,e[i++]=63&s|128):(e[i++]=s>>18|240,e[i++]=s>>12&63|128,e[i++]=s>>6&63|128,e[i++]=63&s|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},e.validateArgCount=function(t,e,i,n){let r;if(n<e?r="at least "+e:n>i&&(r=0===i?"none":"no more than "+i),r){throw new Error(t+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+r+".")}},e.validateCallback=function(t,e,i,n){if((!n||i)&&"function"!=typeof i)throw new Error(I(t,e)+"must be a valid function.")},e.validateContextObject=function(t,e,i,n){if((!n||i)&&("object"!=typeof i||null===i))throw new Error(I(t,e)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise(((t,e)=>{try{let i=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),i||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{i=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))},e.validateNamespace=function(t,e,i){if((!i||e)&&"string"!=typeof e)throw new Error(I(t,"namespace")+"must be a valid firebase namespace.")}},4272:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new r(n,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,r,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,s),!0;case 6:return c.fn.call(c.context,e,n,r,s,o),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||o(this,s);else{for(var h=0,l=[],c=a.length;h<c;h++)(a[h].fn!==e||r&&!a[h].once||n&&a[h].context!==n)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},7712:(t,e,i)=>{"use strict";i.d(e,{rj:()=>M,Jh:()=>N});var n=i(9133),r=i(3468),s=i(9122),o=i(8864),a=i(8768),h=i(5514);const l=i(3289).OW;var c=i(2461);const u=(t,e,i)=>{let n,r;return s=>{e.value>=0&&(s||i)&&(r=e.value-(n||0),(r||void 0===n)&&(n=e.value,e.delta=r,t(e)))}},d=()=>l.__WEB_VITALS_POLYFILL__?l.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const t=l.performance.timing,e=l.performance.navigation.type,i={entryType:"navigation",startTime:0,type:2==e?"back_forward":1===e?"reload":"navigate"};for(const e in t)"navigationStart"!==e&&"toJSON"!==e&&(i[e]=Math.max(t[e]-t.navigationStart,0));return i})()):l.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],p=()=>{const t=d();return t&&t.activationStart||0},f=(t,e)=>{const i=d();let n="navigate";return i&&(n=l.document.prerendering||p()>0?"prerender":i.type.replace(/_/g,"-")),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},m=(t,e,i)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver((t=>{e(t.getEntries())}));return n.observe(Object.assign({type:t,buffered:!0},i||{})),n}}catch(t){}},g=(t,e)=>{const i=n=>{"pagehide"!==n.type&&"hidden"!==l.document.visibilityState||(t(n),e&&(removeEventListener("visibilitychange",i,!0),removeEventListener("pagehide",i,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)};let _=-1;const y=()=>(_<0&&(_="hidden"!==l.document.visibilityState||l.document.prerendering?1/0:0,g((({timeStamp:t})=>{_=t}),!0)),{get firstHiddenTime(){return _}}),v={};function b(t){return"number"==typeof t&&isFinite(t)}function w(t,{startTimestamp:e,...i}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...i})}function S(t){return t/1e3}function T(){return l&&l.addEventListener&&l.performance}let x,E,A=0,I={};function C(){const t=T();if(t&&c.k3){t.mark&&l.performance.mark("sentry-tracing-init"),(t=>{const e=y(),i=f("FID");let n;const r=t=>{t.startTime<e.firstHiddenTime&&(i.value=t.processingStart-t.startTime,i.entries.push(t),n(!0))},s=t=>{t.forEach(r)},o=m("first-input",s);n=u(t,i),o&&g((()=>{s(o.takeRecords()),o.disconnect()}),!0)})((t=>{const e=t.entries.pop();if(!e)return;const i=S(c.k3),n=S(e.startTime);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding FID"),I.fid={value:t.value,unit:"millisecond"},I["mark.fid"]={value:i+n,unit:"second"}}));const e=(t=>{const e=f("CLS",0);let i,n=0,r=[];const s=t=>{t.forEach((t=>{if(!t.hadRecentInput){const s=r[0],o=r[r.length-1];n&&0!==r.length&&t.startTime-o.startTime<1e3&&t.startTime-s.startTime<5e3?(n+=t.value,r.push(t)):(n=t.value,r=[t]),n>e.value&&(e.value=n,e.entries=r,i&&i())}}))},o=m("layout-shift",s);if(o){i=u(t,e);const n=()=>{s(o.takeRecords()),i(!0)};return g(n),n}})((t=>{const e=t.entries.pop();e&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding CLS"),I.cls={value:t.value,unit:""},E=e)})),i=(t=>{const e=y(),i=f("LCP");let n;const r=t=>{const r=t[t.length-1];if(r){const t=Math.max(r.startTime-p(),0);t<e.firstHiddenTime&&(i.value=t,i.entries=[r],n())}},s=m("largest-contentful-paint",r);if(s){n=u(t,i);const e=()=>{v[i.id]||(r(s.takeRecords()),s.disconnect(),v[i.id]=!0,n(!0))};return["keydown","click"].forEach((t=>{addEventListener(t,e,{once:!0,capture:!0})})),g(e,!0),e}})((t=>{const e=t.entries.pop();e&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding LCP"),I.lcp={value:t.value,unit:"millisecond"},x=e)}));return()=>{e&&e(),i&&i()}}return()=>{}}function P(t){const e=T();if(!e||!l.performance.getEntries||!c.k3)return;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Tracing] Adding & adjusting spans using Performance API");const i=S(c.k3),n=e.getEntries();let r,s;if(n.slice(A).forEach((e=>{const n=S(e.startTime),a=S(e.duration);if(!("navigation"===t.op&&i+n<t.startTimestamp))switch(e.entryType){case"navigation":!function(t,e,i){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((n=>{R(t,e,n,i)})),R(t,e,"secureConnection",i,"TLS/SSL","connectEnd"),R(t,e,"fetch",i,"cache","domainLookupStart"),R(t,e,"domainLookup",i,"DNS"),function(t,e,i){w(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:i+S(e.requestStart),endTimestamp:i+S(e.responseEnd)}),w(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:i+S(e.responseStart),endTimestamp:i+S(e.responseEnd)})}(t,e,i)}(t,e,i),r=i+S(e.responseStart),s=i+S(e.requestStart);break;case"mark":case"paint":case"measure":{!function(t,e,i,n,r){const s=r+i,o=s+n;w(t,{description:e.name,endTimestamp:o,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s})}(t,e,n,a,i);const r=y(),s=e.startTime<r.firstHiddenTime;"first-paint"===e.name&&s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding FP"),I.fp={value:e.startTime,unit:"millisecond"}),"first-contentful-paint"===e.name&&s&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding FCP"),I.fcp={value:e.startTime,unit:"millisecond"});break}case"resource":{const r=e.name.replace(l.location.origin,"");!function(t,e,i,n,r,s){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const o={};"transferSize"in e&&(o["http.response_transfer_size"]=e.transferSize);"encodedBodySize"in e&&(o["http.response_content_length"]=e.encodedBodySize);"decodedBodySize"in e&&(o["http.decoded_response_content_length"]=e.decodedBodySize);"renderBlockingStatus"in e&&(o["resource.render_blocking_status"]=e.renderBlockingStatus);const a=s+n,h=a+r;w(t,{description:i,endTimestamp:h,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:a,data:o})}(t,e,r,n,a,i);break}}})),A=Math.max(n.length-1,0),function(t){const e=l.navigator;if(!e)return;const i=e.connection;i&&(i.effectiveType&&t.setTag("effectiveConnectionType",i.effectiveType),i.type&&t.setTag("connectionType",i.type),b(i.rtt)&&(I["connection.rtt"]={value:i.rtt,unit:"millisecond"}));b(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`);b(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===t.op){"number"==typeof r&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding TTFB"),I.ttfb={value:1e3*(r-t.startTimestamp),unit:"millisecond"},"number"==typeof s&&s<=r&&(I["ttfb.requestTime"]={value:1e3*(r-s),unit:"millisecond"})),["fcp","fp","lcp"].forEach((e=>{if(!I[e]||i>=t.startTimestamp)return;const n=I[e].value,r=i+S(n),s=Math.abs(1e3*(r-t.startTimestamp)),a=s-n;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Measurements] Normalized ${e} from ${n} to ${s} (${a})`),I[e].value=s}));const e=I["mark.fid"];e&&I.fid&&(w(t,{description:"first input delay",endTimestamp:e.value+S(I.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:e.value}),delete I["mark.fid"]),"fcp"in I||delete I.cls,Object.keys(I).forEach((e=>{t.setMeasurement(e,I[e].value,I[e].unit)})),function(t){x&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding LCP Data"),x.element&&t.setTag("lcp.element",(0,h.Hd)(x.element)),x.id&&t.setTag("lcp.id",x.id),x.url&&t.setTag("lcp.url",x.url.trim().slice(0,200)),t.setTag("lcp.size",x.size));E&&E.sources&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log("[Measurements] Adding CLS Data"),E.sources.forEach(((e,i)=>t.setTag(`cls.source.${i+1}`,(0,h.Hd)(e.node)))))}(t)}x=void 0,E=void 0,I={}}function R(t,e,i,n,r,s){const o=s?e[s]:e[`${i}End`],a=e[`${i}Start`];a&&o&&w(t,{op:"browser",origin:"auto.browser.browser.metrics",description:r||i,startTimestamp:n+S(a),endTimestamp:n+S(o)})}var O=i(7161),k=i(8434);const M="BrowserTracing",D={...n.Cq,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,i=!0){if(!l||!l.location)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn("Could not initialize routing instrumentation due to invalid location"));let n,r=l.location.href;e&&(n=t({name:l.location.pathname,startTimestamp:c.k3?c.k3/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),i&&(0,k.ON)("history",(({to:e,from:i})=>{void 0===i&&r&&-1!==r.indexOf(e)?r=void 0:i!==e&&(r=void 0,n&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Finishing current transaction with op: ${n.op}`),n.finish()),n=t({name:l.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...O.h$};class N{constructor(t){this.name=M,this._hasSetTracePropagationTargets=!1,(0,r.U)(),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this._hasSetTracePropagationTargets=!(!t||!t.tracePropagationTargets&&!t.tracingOrigins)),this.options={...D,...t},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=C(),this.options.enableLongTask&&m("longtask",(t=>{for(const e of t){const t=(0,s.Z7)();if(!t)return;const i=S(c.k3+e.startTime),n=S(e.duration);t.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:i,endTimestamp:i+n})}})),this.options._experiments.enableInteractions&&m("event",(t=>{for(const e of t){const t=(0,s.Z7)();if(!t)return;if("click"===e.name){const i=S(c.k3+e.startTime),n=S(e.duration);t.startChild({description:(0,h.Hd)(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:i,endTimestamp:i+n})}}}),{durationThreshold:0})}setupOnce(t,e){this._getCurrentHub=e;const i=e().getClient(),n=i&&i.getOptions(),{routingInstrumentation:r,startTransactionOnLocationChange:a,startTransactionOnPageLoad:h,markBackgroundTransactions:c,traceFetch:u,traceXHR:d,shouldCreateSpanForRequest:p,enableHTTPTimings:f,_experiments:m}=this.options,g=n&&n.tracePropagationTargets,_=g||this.options.tracePropagationTargets;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._hasSetTracePropagationTargets&&g&&o.vF.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),r((t=>{const i=this._createRouteTransaction(t);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(i,t,e),i}),h,a),c&&(l&&l.document?l.document.addEventListener("visibilitychange",(()=>{const t=(0,s.Z7)();if(l.document.hidden&&t){const e="cancelled";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${t.op}`),t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn("[Tracing] Could not set up background tab detection due to lack of global document")),m.enableInteractions&&this._registerInteractionListener(),(0,O.Qb)({traceFetch:u,traceXHR:d,tracePropagationTargets:_,shouldCreateSpanForRequest:p,enableHTTPTimings:f})}_createRouteTransaction(t){if(!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`));const e=this._getCurrentHub(),{beforeNavigate:i,idleTimeout:n,finalTimeout:s,heartbeatInterval:h}=this.options,c="pageload"===t.op,u=c?L("sentry-trace"):"",d=c?L("baggage"):"",{traceparentData:p,dynamicSamplingContext:f,propagationContext:m}=(0,a.E0)(u,d),g={...t,...p,metadata:{...t.metadata,dynamicSamplingContext:p&&!f?{}:f},trimEnd:!0},_="function"==typeof i?i(g):g,y=void 0===_?{...g,sampled:!1}:_;y.metadata=y.name!==g.name?{...y.metadata,source:"custom"}:y.metadata,this._latestRouteName=y.name,this._latestRouteSource=y.metadata&&y.metadata.source,!1===y.sampled&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Will not send ${y.op} transaction because of beforeNavigate.`),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.log(`[Tracing] Starting ${y.op} transaction on scope`);const{location:v}=l,b=(0,r.p)(e,y,n,s,!0,{location:v},h),w=e.getScope();return c&&p?w.setPropagationContext(m):w.setPropagationContext({traceId:b.traceId,spanId:b.spanId,parentSpanId:b.parentSpanId,sampled:b.sampled}),b.registerBeforeFinishCallback((t=>{this._collectWebVitals(),P(t)})),b}_registerInteractionListener(){let t;const e=()=>{const{idleTimeout:e,finalTimeout:i,heartbeatInterval:n}=this.options,a="ui.action.click",h=(0,s.Z7)();if(h&&h.op&&["navigation","pageload"].includes(h.op))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`));if(t&&(t.setFinishReason("interactionInterrupted"),t.finish(),t=void 0),!this._getCurrentHub)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${a} transaction because _getCurrentHub is invalid.`));if(!this._latestRouteName)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.vF.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`));const c=this._getCurrentHub(),{location:u}=l,d={name:this._latestRouteName,op:a,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=(0,r.p)(c,d,e,i,!0,{location:u},n)};["click"].forEach((t=>{addEventListener(t,e,{once:!1,capture:!0})}))}}function L(t){const e=(0,h.NX)(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}},7161:(t,e,i)=>{"use strict";i.d(e,{Qb:()=>f,h$:()=>p});var n=i(5003),r=i(1205),s=i(4800),o=i(8434),a=i(2461),h=i(9105),l=i(8768),c=i(8172),u=i(9996);const d=["localhost",/^\/(?!\/)/],p={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:d,tracePropagationTargets:d};function f(t){const{traceFetch:e,traceXHR:i,tracePropagationTargets:a,tracingOrigins:f,shouldCreateSpanForRequest:g,enableHTTPTimings:y}={traceFetch:p.traceFetch,traceXHR:p.traceXHR,...t},v="function"==typeof g?g:t=>!0,b=t=>function(t,e){return(0,h.Xr)(t,e||d)}(t,a||f),w={};e&&(0,o.ON)("fetch",(t=>{const e=function(t,e,i,o){if(!(0,n.w)()||!t.fetchData)return;const a=e(t.fetchData.url);if(t.endTimestamp&&a){const e=t.fetchData.__span;if(!e)return;const i=o[e];if(i){if(t.response){i.setHttpStatus(t.response.status);const e=t.response&&t.response.headers&&t.response.headers.get("content-length"),n=parseInt(e);n>0&&i.setData("http.response_content_length",n)}else t.error&&i.setStatus("internal_error");i.finish(),delete o[e]}return}const h=(0,r.BF)(),d=h.getScope(),p=h.getClient(),f=d.getSpan(),{method:m,url:g}=t.fetchData,_=a&&f?f.startChild({data:{url:g,type:"fetch","http.method":m},description:`${m} ${g}`,op:"http.client",origin:"auto.http.browser"}):void 0;_&&(t.fetchData.__span=_.spanId,o[_.spanId]=_);if(i(t.fetchData.url)&&p){const e=t.args[0];t.args[1]=t.args[1]||{};const i=t.args[1];i.headers=function(t,e,i,n,r){const o=r||i.getSpan(),a=o&&o.transaction,{traceId:h,sampled:d,dsc:p}=i.getPropagationContext(),f=o?o.toTraceparent():(0,l.TC)(h,void 0,d),m=a?a.getDynamicSamplingContext():p||(0,s.l)(h,e,i),g=(0,c.De)(m),_="undefined"!=typeof Request&&(0,u.tH)(t,Request)?t.headers:n.headers;if(_){if("undefined"!=typeof Headers&&(0,u.tH)(_,Headers)){const t=new Headers(_);return t.append("sentry-trace",f),g&&t.append(c.hF,g),t}if(Array.isArray(_)){const t=[..._,["sentry-trace",f]];return g&&t.push([c.hF,g]),t}{const t="baggage"in _?_.baggage:void 0,e=[];return Array.isArray(t)?e.push(...t):t&&e.push(t),g&&e.push(g),{..._,"sentry-trace":f,baggage:e.length>0?e.join(","):void 0}}}return{"sentry-trace":f,baggage:g}}(e,p,d,i,_)}return _}(t,v,b,w);y&&e&&m(e)})),i&&(0,o.ON)("xhr",(t=>{const e=function(t,e,i,a){const h=t.xhr,u=h&&h[o.Er];if(!(0,n.w)()||h&&h.__sentry_own_request__||!h||!u)return;const d=e(u.url);if(t.endTimestamp&&d){const t=h.__sentry_xhr_span_id__;if(!t)return;const e=a[t];return void(e&&(e.setHttpStatus(u.status_code),e.finish(),delete a[t]))}const p=(0,r.BF)(),f=p.getScope(),m=f.getSpan(),g=d&&m?m.startChild({data:{...u.data,type:"xhr","http.method":u.method,url:u.url},description:`${u.method} ${u.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;g&&(h.__sentry_xhr_span_id__=g.spanId,a[h.__sentry_xhr_span_id__]=g);if(h.setRequestHeader&&i(u.url))if(g){const t=g&&g.transaction,e=t&&t.getDynamicSamplingContext(),i=(0,c.De)(e);_(h,g.toTraceparent(),i)}else{const t=p.getClient(),{traceId:e,sampled:i,dsc:n}=f.getPropagationContext(),r=(0,l.TC)(e,void 0,i),o=n||(t?(0,s.l)(e,t,f):void 0);_(h,r,(0,c.De)(o))}return g}(t,v,b,w);y&&e&&m(e)}))}function m(t){const e=t.data.url,i=new PerformanceObserver((n=>{n.getEntries().forEach((n=>{if(function(t){return"resource"===t.entryType&&"initiatorType"in t&&"string"==typeof t.nextHopProtocol&&("fetch"===t.initiatorType||"xmlhttprequest"===t.initiatorType)}(n)&&n.name.endsWith(e)){(function(t){const{name:e,version:i}=function(t){let e="unknown",i="unknown",n="";for(const r of t){if("/"===r){[e,i]=t.split("/");break}if(!isNaN(Number(r))){e="h"===n?"http":n,i=t.split(n)[1];break}n+=r}n===t&&(e=n);return{name:e,version:i}}(t.nextHopProtocol),n=[];if(n.push(["network.protocol.version",i],["network.protocol.name",e]),!a.k3)return n;return[...n,["http.request.redirect_start",g(t.redirectStart)],["http.request.fetch_start",g(t.fetchStart)],["http.request.domain_lookup_start",g(t.domainLookupStart)],["http.request.domain_lookup_end",g(t.domainLookupEnd)],["http.request.connect_start",g(t.connectStart)],["http.request.secure_connection_start",g(t.secureConnectionStart)],["http.request.connection_end",g(t.connectEnd)],["http.request.request_start",g(t.requestStart)],["http.request.response_start",g(t.responseStart)],["http.request.response_end",g(t.responseEnd)]]})(n).forEach((e=>t.setData(...e))),i.disconnect()}}))}));i.observe({entryTypes:["resource"]})}function g(t=0){return((a.k3||performance.timeOrigin)+t)/1e3}function _(t,e,i){try{t.setRequestHeader("sentry-trace",e),i&&t.setRequestHeader(c.hF,i)}catch(t){}}},3089:(t,e,i)=>{"use strict";i.d(e,{l:()=>o});var n=i(1205),r=i(3468),s=i(3344);function o(){(0,r.U)(),(0,s.wD)()&&function(){const e=(0,n.EU)();if(!e.__SENTRY__)return;const i={mongodb:()=>new((0,s.fj)(t,"./node/integrations/mongo").Mongo),mongoose:()=>new((0,s.fj)(t,"./node/integrations/mongo").Mongo),mysql:()=>new((0,s.fj)(t,"./node/integrations/mysql").Mysql),pg:()=>new((0,s.fj)(t,"./node/integrations/postgres").Postgres)},r=Object.keys(i).filter((t=>!!(0,s.Vw)(t))).map((t=>{try{return i[t]()}catch(t){return}})).filter((t=>t));r.length>0&&(e.__SENTRY__.integrations=[...e.__SENTRY__.integrations||[],...r])}()}t=i.hmd(t)},7617:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Breadcrumbs:()=>je,BrowserClient:()=>te,BrowserProfilingIntegration:()=>Co,BrowserTracing:()=>$s.Jh,Dedupe:()=>Qe,FunctionToString:()=>a,GlobalHandlers:()=>Ee,HttpContext:()=>Ze,Hub:()=>j.YZ,InboundFilters:()=>p,Integrations:()=>Ro,LinkedErrors:()=>Je,ModuleMetadata:()=>U,Replay:()=>Ys,SDK_VERSION:()=>G,Scope:()=>vt.H,TryCatch:()=>ke,WINDOW:()=>Et,addBreadcrumb:()=>X,addGlobalEventProcessor:()=>bt.lb,addTracingExtensions:()=>wt.U,captureEvent:()=>W,captureException:()=>H,captureMessage:()=>z,captureUserFeedback:()=>ui,chromeStackLineParser:()=>ce,close:()=>it,configureScope:()=>V,createTransport:()=>ct,createUserFeedbackEnvelope:()=>Qt,defaultIntegrations:()=>ri,defaultRequestInstrumentationOptions:()=>Ks.h$,defaultStackLineParsers:()=>be,defaultStackParser:()=>we,eventFromException:()=>qt,eventFromMessage:()=>$t,exceptionFromError:()=>zt,extractTraceparentData:()=>St.nc,flush:()=>et,forceLoad:()=>ai,geckoStackLineParser:()=>pe,getActiveSpan:()=>Tt.Bk,getActiveTransaction:()=>_t.Z7,getCurrentHub:()=>j.BF,getHubFromCarrier:()=>j.Me,init:()=>si,instrumentOutgoingRequests:()=>Ks.Qb,lastEventId:()=>nt,makeBrowserOfflineTransport:()=>so,makeFetchTransport:()=>ne,makeMain:()=>j.gM,makeMultiplexedTransport:()=>gt,makeXHRTransport:()=>se,onLoad:()=>hi,onProfilingStartRouteTransaction:()=>Ao,opera10StackLineParser:()=>_e,opera11StackLineParser:()=>ve,setContext:()=>Y,setExtra:()=>$,setExtras:()=>q,setMeasurement:()=>yt,setTag:()=>J,setTags:()=>K,setUser:()=>Z,showReportDialog:()=>oi,spanStatusfromHttpCode:()=>xt.o6,startInactiveSpan:()=>Tt.Uk,startSpan:()=>Tt.Lk,startSpanManual:()=>Tt.nV,startTransaction:()=>tt,trace:()=>Tt.uP,winjsStackLineParser:()=>me,withScope:()=>Q,wrap:()=>li});var n={};i.r(n),i.d(n,{FunctionToString:()=>a,InboundFilters:()=>p});var r={};i.r(r),i.d(r,{Breadcrumbs:()=>je,Dedupe:()=>Qe,GlobalHandlers:()=>Ee,HttpContext:()=>Ze,LinkedErrors:()=>Je,TryCatch:()=>ke});var s=i(9911);let o;class a{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=a.id}setupOnce(){o=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=(0,s.sp)(this)||this;return o.apply(e,t)}}catch(t){}}}a.__initStatic();var h=i(8864),l=i(2628),c=i(9105);const u=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],d=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class p{static __initStatic(){this.id="InboundFilters"}constructor(t={}){this.name=p.id,this._options=t}setupOnce(t,e){const i=t=>{const i=e();if(i){const e=i.getIntegration(p);if(e){const n=i.getClient(),r=n?n.getOptions():{},s=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:u],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:d],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(e._options,r);return function(t,e){if(e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${(0,l.$X)(t)}`),!0;if(function(t,e){if(t.type||!e||!e.length)return!1;return function(t){const e=[];t.message&&e.push(t.message);let i;try{i=t.exception.values[t.exception.values.length-1]}catch(t){}i&&i.value&&(e.push(i.value),i.type&&e.push(`${i.type}: ${i.value}`));"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||0!==e.length||h.vF.error(`Could not extract message for event ${(0,l.$X)(t)}`);return e}(t).some((t=>(0,c.Xr)(t,e)))}(t,e.ignoreErrors))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${(0,l.$X)(t)}`),!0;if(function(t,e){if("transaction"!==t.type||!e||!e.length)return!1;const i=t.transaction;return!!i&&(0,c.Xr)(i,e)}(t,e.ignoreTransactions))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${(0,l.$X)(t)}`),!0;if(function(t,e){if(!e||!e.length)return!1;const i=f(t);return!!i&&(0,c.Xr)(i,e)}(t,e.denyUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${(0,l.$X)(t)}.\nUrl: ${f(t)}`),!0;if(!function(t,e){if(!e||!e.length)return!0;const i=f(t);return!i||(0,c.Xr)(i,e)}(t,e.allowUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${(0,l.$X)(t)}.\nUrl: ${f(t)}`),!0;return!1}(t,s)?null:t}}return t};i.id=this.name,t(i)}}function f(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const i=t[e];if(i&&"<anonymous>"!==i.filename&&"[native code]"!==i.filename)return i.filename||null}return null}(e):null}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error(`Cannot extract url for event ${(0,l.$X)(t)}`),null}}p.__initStatic();const m=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function g(t,e=!1){const{host:i,path:n,pass:r,port:s,projectId:o,protocol:a,publicKey:h}=t;return`${a}://${h}${e&&r?`:${r}`:""}@${i}${s?`:${s}`:""}/${n?`${n}/`:n}${o}`}function _(t){const e=m.exec(t);if(!e)return void console.error(`Invalid Sentry Dsn: ${t}`);const[i,n,r="",s,o="",a]=e.slice(1);let h="",l=a;const c=l.split("/");if(c.length>1&&(h=c.slice(0,-1).join("/"),l=c.pop()),l){const t=l.match(/^\d+/);t&&(l=t[0])}return y({host:s,pass:r,path:h,projectId:l,port:o,protocol:i,publicKey:n})}function y(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function v(t){const e="string"==typeof t?_(t):y(t);if(e&&function(t){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port:e,projectId:i,protocol:n}=t;return!(["protocol","publicKey","host","projectId"].find((e=>!t[e]&&(h.vF.error(`Invalid Sentry Dsn: ${e} missing`),!0)))||(i.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(n)?e&&isNaN(parseInt(e,10))&&(h.vF.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(h.vF.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(h.vF.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}var b=i(9996);var w=i(537);function S(t,e=100,i=1/0){try{return x("",t,e,i)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function T(t,e=3,i=102400){const n=S(t,e);return r=n,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(r))>i?T(t,e-1,i):n;var r}function x(t,e,n=1/0,r=1/0,o=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(i){if(t)return!!e.has(i)||(e.add(i),!1);for(let t=0;t<e.length;t++)if(e[t]===i)return!0;return e.push(i),!1},function(i){if(t)e.delete(i);else for(let t=0;t<e.length;t++)if(e[t]===i){e.splice(t,1);break}}]}()){const[a,h]=o;if(null==e||["number","boolean","string"].includes(typeof e)&&!(0,b.yr)(e))return e;const l=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(void 0!==i.g&&e===i.g)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if((0,b.L2)(e))return"[VueViewModel]";if((0,b.mE)(e))return"[SyntheticEvent]";if("number"==typeof e&&e!=e)return"[NaN]";if("function"==typeof e)return`[Function: ${(0,w.qQ)(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const n=function(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(t){return`**non-serializable** (${t})`}}(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const c="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:n;if(0===c)return l.replace("object ","");if(a(e))return"[Circular ~]";const u=e;if(u&&"function"==typeof u.toJSON)try{return x("",u.toJSON(),c-1,r,o)}catch(t){}const d=Array.isArray(e)?[]:{};let p=0;const f=(0,s.W4)(e);for(const t in f){if(!Object.prototype.hasOwnProperty.call(f,t))continue;if(p>=r){d[t]="[MaxProperties ~]";break}const e=f[t];d[t]=x(t,e,c-1,r,o),p++}return h(e),d}function E(t,e=[]){return[t,e]}function A(t,e){const[i,n]=t;return[i,[...n,e]]}function I(t,e){const i=t[1];for(const t of i){if(e(t,t[0].type))return!0}return!1}function C(t,e){return(e||new TextEncoder).encode(t)}function P(t,e){const[i,n]=t;let r=JSON.stringify(i);function s(t){"string"==typeof r?r="string"==typeof t?r+t:[C(r,e),t]:r.push("string"==typeof t?C(t,e):t)}for(const t of n){const[e,i]=t;if(s(`\n${JSON.stringify(e)}\n`),"string"==typeof i||i instanceof Uint8Array)s(i);else{let t;try{t=JSON.stringify(i)}catch(e){t=JSON.stringify(S(i))}s(t)}}return"string"==typeof r?r:function(t){const e=t.reduce(((t,e)=>t+e.length),0),i=new Uint8Array(e);let n=0;for(const e of t)i.set(e,n),n+=e.length;return i}(r)}function R(t,e){const i="string"==typeof t.data?C(t.data,e):t.data;return[(0,s.Ce)({type:"attachment",length:i.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),i]}const O={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function k(t){return O[t]}function M(t){if(!t||!t.sdk)return;const{name:e,version:i}=t.sdk;return{name:e,version:i}}function D(t,e,i,n){const r=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!i&&{dsn:g(n)},...r&&{trace:(0,s.Ce)({...r})}}}var N=i(3289);const L=new Map,B=new Set;function F(t,e){return function(t){if(N.OW._sentryModuleMetadata)for(const e of Object.keys(N.OW._sentryModuleMetadata)){const i=N.OW._sentryModuleMetadata[e];if(B.has(e))continue;B.add(e);const n=t(e);for(const t of n.reverse())if(t.filename){L.set(t.filename,i);break}}}(t),L.get(e)}class U{static __initStatic(){this.id="ModuleMetadata"}constructor(){this.name=U.id}setupOnce(t,e){const i=e().getClient();if(!i||"function"!=typeof i.on)return;i.on("beforeEnvelope",(t=>{I(t,((t,e)=>{if("event"===e){const e=Array.isArray(t)?t[1]:void 0;e&&(!function(t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const e of t.stacktrace.frames||[])delete e.module_metadata}))}catch(t){}}(e),t[1]=e)}}))}));const n=i.getOptions().stackParser;t((t=>(function(t,e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const i of e.stacktrace.frames||[]){if(!i.filename)continue;const e=F(t,i.filename);e&&(i.module_metadata=e)}}))}catch(t){}}(n,t),t)))}}U.__initStatic();const G="7.72.0";var j=i(1205);function H(t,e){return(0,j.BF)().captureException(t,{captureContext:e})}function z(t,e){const i="string"==typeof e?e:void 0,n="string"!=typeof e?{captureContext:e}:void 0;return(0,j.BF)().captureMessage(t,i,n)}function W(t,e){return(0,j.BF)().captureEvent(t,e)}function V(t){(0,j.BF)().configureScope(t)}function X(t){(0,j.BF)().addBreadcrumb(t)}function Y(t,e){(0,j.BF)().setContext(t,e)}function q(t){(0,j.BF)().setExtras(t)}function $(t,e){(0,j.BF)().setExtra(t,e)}function K(t){(0,j.BF)().setTags(t)}function J(t,e){(0,j.BF)().setTag(t,e)}function Z(t){(0,j.BF)().setUser(t)}function Q(t){(0,j.BF)().withScope(t)}function tt(t,e){return(0,j.BF)().startTransaction({...t},e)}async function et(t){const e=(0,j.BF)().getClient();return e?e.flush(t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function it(t){const e=(0,j.BF)().getClient();return e?e.close(t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function nt(){return(0,j.BF)().lastEventId()}class rt extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}var st=i(1694);function ot(t){const e=[];function i(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(n){if(!(void 0===t||e.length<t))return(0,st.xg)(new rt("Not adding Promise because buffer limit was reached."));const r=n();return-1===e.indexOf(r)&&e.push(r),r.then((()=>i(r))).then(null,(()=>i(r).then(null,(()=>{})))),r},drain:function(t){return new st.T2(((i,n)=>{let r=e.length;if(!r)return i(!0);const s=setTimeout((()=>{t&&t>0&&i(!1)}),t);e.forEach((t=>{(0,st.XW)(t).then((()=>{--r||(clearTimeout(s),i(!0))}),n)}))}))}}}const at=6e4;function ht(t,e=Date.now()){const i=parseInt(`${t}`,10);if(!isNaN(i))return 1e3*i;const n=Date.parse(`${t}`);return isNaN(n)?at:n-e}const lt=30;function ct(t,e,i=ot(t.bufferSize||lt)){let n={};function r(r){const s=[];if(I(r,((e,i)=>{const r=k(i);if(function(t,e,i=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>i}(n,r)){const n=ut(e,i);t.recordDroppedEvent("ratelimit_backoff",r,n)}else s.push(e)})),0===s.length)return(0,st.XW)();const o=E(r[0],s),a=e=>{I(o,((i,n)=>{const r=ut(i,n);t.recordDroppedEvent(e,k(n),r)}))};return i.add((()=>e({body:P(o,t.textEncoder)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),n=function(t,{statusCode:e,headers:i},n=Date.now()){const r={...t},s=i&&i["x-sentry-rate-limits"],o=i&&i["retry-after"];if(s)for(const t of s.trim().split(",")){const[e,i]=t.split(":",2),s=parseInt(e,10),o=1e3*(isNaN(s)?60:s);if(i)for(const t of i.split(";"))r[t]=n+o;else r.all=n+o}else o?r.all=n+ht(o,n):429===e&&(r.all=n+6e4);return r}(n,t),t)),(t=>{throw a("network_error"),t})))).then((t=>t),(t=>{if(t instanceof rt)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("Skipped sending event because buffer is full."),a("queue_overflow"),(0,st.XW)();throw t}))}return r.__sentry__baseTransport__=!0,{send:r,flush:t=>i.drain(t)}}function ut(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}const dt="7";function pt(t){const e=t.protocol?`${t.protocol}:`:"",i=t.port?`:${t.port}`:"";return`${e}//${t.host}${i}${t.path?`/${t.path}`:""}/api/`}function ft(t,e={}){const i="string"==typeof e?e:e.tunnel,n="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return i||`${function(t){return`${pt(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return(0,s.u4)({sentry_key:t.publicKey,sentry_version:dt,...e&&{sentry_client:`${e.name}/${e.version}`}})}(t,n)}`}function mt(t,e){let i;return I(t,((t,n)=>(e.includes(n)&&(i=Array.isArray(t)?t[1]:void 0),!!i))),i}function gt(t,e){return i=>{const n=t(i),r={};function s(e,n){const s=n?`${e}:${n}`:e;if(!r[s]){const o=_(e);if(!o)return;const a=ft(o);r[s]=n?function(t,e){return i=>{const n=t(i);return{send:async t=>{const i=mt(t,["event","transaction","profile","replay_event"]);return i&&(i.release=e),n.send(t)},flush:t=>n.flush(t)}}}(t,n)({...i,url:a}):t({...i,url:a})}return r[s]}return{send:async function(t){const i=e({envelope:t,getEvent:function(e){const i=e&&e.length?e:["event"];return mt(t,i)}}).map((t=>"string"==typeof t?s(t,void 0):s(t.dsn,t.release))).filter((t=>!!t));return 0===i.length&&i.push(n),(await Promise.all(i.map((e=>e.send(t)))))[0]},flush:async function(t){const e=[...Object.keys(r).map((t=>r[t])),n];return(await Promise.all(e.map((e=>e.flush(t))))).every((t=>t))}}}}var _t=i(9122);function yt(t,e,i){const n=(0,_t.Z7)();n&&n.setMeasurement(t,e,i)}var vt=i(3458),bt=i(4479),wt=i(3468),St=i(8768),Tt=i(7958),xt=i(5827);const Et=N.OW;let At=0;function It(){return At>0}function Ct(t,e={},i){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if((0,s.sp)(t))return t}catch(e){return t}const n=function(){const n=Array.prototype.slice.call(arguments);try{i&&"function"==typeof i&&i.apply(this,arguments);const r=n.map((t=>Ct(t,e)));return t.apply(this,r)}catch(t){throw At++,setTimeout((()=>{At--})),Q((i=>{i.addEventProcessor((t=>(e.mechanism&&((0,l.gO)(t,void 0,void 0),(0,l.M6)(t,e.mechanism)),t.extra={...t.extra,arguments:n},t))),H(t)})),t}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}catch(t){}(0,s.pO)(n,t),(0,s.my)(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>t.name})}catch(t){}return n}const Pt=[];function Rt(t){const e=t.defaultIntegrations||[],i=t.integrations;let n;e.forEach((t=>{t.isDefaultInstance=!0})),n=Array.isArray(i)?[...e,...i]:"function"==typeof i?(0,l.k9)(i(e)):e;const r=function(t){const e={};return t.forEach((t=>{const{name:i}=t,n=e[i];n&&!n.isDefaultInstance&&t.isDefaultInstance||(e[i]=t)})),Object.keys(e).map((t=>e[t]))}(n),s=function(t,e){for(let i=0;i<t.length;i++)if(!0===e(t[i]))return i;return-1}(r,(t=>"Debug"===t.name));if(-1!==s){const[t]=r.splice(s,1);r.push(t)}return r}function Ot(t,e,i){if(i[e.name]=e,-1===Pt.indexOf(e.name)&&(e.setupOnce(bt.lb,j.BF),Pt.push(e.name)),t.on&&"function"==typeof e.preprocessEvent){const i=e.preprocessEvent.bind(e);t.on("preprocessEvent",((e,n)=>i(e,n,t)))}if(t.addEventProcessor&&"function"==typeof e.processEvent){const i=e.processEvent.bind(e),n=Object.assign(((e,n)=>i(e,n,t)),{id:e.name});t.addEventProcessor(n)}("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`Integration installed: ${e.name}`)}var kt=i(8822),Mt=i(4800),Dt=i(2461),Nt=i(2667);function Lt(t,e,i,n,r){const{normalizeDepth:s=3,normalizeMaxBreadth:o=1e3}=t,a={...e,event_id:e.event_id||i.event_id||(0,l.eJ)(),timestamp:e.timestamp||(0,Dt.lu)()},h=i.integrations||t.integrations.map((t=>t.name));!function(t,e){const{environment:i,release:n,dist:r,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?i:Nt.U);void 0===t.release&&void 0!==n&&(t.release=n);void 0===t.dist&&void 0!==r&&(t.dist=r);t.message&&(t.message=(0,c.xv)(t.message,s));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=(0,c.xv)(o.value,s));const a=t.request;a&&a.url&&(a.url=(0,c.xv)(a.url,s))}(a,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(a,h),void 0===e.type&&function(t,e){const i=N.OW._sentryDebugIds;if(!i)return;let n;const r=Bt.get(e);r?n=r:(n=new Map,Bt.set(e,n));const s=Object.keys(i).reduce(((t,r)=>{let s;const o=n.get(r);o?s=o:(s=e(r),n.set(r,s));for(let e=s.length-1;e>=0;e--){const n=s[e];if(n.filename){t[n.filename]=i[r];break}}return t}),{});try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.filename&&(t.debug_id=s[t.filename])}))}))}catch(t){}}(a,t.stackParser);let u=n;i.captureContext&&(u=vt.H.clone(u).update(i.captureContext));let d=(0,st.XW)(a);const p=r&&r.getEventProcessors?r.getEventProcessors():[];if(u){if(u.getAttachments){const t=[...i.attachments||[],...u.getAttachments()];t.length&&(i.attachments=t)}d=u.applyToEvent(a,i,p)}else d=(0,bt.jB)([...p,...(0,bt.lG)()],a,i);return d.then((t=>(t&&function(t){const e={};try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)}))}))}catch(t){}if(0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const i=t.debug_meta.images;Object.keys(e).forEach((t=>{i.push({type:"sourcemap",code_file:t,debug_id:e[t]})}))}(t),"number"==typeof s&&s>0?function(t,e,i){if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:S(t.data,e,i)}})))},...t.user&&{user:S(t.user,e,i)},...t.contexts&&{contexts:S(t.contexts,e,i)},...t.extra&&{extra:S(t.extra,e,i)}};t.contexts&&t.contexts.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=S(t.contexts.trace.data,e,i)));t.spans&&(n.spans=t.spans.map((t=>(t.data&&(t.data=S(t.data,e,i)),t))));return n}(t,s,o):t)))}const Bt=new WeakMap;const Ft="Not capturing exception because it's already been captured.";class Ut{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=v(t.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("No DSN provided, client will not do anything."),this._dsn){const e=ft(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,i){if((0,l.GR)(t))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(Ft));let n=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,i))).then((t=>{n=t}))),n}captureMessage(t,e,i,n){let r=i&&i.event_id;const s=(0,b.sO)(t)?this.eventFromMessage(String(t),e,i):this.eventFromException(t,i);return this._process(s.then((t=>this._captureEvent(t,i,n))).then((t=>{r=t}))),r}captureEvent(t,e,i){if(e&&e.originalException&&(0,l.GR)(e.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(Ft));let n=e&&e.event_id;return this._process(this._captureEvent(t,e,i).then((t=>{n=t}))),n}captureSession(t){this._isEnabled()?"string"!=typeof t.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),(0,kt.qO)(t,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?this._isClientDoneProcessing(t).then((i=>e.flush(t).then((t=>i&&t)))):(0,st.XW)(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(t,e){const i={};return e.forEach((e=>{e&&Ot(t,e,i)})),i}(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){Ot(this,t,this._integrations)}sendEvent(t,e={}){if(this.emit("beforeSendEvent",t,e),this._dsn){let i=function(t,e,i,n){const r=M(i),s=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,i&&i.sdk);const o=D(t,r,n,e);return delete t.sdkProcessingMetadata,E(o,[[{type:s},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])i=A(i,R(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(i);n&&n.then((e=>this.emit("afterSendEvent",t,e)),null)}}sendSession(t){if(this._dsn){const e=function(t,e,i,n){const r=M(i);return E({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!n&&{dsn:g(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}}recordDroppedEvent(t,e,i){if(this._options.sendClientReports){const i=`${t}:${e}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_updateSessionFromEvent(t,e){let i=!1,n=!1;const r=e.exception&&e.exception.values;if(r){n=!0;for(const t of r){const e=t.mechanism;if(e&&!1===e.handled){i=!0;break}}}const s="ok"===t.status;(s&&0===t.errors||s&&i)&&((0,kt.qO)(t,{...i&&{status:"crashed"},errors:t.errors||Number(n||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new st.T2((e=>{let i=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),e(!0)):(i+=1,t&&i>=t&&(clearInterval(n),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(t,e,i){const n=this.getOptions(),r=Object.keys(this._integrations);return!e.integrations&&r.length>0&&(e.integrations=r),this.emit("preprocessEvent",t,e),Lt(n,t,e,i,this).then((t=>{if(null===t)return t;const{propagationContext:e}=t.sdkProcessingMetadata||{};if(!(t.contexts&&t.contexts.trace)&&e){const{traceId:n,spanId:r,parentSpanId:s,dsc:o}=e;t.contexts={trace:{trace_id:n,span_id:r,parent_span_id:s},...t.contexts};const a=o||(0,Mt.l)(n,this,i);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},i){return this._processEvent(t,e,i).then((t=>t.event_id),(t=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const e=t;"log"===e.logLevel?h.vF.log(e.message):h.vF.warn(e)}}))}_processEvent(t,e,i){const n=this.getOptions(),{sampleRate:r}=n;if(!this._isEnabled())return(0,st.xg)(new rt("SDK not enabled, will not capture event.","log"));const s=jt(t),o=Gt(t),a=t.type||"error",h=`before send for type \`${a}\``;if(o&&"number"==typeof r&&Math.random()>r)return this.recordDroppedEvent("sample_rate","error",t),(0,st.xg)(new rt(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const l="replay_event"===a?"replay":a;return this._prepareEvent(t,e,i).then((i=>{if(null===i)throw this.recordDroppedEvent("event_processor",l,t),new rt("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return i;const r=function(t,e,i){const{beforeSend:n,beforeSendTransaction:r}=t;if(Gt(e)&&n)return n(e,i);if(jt(e)&&r)return r(e,i);return e}(n,i,e);return function(t,e){const i=`${e} must return \`null\` or a valid event.`;if((0,b.Qg)(t))return t.then((t=>{if(!(0,b.Qd)(t)&&null!==t)throw new rt(i);return t}),(t=>{throw new rt(`${e} rejected with ${t}`)}));if(!(0,b.Qd)(t)&&null!==t)throw new rt(i);return t}(r,h)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",l,t),new rt(`${h} returned \`null\`, will not send event.`,"log");const r=i&&i.getSession();!s&&r&&this._updateSessionFromEvent(r,n);const o=n.transaction_info;if(s&&o&&n.transaction!==t.transaction){const t="custom";n.transaction_info={...o,source:t}}return this.sendEvent(n,e),n})).then(null,(t=>{if(t instanceof rt)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new rt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",t),this._transport.send(t).then(null,(t=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("Error while sending event:",t)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[i,n]=e.split(":");return{reason:i,category:n,quantity:t[e]}}))}}function Gt(t){return void 0===t.type}function jt(t){return"transaction"===t.type}var Ht=i(3369);function zt(t,e){const i=Vt(t,e),n={type:e&&e.name,value:Yt(e)};return i.length&&(n.stacktrace={frames:i}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Wt(t,e){return{exception:{values:[zt(t,e)]}}}function Vt(t,e){const i=e.stacktrace||e.stack||"",n=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(Xt.test(t.message))return 1}return 0}(e);try{return t(i,n)}catch(t){}return[]}const Xt=/Minified React error #\d+;/i;function Yt(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function qt(t,e,i,n){const r=Kt(t,e,i&&i.syntheticException||void 0,n);return(0,l.M6)(r),r.level="error",i&&i.event_id&&(r.event_id=i.event_id),(0,st.XW)(r)}function $t(t,e,i="info",n,r){const s=Jt(t,e,n&&n.syntheticException||void 0,r);return s.level=i,n&&n.event_id&&(s.event_id=n.event_id),(0,st.XW)(s)}function Kt(t,e,i,n,r){let s;if((0,b.T2)(e)&&e.error){return Wt(t,e.error)}if((0,b.BD)(e)||(0,b.W6)(e)){const r=e;if("stack"in e)s=Wt(t,e);else{const e=r.name||((0,b.BD)(r)?"DOMError":"DOMException"),o=r.message?`${e}: ${r.message}`:e;s=Jt(t,o,i,n),(0,l.gO)(s,o)}return"code"in r&&(s.tags={...s.tags,"DOMException.code":`${r.code}`}),s}if((0,b.bJ)(e))return Wt(t,e);if((0,b.Qd)(e)||(0,b.xH)(e)){return s=function(t,e,i,n){const r=(0,j.BF)().getClient(),s=r&&r.getOptions().normalizeDepth,o={exception:{values:[{type:(0,b.xH)(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:Zt(e,{isUnhandledRejection:n})}]},extra:{__serialized__:T(e,s)}};if(i){const e=Vt(t,i);e.length&&(o.exception.values[0].stacktrace={frames:e})}return o}(t,e,i,r),(0,l.M6)(s,{synthetic:!0}),s}return s=Jt(t,e,i,n),(0,l.gO)(s,`${e}`,void 0),(0,l.M6)(s,{synthetic:!0}),s}function Jt(t,e,i,n){const r={message:e};if(n&&i){const n=Vt(t,i);n.length&&(r.exception={values:[{value:e,stacktrace:{frames:n}}]})}return r}function Zt(t,{isUnhandledRejection:e}){const i=(0,s.HF)(t),n=e?"promise rejection":"exception";if((0,b.T2)(t))return`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``;if((0,b.xH)(t)){return`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch(t){}}(t)}\` (type=${t.type}) captured as ${n}`}return`Object captured as ${n} with keys: ${i}`}function Qt(t,{metadata:e,tunnel:i,dsn:n}){const r={event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!i&&!!n&&{dsn:g(n)}},s=function(t){return[{type:"user_report"},t]}(t);return E(r,[s])}class te extends Ut{constructor(t){const e=Et.SENTRY_SDK_SOURCE||(0,Ht.e)();t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${e}:@sentry/browser`,version:G}],version:G},super(t),t.sendClientReports&&Et.document&&Et.document.addEventListener("visibilitychange",(()=>{"hidden"===Et.document.visibilityState&&this._flushOutcomes()}))}eventFromException(t,e){return qt(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",i){return $t(this._options.stackParser,t,e,i,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("SDK not enabled, will not capture user feedback."));const e=Qt(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(t,e,i){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,i)}_flushOutcomes(){const t=this._clearOutcomes();if(0===t.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("Sending outcomes:",t);const e=(i=t,E((n=this._options.tunnel&&g(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:r||(0,Dt.lu)(),discarded_events:i}]]));var i,n,r;this._sendEnvelope(e)}}var ee=i(6900);let ie;function ne(t,e=function(){if(ie)return ie;if((0,ee.ap)(Et.fetch))return ie=Et.fetch.bind(Et);const t=Et.document;let e=Et.fetch;if(t&&"function"==typeof t.createElement)try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i);const n=i.contentWindow;n&&n.fetch&&(e=n.fetch),t.head.removeChild(i)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return ie=e.bind(Et)}()){let i=0,n=0;return ct(t,(function(r){const s=r.body.length;i+=s,n++;const o={body:r.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:i<=6e4&&n<15,...t.fetchOptions};try{return e(t.url,o).then((t=>(i-=s,n--,{statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}catch(t){return ie=void 0,i-=s,n--,(0,st.xg)(t)}}))}const re=4;function se(t){return ct(t,(function(e){return new st.T2(((i,n)=>{const r=new XMLHttpRequest;r.onerror=n,r.onreadystatechange=()=>{r.readyState===re&&i({statusCode:r.status,headers:{"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")}})},r.open("POST",t.url);for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&r.setRequestHeader(e,t.headers[e]);r.send(e.body)}))}))}const oe="?";function ae(t,e,i,n){const r={filename:t,function:e,in_app:!0};return void 0!==i&&(r.lineno=i),void 0!==n&&(r.colno=n),r}const he=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,le=/\((\S*)(?::(\d+))(?::(\d+))\)/,ce=[30,t=>{const e=he.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const t=le.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}const[t,i]=Se(e[1]||oe,e[2]);return ae(i,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],ue=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,de=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,pe=[50,t=>{const e=ue.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=de.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],i=e[1]||oe;return[i,t]=Se(i,t),ae(t,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],fe=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,me=[40,t=>{const e=fe.exec(t);return e?ae(e[2],e[1]||oe,+e[3],e[4]?+e[4]:void 0):void 0}],ge=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,_e=[10,t=>{const e=ge.exec(t);return e?ae(e[2],e[3]||oe,+e[1]):void 0}],ye=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,ve=[20,t=>{const e=ye.exec(t);return e?ae(e[5],e[3]||e[4]||oe,+e[1],+e[2]):void 0}],be=[ce,pe,me],we=(0,w.gd)(...be),Se=(t,e)=>{const i=-1!==t.indexOf("safari-extension"),n=-1!==t.indexOf("safari-web-extension");return i||n?[-1!==t.indexOf("@")?t.split("@")[0]:oe,i?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};var Te=i(8434),xe=i(5514);class Ee{static __initStatic(){this.id="GlobalHandlers"}constructor(t){this.name=Ee.id,this._options={onerror:!0,onunhandledrejection:!0,...t},this._installFunc={onerror:Ae,onunhandledrejection:Ie}}setupOnce(){Error.stackTraceLimit=50;const t=this._options;for(const i in t){const n=this._installFunc[i];n&&t[i]&&(e=i,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`Global Handler attached: ${e}`),n(),this._installFunc[i]=void 0)}var e}}function Ae(){(0,Te.ON)("error",(t=>{const[e,i,n]=Re();if(!e.getIntegration(Ee))return;const{msg:r,url:s,line:o,column:a,error:h}=t;if(It()||h&&h.__sentry_own_request__)return;const l=void 0===h&&(0,b.Kg)(r)?function(t,e,i,n){const r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=(0,b.T2)(t)?t.message:t,o="Error";const a=s.match(r);a&&(o=a[1],s=a[2]);const h={exception:{values:[{type:o,value:s}]}};return Ce(h,e,i,n)}(r,s,o,a):Ce(Kt(i,h||r,void 0,n,!1),s,o,a);l.level="error",Pe(e,h,l,"onerror")}))}function Ie(){(0,Te.ON)("unhandledrejection",(t=>{const[e,i,n]=Re();if(!e.getIntegration(Ee))return;let r=t;try{"reason"in t?r=t.reason:"detail"in t&&"reason"in t.detail&&(r=t.detail.reason)}catch(t){}if(It()||r&&r.__sentry_own_request__)return!0;const s=(0,b.sO)(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:Kt(i,r,void 0,n,!0);s.level="error",Pe(e,r,s,"onunhandledrejection")}))}function Ce(t,e,i,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},h=a.frames=a.frames||[],l=isNaN(parseInt(n,10))?void 0:n,c=isNaN(parseInt(i,10))?void 0:i,u=(0,b.Kg)(e)&&e.length>0?e:(0,xe.$N)();return 0===h.length&&h.push({colno:l,filename:u,function:"?",in_app:!0,lineno:c}),t}function Pe(t,e,i,n){(0,l.M6)(i,{handled:!1,type:n}),t.captureEvent(i,{originalException:e})}function Re(){const t=(0,j.BF)(),e=t.getClient(),i=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,i.stackParser,i.attachStacktrace]}Ee.__initStatic();const Oe=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class ke{static __initStatic(){this.id="TryCatch"}constructor(t){this.name=ke.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t}}setupOnce(){this._options.setTimeout&&(0,s.GS)(Et,"setTimeout",Me),this._options.setInterval&&(0,s.GS)(Et,"setInterval",Me),this._options.requestAnimationFrame&&(0,s.GS)(Et,"requestAnimationFrame",De),this._options.XMLHttpRequest&&"XMLHttpRequest"in Et&&(0,s.GS)(XMLHttpRequest.prototype,"send",Ne);const t=this._options.eventTarget;if(t){(Array.isArray(t)?t:Oe).forEach(Le)}}}function Me(t){return function(...e){const i=e[0];return e[0]=Ct(i,{mechanism:{data:{function:(0,w.qQ)(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function De(t){return function(e){return t.apply(this,[Ct(e,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,w.qQ)(t)},handled:!1,type:"instrument"}})])}}function Ne(t){return function(...e){const i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in i&&"function"==typeof i[t]&&(0,s.GS)(i,t,(function(e){const i={mechanism:{data:{function:t,handler:(0,w.qQ)(e)},handled:!1,type:"instrument"}},n=(0,s.sp)(e);return n&&(i.mechanism.data.handler=(0,w.qQ)(n)),Ct(e,i)}))})),t.apply(this,e)}}function Le(t){const e=Et,i=e[t]&&e[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&((0,s.GS)(i,"addEventListener",(function(e){return function(i,n,r){try{"function"==typeof n.handleEvent&&(n.handleEvent=Ct(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:(0,w.qQ)(n),target:t},handled:!1,type:"instrument"}}))}catch(t){}return e.apply(this,[i,Ct(n,{mechanism:{data:{function:"addEventListener",handler:(0,w.qQ)(n),target:t},handled:!1,type:"instrument"}}),r])}})),(0,s.GS)(i,"removeEventListener",(function(t){return function(e,i,n){const r=i;try{const i=r&&r.__sentry_wrapped__;i&&t.call(this,e,i,n)}catch(t){}return t.call(this,e,r,n)}})))}ke.__initStatic();const Be=["fatal","error","warning","log","info","debug"];function Fe(t){return"warn"===t?"warning":Be.includes(t)?t:"log"}var Ue=i(1915);const Ge=1024;class je{static __initStatic(){this.id="Breadcrumbs"}constructor(t){this.name=je.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t}}setupOnce(){if(this.options.console&&(0,Te.ON)("console",ze),this.options.dom&&(0,Te.ON)("dom",function(t){function e(e){let i,n="object"==typeof t?t.serializeAttribute:void 0,r="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;r&&r>Ge&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${r} was configured. Sentry will use 1024 instead.`),r=Ge),"string"==typeof n&&(n=[n]);try{const t=e.event;i=function(t){return!!t&&!!t.target}(t)?(0,xe.Hd)(t.target,{keyAttrs:n,maxStringLength:r}):(0,xe.Hd)(t,{keyAttrs:n,maxStringLength:r})}catch(t){i="<unknown>"}0!==i.length&&(0,j.BF)().addBreadcrumb({category:`ui.${e.name}`,message:i},{event:e.event,name:e.name,global:e.global})}return e}(this.options.dom)),this.options.xhr&&(0,Te.ON)("xhr",We),this.options.fetch&&(0,Te.ON)("fetch",Ve),this.options.history&&(0,Te.ON)("history",Xe),this.options.sentry){const t=(0,j.BF)().getClient();t&&t.on&&t.on("beforeSendEvent",He)}}}function He(t){(0,j.BF)().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:(0,l.$X)(t)},{event:t})}function ze(t){const e={category:"console",data:{arguments:t.args,logger:"console"},level:Fe(t.level),message:(0,c.gt)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message=`Assertion failed: ${(0,c.gt)(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1)}(0,j.BF)().addBreadcrumb(e,{input:t.args,level:t.level})}function We(t){const{startTimestamp:e,endTimestamp:i}=t,n=t.xhr[Te.Er];if(!e||!i||!n)return;const{method:r,url:s,status_code:o,body:a}=n,h={method:r,url:s,status_code:o},l={xhr:t.xhr,input:a,startTimestamp:e,endTimestamp:i};(0,j.BF)().addBreadcrumb({category:"xhr",data:h,type:"http"},l)}function Ve(t){const{startTimestamp:e,endTimestamp:i}=t;if(i&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){const n=t.fetchData,r={data:t.error,input:t.args,startTimestamp:e,endTimestamp:i};(0,j.BF)().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},r)}else{const n={...t.fetchData,status_code:t.response&&t.response.status},r={input:t.args,response:t.response,startTimestamp:e,endTimestamp:i};(0,j.BF)().addBreadcrumb({category:"fetch",data:n,type:"http"},r)}}function Xe(t){let e=t.from,i=t.to;const n=(0,Ue.Dl)(Et.location.href);let r=(0,Ue.Dl)(e);const s=(0,Ue.Dl)(i);r.path||(r=n),n.protocol===s.protocol&&n.host===s.host&&(i=s.relative),n.protocol===r.protocol&&n.host===r.host&&(e=r.relative),(0,j.BF)().addBreadcrumb({category:"navigation",data:{from:e,to:i}})}function Ye(t,e,i=250,n,r,s,o){if(!(s.exception&&s.exception.values&&o&&(0,b.tH)(o.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var h,l;a&&(s.exception.values=(h=qe(t,e,r,o.originalException,n,s.exception.values,a,0),l=i,h.map((t=>(t.value&&(t.value=(0,c.xv)(t.value,l)),t)))))}function qe(t,e,i,n,r,s,o,a){if(s.length>=i+1)return s;let h=[...s];if((0,b.tH)(n[r],Error)){$e(o,a);const s=t(e,n[r]),l=h.length;Ke(s,r,l,a),h=qe(t,e,i,n[r],r,[s,...h],s,l)}return Array.isArray(n.errors)&&n.errors.forEach(((n,s)=>{if((0,b.tH)(n,Error)){$e(o,a);const l=t(e,n),c=h.length;Ke(l,`errors[${s}]`,c,a),h=qe(t,e,i,n,r,[l,...h],l,c)}})),h}function $e(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function Ke(t,e,i,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:i,parent_id:n}}je.__initStatic();class Je{static __initStatic(){this.id="LinkedErrors"}constructor(t={}){this.name=Je.id,this._key=t.key||"cause",this._limit=t.limit||5}setupOnce(){}preprocessEvent(t,e,i){const n=i.getOptions();Ye(zt,n.stackParser,n.maxValueLength,this._key,this._limit,t,e)}}Je.__initStatic();class Ze{static __initStatic(){this.id="HttpContext"}constructor(){this.name=Ze.id}setupOnce(){}preprocessEvent(t){if(!Et.navigator&&!Et.location&&!Et.document)return;const e=t.request&&t.request.url||Et.location&&Et.location.href,{referrer:i}=Et.document||{},{userAgent:n}=Et.navigator||{},r={...t.request&&t.request.headers,...i&&{Referer:i},...n&&{"User-Agent":n}},s={...t.request,...e&&{url:e},headers:r};t.request=s}}Ze.__initStatic();class Qe{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Qe.id}setupOnce(t,e){}processEvent(t){if(t.type)return t;try{if(function(t,e){if(!e)return!1;if(function(t,e){const i=t.message,n=e.message;if(!i&&!n)return!1;if(i&&!n||!i&&n)return!1;if(i!==n)return!1;if(!ei(t,e))return!1;if(!ti(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const i=ii(e),n=ii(t);if(!i||!n)return!1;if(i.type!==n.type||i.value!==n.value)return!1;if(!ei(t,e))return!1;if(!ti(t,e))return!1;return!0}(t,e))return!0;return!1}(t,this._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return this._previousEvent=t}}function ti(t,e){let i=ni(t),n=ni(e);if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;if(n.length!==i.length)return!1;for(let t=0;t<n.length;t++){const e=n[t],r=i[t];if(e.filename!==r.filename||e.lineno!==r.lineno||e.colno!==r.colno||e.function!==r.function)return!1}return!0}function ei(t,e){let i=t.fingerprint,n=e.fingerprint;if(!i&&!n)return!0;if(i&&!n||!i&&n)return!1;try{return!(i.join("")!==n.join(""))}catch(t){return!1}}function ii(t){return t.exception&&t.exception.values&&t.exception.values[0]}function ni(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}Qe.__initStatic();const ri=[new p,new a,new ke,new je,new Ee,new Je,new Qe,new Ze];function si(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=ri),void 0===t.release&&("string"==typeof __SENTRY_RELEASE__&&(t.release=__SENTRY_RELEASE__),Et.SENTRY_RELEASE&&Et.SENTRY_RELEASE.id&&(t.release=Et.SENTRY_RELEASE.id)),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);const e={...t,stackParser:(0,w.vk)(t.stackParser||we),integrations:Rt(t),transport:t.transport||((0,ee.vm)()?ne:se)};!function(t,e){!0===e.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?h.vF.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const i=(0,j.BF)();i.getScope().update(e.initialScope);const n=new t(e);i.bindClient(n)}(te,e),t.autoSessionTracking&&function(){if(void 0===Et.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));const t=(0,j.BF)();if(!t.captureSession)return;ci(t),(0,Te.ON)("history",(({from:t,to:e})=>{void 0!==t&&t!==e&&ci((0,j.BF)())}))}()}function oi(t={},e=(0,j.BF)()){if(!Et.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("Global document not defined in showReportDialog call"));const{client:i,scope:n}=e.getStackTop(),r=t.dsn||i&&i.getDsn();if(!r)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("DSN not configured for showReportDialog call"));n&&(t.user={...n.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const s=Et.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=function(t,e){const i=v(t);if(!i)return"";const n=`${pt(i)}embed/error-page/`;let r=`dsn=${g(i)}`;for(const t in e)if("dsn"!==t)if("user"===t){const t=e.user;if(!t)continue;t.name&&(r+=`&name=${encodeURIComponent(t.name)}`),t.email&&(r+=`&email=${encodeURIComponent(t.email)}`)}else r+=`&${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`;return`${n}?${r}`}(r,t),t.onLoad&&(s.onload=t.onLoad);const o=Et.document.head||Et.document.body;o?o.appendChild(s):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("Not injecting report dialog. No injection point found in HTML")}function ai(){}function hi(t){t()}function li(t){return Ct(t)()}function ci(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function ui(t){const e=(0,j.BF)().getClient();e&&e.captureUserFeedback(t)}var di=i(3344);const pi=N.OW,fi="sentryReplaySession",mi="Unable to send Replay",gi=15e4,_i=5e3,yi=2e7,vi=36e5;var bi;function wi(t){const e=null==t?void 0:t.host;return Boolean(e&&e.shadowRoot&&e.shadowRoot===t)}function Si({maskInputOptions:t,tagName:e,type:i}){"option"===e.toLowerCase()&&(e="select");const n="string"==typeof i?i.toLowerCase():void 0;return t[e.toLowerCase()]||n&&t[n]||"password"===n||"input"===e&&!i&&t.text}function Ti({input:t,maskInputSelector:e,unmaskInputSelector:i,maskInputOptions:n,tagName:r,type:s,value:o,maskInputFn:a}){let h=o||"";return i&&t.matches(i)||(t.hasAttribute("data-rr-is-password")&&(s="password"),(Si({maskInputOptions:n,tagName:r,type:s})||e&&t.matches(e))&&(h=a?a(h):"*".repeat(h.length))),h}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(bi||(bi={}));const xi="__rrweb_original__";function Ei(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?e.toLowerCase():null}function Ai(t,e,i){return"string"==typeof i&&i.toLowerCase(),"INPUT"!==e||"radio"!==i&&"checkbox"!==i?t.value:t.getAttribute("value")||""}let Ii=1;const Ci=new RegExp("[^a-z0-9-_:]");function Pi(t){return t?t.replace(/[\S]/g,"*"):""}function Ri(t){try{const e=t.rules||t.cssRules;return e?Array.from(e).map(Oi).join(""):null}catch(t){return null}}function Oi(t){let e=t.cssText;if(function(t){return"styleSheet"in t}(t))try{e=Ri(t.styleSheet)||e}catch(t){}return ki(e)}function ki(t){if(t.indexOf(":")>-1){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}return t}let Mi,Di;const Ni=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Li=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Bi=/^(data:)([^,]*),(.*)/i;function Fi(t,e){return(t||"").replace(Ni,((t,i,n,r,s,o)=>{const a=n||s||o,h=i||r||"";if(!a)return t;if(!Li.test(a))return`url(${h}${a}${h})`;if(Bi.test(a))return`url(${h}${a}${h})`;if("/"===a[0])return`url(${h}${function(t){let e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}(e)+a}${h})`;const l=e.split("/"),c=a.split("/");l.pop();for(const t of c)"."!==t&&(".."===t?l.pop():l.push(t));return`url(${h}${l.join("/")}${h})`}))}const Ui=/^[^ \t\n\r\u000c]+/,Gi=/^[, \t\n\r\u000c]+/;function ji(t,e){if(!e||""===e.trim())return e;const i=t.createElement("a");return i.href=e,i.href}function Hi(){const t=document.createElement("a");return t.href="",t.href}function zi(t,e,i,n,r,s,o,a){if(!r)return r;const h=n.toLowerCase(),l=i.toLowerCase();return"src"===h||"href"===h||"xlink:href"===h&&"#"!==r[0]?ji(t,r):"background"!==h||"table"!==l&&"td"!==l&&"th"!==l?"srcset"===h?function(t,e){if(""===e.trim())return e;let i=0;function n(t){let n,r=t.exec(e.substring(i));return r?(n=r[0],i+=n.length,n):""}let r=[];for(;n(Gi),!(i>=e.length);){let s=n(Ui);if(","===s.slice(-1))s=ji(t,s.substring(0,s.length-1)),r.push(s);else{let n="";s=ji(t,s);let o=!1;for(;;){let t=e.charAt(i);if(""===t){r.push((s+n).trim());break}if(o)")"===t&&(o=!1);else{if(","===t){i+=1,r.push((s+n).trim());break}"("===t&&(o=!0)}n+=t,i+=1}}}return r.join(", ")}(t,r):"style"===h?Fi(r,Hi()):"object"===l&&"data"===h?ji(t,r):s&&function(t,e,i,n){if(n&&t.matches(n))return!1;return["placeholder","title","aria-label"].indexOf(e)>-1||"input"===i&&"value"===e&&t.hasAttribute("type")&&["submit","button"].indexOf(t.getAttribute("type").toLowerCase())>-1}(e,h,l,o)?a?a(r):Pi(r):r:ji(t,r)}function Wi(t,e,i,n,r){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return Wi(t.parentNode,e,i,n,r);if(n&&(t.matches(n)||t.closest(n)))return!1;if(r)return!0;if("string"==typeof e){if(t.classList.contains(e))return!0}else for(let i=0;i<t.classList.length;i++){const n=t.classList[i];if(e.test(n))return!0}return!(!i||!t.matches(i))||Wi(t.parentNode,e,i,n,r)}function Vi(t,e){var i;const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:a,maskTextSelector:h,unmaskTextSelector:l,inlineStylesheet:c,maskInputSelector:u,unmaskInputSelector:d,maskAllText:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:_={},inlineImages:y,recordCanvas:v,keepIframeSrcFn:b}=e;let w;if(n.__sn){const t=n.__sn.id;w=1===t?void 0:t}switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:bi.Document,childNodes:[],compatMode:t.compatMode,rootId:w}:{type:bi.Document,childNodes:[],rootId:w};case t.DOCUMENT_TYPE_NODE:return{type:bi.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:w};case t.ELEMENT_NODE:const e=function(t,e,i,n){if(n&&t.matches(n))return!1;if("string"==typeof e){if(t.classList.contains(e))return!0}else for(let i=0;i<t.classList.length;i++){const n=t.classList[i];if(e.test(n))return!0}return!!i&&t.matches(i)}(t,r,s,o),x=function(t){if(t instanceof HTMLFormElement)return"form";const e=t.tagName.toLowerCase().trim();return Ci.test(e)?"div":e}(t);let E={};for(const{name:e,value:i}of Array.from(t.attributes))qi(x,e)||(E[e]=zi(n,t,x,e,i,p,l,m));if("link"===x&&c){const e=Array.from(n.styleSheets).find((e=>e.href===t.href));let i=null;e&&(i=Ri(e)),i&&(delete E.rel,delete E.href,E._cssText=Fi(i,e.href))}if("style"===x&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=Ri(t.sheet);e&&(E._cssText=Fi(e,Hi()))}if("input"===x||"textarea"===x||"select"===x||"option"===x){const e=t,i=Ei(e),n=Ai(e,x.toUpperCase(),i),r=t.checked;"submit"!==i&&"button"!==i&&n&&(E.value=Ti({input:e,type:i,tagName:x,value:n,maskInputSelector:u,unmaskInputSelector:d,maskInputOptions:f,maskInputFn:g})),r&&(E.checked=r)}if("option"===x&&(t.selected&&!f.select?E.selected=!0:delete E.selected),"canvas"===x&&v)if("2d"===t.__context)(function(t){const e=t.getContext("2d");if(!e)return!0;for(let i=0;i<t.width;i+=50)for(let n=0;n<t.height;n+=50){const r=e.getImageData,s=xi in r?r[xi]:r;if(new Uint32Array(s.call(e,i,n,Math.min(50,t.width-i),Math.min(50,t.height-n)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(E.rr_dataURL=t.toDataURL(_.type,_.quality));else if(!("__context"in t)){const e=t.toDataURL(_.type,_.quality),i=document.createElement("canvas");i.width=t.width,i.height=t.height;e!==i.toDataURL(_.type,_.quality)&&(E.rr_dataURL=e)}if("img"===x&&y){Mi||(Mi=n.createElement("canvas"),Di=Mi.getContext("2d"));const e=t,i=e.crossOrigin;e.crossOrigin="anonymous";const r=()=>{try{Mi.width=e.naturalWidth,Mi.height=e.naturalHeight,Di.drawImage(e,0,0),E.rr_dataURL=Mi.toDataURL(_.type,_.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}i?E.crossOrigin=i:delete E.crossOrigin};e.complete&&0!==e.naturalWidth?r():e.onload=r}if("audio"!==x&&"video"!==x||(E.rr_mediaState=t.paused?"paused":"played",E.rr_mediaCurrentTime=t.currentTime),t.scrollLeft&&(E.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(E.rr_scrollTop=t.scrollTop),e){const{width:e,height:i}=t.getBoundingClientRect();E={class:E.class,rr_width:`${e}px`,rr_height:`${i}px`}}return"iframe"!==x||b(E.src)||(t.contentDocument||(E.rr_src=E.src),delete E.src),{type:bi.Element,tagName:x,attributes:E,childNodes:[],isSVG:(T=t,Boolean("svg"===T.tagName||T.ownerSVGElement)||void 0),needBlock:e,rootId:w};case t.TEXT_NODE:const A=t.parentNode&&t.parentNode.tagName;let I=t.textContent;const C="STYLE"===A||void 0,P="SCRIPT"===A||void 0;if(C&&I){try{t.nextSibling||t.previousSibling||(null===(i=t.parentNode.sheet)||void 0===i?void 0:i.cssRules)&&(I=(S=t.parentNode.sheet).cssRules?Array.from(S.cssRules).map((t=>t.cssText?ki(t.cssText):"")).join(""):"")}catch(e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${e}`,t)}I=Fi(I,Hi())}if(P&&(I="SCRIPT_PLACEHOLDER"),"TEXTAREA"===A&&I)I="";else if("OPTION"===A&&I){I=Ti({input:t.parentNode,type:null,tagName:A,value:I,maskInputSelector:u,unmaskInputSelector:d,maskInputOptions:f,maskInputFn:g})}else!C&&!P&&Wi(t,a,h,l,p)&&I&&(I=m?m(I):Pi(I));return{type:bi.Text,textContent:I||"",isStyle:C,rootId:w};case t.CDATA_SECTION_NODE:return{type:bi.CDATA,textContent:"",rootId:w};case t.COMMENT_NODE:return{type:bi.Comment,textContent:t.textContent||"",rootId:w};default:return!1}var S,T}function Xi(t){return null==t?"":t.toLowerCase()}function Yi(t,e){const{doc:i,map:n,blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:a,maskTextSelector:h,unmaskTextSelector:l,skipChild:c=!1,inlineStylesheet:u=!0,maskInputSelector:d,unmaskInputSelector:p,maskAllText:f,maskInputOptions:m={},maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:w=!1,onSerialize:S,onIframeLoad:T,iframeLoadTimeout:x=5e3,keepIframeSrcFn:E=()=>!1}=e;let{preserveWhiteSpace:A=!0}=e;const I=Vi(t,{doc:i,blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:a,maskTextSelector:h,unmaskTextSelector:l,inlineStylesheet:u,maskInputSelector:d,unmaskInputSelector:p,maskAllText:f,maskInputOptions:m,maskTextFn:g,maskInputFn:_,dataURLOptions:v,inlineImages:b,recordCanvas:w,keepIframeSrcFn:E});if(!I)return console.warn(t,"not serialized"),null;let C;C="__sn"in t?t.__sn.id:!function(t,e){if(e.comment&&t.type===bi.Comment)return!0;if(t.type===bi.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Xi(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Xi(t.attributes.name)||"icon"===Xi(t.attributes.rel)||"apple-touch-icon"===Xi(t.attributes.rel)||"shortcut icon"===Xi(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&Xi(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Xi(t.attributes.property).match(/^(og|twitter|fb):/)||Xi(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Xi(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===Xi(t.attributes.name)||"googlebot"===Xi(t.attributes.name)||"bingbot"===Xi(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===Xi(t.attributes.name)||"generator"===Xi(t.attributes.name)||"framework"===Xi(t.attributes.name)||"publisher"===Xi(t.attributes.name)||"progid"===Xi(t.attributes.name)||Xi(t.attributes.property).match(/^article:/)||Xi(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===Xi(t.attributes.name)||"yandex-verification"===Xi(t.attributes.name)||"csrf-token"===Xi(t.attributes.name)||"p:domain_verify"===Xi(t.attributes.name)||"verify-v1"===Xi(t.attributes.name)||"verification"===Xi(t.attributes.name)||"shopify-checkout-api-token"===Xi(t.attributes.name)))return!0}}return!1}(I,y)&&(A||I.type!==bi.Text||I.isStyle||I.textContent.replace(/^\s+|\s+$/gm,"").length)?Ii++:-2;const P=Object.assign(I,{id:C});if(t.__sn=P,-2===C)return null;n[C]=t,S&&S(t);let R=!c;if(P.type===bi.Element&&(R=R&&!P.needBlock,delete P.needBlock,t.shadowRoot&&(P.isShadowHost=!0)),(P.type===bi.Document||P.type===bi.Element)&&R){y.headWhitespace&&I.type===bi.Element&&"head"===I.tagName&&(A=!1);const e={doc:i,map:n,blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:a,maskTextSelector:h,unmaskTextSelector:l,skipChild:c,inlineStylesheet:u,maskInputSelector:d,unmaskInputSelector:p,maskAllText:f,maskInputOptions:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:w,preserveWhiteSpace:A,onSerialize:S,onIframeLoad:T,iframeLoadTimeout:x,keepIframeSrcFn:E};for(const i of Array.from(t.childNodes)){const t=Yi(i,e);t&&P.childNodes.push(t)}if(function(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const i of Array.from(t.shadowRoot.childNodes)){const t=Yi(i,e);t&&(t.isShadow=!0,P.childNodes.push(t))}}return t.parentNode&&wi(t.parentNode)&&(P.isShadow=!0),P.type===bi.Element&&"iframe"===P.tagName&&function(t,e,i){const n=t.contentWindow;if(!n)return;let r,s=!1;try{r=n.document.readyState}catch(t){return}if("complete"!==r){const n=setTimeout((()=>{s||(e(),s=!0)}),i);return void t.addEventListener("load",(()=>{clearTimeout(n),s=!0,e()}))}const o="about:blank";n.location.href===o&&t.src!==o&&""!==t.src?t.addEventListener("load",e):setTimeout(e,0)}(t,(()=>{const e=t.contentDocument;if(e&&T){const i=Yi(e,{doc:e,map:n,blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:a,maskTextSelector:h,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:u,maskInputSelector:d,unmaskInputSelector:p,maskAllText:f,maskInputOptions:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:w,preserveWhiteSpace:A,onSerialize:S,onIframeLoad:T,iframeLoadTimeout:x,keepIframeSrcFn:E});i&&T(t,i)}}),x),P}function qi(t,e,i){return("video"===t||"audio"===t)&&"autoplay"===e}var $i,Ki,Ji,Zi,Qi,tn;function en(t,e,i=document){const n={capture:!0,passive:!0};return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e,n)}!function(t){t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin"}($i||($i={})),function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration"}(Ki||(Ki={})),function(t){t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel"}(Ji||(Ji={})),function(t){t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2"}(Zi||(Zi={})),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange"}(Qi||(Qi={})),function(t){t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change",t.PlayBack="play-back"}(tn||(tn={}));const nn="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let rn={map:{},getId:()=>(console.error(nn),-1),getNode:()=>(console.error(nn),null),removeNodeFromMap(){console.error(nn)},has:()=>(console.error(nn),!1),reset(){console.error(nn)}};function sn(t,e,i={}){let n=null,r=0;return function(s){let o=Date.now();r||!1!==i.leading||(r=o);let a=e-(o-r),h=this,l=arguments;a<=0||a>e?(n&&(clearTimeout(n),n=null),r=o,t.apply(h,l)):n||!1===i.trailing||(n=setTimeout((()=>{r=!1===i.leading?0:Date.now(),n=null,t.apply(h,l)}),a))}}function on(t,e,i,n,r=window){const s=r.Object.getOwnPropertyDescriptor(t,e);return r.Object.defineProperty(t,e,n?i:{set(t){setTimeout((()=>{i.set.call(this,t)}),0),s&&s.set&&s.set.call(this,t)}}),()=>on(t,e,s||{},!0)}function an(t,e,i){try{if(!(e in t))return()=>{};const n=t[e],r=i(n);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=r,()=>{t[e]=n}}catch(t){return()=>{}}}function hn(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ln(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function cn(t,e,i,n){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){let r=!1;const s=n&&t.matches(n);return"string"==typeof e?r=void 0!==t.closest?!s&&null!==t.closest("."+e):!s&&t.classList.contains(e):!s&&t.classList.forEach((t=>{e.test(t)&&(r=!0)})),!r&&i&&(r=t.matches(i)),!s&&r||cn(t.parentNode,e,i,n)}return t.nodeType,t.TEXT_NODE,cn(t.parentNode,e,i,n)}function un(t){return"__sn"in t&&-2===t.__sn.id}function dn(t,e){if(wi(t))return!1;const i=e.getId(t);return!e.has(i)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||dn(t.parentNode,e))}function pn(t){return Boolean(t.changedTouches)}function fn(t){return"__sn"in t&&(t.__sn.type===bi.Element&&"iframe"===t.__sn.tagName)}function mn(t){return Boolean(null==t?void 0:t.shadowRoot)}function gn(t){return"__ln"in t}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(rn=new Proxy(rn,{get:(t,e,i)=>("map"===e&&console.error(nn),Reflect.get(t,e,i))}));class _n{constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let i=0;i<t;i++)e=(null==e?void 0:e.next)||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&gn(t.previousSibling)){const i=t.previousSibling.__ln.next;e.next=i,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,i&&(i.previous=e)}else if(t.nextSibling&&gn(t.nextSibling)&&t.nextSibling.__ln.previous){const i=t.nextSibling.__ln.previous;e.previous=i,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,i&&(i.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next&&(e.next.previous=e.previous)):(this.head=e.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const yn=(t,e)=>`${t}@${e}`;function vn(t){return"__sn"in t}class bn{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new _n,i=t=>{let e=t,i=-2;for(;-2===i;)e=e&&e.nextSibling,i=e&&this.mirror.getId(e);return i},n=n=>{var r,s,o,a,h;const l=n.getRootNode?null===(r=n.getRootNode())||void 0===r?void 0:r.host:null;let c=l;for(;null===(o=null===(s=null==c?void 0:c.getRootNode)||void 0===s?void 0:s.call(c))||void 0===o?void 0:o.host;)c=(null===(h=null===(a=null==c?void 0:c.getRootNode)||void 0===a?void 0:a.call(c))||void 0===h?void 0:h.host)||null;const u=!(this.doc.contains(n)||c&&this.doc.contains(c));if(!n.parentNode||u)return;const d=wi(n.parentNode)?this.mirror.getId(l):this.mirror.getId(n.parentNode),p=i(n);if(-1===d||-1===p)return e.addNode(n);let f=Yi(n,{doc:this.doc,map:this.mirror.map,blockClass:this.blockClass,blockSelector:this.blockSelector,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,skipChild:!0,inlineStylesheet:this.inlineStylesheet,maskAllText:this.maskAllText,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{fn(t)&&this.iframeManager.addIframe(t),mn(n)&&this.shadowDomManager.addShadowRoot(n.shadowRoot,document)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)}});f&&t.push({parentId:d,nextId:p,node:f})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const t of this.movedSet)Sn(this.removes,t,this.mirror)&&!this.movedSet.has(t.parentNode)||n(t);for(const t of this.addedSet)Tn(this.droppedSet,t)||Sn(this.removes,t,this.mirror)?Tn(this.movedSet,t)?n(t):this.droppedSet.add(t):n(t);let r=null;for(;e.length;){let t=null;if(r){const e=this.mirror.getId(r.value.parentNode),n=i(r.value);-1!==e&&-1!==n&&(t=r)}if(!t)for(let n=e.length-1;n>=0;n--){const r=e.get(n);if(r){const e=this.mirror.getId(r.value.parentNode),n=i(r.value);if(-1!==e&&-1!==n){t=r;break}}}if(!t){for(;e.head;)e.removeNode(e.head.value);break}r=t.previous,e.removeNode(t.value),n(t.value)}const s={texts:this.texts.map((t=>({id:this.mirror.getId(t.node),value:t.value}))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>({id:this.mirror.getId(t.node),attributes:t.attributes}))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=t=>{if(!un(t.target))switch(t.type){case"characterData":{const e=t.target.textContent;cn(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||e===t.oldValue||this.texts.push({value:Wi(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextSelector,this.maskAllText)&&e?this.maskTextFn?this.maskTextFn(e):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const e=t.target;let i=e.getAttribute(t.attributeName);if("value"===t.attributeName&&(i=Ti({input:e,maskInputSelector:this.maskInputSelector,unmaskInputSelector:this.unmaskInputSelector,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:e.getAttribute("type"),value:i,maskInputFn:this.maskInputFn})),cn(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||i===t.oldValue)return;let n=this.attributes.find((e=>e.node===t.target));if(n||(n={node:t.target,attributes:{}},this.attributes.push(n)),"type"===t.attributeName&&"INPUT"===e.tagName&&"password"===(t.oldValue||"").toLowerCase()&&e.setAttribute("data-rr-is-password","true"),"style"===t.attributeName){const i=this.doc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue),void 0!==n.attributes.style&&null!==n.attributes.style||(n.attributes.style={});try{const t=n.attributes.style;for(const n of Array.from(e.style)){const r=e.style.getPropertyValue(n),s=e.style.getPropertyPriority(n);r===i.style.getPropertyValue(n)&&s===i.style.getPropertyPriority(n)||(t[n]=""===s?r:[r,s])}for(const n of Array.from(i.style))""===e.style.getPropertyValue(n)&&(t[n]=!1)}catch(t){console.warn("[rrweb] Error when parsing update to style attribute:",t)}}else{const e=t.target;n.attributes[t.attributeName]=zi(this.doc,e,e.tagName,t.attributeName,i,this.maskAllText,this.unmaskTextSelector,this.maskTextFn)}break}case"childList":t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const i=this.mirror.getId(e),n=wi(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);cn(t.target,this.blockClass,this.blockSelector,this.unblockSelector)||un(e)||(this.addedSet.has(e)?(wn(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===i||dn(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[yn(i,n)]?wn(this.movedSet,e):this.removes.push({parentId:n,id:i,isShadow:!!wi(t.target)||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(!e||!cn(e,this.blockClass,this.blockSelector,this.unblockSelector)){if(vn(t)){if(un(t))return;this.movedSet.add(t);let i=null;e&&vn(e)&&(i=e.__sn.id),i&&(this.movedMap[yn(t.__sn.id,i)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);cn(t,this.blockClass,this.blockSelector,this.unblockSelector)||t.childNodes.forEach((t=>this.genAdds(t)))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskTextClass","maskTextSelector","unmaskTextSelector","maskInputSelector","unmaskInputSelector","inlineStylesheet","maskAllText","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function wn(t,e){t.delete(e),e.childNodes.forEach((e=>wn(t,e)))}function Sn(t,e,i){const{parentNode:n}=e;if(!n)return!1;const r=i.getId(n);return!!t.some((t=>t.id===r))||Sn(t,n,i)}function Tn(t,e){const{parentNode:i}=e;return!!i&&(!!t.has(i)||Tn(t,i))}const xn=t=>(...e)=>{try{return t(...e)}catch(t){try{t.__rrweb__=!0}catch(t){}throw t}},En=[];function An(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(t){}return t&&t.target}function In(t,e){var i,n;const r=new bn;En.push(r),r.init(t);let s=window.MutationObserver||window.__rrMutationObserver;const o=null===(n=null===(i=null===window||void 0===window?void 0:window.Zone)||void 0===i?void 0:i.__symbol__)||void 0===n?void 0:n.call(i,"MutationObserver");o&&window[o]&&(s=window[o]);const a=new s(xn((e=>{t.onMutation&&!1===t.onMutation(e)||r.processMutations(e)})));return a.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Cn({mouseInteractionCb:t,doc:e,mirror:i,blockClass:n,blockSelector:r,unblockSelector:s,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,h=[];return Object.keys(Ji).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t])).forEach((o=>{const a=o.toLowerCase(),l=xn((e=>o=>{const a=An(o);if(cn(a,n,r,s))return;const h=pn(o)?o.changedTouches[0]:o;if(!h)return;const l=i.getId(a),{clientX:c,clientY:u}=h;xn(t)({type:Ji[e],id:l,x:c,y:u})})(o));h.push(en(a,l,e))})),xn((()=>{h.forEach((t=>t()))}))}function Pn({scrollCb:t,doc:e,mirror:i,blockClass:n,blockSelector:r,unblockSelector:s,sampling:o}){const a=sn((o=>{const a=An(o);if(!a||cn(a,n,r,s))return;const h=i.getId(a);if(a===e){const i=e.scrollingElement||e.documentElement;xn(t)({id:h,x:i.scrollLeft,y:i.scrollTop})}else xn(t)({id:h,x:a.scrollLeft,y:a.scrollTop})}),o.scroll||100);return en("scroll",xn(a),e)}function Rn(t,e){const i=Object.assign({},t);return e||delete i.userTriggered,i}const On=["INPUT","TEXTAREA","SELECT"],kn=new WeakMap;function Mn({inputCb:t,doc:e,mirror:i,blockClass:n,blockSelector:r,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputSelector:h,unmaskInputSelector:l,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:p}){function f(t){let i=An(t);const d=i&&i.tagName,f=t.isTrusted;if("OPTION"===d&&(i=i.parentElement),!i||!d||On.indexOf(d)<0||cn(i,n,r,s))return;const g=i,_=Ei(g);if(g.classList.contains(o)||a&&g.matches(a))return;let y=Ai(g,d,_),v=!1;"radio"!==_&&"checkbox"!==_||(v=i.checked),function({tagName:t,type:e,maskInputOptions:i,maskInputSelector:n}){return n||Si({maskInputOptions:i,tagName:t,type:e})}({maskInputOptions:c,maskInputSelector:h,tagName:d,type:_})&&(y=Ti({input:g,maskInputOptions:c,maskInputSelector:h,unmaskInputSelector:l,tagName:d,type:_,value:y,maskInputFn:u})),m(i,xn(Rn)({text:y,isChecked:v,userTriggered:f},p));const b=i.name;"radio"===_&&b&&v&&e.querySelectorAll(`input[type="radio"][name="${b}"]`).forEach((t=>{if(t!==i){const e=Ti({input:t,maskInputOptions:c,maskInputSelector:h,unmaskInputSelector:l,tagName:d,type:_,value:Ai(t,d,_),maskInputFn:u});m(t,xn(Rn)({text:e,isChecked:!v,userTriggered:!1},p))}}))}function m(e,n){const r=kn.get(e);if(!r||r.text!==n.text||r.isChecked!==n.isChecked){kn.set(e,n);const r=i.getId(e);t(Object.assign(Object.assign({},n),{id:r}))}}const g=("last"===d.input?["change"]:["input","change"]).map((t=>en(t,xn(f),e))),_=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),y=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return _&&_.set&&g.push(...y.map((t=>on(t[0],t[1],{set(){xn(f)({target:this})}})))),xn((()=>{g.forEach((t=>t()))}))}function Dn(t){return function(t,e){if(Ln("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||Ln("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||Ln("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||Ln("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const i=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(i)}else{const i=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(i)}return e}(t,[])}function Nn(t,e={}){const i=t.doc.defaultView;if(!i)return()=>{};!function(t,e){const{mutationCb:i,mousemoveCb:n,mouseInteractionCb:r,scrollCb:s,viewportResizeCb:o,inputCb:a,mediaInteractionCb:h,styleSheetRuleCb:l,styleDeclarationCb:c,canvasMutationCb:u,fontCb:d}=t;t.mutationCb=(...t)=>{e.mutation&&e.mutation(...t),i(...t)},t.mousemoveCb=(...t)=>{e.mousemove&&e.mousemove(...t),n(...t)},t.mouseInteractionCb=(...t)=>{e.mouseInteraction&&e.mouseInteraction(...t),r(...t)},t.scrollCb=(...t)=>{e.scroll&&e.scroll(...t),s(...t)},t.viewportResizeCb=(...t)=>{e.viewportResize&&e.viewportResize(...t),o(...t)},t.inputCb=(...t)=>{e.input&&e.input(...t),a(...t)},t.mediaInteractionCb=(...t)=>{e.mediaInteaction&&e.mediaInteaction(...t),h(...t)},t.styleSheetRuleCb=(...t)=>{e.styleSheetRule&&e.styleSheetRule(...t),l(...t)},t.styleDeclarationCb=(...t)=>{e.styleDeclaration&&e.styleDeclaration(...t),c(...t)},t.canvasMutationCb=(...t)=>{e.canvasMutation&&e.canvasMutation(...t),u(...t)},t.fontCb=(...t)=>{e.font&&e.font(...t),d(...t)}}(t,e);const n=In(t,t.doc),r=function({mousemoveCb:t,sampling:e,doc:i,mirror:n}){if(!1===e.mousemove)return()=>{};const r="number"==typeof e.mousemove?e.mousemove:50,s="number"==typeof e.mousemoveCallback?e.mousemoveCallback:500;let o,a=[];const h=sn((e=>{const i=Date.now()-o;xn(t)(a.map((t=>(t.timeOffset-=i,t))),e),a=[],o=null}),s),l=sn((t=>{const e=An(t),{clientX:i,clientY:r}=pn(t)?t.changedTouches[0]:t;o||(o=Date.now()),a.push({x:i,y:r,id:n.getId(e),timeOffset:Date.now()-o}),h("undefined"!=typeof DragEvent&&t instanceof DragEvent?Ki.Drag:t instanceof MouseEvent?Ki.MouseMove:Ki.TouchMove)}),r,{trailing:!1}),c=[en("mousemove",xn(l),i),en("touchmove",xn(l),i),en("drag",xn(l),i)];return xn((()=>{c.forEach((t=>t()))}))}(t),s=Cn(t),o=Pn(t),a=function({viewportResizeCb:t}){let e=-1,i=-1;const n=sn((()=>{const n=hn(),r=ln();e===n&&i===r||(xn(t)({width:Number(r),height:Number(n)}),e=n,i=r)}),200);return en("resize",xn(n),window)}(t),h=Mn(t),l=function({mediaInteractionCb:t,blockClass:e,blockSelector:i,unblockSelector:n,mirror:r,sampling:s}){const o=o=>sn(xn((s=>{const a=An(s);if(!a||cn(a,e,i,n))return;const{currentTime:h,volume:l,muted:c}=a;t({type:o,id:r.getId(a),currentTime:h,volume:l,muted:c})})),s.media||500),a=[en("play",o(0)),en("pause",o(1)),en("seeked",o(2)),en("volumechange",o(3))];return xn((()=>{a.forEach((t=>t()))}))}(t),c=function({styleSheetRuleCb:t,mirror:e},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const n=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(n,{apply:xn(((i,n,r)=>{const[s,o]=r,a=e.getId(n.ownerNode);return-1!==a&&t({id:a,adds:[{rule:s,index:o}]}),i.apply(n,r)}))});const r=i.CSSStyleSheet.prototype.deleteRule;i.CSSStyleSheet.prototype.deleteRule=new Proxy(r,{apply:xn(((i,n,r)=>{const[s]=r,o=e.getId(n.ownerNode);return-1!==o&&t({id:o,removes:[{index:s}]}),i.apply(n,r)}))});const s={};Bn("CSSGroupingRule")?s.CSSGroupingRule=i.CSSGroupingRule:(Bn("CSSMediaRule")&&(s.CSSMediaRule=i.CSSMediaRule),Bn("CSSConditionRule")&&(s.CSSConditionRule=i.CSSConditionRule),Bn("CSSSupportsRule")&&(s.CSSSupportsRule=i.CSSSupportsRule));const o={};return Object.entries(s).forEach((([i,n])=>{o[i]={insertRule:n.prototype.insertRule,deleteRule:n.prototype.deleteRule},n.prototype.insertRule=new Proxy(o[i].insertRule,{apply:xn(((i,n,r)=>{const[s,o]=r,a=e.getId(n.parentStyleSheet.ownerNode);return-1!==a&&t({id:a,adds:[{rule:s,index:[...Dn(n),o||0]}]}),i.apply(n,r)}))}),n.prototype.deleteRule=new Proxy(o[i].deleteRule,{apply:xn(((i,n,r)=>{const[s]=r,o=e.getId(n.parentStyleSheet.ownerNode);return-1!==o&&t({id:o,removes:[{index:[...Dn(n),s]}]}),i.apply(n,r)}))})})),xn((()=>{i.CSSStyleSheet.prototype.insertRule=n,i.CSSStyleSheet.prototype.deleteRule=r,Object.entries(s).forEach((([t,e])=>{e.prototype.insertRule=o[t].insertRule,e.prototype.deleteRule=o[t].deleteRule}))}))}(t,{win:i}),u=function({styleDeclarationCb:t,mirror:e},{win:i}){const n=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(n,{apply:xn(((i,n,r)=>{var s,o;const[a,h,l]=r,c=e.getId(null===(o=null===(s=n.parentRule)||void 0===s?void 0:s.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==c&&t({id:c,set:{property:a,value:h,priority:l},index:Dn(n.parentRule)}),i.apply(n,r)}))});const r=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(r,{apply:xn(((i,n,r)=>{var s,o;const[a]=r,h=e.getId(null===(o=null===(s=n.parentRule)||void 0===s?void 0:s.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==h&&t({id:h,remove:{property:a},index:Dn(n.parentRule)}),i.apply(n,r)}))}),xn((()=>{i.CSSStyleDeclaration.prototype.setProperty=n,i.CSSStyleDeclaration.prototype.removeProperty=r}))}(t,{win:i}),d=t.collectFonts?function({fontCb:t,doc:e}){const i=e.defaultView;if(!i)return()=>{};const n=[],r=new WeakMap,s=i.FontFace;i.FontFace=function(t,e,i){const n=new s(t,e,i);return r.set(n,{family:t,buffer:"string"!=typeof e,descriptors:i,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),n};const o=an(e.fonts,"add",(function(e){return function(i){return setTimeout((()=>{const e=r.get(i);e&&(t(e),r.delete(i))}),0),e.apply(this,[i])}}));return n.push((()=>{i.FontFace=s})),n.push(o),xn((()=>{n.forEach((t=>t()))}))}(t):()=>{},p=[];for(const e of t.plugins)p.push(e.observer(e.callback,i,e.options));return xn((()=>{En.forEach((t=>t.reset())),n.disconnect(),r(),s(),o(),a(),h(),l();try{c(),u()}catch(t){}d(),p.forEach((t=>t()))}))}function Ln(t){return void 0!==window[t]}function Bn(t){return Boolean(void 0!==window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class Fn{constructor(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}addIframe(t){this.iframes.set(t,!0)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){var i;this.mutationCb({adds:[{parentId:t.__sn.id,nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(i=this.loadListener)||void 0===i||i.call(this,t)}}class Un{constructor(t){this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const e=this;this.restorePatches.push(an(HTMLElement.prototype,"attachShadow",(function(t){return function(){const i=t.apply(this,arguments);return this.shadowRoot&&e.addShadowRoot(this.shadowRoot,this.ownerDocument),i}})))}addShadowRoot(t,e){In(Object.assign(Object.assign({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Pn(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))}observeAttachShadow(t){if(t.contentWindow){const e=this;this.restorePatches.push(an(t.contentWindow.HTMLElement.prototype,"attachShadow",(function(i){return function(){const n=i.apply(this,arguments);return this.shadowRoot&&e.addShadowRoot(this.shadowRoot,t.contentDocument),n}})))}}reset(){this.restorePatches.forEach((t=>t()))}}for(var Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jn="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Hn=0;Hn<64;Hn++)jn[Gn.charCodeAt(Hn)]=Hn;const zn=new Map;const Wn=(t,e,i)=>{if(!t||!Yn(t,e)&&"object"!=typeof t)return;const n=function(t,e){let i=zn.get(t);return i||(i=new Map,zn.set(t,i)),i.has(e)||i.set(e,[]),i.get(e)}(i,t.constructor.name);let r=n.indexOf(t);return-1===r&&(r=n.length,n.push(t)),r};function Vn(t,e,i){if(t instanceof Array)return t.map((t=>Vn(t,e,i)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){return{rr_type:t.constructor.name,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){const e=t.constructor.name,i=function(t){var e,i=new Uint8Array(t),n=i.length,r="";for(e=0;e<n;e+=3)r+=Gn[i[e]>>2],r+=Gn[(3&i[e])<<4|i[e+1]>>4],r+=Gn[(15&i[e+1])<<2|i[e+2]>>6],r+=Gn[63&i[e+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(t);return{rr_type:e,base64:i}}if(t instanceof DataView){return{rr_type:t.constructor.name,args:[Vn(t.buffer,e,i),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:i}=t;return{rr_type:e,src:i}}if(t instanceof ImageData){return{rr_type:t.constructor.name,args:[Vn(t.data,e,i),t.width,t.height]}}if(Yn(t,e)||"object"==typeof t){return{rr_type:t.constructor.name,index:Wn(t,e,i)}}return t}const Xn=(t,e,i)=>[...t].map((t=>Vn(t,e,i))),Yn=(t,e)=>{const i=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"==typeof e[t]));return Boolean(i.find((i=>t instanceof e[i])))};function qn(t,e,i,n,r,s,o,a){const h=[],l=Object.getOwnPropertyNames(t);for(const c of l)try{if("function"!=typeof t[c])continue;const l=an(t,c,(function(h){return function(...l){const u=h.apply(this,l);if(Wn(u,a,t),!cn(this.canvas,n,s,r)){o.getId(this.canvas);const n=Xn([...l],a,t),r={type:e,property:c,args:n};i(this.canvas,r)}return u}}));h.push(l)}catch(n){const r=on(t,c,{set(t){i(this.canvas,{type:e,property:c,args:[t],setter:!0})}});h.push(r)}return h}class $n{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(t,e){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)},this.mutationCb=t.mutationCb,this.mirror=t.mirror,!0===t.recordCanvas&&this.initCanvasMutationObserver(t.win,t.blockClass,t.blockSelector,t.unblockSelector)}initCanvasMutationObserver(t,e,i,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=function(t,e,i,n){const r=[];try{const s=an(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(r,...s){return cn(this,e,i,n)||"__context"in this||(this.__context=r),t.apply(this,[r,...s])}}));r.push(s)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach((t=>t()))}}(t,e,n,i),s=function(t,e,i,n,r){const s=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of o)try{if("function"!=typeof e.CanvasRenderingContext2D.prototype[a])continue;const o=an(e.CanvasRenderingContext2D.prototype,a,(function(e){return function(...s){return cn(this.canvas,i,r,n)||setTimeout((()=>{const e=[...s];if("drawImage"===a&&e[0]&&e[0]instanceof HTMLCanvasElement){const t=e[0],i=t.getContext("2d");let n=null==i?void 0:i.getImageData(0,0,t.width,t.height),r=null==n?void 0:n.data;e[0]=JSON.stringify(r)}t(this.canvas,{type:Zi["2D"],property:a,args:e})}),0),e.apply(this,s)}}));s.push(o)}catch(i){const n=on(e.CanvasRenderingContext2D.prototype,a,{set(e){t(this.canvas,{type:Zi["2D"],property:a,args:[e],setter:!0})}});s.push(n)}return()=>{s.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,i,this.mirror),o=function(t,e,i,n,r,s){const o=[];return o.push(...qn(e.WebGLRenderingContext.prototype,Zi.WebGL,t,i,n,r,s,e)),void 0!==e.WebGL2RenderingContext&&o.push(...qn(e.WebGL2RenderingContext.prototype,Zi.WebGL2,t,i,n,r,s,e)),()=>{o.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,i,this.mirror);this.resetObservers=()=>{r(),s(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{const i=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,i)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(this.frozen||this.locked)return;const i=this.pendingCanvasMutations.get(t);if(!i||-1===e)return;const n=i.map((t=>{const e=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}(t,["type"]);return e})),{type:r}=i[0];this.mutationCb({id:e,type:r,commands:n}),this.pendingCanvasMutations.delete(t)}}function Kn(t){return Object.assign(Object.assign({},t),{timestamp:Date.now()})}let Jn,Zn;const Qn={map:{},getId:t=>t&&t.__sn?t.__sn.id:-1,getNode(t){return this.map[t]||null},removeNodeFromMap(t){const e=t.__sn&&t.__sn.id;delete this.map[e],t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))},has(t){return this.map.hasOwnProperty(t)},reset(){this.map={}}};function tr(t={}){const{emit:e,checkoutEveryNms:i,checkoutEveryNth:n,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:h=null,maskTextClass:l="rr-mask",maskTextSelector:c=null,maskInputSelector:u=null,unmaskTextSelector:d=null,unmaskInputSelector:p=null,inlineStylesheet:f=!0,maskAllText:m=!1,maskAllInputs:g,maskInputOptions:_,slimDOMOptions:y,maskInputFn:v,maskTextFn:b,hooks:w,packFn:S,sampling:T={},mousemoveWait:x,recordCanvas:E=!1,userTriggeredOnInput:A=!1,collectFonts:I=!1,inlineImages:C=!1,plugins:P,keepIframeSrcFn:R=()=>!1,onMutation:O}=t;if(!e)throw new Error("emit function is required");void 0!==x&&void 0===T.mousemove&&(T.mousemove=x);const k=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==_?_:{},M=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let D;!function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(t){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let N=0;Jn=(t,r)=>{var s;if(!(null===(s=En[0])||void 0===s?void 0:s.isFrozen())||t.type===$i.FullSnapshot||t.type===$i.IncrementalSnapshot&&t.data.source===Ki.Mutation||En.forEach((t=>t.unfreeze())),e((t=>{for(const e of P||[])e.eventProcessor&&(t=e.eventProcessor(t));return S&&(t=S(t)),t})(t),r),t.type===$i.FullSnapshot)D=t,N=0;else if(t.type===$i.IncrementalSnapshot){if(t.data.source===Ki.Mutation&&t.data.isAttachIframe)return;N++;const e=n&&N>=n,r=i&&t.timestamp-D.timestamp>i;(e||r)&&Zn(!0)}};const L=t=>{Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.Mutation},t)}))},B=t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.Scroll},t)})),F=t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.CanvasMutation},t)})),U=new Fn({mutationCb:L}),G=new $n({recordCanvas:E,mutationCb:F,win:window,blockClass:r,blockSelector:s,unblockSelector:o,mirror:Qn}),j=new Un({mutationCb:L,scrollCb:B,bypassOptions:{onMutation:O,blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:l,maskTextSelector:c,unmaskTextSelector:d,maskInputSelector:u,unmaskInputSelector:p,inlineStylesheet:f,maskAllText:m,maskInputOptions:k,maskTextFn:b,maskInputFn:v,recordCanvas:E,inlineImages:C,sampling:T,slimDOMOptions:M,iframeManager:U,canvasManager:G},mirror:Qn});Zn=(t=!1)=>{var e,i,n,a;Jn(Kn({type:$i.Meta,data:{href:window.location.href,width:ln(),height:hn()}}),t),En.forEach((t=>t.lock()));const[h,g]=function(t,e){const{blockClass:i="rr-block",blockSelector:n=null,unblockSelector:r=null,maskTextClass:s="rr-mask",maskTextSelector:o=null,unmaskTextSelector:a=null,inlineStylesheet:h=!0,inlineImages:l=!1,recordCanvas:c=!1,maskInputSelector:u=null,unmaskInputSelector:d=null,maskAllText:p=!1,maskAllInputs:f=!1,maskTextFn:m,maskInputFn:g,slimDOM:_=!1,dataURLOptions:y,preserveWhiteSpace:v,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,keepIframeSrcFn:T=()=>!1}=e||{},x={};return[Yi(t,{doc:t,map:x,blockClass:i,blockSelector:n,unblockSelector:r,maskTextClass:s,maskTextSelector:o,unmaskTextSelector:a,skipChild:!1,inlineStylesheet:h,maskInputSelector:u,unmaskInputSelector:d,maskAllText:p,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskTextFn:m,maskInputFn:g,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:y,inlineImages:l,recordCanvas:c,preserveWhiteSpace:v,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,keepIframeSrcFn:T}),x]}(document,{blockClass:r,blockSelector:s,unblockSelector:o,maskTextClass:l,maskTextSelector:c,unmaskTextSelector:d,maskInputSelector:u,unmaskInputSelector:p,inlineStylesheet:f,maskAllText:m,maskAllInputs:k,maskTextFn:b,slimDOM:M,recordCanvas:E,inlineImages:C,onSerialize:t=>{fn(t)&&U.addIframe(t),mn(t)&&j.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{U.attachIframe(t,e),j.observeAttachShadow(t)},keepIframeSrcFn:R});if(!h)return console.warn("Failed to snapshot the document");Qn.map=g,Jn(Kn({type:$i.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(i=null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.parentElement)||void 0===i?void 0:i.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(a=null===(n=null===document||void 0===document?void 0:document.body)||void 0===n?void 0:n.parentElement)||void 0===a?void 0:a.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),En.forEach((t=>t.unlock()))};try{const t=[];t.push(en("DOMContentLoaded",(()=>{Jn(Kn({type:$i.DomContentLoaded,data:{}}))})));const e=t=>{var e;return xn(Nn)({onMutation:O,mutationCb:L,mousemoveCb:(t,e)=>Jn(Kn({type:$i.IncrementalSnapshot,data:{source:e,positions:t}})),mouseInteractionCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.MouseInteraction},t)})),scrollCb:B,viewportResizeCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.ViewportResize},t)})),inputCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.Input},t)})),mediaInteractionCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.MediaInteraction},t)})),styleSheetRuleCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.StyleSheetRule},t)})),styleDeclarationCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.StyleDeclaration},t)})),canvasMutationCb:F,fontCb:t=>Jn(Kn({type:$i.IncrementalSnapshot,data:Object.assign({source:Ki.Font},t)})),blockClass:r,ignoreClass:a,ignoreSelector:h,maskTextClass:l,maskTextSelector:c,unmaskTextSelector:d,maskInputSelector:u,unmaskInputSelector:p,maskInputOptions:k,inlineStylesheet:f,sampling:T,recordCanvas:E,inlineImages:C,userTriggeredOnInput:A,collectFonts:I,doc:t,maskAllText:m,maskInputFn:v,maskTextFn:b,blockSelector:s,unblockSelector:o,slimDOMOptions:M,mirror:Qn,iframeManager:U,shadowDomManager:j,canvasManager:G,plugins:(null===(e=null==P?void 0:P.filter((t=>t.observer)))||void 0===e?void 0:e.map((t=>({observer:t.observer,options:t.options,callback:e=>Jn(Kn({type:$i.Plugin,data:{plugin:t.name,payload:e}}))}))))||[]},w)};U.addLoadListener((i=>{try{t.push(e(i.contentDocument))}catch(t){console.warn(t)}}));const i=()=>{Zn(),t.push(e(document))};return"interactive"===document.readyState||"complete"===document.readyState?i():t.push(en("load",(()=>{Jn(Kn({type:$i.Load,data:{}})),i()}),window)),()=>{t.forEach((t=>t()))}}catch(t){console.warn(t)}}function er(t){return t>9999999999?t:1e3*t}function ir(t,e){"sentry.transaction"!==e.category&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate((()=>(t.throttledAddEvent({type:$i.Custom,timestamp:1e3*(e.timestamp||0),data:{tag:"breadcrumb",payload:S(e,10,1e3)}}),"console"===e.category))))}tr.addCustomEvent=(t,e)=>{if(!Jn)throw new Error("please add custom event after start recording");Jn(Kn({type:$i.Custom,data:{tag:t,payload:e}}))},tr.freezePage=()=>{En.forEach((t=>t.freeze()))},tr.takeFullSnapshot=t=>{if(!Zn)throw new Error("please take full snapshot after start recording");Zn(t)},tr.mirror=Qn;function nr(t){const e=rr(t);if(!(e&&e instanceof Element))return e;return e.closest("button,a")||e}function rr(t){return function(t){return"object"==typeof t&&!!t&&"target"in t}(t)?t.target:t}let sr;function or(t){return sr||(sr=[],(0,s.GS)(pi,"open",(function(t){return function(...e){if(sr)try{sr.forEach((t=>t()))}catch(t){}return t.apply(pi,e)}}))),sr.push(t),()=>{const e=sr?sr.indexOf(t):-1;e>-1&&sr.splice(e,1)}}class ar{constructor(t,e,i=ir){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=e.timeout/1e3,this._threshold=e.threshold/1e3,this._scollTimeout=e.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=e.ignoreSelector,this._addBreadcrumbEvent=i}addListeners(){const t=()=>{this._lastScroll=lr()},e=or((()=>{this._lastMutation=lr()})),i=t=>{if(!t.target)return;const e=nr(t);e&&this._handleMultiClick(e)},n=new MutationObserver((()=>{this._lastMutation=lr()}));n.observe(pi.document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),pi.addEventListener("scroll",t,{passive:!0}),pi.addEventListener("click",i,{passive:!0}),this._teardown=()=>{pi.removeEventListener("scroll",t),pi.removeEventListener("click",i),e(),n.disconnect(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,e){if(function(t,e){if(!hr.includes(t.tagName))return!0;if("INPUT"===t.tagName&&!["submit","button"].includes(t.getAttribute("type")||""))return!0;if("A"===t.tagName&&(t.hasAttribute("download")||t.hasAttribute("target")&&"_self"!==t.getAttribute("target")))return!0;if(e&&t.matches(e))return!0;return!1}(e,this._ignoreSelector)||!function(t){return!(!t.data||"number"!=typeof t.data.nodeId||!t.timestamp)}(t))return;const i={timestamp:(n=t.timestamp,n>9999999999?n/1e3:n),clickBreadcrumb:t,clickCount:0,node:e};var n;this._clicks.some((t=>t.node===i.node&&Math.abs(t.timestamp-i.timestamp)<1))||(this._clicks.push(i),1===this._clicks.length&&this._scheduleCheckClicks())}_handleMultiClick(t){this._getClicks(t).forEach((t=>{t.clickCount++}))}_getClicks(t){return this._clicks.filter((e=>e.node===t))}_checkClicks(){const t=[],e=lr();this._clicks.forEach((i=>{!i.mutationAfter&&this._lastMutation&&(i.mutationAfter=i.timestamp<=this._lastMutation?this._lastMutation-i.timestamp:void 0),!i.scrollAfter&&this._lastScroll&&(i.scrollAfter=i.timestamp<=this._lastScroll?this._lastScroll-i.timestamp:void 0),i.timestamp+this._timeout<=e&&t.push(i)}));for(const e of t){const t=this._clicks.indexOf(e);t>-1&&(this._generateBreadcrumbs(e),this._clicks.splice(t,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const e=this._replay,i=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,n=t.mutationAfter&&t.mutationAfter<=this._threshold,r=!i&&!n,{clickCount:s,clickBreadcrumb:o}=t;if(r){const i=1e3*Math.min(t.mutationAfter||this._timeout,this._timeout),n=i<1e3*this._timeout?"mutation":"timeout",r={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:{...o.data,url:pi.location.href,route:e.getCurrentRoute(),timeAfterClickMs:i,endReason:n,clickCount:s||1}};this._addBreadcrumbEvent(e,r)}else if(s>1){const t={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:{...o.data,url:pi.location.href,route:e.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(e,t)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const hr=["A","BUTTON","INPUT"];function lr(){return Date.now()/1e3}function cr(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var ur;!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(ur||(ur={}));const dr=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled"]);function pr(t){const e={};for(const i in t)if(dr.has(i)){let n=i;"data-testid"!==i&&"data-test-id"!==i||(n="testId"),e[n]=t[i]}return e}const fr=t=>e=>{if(!t.isEnabled())return;const i=function(t){const{target:e,message:i}=function(t){const e="click"===t.name;let i,n=null;try{n=e?nr(t.event):rr(t.event),i=(0,xe.Hd)(n,{maxStringLength:200})||"<unknown>"}catch(t){i="<unknown>"}return{target:n,message:i}}(t);return cr({category:`ui.${t.name}`,...mr(e,i)})}(e);if(!i)return;const n="click"===e.name,r=n&&e.event;!(n&&t.clickDetector&&r)||r.altKey||r.metaKey||r.ctrlKey||r.shiftKey||function(t,e,i){t.handleClick(e,i)}(t.clickDetector,i,nr(e.event)),ir(t,i)};function mr(t,e){const i=t&&function(t){return"__sn"in t}(t)&&t.__sn.type===ur.Element?t.__sn:null;return{message:e,data:i?{nodeId:i.id,node:{id:i.id,tagName:i.tagName,textContent:t?Array.from(t.childNodes).map((t=>"__sn"in t&&t.__sn.type===ur.Text&&t.__sn.textContent)).filter(Boolean).map((t=>t.trim())).join(""):"",attributes:pr(i.attributes)}}:{}}}function gr(t,e){if(!t.isEnabled())return;t.updateUserActivity();const i=function(t){const{metaKey:e,shiftKey:i,ctrlKey:n,altKey:r,key:s,target:o}=t;if(!o||function(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable}(o)||!s)return null;const a=e||n||r,h=1===s.length;if(!a&&h)return null;const l=(0,xe.Hd)(o,{maxStringLength:200})||"<unknown>",c=mr(o,l);return cr({category:"ui.keyDown",message:l,data:{...c.data,metaKey:e,shiftKey:i,ctrlKey:n,altKey:r,key:s}})}(e);i&&ir(t,i)}const _r=["name","type","startTime","transferSize","duration"];function yr(t){return function(e){return _r.every((i=>t[i]===e[i]))}}function vr(t){const e=new PerformanceObserver((e=>{const i=function(t,e){const[i,n,r]=t.reduce(((t,e)=>("navigation"===e.entryType?t[0].push(e):"largest-contentful-paint"===e.entryType?t[1].push(e):t[2].push(e),t)),[[],[],[]]),s=[],o=[];let a=n.length?n[n.length-1]:void 0;return e.forEach((t=>{if("largest-contentful-paint"!==t.entryType)if("navigation"!==t.entryType)s.push(t);else{const e=t;t.duration>0&&!i.find(yr(e))&&!o.find(yr(e))&&o.push(e)}else(!a||a.startTime<t.startTime)&&(a=t)})),[...a?[a]:[],...i,...r,...s,...o].sort(((t,e)=>t.startTime-e.startTime))}(t.performanceEvents,e.getEntries());t.performanceEvents=i}));return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach((t=>{try{e.observe({type:t,buffered:!0})}catch(t){}})),e}function br(t,e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(h.vF.info(t),e&&Sr(t))}function wr(t,e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(h.vF.info(t),e&&setTimeout((()=>{Sr(t)}),0))}function Sr(t){(0,j.BF)().addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class Tr extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class xr{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const e=JSON.stringify(t).length;if(this._totalSize+=e,this._totalSize>yi)throw new Tr;this.events.push(t)}finish(){return new Promise((t=>{const e=this.events;this.clear(),t(JSON.stringify(e))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map((t=>t.timestamp)).sort()[0];return t?er(t):null}}class Er{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((t,e)=>{this._worker.addEventListener("message",(({data:i})=>{i.success?t():e()}),{once:!0}),this._worker.addEventListener("error",(t=>{e(t)}),{once:!0})}))),this._ensureReadyPromise}destroy(){br("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,e){const i=this._getAndIncrementId();return new Promise(((n,r)=>{const s=({data:e})=>{const o=e;if(o.method===t&&o.id===i){if(this._worker.removeEventListener("message",s),!o.success)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay]",o.response),void r(new Error("Error in compression worker"));n(o.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:i,method:t,arg:e})}))}_getAndIncrementId(){return this._id++}}class Ar{constructor(t){this._worker=new Er(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const e=er(t.timestamp);(!this._earliestTimestamp||e<this._earliestTimestamp)&&(this._earliestTimestamp=e);const i=JSON.stringify(t);return this._totalSize+=i.length,this._totalSize>yi?Promise.reject(new Tr):this._sendEventToWorker(i)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear")}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class Ir{constructor(t){this._fallback=new xr,this._compression=new Ar(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){return void br("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:e}=this._fallback,i=[];for(const e of t)i.push(this._compression.addEvent(e));this._compression.hasCheckout=e,this._used=this._compression;try{await Promise.all(i)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("[Replay] Failed to add events when switching buffers.",t)}}}function Cr({useCompression:t}){if(t&&window.Worker)try{const t=function(){const t=new Blob(['/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\nfunction t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=je,Xe=B;const We=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Xe.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Xe.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Xe.Z_NO_FLUSH)}},qe={clear:()=>{We.clear()},addEvent:t=>We.addEvent(t),finish:()=>We.finish(),compress:t=>function(t){return Ge(t)}(t)};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in qe&&"function"==typeof qe[e])try{const t=qe[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(t)}();br("[Replay] Using compression worker");const e=new Worker(t);return new Ir(e)}catch(t){br("[Replay] Failed to create compression worker")}return br("[Replay] Using simple buffer"),new xr}function Pr(){try{return"sessionStorage"in pi&&!!pi.sessionStorage}catch(t){return!1}}function Rr(t){!function(){if(!Pr())return;try{pi.sessionStorage.removeItem(fi)}catch(t){}}(),t.session=void 0}function Or(t){return void 0!==t&&Math.random()<t}function kr(t){if(Pr())try{pi.sessionStorage.setItem(fi,JSON.stringify(t))}catch(t){}}function Mr(t){const e=Date.now();return{id:t.id||(0,l.eJ)(),started:t.started||e,lastActivity:t.lastActivity||e,segmentId:t.segmentId||0,sampled:t.sampled,previousSessionId:t.previousSessionId}}function Dr({sessionSampleRate:t,allowBuffering:e,stickySession:i=!1},{previousSessionId:n}={}){const r=function(t,e){return Or(t)?"session":!!e&&"buffer"}(t,e),s=Mr({sampled:r,previousSessionId:n});return i&&kr(s),s}function Nr(t,e,i=+new Date){return null===t||void 0===e||e<0||0!==e&&t+e<=i}function Lr(t,{maxReplayDuration:e,sessionIdleExpire:i,targetTime:n=Date.now()}){return Nr(t.started,e,n)||Nr(t.lastActivity,i,n)}function Br(t,{sessionIdleExpire:e,maxReplayDuration:i}){return!!Lr(t,{sessionIdleExpire:e,maxReplayDuration:i})&&("buffer"!==t.sampled||0!==t.segmentId)}function Fr({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:i,previousSessionId:n},r){const s=r.stickySession&&function(t){if(!Pr())return null;try{const e=pi.sessionStorage.getItem(fi);if(!e)return null;const i=JSON.parse(e);return wr("[Replay] Loading existing session",t),Mr(i)}catch(t){return null}}(t);return s?Br(s,{sessionIdleExpire:e,maxReplayDuration:i})?(wr("[Replay] Session in sessionStorage is expired, creating new one..."),Dr(r,{previousSessionId:s.id})):s:(wr("[Replay] Creating new session",t),Dr(r,{previousSessionId:n}))}function Ur(t,e,i){return!!jr(t,e)&&(Gr(t,e,i),!0)}async function Gr(t,e,i){if(!t.eventBuffer)return null;try{i&&"buffer"===t.recordingMode&&t.eventBuffer.clear(),i&&(t.eventBuffer.hasCheckout=!0);const n=function(t,e){try{if("function"==typeof e&&function(t){return t.type===$i.Custom}(t))return e(t)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",t),null}return t}(e,t.getOptions().beforeAddRecordingEvent);if(!n)return;return await t.eventBuffer.addEvent(n)}catch(e){const i=e&&e instanceof Tr?"addEventSizeExceeded":"addEvent";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error(e),await t.stop({reason:i});const n=(0,j.BF)().getClient();n&&n.recordDroppedEvent("internal_sdk_error","replay")}}function jr(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const i=er(e.timestamp);return!(i+t.timeouts.sessionIdlePause<Date.now())&&(!(i>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration)||(br(`[Replay] Skipping event with timestamp ${i} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1))}function Hr(t){return!t.type}function zr(t){return"transaction"===t.type}function Wr(t){const e=function(){const t=(0,j.BF)().getClient();if(!t)return!1;const e=t.getTransport();if(!e)return!1;return e.send.__sentry__baseTransport__||!1}();return(i,n)=>{if(!t.isEnabled()||!Hr(i)&&!zr(i))return;const r=n&&n.statusCode;e&&(!r||r<200||r>=300)||(zr(i)?function(t,e){const i=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&i.traceIds.size<100&&i.traceIds.add(e.contexts.trace.trace_id)}(t,i):function(t,e){const i=t.getContext();e.event_id&&i.errorIds.size<100&&i.errorIds.add(e.event_id);"buffer"===t.recordingMode&&e.tags&&e.tags.replayId&&setTimeout((()=>{t.sendBufferedReplayOrFlush()}))}(t,i))}}function Vr(t,e=!1){const i=e?Wr(t):void 0;return Object.assign(((e,n)=>{if(!t.isEnabled())return e;if(function(t){return"replay_event"===t.type}(e))return delete e.breadcrumbs,e;if(!Hr(e)&&!zr(e))return e;if(!t.checkAndHandleExpiredSession())return e;if(function(t,e){return!(t.type||!t.exception||!t.exception.values||!t.exception.values.length)&&(!(!e.originalException||!e.originalException.__rrweb__)||t.exception.values.some((t=>!!(t.stacktrace&&t.stacktrace.frames&&t.stacktrace.frames.length)&&t.stacktrace.frames.some((t=>t.filename&&t.filename.includes("/rrweb/src/"))))))}(e,n)&&!t.getOptions()._experiments.captureExceptions)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Replay] Ignoring error from rrweb internals",e),null;const r=function(t,e){return"buffer"===t.recordingMode&&e.message!==mi&&!(!e.exception||e.type)&&Or(t.getOptions().errorSampleRate)}(t,e);return(r||"session"===t.recordingMode)&&(e.tags={...e.tags,replayId:t.getSessionId()}),i&&i(e,{statusCode:200}),e}),{id:"Replay"})}function Xr(t,e){return e.map((({type:e,start:i,end:n,name:r,data:s})=>{const o=t.throttledAddEvent({type:$i.Custom,timestamp:i,data:{tag:"performanceSpan",payload:{op:e,description:r,startTimestamp:i,endTimestamp:n,data:s}}});return"string"==typeof o?Promise.resolve(null):o}))}function Yr(t){return e=>{if(!t.isEnabled())return;const i=function(t){const{from:e,to:i}=t,n=Date.now()/1e3;return{type:"navigation.push",start:n,end:n,name:i,data:{previous:e}}}(e);null!==i&&(t.getContext().urls.push(i.name),t.triggerUserActivity(),t.addUpdate((()=>(Xr(t,[i]),!1))))}}function qr(t,e){return("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||!t.getOptions()._experiments.traceInternals)&&function(t){const e=(0,j.BF)().getClient(),i=e&&e.getDsn();return!!i&&t.includes(i.host)}(e)}function $r(t,e){t.isEnabled()&&null!==e&&(qr(t,e.name)||t.addUpdate((()=>(Xr(t,[e]),!0))))}function Kr(t){return e=>{if(!t.isEnabled())return;const i=function(t){const{startTimestamp:e,endTimestamp:i,xhr:n}=t,r=n[Te.Er];if(!e||!i||!r)return null;const{method:s,url:o,status_code:a}=r;return void 0===o?null:{type:"resource.xhr",name:o,start:e/1e3,end:i/1e3,data:{method:s,statusCode:a}}}(e);$r(t,i)}}const Jr=10,Zr=11,Qr=12,ts=13,es=14,is=15,ns=20,rs=21,ss=22,os=23,as=["true","false","null"];function hs(t,e){if(!e.length)return t;let i=t;const n=e.length-1;i=function(t,e){switch(e){case Jr:return`${t}"~~":"~~"`;case 11:return`${t}:"~~"`;case 12:return`${t}~~":"~~"`;case ts:return function(t){const e=t.lastIndexOf(":"),i=t.slice(e+1);if(as.includes(i.trim()))return`${t},"~~":"~~"`;return`${t.slice(0,e+1)}"~~"`}(t);case 14:return`${t}~~"`;case is:return`${t},"~~":"~~"`;case ns:return`${t}"~~"`;case rs:return function(t){const e=function(t){for(let e=t.length-1;e>=0;e--){const i=t[e];if(","===i||"["===i)return e}return-1}(t);if(e>-1){const i=t.slice(e+1);return as.includes(i.trim())?`${t},"~~"`:`${t.slice(0,e+1)}"~~"`}return t}(t);case 22:return`${t}~~"`;case os:return`${t},"~~"`}return t}(i,e[n]);for(let t=n;t>=0;t--){switch(e[t]){case Jr:i=`${i}}`;break;case ns:i=`${i}]`}}return i}function ls(t,e,i){const n=t[t.length-1],r=e[i];if(!/\s/.test(r))if('"'!==r||cs(e,i))switch(r){case"{":!function(t,e){if(!e)return void t.push(Jr);if(e===ts)return void t.push(Jr);e===rs&&t.push(Jr);if(e===ns)t.push(Jr)}(t,n);break;case"[":!function(t,e){if(!e)return t.push(ns),void t.push(rs);if(e===ts)return t.push(ns),void t.push(rs);e===rs&&(t.push(ns),t.push(rs));if(e===ns)t.push(ns),t.push(rs)}(t,n);break;case":":!function(t,e){e===Zr&&(t.pop(),t.push(ts))}(t,n);break;case",":!function(t,e){if(e===ts)return void t.pop();if(e===is)return t.pop(),void t.pop();if(e===rs)return;if(e===os)t.pop()}(t,n);break;case"}":!function(t,e){e===Jr&&t.pop();e===ts&&(t.pop(),t.pop());e===is&&(t.pop(),t.pop(),t.pop());t[t.length-1]===ts&&t.push(is);t[t.length-1]===rs&&t.push(os)}(t,n);break;case"]":!function(t,e){e===ns&&t.pop();e===rs&&(t.pop(),t.pop());e===os&&(t.pop(),t.pop(),t.pop());t[t.length-1]===ts&&t.push(is);t[t.length-1]===rs&&t.push(os)}(t,n)}else!function(t,e){if(e===es)return t.pop(),void t.push(is);if(e===ss)return t.pop(),void t.push(os);if(e===ts)return void t.push(es);if(e===rs)return void t.push(ss);if(e===Jr)return void t.push(Qr);if(e===Qr)t.pop(),t.push(11)}(t,n)}function cs(t,e){return"\\"===t[e-1]&&!cs(t,e-1)}function us(t){return hs(t,function(t){const e=[];for(let i=0;i<t.length;i++)ls(e,t,i);return e}(t))}function ds(t,e){if(t)try{if("string"==typeof t)return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const i=vs(t);return e.encode(i).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch(t){}}function ps(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function fs(t){return"string"==typeof t?t:t instanceof URLSearchParams?t.toString():t instanceof FormData?vs(t):void 0}function ms(t,e){if(!e)return null;const{startTimestamp:i,endTimestamp:n,url:r,method:o,statusCode:a,request:h,response:l}=e;return{type:t,start:i/1e3,end:n/1e3,name:r,data:(0,s.Ce)({method:o,statusCode:a,request:h,response:l})}}function gs(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function _s(t,e,i){if(!e&&0===Object.keys(t).length)return;if(!e)return{headers:t};if(!i)return{headers:t,size:e};const n={headers:t,size:e},{body:r,warnings:s}=function(t){if(!t||"string"!=typeof t)return{body:t,warnings:[]};const e=t.length>gi;if(function(t){const e=t[0],i=t[t.length-1];return"["===e&&"]"===i||"{"===e&&"}"===i}(t))try{const i=e?us(t.slice(0,gi)):t;return{body:JSON.parse(i),warnings:e?["JSON_TRUNCATED"]:[]}}catch(i){return{body:e?`${t.slice(0,gi)}…`:t,warnings:e?["INVALID_JSON","TEXT_TRUNCATED"]:["INVALID_JSON"]}}return{body:e?`${t.slice(0,gi)}…`:t,warnings:e?["TEXT_TRUNCATED"]:[]}}(i);return n.body=r,s.length>0&&(n._meta={warnings:s}),n}function ys(t,e){return Object.keys(t).reduce(((i,n)=>{const r=n.toLowerCase();return e.includes(r)&&t[n]&&(i[r]=t[n]),i}),{})}function vs(t){return new URLSearchParams(t).toString()}function bs(t,e){const i=function(t,e=pi.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(pi.location.origin))return t;const i=new URL(t,e);if(i.origin!==new URL(e).origin)return t;const n=i.href;if(!t.endsWith("/")&&n.endsWith("/"))return n.slice(0,-1);return n}(t);return(0,c.Xr)(i,e)}async function ws(t,e,i){try{const n=await async function(t,e,i){const{startTimestamp:n,endTimestamp:r}=e,{url:s,method:o,status_code:a=0,request_body_size:h,response_body_size:l}=t.data,c=bs(s,i.networkDetailAllowUrls)&&!bs(s,i.networkDetailDenyUrls),u=c?function({networkCaptureBodies:t,networkRequestHeaders:e},i,n){const r=function(t,e){if(1===t.length&&"string"!=typeof t[0])return xs(t[0],e);if(2===t.length)return xs(t[1],e);return{}}(i,e);if(!t)return _s(r,n,void 0);const s=fs(Ss(i));return _s(r,n,s)}(i,e.input,h):gs(h),d=await async function(t,{networkCaptureBodies:e,textEncoder:i,networkResponseHeaders:n},r,s){if(!t&&void 0!==s)return gs(s);const o=Ts(r.headers,n);if(!e&&void 0!==s)return _s(o,s,void 0);try{const n=r.clone(),a=await async function(t){try{return await t.text()}catch(t){return}}(n),h=a&&a.length&&void 0===s?ds(a,i):s;return t?_s(o,h,e?a:void 0):gs(h)}catch(t){return _s(o,s,void 0)}}(c,i,e.response,l);return{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:a,request:u,response:d}}(t,e,i),r=ms("resource.fetch",n);$r(i.replay,r)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay] Failed to capture fetch breadcrumb",t)}}function Ss(t=[]){if(2===t.length&&"object"==typeof t[1])return t[1].body}function Ts(t,e){const i={};return e.forEach((e=>{t.get(e)&&(i[e]=t.get(e))})),i}function xs(t,e){if(!t)return{};const i=t.headers;return i?i instanceof Headers?Ts(i,e):Array.isArray(i)?{}:ys(i,e):{}}async function Es(t,e,i){try{const n=function(t,e,i){const{startTimestamp:n,endTimestamp:r,input:s,xhr:o}=e,{url:a,method:h,status_code:l=0,request_body_size:c,response_body_size:u}=t.data;if(!a)return null;if(!bs(a,i.networkDetailAllowUrls)||bs(a,i.networkDetailDenyUrls)){return{startTimestamp:n,endTimestamp:r,url:a,method:h,statusCode:l,request:gs(c),response:gs(u)}}const d=o[Te.Er],p=d?ys(d.request_headers,i.networkRequestHeaders):{},f=ys(function(t){const e=t.getAllResponseHeaders();if(!e)return{};return e.split("\r\n").reduce(((t,e)=>{const[i,n]=e.split(": ");return t[i.toLowerCase()]=n,t}),{})}(o),i.networkResponseHeaders),m=_s(p,c,i.networkCaptureBodies?fs(s):void 0),g=_s(f,u,i.networkCaptureBodies?e.xhr.responseText:void 0);return{startTimestamp:n,endTimestamp:r,url:a,method:h,statusCode:l,request:m,response:g}}(t,e,i),r=ms("resource.xhr",n);$r(i.replay,r)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay] Failed to capture fetch breadcrumb",t)}}function As(t){const e=(0,j.BF)().getClient();try{const i=new TextEncoder,{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a}=t.getOptions(),l={replay:t,textEncoder:i,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a};e&&e.on?e.on("beforeAddBreadcrumb",((t,e)=>function(t,e,i){if(!e.data)return;try{(function(t){return"xhr"===t.category})(e)&&function(t){return t&&t.xhr}(i)&&(!function(t,e,i){const{xhr:n,input:r}=e,s=ds(r,i.textEncoder),o=n.getResponseHeader("content-length")?ps(n.getResponseHeader("content-length")):ds(n.response,i.textEncoder);void 0!==s&&(t.data.request_body_size=s),void 0!==o&&(t.data.response_body_size=o)}(e,i,t),Es(e,i,t)),function(t){return"fetch"===t.category}(e)&&function(t){return t&&t.response}(i)&&(!function(t,e,i){const{input:n,response:r}=e,s=ds(Ss(n),i.textEncoder),o=r?ps(r.headers.get("content-length")):void 0;void 0!==s&&(t.data.request_body_size=s),void 0!==o&&(t.data.response_body_size=o)}(e,i,t),ws(e,i,t))}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("Error when enriching network breadcrumb")}}(l,t,e))):((0,Te.ON)("fetch",function(t){return e=>{if(!t.isEnabled())return;const i=function(t){const{startTimestamp:e,endTimestamp:i,fetchData:n,response:r}=t;if(!i)return null;const{method:s,url:o}=n;return{type:"resource.fetch",start:e/1e3,end:i/1e3,name:o,data:{method:s,statusCode:r?r.status:void 0}}}(e);$r(t,i)}}(t)),(0,Te.ON)("xhr",Kr(t)))}catch(t){}}let Is=null;const Cs=t=>e=>{if(!t.isEnabled())return;const i=function(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();if(Is===e||!e)return null;if(Is=e,!function(t){return!!t.category}(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||0===e.length)return cr(t);let i=!1;const n=e.map((t=>{if(!t)return t;if("string"==typeof t)return t.length>_i?(i=!0,`${t.slice(0,_i)}…`):t;if("object"==typeof t)try{const e=S(t,7),n=JSON.stringify(e);if(n.length>_i){const t=us(n.slice(0,_i)),e=JSON.parse(t);return i=!0,e}return e}catch(t){}return t}));return cr({...t,data:{...t.data,arguments:n,...i?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return cr(e)}(e);i&&ir(t,i)};function Ps(t){return!(!t||!t.on)}function Rs(t){const{jsHeapSizeLimit:e,totalJSHeapSize:i,usedJSHeapSize:n}=t,r=Date.now()/1e3;return{type:"memory",name:"memory",start:r,end:r,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:i,usedJSHeapSize:n}}}}const Os={resource:function(t){const{entryType:e,initiatorType:i,name:n,responseEnd:r,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:h,transferSize:l}=t;if(["fetch","xmlhttprequest"].includes(i))return null;return{type:`${e}.${i}`,start:Ms(s),end:Ms(r),name:n,data:{size:l,statusCode:h,decodedBodySize:o,encodedBodySize:a}}},paint:function(t){const{duration:e,entryType:i,name:n,startTime:r}=t,s=Ms(r);return{type:i,name:n,start:s,end:s+e,data:void 0}},navigation:function(t){const{entryType:e,name:i,decodedBodySize:n,duration:r,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:h,domInteractive:l,loadEventStart:c,loadEventEnd:u,redirectCount:d,startTime:p,transferSize:f,type:m}=t;if(0===r)return null;return{type:`${e}.${m}`,start:Ms(p),end:Ms(s),name:i,data:{size:f,decodedBodySize:n,encodedBodySize:o,duration:r,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:h,loadEventStart:c,loadEventEnd:u,domComplete:s,redirectCount:d}}},"largest-contentful-paint":function(t){const{entryType:e,startTime:i,size:n}=t;let r=0;if(pi.performance){const t=pi.performance.getEntriesByType("navigation")[0];r=t&&t.activationStart||0}const s=Math.max(i-r,0),o=Ms(r)+s/1e3;return{type:e,name:e,start:o,end:o,data:{value:s,size:n,nodeId:tr.mirror.getId(t.element)}}}};function ks(t){return void 0===Os[t.entryType]?null:Os[t.entryType](t)}function Ms(t){return((Dt.k3||pi.performance.timeOrigin)+t)/1e3}function Ds(t){let e=!1;return(i,n)=>{if(!t.checkAndHandleExpiredSession())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("[Replay] Received replay event after session expired."));const r=n||!e;e=!0,t.addUpdate((()=>{if("buffer"===t.recordingMode&&r&&t.setInitialState(),!Ur(t,i,r))return!0;if(!r)return!1;if(function(t,e){if(!e||!t.session||0!==t.session.segmentId)return;Ur(t,function(t){const e=t.getOptions();return{type:$i.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:!!t.eventBuffer&&"worker"===t.eventBuffer.type,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}(t),!1)}(t,r),t.session&&t.session.previousSessionId)return!0;if("buffer"===t.recordingMode&&t.session&&t.eventBuffer){const e=t.eventBuffer.getEarliestTimestamp();e&&(br(`[Replay] Updating session start time to earliest event in buffer to ${new Date(e)}`,t.getOptions()._experiments.traceInternals),t.session.started=e,t.getOptions().stickySession&&kr(t.session))}return"session"===t.recordingMode&&t.flush(),!0}))}}async function Ns({recordingData:t,replayId:e,segmentId:i,eventContext:n,timestamp:r,session:s}){const o=function({recordingData:t,headers:e}){let i;const n=`${JSON.stringify(e)}\n`;if("string"==typeof t)i=`${n}${t}`;else{const e=(new TextEncoder).encode(n);i=new Uint8Array(e.length+t.length),i.set(e),i.set(t,e.length)}return i}({recordingData:t,headers:{segment_id:i}}),{urls:a,errorIds:h,traceIds:l,initialTimestamp:c}=n,u=(0,j.BF)(),d=u.getClient(),p=u.getScope(),f=d&&d.getTransport(),m=d&&d.getDsn();if(!(d&&f&&m&&s.sampled))return;const g={type:"replay_event",replay_start_timestamp:c/1e3,timestamp:r/1e3,error_ids:h,trace_ids:l,urls:a,replay_id:e,segment_id:i,replay_type:s.sampled},_=await async function({client:t,scope:e,replayId:i,event:n}){const r={event_id:i,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit&&t.emit("preprocessEvent",n,r);const s=await Lt(t.getOptions(),n,r,e,t);if(!s)return null;s.platform=s.platform||"javascript";const o=t.getSdkMetadata&&t.getSdkMetadata(),{name:a,version:h}=o&&o.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:h||"0.0.0"},s}({scope:p,client:d,replayId:e,event:g});if(!_)return d.recordDroppedEvent("event_processor","replay",g),void br("An event processor returned `null`, will not send event.");delete _.sdkProcessingMetadata;const y=function(t,e,i,n){return E(D(t,M(t),n,i),[[{type:"replay_event"},t],[{type:"replay_recording",length:"string"==typeof e?(new TextEncoder).encode(e).length:e.length},e]])}(_,o,m,d.getOptions().tunnel);let v;try{v=await f.send(y)}catch(t){const e=new Error(mi);try{e.cause=t}catch(t){}throw e}if(!v)return v;if("number"==typeof v.statusCode&&(v.statusCode<200||v.statusCode>=300))throw new Ls(v.statusCode);return v}class Ls extends Error{constructor(t){super(`Transport returned status code ${t}`)}}async function Bs(t,e={count:0,interval:5e3}){const{recordingData:i,options:n}=t;if(i.length)try{return await Ns(t),!0}catch(i){if(i instanceof Ls)throw i;if(Y("Replays",{_retryCount:e.count}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n._experiments&&n._experiments.captureExceptions&&H(i),e.count>=3){const t=new Error(`${mi} - max retries exceeded`);try{t.cause=i}catch(t){}throw t}return e.interval*=++e.count,new Promise(((i,n)=>{setTimeout((async()=>{try{await Bs(t,e),i(!0)}catch(t){n(t)}}),e.interval)}))}}const Fs="__THROTTLED";function Us(t,e,i){const n=new Map;let r=!1;return(...s)=>{const o=Math.floor(Date.now()/1e3);if((t=>{const e=t-i;n.forEach(((t,i)=>{i<e&&n.delete(i)}))})(o),[...n.values()].reduce(((t,e)=>t+e),0)>=e){const t=r;return r=!0,t?"__SKIPPED":Fs}r=!1;const a=n.get(o)||0;return n.set(o,a+1),t(...s)}}class Gs{constructor({options:t,recordingOptions:e}){Gs.prototype.__init.call(this),Gs.prototype.__init2.call(this),Gs.prototype.__init3.call(this),Gs.prototype.__init4.call(this),Gs.prototype.__init5.call(this),Gs.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEvents=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=e,this._options=t,this._debouncedFlush=function(t,e,i){let n,r,s;const o=i&&i.maxWait?Math.max(i.maxWait,e):0;function a(){return h(),n=t(),n}function h(){void 0!==r&&clearTimeout(r),void 0!==s&&clearTimeout(s),r=s=void 0}function l(){return r&&clearTimeout(r),r=setTimeout(a,e),o&&void 0===s&&(s=setTimeout(a,o)),n}return l.cancel=h,l.flush=function(){return void 0!==r||void 0!==s?a():n},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Us(((t,e)=>function(t,e,i){return jr(t,e)?Gr(t,e,i):Promise.resolve(null)}(this,t,e)),300,5);const{slowClickTimeout:i,slowClickIgnoreSelectors:n}=this.getOptions(),r=i?{threshold:Math.min(3e3,i),timeout:i,scrollTimeout:300,ignoreSelector:n?n.join(","):""}:void 0;r&&(this.clickDetector=new ar(this,r))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:e,sessionSampleRate:i}=this._options;e<=0&&i<=0||(this._initializeSessionForSampling(t),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",wr(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");wr("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=Fr({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");wr("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=Fr({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{this._stopRecording=tr({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Ds(this),onMutation:this._onMutationHandler})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:e}={}){if(this._isEnabled){this._isEnabled=!1;try{br("[Replay] Stopping Replay"+(e?` triggered by ${e}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Rr(this)}catch(t){this._handleException(t)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),br("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),br("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const e=Date.now();br("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const i=this.stopRecording();t&&i&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(e),this._updateSessionActivity(e),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const e=t();"buffer"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&Nr(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const t=`${pi.location.pathname}${pi.location.hash}${pi.location.search}`,e=`${pi.location.origin}${t}`;this.performanceEvents=[],this._clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=Date.now(),this._context.urls.push(e)}throttledAddEvent(t,e){const i=this._throttledAddEvent(t,e);if(i===Fs){const t=cr({category:"replay.throttled"});this.addUpdate((()=>!Ur(this,{type:5,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t,metric:!0}})))}return i}getCurrentRoute(){const t=this.lastTransaction||(0,j.BF)().getScope().getTransaction();if(t&&["route","custom"].includes(t.metadata.source))return t.name}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Cr({useCompression:this._options.useCompression}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay]",t),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&H(t)}_initializeSessionForSampling(t){const e=this._options.errorSampleRate>0,i=Fr({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:e});this.session=i}_checkSession(){if(!this.session)return!1;const t=this.session;return!Br(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(t),!1)}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{pi.document.addEventListener("visibilitychange",this._handleVisibilityChange),pi.addEventListener("blur",this._handleWindowBlur),pi.addEventListener("focus",this._handleWindowFocus),pi.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(t){const e=(0,j.BF)().getScope(),i=(0,j.BF)().getClient();e.addScopeListener(Cs(t)),(0,Te.ON)("dom",fr(t)),(0,Te.ON)("history",Yr(t)),As(t);const n=Vr(t,!Ps(i));i&&i.addEventProcessor?i.addEventProcessor(n):(0,bt.lb)(n),Ps(i)&&(i.on("afterSendEvent",Wr(t)),i.on("createDsc",(e=>{const i=t.getSessionId();i&&t.isEnabled()&&"session"===t.recordingMode&&(e.replay_id=i)})),i.on("startTransaction",(e=>{t.lastTransaction=e})),i.on("finishTransaction",(e=>{t.lastTransaction=e})))}(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}"PerformanceObserver"in pi&&(this._performanceObserver=vr(this))}_removeListeners(){try{pi.document.removeEventListener("visibilitychange",this._handleVisibilityChange),pi.removeEventListener("blur",this._handleWindowBlur),pi.removeEventListener("focus",this._handleWindowFocus),pi.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=void 0)}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{"visible"===pi.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=cr({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=cr({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{gr(this,t)}}_doChangeToBackgroundTasks(t){if(!this.session)return;Lr(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;this.checkAndHandleExpiredSession()?t&&this._createCustomBreadcrumb(t):br("[Replay] Document has become active, but session has expired")}_triggerFullSnapshot(t=!0){try{br("[Replay] Taking full rrweb snapshot"),tr.takeFullSnapshot(t)}catch(t){this._handleException(t)}}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate((()=>{this.throttledAddEvent({type:$i.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})}))}_addPerformanceEntries(){const t=[...this.performanceEvents];return this.performanceEvents=[],Promise.all(Xr(this,function(t){return t.map(ks).filter(Boolean)}(t)))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:e}=this;if(!t||!e)return;if(t.segmentId)return;const i=e.getEarliestTimestamp();i&&i<this._context.initialTimestamp&&(this._context.initialTimestamp=i)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(this.session&&this.eventBuffer&&t){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(t){try{return Promise.all(Xr(t,[Rs(pi.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const e=Date.now();if(e-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const i=this._popEventContext(),n=this.session.segmentId++;this._maybeSaveSession();const r=await this.eventBuffer.finish();await Bs({replayId:t,recordingData:r,segmentId:n,eventContext:i,session:this.session,options:this.getOptions(),timestamp:e})}catch(t){this._handleException(t),this.stop({reason:"sendReplay"});const e=(0,j.BF)().getClient();e&&e.recordDroppedEvent("send_error","replay")}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error("[Replay] No session found to flush."));const e=this.session.started,i=Date.now()-e;this._debouncedFlush.cancel();const n=i<this._options.minReplayDuration,r=i>this._options.maxReplayDuration+5e3;if(n||r)return br(`[Replay] Session duration (${Math.floor(i/1e3)}s) is too ${n?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(n&&this._debouncedFlush());const s=this.eventBuffer;if(s&&0===this.session.segmentId&&!s.hasCheckout&&br("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.error(t)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&kr(this.session)}__init6(){this._onMutationHandler=t=>{const e=t.length,i=this._options.mutationLimit,n=i&&e>i;if(e>this._options.mutationBreadcrumbLimit||n){const t=cr({category:"replay.mutations",data:{count:e,limit:n}});this._createCustomBreadcrumb(t)}return!n||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function js(t,e,i,n){const r=[...t,..."string"==typeof n?n.split(","):[],...e];return void 0!==i&&("string"==typeof i&&r.push(`.${i}`),console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")),r.join(",")}function Hs({mask:t,unmask:e,block:i,unblock:n,ignore:r,blockClass:s,blockSelector:o,maskTextClass:a,maskTextSelector:h,ignoreClass:l}){const c=js(t,[".sentry-mask","[data-sentry-mask]"],a,h),u=js(e,[".sentry-unmask","[data-sentry-unmask]"]),d={maskTextSelector:c,unmaskTextSelector:u,maskInputSelector:c,unmaskInputSelector:u,blockSelector:js(i,[".sentry-block","[data-sentry-block]",'base[href="/"]'],s,o),unblockSelector:js(n,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:js(r,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return s instanceof RegExp&&(d.blockClass=s),a instanceof RegExp&&(d.maskTextClass=a),d}function zs(){return"undefined"!=typeof window&&(!(0,di.wD)()||"undefined"!=typeof process&&"renderer"===process.type)}const Ws='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Vs=["content-length","content-type","accept"];let Xs=!1;class Ys{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=5e3,flushMaxDelay:e=5500,minReplayDuration:i=4999,maxReplayDuration:n=36e5,stickySession:r=!0,useCompression:s=!0,_experiments:o={},sessionSampleRate:a,errorSampleRate:h,maskAllText:l=!0,maskAllInputs:c=!0,blockAllMedia:u=!0,mutationBreadcrumbLimit:d=750,mutationLimit:p=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:_=[],networkCaptureBodies:y=!0,networkRequestHeaders:v=[],networkResponseHeaders:b=[],mask:w=[],unmask:S=[],block:T=[],unblock:x=[],ignore:E=[],maskFn:A,beforeAddRecordingEvent:I,blockClass:C,blockSelector:P,maskInputOptions:R,maskTextClass:O,maskTextSelector:k,ignoreClass:M}={}){if(this.name=Ys.id,this._recordingOptions={maskAllInputs:c,maskAllText:l,maskInputOptions:{...R||{},password:!0},maskTextFn:A,maskInputFn:A,...Hs({mask:w,unmask:S,block:T,unblock:x,ignore:E,blockClass:C,blockSelector:P,maskTextClass:O,maskTextSelector:k,ignoreClass:M}),slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0},this._initialOptions={flushMinDelay:t,flushMaxDelay:e,minReplayDuration:Math.min(i,15e3),maxReplayDuration:Math.min(n,vi),stickySession:r,sessionSampleRate:a,errorSampleRate:h,useCompression:s,blockAllMedia:u,maskAllInputs:c,maskAllText:l,mutationBreadcrumbLimit:d,mutationLimit:p,slowClickTimeout:f,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:_,networkCaptureBodies:y,networkRequestHeaders:qs(v),networkResponseHeaders:qs(b),beforeAddRecordingEvent:I,_experiments:o},"number"==typeof a&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${a} })`),this._initialOptions.sessionSampleRate=a),"number"==typeof h&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${h} })`),this._initialOptions.errorSampleRate=h),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ws}`:Ws),this._isInitialized&&zs())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Xs}set _isInitialized(t){Xs=t}setupOnce(){zs()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(t){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const t=function(t){const e=(0,j.BF)().getClient(),i=e&&e.getOptions(),n={sessionSampleRate:0,errorSampleRate:0,...(0,s.Ce)(t)};if(!i)return console.warn("SDK client is not available."),n;null==t.sessionSampleRate&&null==t.errorSampleRate&&null==i.replaysSessionSampleRate&&null==i.replaysOnErrorSampleRate&&console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.");"number"==typeof i.replaysSessionSampleRate&&(n.sessionSampleRate=i.replaysSessionSampleRate);"number"==typeof i.replaysOnErrorSampleRate&&(n.errorSampleRate=i.replaysOnErrorSampleRate);return n}(this._initialOptions);this._replay=new Gs({options:t,recordingOptions:this._recordingOptions})}}function qs(t){return[...Vs,...t.map((t=>t.toLowerCase()))]}Ys.__initStatic();var $s=i(7712),Ks=i(7161);const Js=100,Zs=5e3,Qs=36e5;function to(t,e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.info(`[Offline]: ${t}`,e)}function eo(t){return e=>{const i=t(e),n=e.createStore?e.createStore(e):void 0;let r,s=Zs;function o(t,i,n){return r=["replay_event","replay_recording","client_report"],!I(t,((t,e)=>r.includes(e)))&&(!e.shouldStore||e.shouldStore(t,i,n));var r}function a(t){n&&(r&&clearTimeout(r),r=setTimeout((async()=>{r=void 0;const t=await n.pop();t&&(to("Attempting to send previously queued event"),l(t).catch((t=>{to("Failed to retry sending",t)})))}),t),"number"!=typeof r&&r.unref&&r.unref())}function h(){r||(a(s),s=Math.min(2*s,Qs))}async function l(t){try{const e=await i.send(t);let n=Js;if(e)if(e.headers&&e.headers["retry-after"])n=ht(e.headers["retry-after"]);else if((e.statusCode||0)>=400)return e;return a(n),s=Zs,e}catch(e){if(n&&await o(t,e,s))return await n.insert(t),h(),to("Error sending. Event queued",e),{};throw e}}return e.flushAtStartup&&h(),{send:l,flush:t=>i.flush(t)}}}function io(t){return new Promise(((e,i)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>i(t.error)}))}function no(t){return io(t.getAllKeys())}function ro(t){let e;function i(){return null==e&&(e=function(t,e){const i=indexedDB.open(t);i.onupgradeneeded=()=>i.result.createObjectStore(e);const n=io(i);return t=>n.then((i=>t(i.transaction(e,"readwrite").objectStore(e))))}(t.dbName||"sentry-offline",t.storeName||"queue")),e}return{insert:async e=>{try{const n=await P(e,t.textEncoder);await function(t,e,i){return t((t=>no(t).then((n=>{if(!(n.length>=i))return t.put(e,Math.max(...n,0)+1),io(t.transaction)}))))}(i(),n,t.maxQueueSize||30)}catch(t){}},pop:async()=>{try{const e=await function(t){return t((t=>no(t).then((e=>{if(0!==e.length)return io(t.get(e[0])).then((i=>(t.delete(e[0]),io(t.transaction).then((()=>i)))))}))))}(i());if(e)return function(t,e,i){let n="string"==typeof t?e.encode(t):t;function r(t){const e=n.subarray(0,t);return n=n.subarray(t+1),e}function s(){let t=n.indexOf(10);return t<0&&(t=n.length),JSON.parse(i.decode(r(t)))}const o=s(),a=[];for(;n.length;){const t=s(),e="number"==typeof t.length?t.length:void 0;a.push([t,e?r(e):s()])}return[o,a]}(e,t.textEncoder||new TextEncoder,t.textDecoder||new TextDecoder)}catch(t){}}}}function so(t){return function(t){return e=>t({...e,createStore:ro})}(eo(t))}const oo=1e6,ao=String(0),ho="main";let lo="",co="",uo="",po=Et.navigator&&Et.navigator.userAgent||"",fo="";const mo=Et.navigator&&Et.navigator.language||Et.navigator&&Et.navigator.languages&&Et.navigator.languages[0]||"";const go=Et.navigator&&Et.navigator.userAgentData;var _o;function yo(t){return function(t){return!("thread_metadata"in t)}(t)?function(t){let e,i=0;const n={samples:[],stacks:[],frames:[],thread_metadata:{[ao]:{name:ho}}};if(!t.samples.length)return n;const r=t.samples[0].timestamp,s="number"==typeof performance.timeOrigin?performance.timeOrigin:Dt.k3||0,o=s-(Dt.k3||s);for(let s=0;s<t.samples.length;s++){const a=t.samples[s];if(void 0===a.stackId){void 0===e&&(e=i,n.stacks[e]=[],i++),n.samples[s]={elapsed_since_start_ns:((a.timestamp+o-r)*oo).toFixed(0),stack_id:e,thread_id:ao};continue}let h=t.stacks[a.stackId];const l=[];for(;h;){l.push(h.frameId);const e=t.frames[h.frameId];void 0===n.frames[h.frameId]&&(n.frames[h.frameId]={function:e.name,abs_path:"number"==typeof e.resourceId?t.resources[e.resourceId]:void 0,lineno:e.line,colno:e.column}),h=void 0===h.parentId?void 0:t.stacks[h.parentId]}const c={elapsed_since_start_ns:((a.timestamp+o-r)*oo).toFixed(0),stack_id:i,thread_id:ao};n.stacks[i]=l,n.samples[s]=c,i++}return n}(t):t}function vo(t,e,i){if("transaction"!==t.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==e)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const n=function(t){const e=t&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id;return"string"==typeof e&&32!==e.length&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`[Profiling] Invalid traceId: ${e} on profiled event`),"string"!=typeof e?"":e}(t),r=yo(e),s="number"==typeof t.start_timestamp?1e3*t.start_timestamp:Date.now(),o="number"==typeof t.timestamp?1e3*t.timestamp:Date.now();return{event_id:i,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:t.release||"",environment:t.environment||Nt.U,runtime:{name:"javascript",version:Et.navigator.userAgent},os:{name:lo,version:co,build_number:po},device:{locale:mo,model:fo,manufacturer:po,architecture:uo,is_emulator:!1},debug_meta:{images:wo(e.resources)},profile:r,transactions:[{name:t.transaction||"",id:t.event_id||(0,l.eJ)(),trace_id:n,active_thread_id:ao,relative_start_ns:"0",relative_end_ns:(1e6*(o-s)).toFixed(0)}]}}"object"==typeof(_o=go)&&null!==_o&&"getHighEntropyValues"in _o&&go.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((t=>{if(lo=t.platform||"",uo=t.architecture||"",fo=t.model||"",co=t.platformVersion||"",t.fullVersionList&&t.fullVersionList.length>0){const e=t.fullVersionList[t.fullVersionList.length-1];po=`${e.brand} ${e.version}`}})).catch((t=>{}));const bo=new WeakMap;function wo(t){const e=N.OW._sentryDebugIds;if(!e)return[];const i=(0,j.BF)();if(!i)return[];const n=i.getClient();if(!n)return[];const r=n.getOptions();if(!r)return[];const s=r.stackParser;if(!s)return[];let o;const a=bo.get(s);a?o=a:(o=new Map,bo.set(s,o));const h=Object.keys(e).reduce(((t,i)=>{let n;const r=o.get(i);r?n=r:(n=s(i),o.set(i,n));for(let r=n.length-1;r>=0;r--){const s=n[r],o=s&&s.filename;if(s&&o){t[o]=e[i];break}}return t}),{}),l=[];for(const e of t)e&&h[e]&&l.push({type:"sourcemap",code_file:e,debug_id:h[e]});return l}function So(t,e,i){return function(t){return t.samples.length<2?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!t.frames.length||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Discarding profile because it contains no frames"),!1)}(e)?vo(i,e,t):null}const To=new Map;const xo=3e4;let Eo=!1;function Ao(t){return t?Io(t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Transaction is undefined, skipping profiling"),t)}function Io(t){const e=Et.Profiler;if("function"!=typeof e)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."),t;if(Eo)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Profiling has been disabled for the duration of the current user session."),t;const i=(0,j.BF)().getClient(),n=i&&i.getOptions();if(!n)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Profiling disabled, no options found."),t;const r=n.profilesSampleRate;if(!("number"!=typeof(s=r)&&"boolean"!=typeof s||"number"==typeof s&&isNaN(s)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),0):!0===s||!1===s||!(s<0||s>1)||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${s}.`),0)))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.warn("[Profiling] Discarding profile because of invalid sample rate."),t;var s;if(!r)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),t;if(!(!0===r||Math.random()<r))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),t;const o=Math.floor(xo/10);let a;try{a=new e({sampleInterval:10,maxBufferSize:o})}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(h.vF.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.vF.log("[Profiling] Disabling profiling for current user session.")),Eo=!0}if(!a)return t;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`[Profiling] started profiling transaction: ${t.name||t.description}`);const c=(0,l.eJ)();async function u(){if(!t)return null;if(!a)return null;const e=t.startChild({description:"profiler.stop",op:"profiler",origin:"auto.profiler.browser"});return a.stop().then((i=>(e.finish(),d&&(Et.clearTimeout(d),d=void 0),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`[Profiling] stopped profiling of transaction: ${t.name||t.description}`),i?(function(t,e){if(To.set(t,e),To.size>30){const t=To.keys().next().value;To.delete(t)}}(c,i),null):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`[Profiling] profiler returned null profile for: ${t.name||t.description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((t=>(e.finish(),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] error while stopping profiler:",t),null)))}let d=Et.setTimeout((()=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] max profile duration elapsed, stopping profiling for:",t.name||t.description),u()}),xo);const p=t.finish.bind(t);return t.finish=function(){return t?(u().then((()=>{t.setContext("profile",{profile_id:c}),p()}),(()=>{p()})),t):p()},t}class Co{static __initStatic(){this.id="BrowserProfilingIntegration"}constructor(){this.name=Co.id}setupOnce(t,e){this.getCurrentHub=e;const i=this.getCurrentHub().getClient();i&&"function"==typeof i.on?(i.on("startTransaction",(t=>{Io(t)})),i.on("beforeEnvelope",(t=>{if(!To.size)return;const e=function(t){const e=[];return I(t,((t,i)=>{if("transaction"===i)for(let i=1;i<t.length;i++){const n=t[i];n&&n.contexts&&n.contexts.profile&&n.contexts.profile.profile_id&&e.push(t[i])}})),e}(t);if(!e.length)return;const i=[];for(const t of e){const e=t&&t.contexts,n=e&&e.profile&&e.profile.profile_id;if(!n){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log("[Profiling] cannot find profile for a transaction without a profile context");continue}e&&e.profile&&delete e.profile;const r=To.get(n);if(!r){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.vF.log(`[Profiling] Could not retrieve profile for transaction: ${n}`);continue}To.delete(n);const s=So(n,r,t);s&&i.push(s)}!function(t,e){if(!e.length)return t;for(const i of e)t[1].push([{type:"profile"},i])}(t,i)}))):h.vF.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}Co.__initStatic();let Po={};Et.Sentry&&Et.Sentry.Integrations&&(Po=Et.Sentry.Integrations);const Ro={...Po,...n,...r}},2667:(t,e,i)=>{"use strict";i.d(e,{U:()=>n});const n="production"},4479:(t,e,i)=>{"use strict";i.d(e,{jB:()=>l,lG:()=>a,lb:()=>h});var n=i(3289),r=i(1694),s=i(8864),o=i(9996);function a(){return(0,n.BY)("globalEventProcessors",(()=>[]))}function h(t){a().push(t)}function l(t,e,i,n=0){return new r.T2(((r,a)=>{const h=t[n];if(null===e||"function"!=typeof h)r(e);else{const c=h({...e},i);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&h.id&&null===c&&s.vF.log(`Event processor "${h.id}" dropped event`),(0,o.Qg)(c)?c.then((e=>l(t,e,i,n+1).then(r))).then(null,a):l(t,c,i,n+1).then(r).then(null,a)}}))}},1205:(t,e,i)=>{"use strict";i.d(e,{BF:()=>m,EU:()=>p,Me:()=>y,YZ:()=>d,gM:()=>f});var n=i(2628),r=i(2461),s=i(8864),o=i(3289),a=i(2667),h=i(3458),l=i(8822);const c=4,u=100;class d{constructor(t,e=new h.H,i=c){this._version=i,this._stack=[{scope:e}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=h.H.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(t){const e=this.pushScope();try{t(e)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const i=this._lastEventId=e&&e.event_id?e.event_id:(0,n.eJ)(),r=new Error("Sentry syntheticException");return this._withClient(((n,s)=>{n.captureException(t,{originalException:t,syntheticException:r,...e,event_id:i},s)})),i}captureMessage(t,e,i){const r=this._lastEventId=i&&i.event_id?i.event_id:(0,n.eJ)(),s=new Error(t);return this._withClient(((n,o)=>{n.captureMessage(t,e,{originalException:t,syntheticException:s,...i,event_id:r},o)})),r}captureEvent(t,e){const i=e&&e.event_id?e.event_id:(0,n.eJ)();return t.type||(this._lastEventId=i),this._withClient(((n,r)=>{n.captureEvent(t,{...e,event_id:i},r)})),i}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:i,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:a=u}=n.getOptions&&n.getOptions()||{};if(a<=0)return;const h={timestamp:(0,r.lu)(),...t},l=o?(0,s.pq)((()=>o(h,e))):h;null!==l&&(n.emit&&n.emit("beforeAddBreadcrumb",l,e),i.addBreadcrumb(l,a))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,e){this.getScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e)}setContext(t,e){this.getScope().setContext(t,e)}configureScope(t){const{scope:e,client:i}=this.getStackTop();i&&t(e)}run(t){const e=f(this);try{t(this)}finally{f(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.vF.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){const i=this._callExtensionMethod("startTransaction",t,e);if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&!i){this.getClient()?console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):console.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return i}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop().scope,e=t.getSession();e&&(0,l.Vu)(e),this._sendSessionUpdate(),t.setSession()}startSession(t){const{scope:e,client:i}=this.getStackTop(),{release:n,environment:r=a.U}=i&&i.getOptions()||{},{userAgent:s}=o.OW.navigator||{},h=(0,l.fj)({release:n,environment:r,user:e.getUser(),...s&&{userAgent:s},...t}),c=e.getSession&&e.getSession();return c&&"ok"===c.status&&(0,l.qO)(c,{status:"exited"}),this.endSession(),e.setSession(h),h}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop(),i=t.getSession();i&&e&&e.captureSession&&e.captureSession(i)}_withClient(t){const{scope:e,client:i}=this.getStackTop();i&&t(i,e)}_callExtensionMethod(t,...e){const i=p().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[t])return i.extensions[t].apply(this,e);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.vF.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function p(){return o.OW.__SENTRY__=o.OW.__SENTRY__||{extensions:{},hub:void 0},o.OW}function f(t){const e=p(),i=y(e);return v(e,t),i}function m(){const t=p();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return g(t)}function g(t=p()){return _(t)&&!y(t).isOlderThan(c)||v(t,new d),y(t)}function _(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function y(t){return(0,o.BY)("hub",(()=>new d),t)}function v(t,e){if(!t)return!1;return(t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0}},3458:(t,e,i)=>{"use strict";i.d(e,{H:()=>h});var n=i(9996),r=i(2461),s=i(2628),o=i(4479),a=i(8822);class h{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=l()}static clone(t){const e=new h;return t&&(e._breadcrumbs=[...t._breadcrumbs],e._tags={...t._tags},e._extra={...t._extra},e._contexts={...t._contexts},e._user=t._user,e._level=t._level,e._span=t._span,e._session=t._session,e._transactionName=t._transactionName,e._fingerprint=t._fingerprint,e._eventProcessors=[...t._eventProcessors],e._requestSession=t._requestSession,e._attachments=[...t._attachments],e._sdkProcessingMetadata={...t._sdkProcessingMetadata},e._propagationContext={...t._propagationContext}),e}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&(0,a.qO)(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if("function"==typeof t){const e=t(this);return e instanceof h?e:this}return t instanceof h?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):(0,n.Qd)(t)&&(this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=l(),this}addBreadcrumb(t,e){const i="number"==typeof e?e:100;if(i<=0)return this;const n={timestamp:(0,r.lu)(),...t},s=this._breadcrumbs;return s.push(n),this._breadcrumbs=s.length>i?s.slice(-i):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,e={},i){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const e=this._span.transaction;if(e){t.sdkProcessingMetadata={dynamicSamplingContext:e.getDynamicSamplingContext(),...t.sdkProcessingMetadata};const i=e.name;i&&(t.tags={transaction:i,...t.tags})}}this._applyFingerprint(t);const n=this._getBreadcrumbs(),r=[...t.breadcrumbs||[],...n];return t.breadcrumbs=r.length>0?r:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},(0,o.jB)([...i||[],...(0,o.lG)(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?(0,s.k9)(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function l(){return{traceId:(0,s.eJ)(),spanId:(0,s.eJ)().substring(16)}}},8822:(t,e,i)=>{"use strict";i.d(e,{Vu:()=>h,fj:()=>o,qO:()=>a});var n=i(2461),r=i(2628),s=i(9911);function o(t){const e=(0,n.zf)(),i={sid:(0,r.eJ)(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return(0,s.Ce)({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(i)};return t&&a(i,t),i}function a(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||(0,n.zf)(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:(0,r.eJ)()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function h(t,e){let i={};e?i={status:e}:"ok"===t.status&&(i={status:"exited"}),a(t,i)}},4800:(t,e,i)=>{"use strict";i.d(e,{l:()=>s});var n=i(9911),r=i(2667);function s(t,e,i){const s=e.getOptions(),{publicKey:o}=e.getDsn()||{},{segment:a}=i&&i.getUser()||{},h=(0,n.Ce)({environment:s.environment||r.U,release:s.release,user_segment:a,public_key:o,trace_id:t});return e.emit&&e.emit("createDsc",h),h}},3468:(t,e,i)=>{"use strict";i.d(e,{U:()=>_,p:()=>g});var n=i(8864),r=i(9996),s=i(1205),o=i(5003),a=i(8434),h=i(9122);let l=!1;function c(){const t=(0,h.Z7)();if(t){const e="internal_error";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}c.tag="sentry_tracingErrorCallback";var u=i(9133),d=i(7595);function p(){const t=this.getScope().getSpan();return t?{"sentry-trace":t.toTraceparent()}:{}}function f(t,e,i){if(!(0,o.w)(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setMetadata({sampleRate:Number(t.sampled)}),t;let s;return"function"==typeof e.tracesSampler?(s=e.tracesSampler(i),t.setMetadata({sampleRate:Number(s)})):void 0!==i.parentSampled?s=i.parentSampled:void 0!==e.tracesSampleRate?(s=e.tracesSampleRate,t.setMetadata({sampleRate:Number(s)})):(s=1,t.setMetadata({sampleRate:s})),function(t){if((0,r.yr)(t)||"number"!=typeof t&&"boolean"!=typeof t)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1;if(t<0||t>1)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1;return!0}(s)?s?(t.sampled=Math.random()<s,t.sampled?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log(`[Tracing] starting ${t.op} transaction - ${t.name}`),t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),t)):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function m(t,e){const i=this.getClient(),r=i&&i.getOptions()||{},s=r.instrumenter||"sentry",o=t.instrumenter||"sentry";s!==o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.error(`A transaction was started with instrumenter=\`${o}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let a=new d.Z(t,this);return a=f(a,r,{parentSampled:t.parentSampled,transactionContext:t,...e}),a.sampled&&a.initSpanRecorder(r._experiments&&r._experiments.maxSpans),i&&i.emit&&i.emit("startTransaction",a),a}function g(t,e,i,n,r,s,o){const a=t.getClient(),h=a&&a.getOptions()||{};let l=new u.zX(e,t,i,n,o,r);return l=f(l,h,{parentSampled:e.parentSampled,transactionContext:e,...s}),l.sampled&&l.initSpanRecorder(h._experiments&&h._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",l),l}function _(){const t=(0,s.EU)();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=m),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=p),l||(l=!0,(0,a.ON)("error",c),(0,a.ON)("unhandledrejection",c)))}},9133:(t,e,i)=>{"use strict";i.d(e,{Cq:()=>a,zX:()=>c});var n=i(2461),r=i(8864),s=i(5827),o=i(7595);const a={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},h=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class l extends s.lh{constructor(t,e,i,n){super(n),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=i}add(t){t.spanId!==this.transactionSpanId&&(t.finish=e=>{t.endTimestamp="number"==typeof e?e:(0,n.zf)(),this._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),super.add(t)}}class c extends o.Z{constructor(t,e,i=a.idleTimeout,n=a.finalTimeout,s=a.heartbeatInterval,o=!1){super(t,e),this._idleHub=e,this._idleTimeout=i,this._finalTimeout=n,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=h[4],o&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),e.configureScope((t=>t.setSpan(this)))),this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=h[3],this.finish())}),this._finalTimeout)}finish(t=(0,n.zf)()){if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setTag("finishReason",this._finishReason),this.spanRecorder){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanId===this.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const i=e.startTimestamp<t,n=(this._finalTimeout+this._idleTimeout)/1e3,s=e.endTimestamp-this.startTimestamp<n;if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=JSON.stringify(e,void 0,2);i?s||r.vF.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):r.vF.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return i&&s})),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] flushing IdleTransaction")}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] No active IdleTransaction");if(this._onScope){const t=this._idleHub.getScope();t.getTransaction()===this&&t.setSpan(void 0)}return super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this._finished||this._pushActivity(t)},i=t=>{this._finished||this._popActivity(t)};this.spanRecorder=new l(e,i,this.spanId,t),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:e}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===e,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=h[5],this.finish(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=h[1],this.finish(t))}),this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`[Tracing] popActivity ${t}`),delete this.activities[t],("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const t=(0,n.zf)();this._idleTimeoutCanceledPermanently?(this._finishReason=h[5],this.finish(t)):this._restartIdleTimeout(t+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=h[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}},5827:(t,e,i)=>{"use strict";i.d(e,{L9:()=>l,lh:()=>h,o6:()=>c});var n=i(2628),r=i(2461),s=i(8864),o=i(8768),a=i(9911);class h{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class l{constructor(t={}){this.traceId=t.traceId||(0,n.eJ)(),this.spanId=t.spanId||(0,n.eJ)().substring(16),this.startTimestamp=t.startTimestamp||(0,r.zf)(),this.tags=t.tags||{},this.data=t.data||{},this.instrumenter=t.instrumenter||"sentry",this.origin=t.origin||"manual",t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.name&&(this.description=t.name),t.status&&(this.status=t.status),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}get name(){return this.description||""}set name(t){this.setName(t)}startChild(t){const e=new l({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e),e.transaction=this.transaction,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&e.transaction){const i=`[Tracing] Starting '${t&&t.op||"< unknown op >"}' span on transaction '${e.transaction.name||"< unknown name >"}' (${e.transaction.spanId}).`;e.transaction.metadata.spanMetadata[e.spanId]={logMessage:i},s.vF.log(i)}return e}setTag(t,e){return this.tags={...this.tags,[t]:e},this}setData(t,e){return this.data={...this.data,[t]:e},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);const e=c(t);return"unknown_error"!==e&&this.setStatus(e),this}setName(t){this.description=t}isSuccess(){return"ok"===this.status}finish(t){if(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:t}=this.transaction.metadata.spanMetadata[this.spanId];t&&s.vF.log(t.replace("Starting","Finishing"))}this.endTimestamp="number"==typeof t?t:(0,r.zf)()}toTraceparent(){return(0,o.TC)(this.traceId,this.spanId,this.sampled)}toContext(){return(0,a.Ce)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return(0,a.Ce)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return(0,a.Ce)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}function c(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},7958:(t,e,i)=>{"use strict";i.d(e,{Bk:()=>c,Lk:()=>a,Uk:()=>l,nV:()=>h,uP:()=>o});var n=i(9996),r=i(1205),s=i(5003);function o(t,e,i=()=>{}){const s=d(t),o=(0,r.BF)(),a=o.getScope(),h=a.getSpan(),l=u(o,h,s);function c(){l&&l.finish(),o.getScope().setSpan(h)}let p;a.setSpan(l);try{p=e(l)}catch(t){throw l&&l.setStatus("internal_error"),i(t),c(),t}return(0,n.Qg)(p)?Promise.resolve(p).then((()=>{c()}),(t=>{l&&l.setStatus("internal_error"),i(t),c()})):c(),p}function a(t,e){const i=d(t),s=(0,r.BF)(),o=s.getScope(),a=o.getSpan(),h=u(s,a,i);function l(){h&&h.finish(),s.getScope().setSpan(a)}let c;o.setSpan(h);try{c=e(h)}catch(t){throw h&&h.setStatus("internal_error"),l(),t}return(0,n.Qg)(c)?Promise.resolve(c).then((()=>{l()}),(()=>{h&&h.setStatus("internal_error"),l()})):l(),c}function h(t,e){const i=d(t),s=(0,r.BF)(),o=s.getScope(),a=o.getSpan(),h=u(s,a,i);let l;o.setSpan(h);try{l=e(h,(function(){h&&h.finish(),s.getScope().setSpan(a)}))}catch(t){throw h&&h.setStatus("internal_error"),t}return(0,n.Qg)(l)&&Promise.resolve(l).then(void 0,(()=>{h&&h.setStatus("internal_error")})),l}function l(t){if(!(0,s.w)())return;const e={...t};void 0!==e.name&&void 0===e.description&&(e.description=e.name);const i=(0,r.BF)(),n=c();return n?n.startChild(e):i.startTransaction(e)}function c(){return(0,r.BF)().getScope().getSpan()}function u(t,e,i){if((0,s.w)())return e?e.startChild(i):t.startTransaction(i)}function d(t){const e={...t};return void 0!==e.name&&void 0===e.description&&(e.description=e.name),e}},7595:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(8864),r=i(9911),s=i(1205),o=i(4800),a=i(5827);class h extends a.L9{constructor(t,e){super(t),delete this.description,this._measurements={},this._contexts={},this._hub=e||(0,s.BF)(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{}},this._trimEnd=t.trimEnd,this.transaction=this;const i=this.metadata.dynamicSamplingContext;i&&(this._frozenDynamicSamplingContext={...i})}get name(){return this._name}set name(t){this.setName(t)}setName(t,e="custom"){this._name=t,this.metadata.source=e}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new a.lh(t)),this.spanRecorder.add(this)}setContext(t,e){null===e?delete this._contexts[t]:this._contexts[t]=e}setMeasurement(t,e,i=""){this._measurements[t]={value:e,unit:i}}setMetadata(t){this.metadata={...this.metadata,...t}}finish(t){if(void 0!==this.endTimestamp)return;this.name||(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t);const e=this._hub.getClient();if(e&&e.emit&&e.emit("finishTransaction",this),!0!==this.sampled)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(e&&e.recordDroppedEvent("sample_rate","transaction"));const i=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&t.endTimestamp)):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce(((t,e)=>t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t)).endTimestamp);const r=this.metadata,s={contexts:{...this._contexts,trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...r,dynamicSamplingContext:this.getDynamicSamplingContext()},...r.source&&{transaction_info:{source:r.source}}};return Object.keys(this._measurements).length>0&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),s.measurements=this._measurements),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(s)}toContext(){const t=super.toContext();return(0,r.Ce)({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const t=this._hub||(0,s.BF)(),e=t.getClient();if(!e)return{};const i=t.getScope(),n=(0,o.l)(this.traceId,e,i),r=this.metadata.sampleRate;void 0!==r&&(n.sample_rate=`${r}`);const a=this.metadata.source;return a&&"url"!==a&&(n.transaction=this.name),void 0!==this.sampled&&(n.sampled=String(this.sampled)),n}setHub(t){this._hub=t}}},9122:(t,e,i)=>{"use strict";i.d(e,{Z7:()=>r});var n=i(1205);function r(t){return(t||(0,n.BF)()).getScope().getTransaction()}},5003:(t,e,i)=>{"use strict";i.d(e,{w:()=>r});var n=i(1205);function r(t){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const e=(0,n.BF)().getClient(),i=t||e&&e.getOptions();return!!i&&(i.enableTracing||"tracesSampleRate"in i||"tracesSampler"in i)}},728:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BROWSER_TRACING_INTEGRATION_ID:()=>z,BrowserTracing:()=>L,IdleTransaction:()=>q,Integrations:()=>Z,Span:()=>H,SpanStatus:()=>J,TRACEPARENT_REGEXP:()=>Y,Transaction:()=>j,addExtensionMethods:()=>B,defaultRequestInstrumentationOptions:()=>W,extractTraceparentData:()=>U,getActiveTransaction:()=>F,hasTracingEnabled:()=>V,instrumentOutgoingRequests:()=>$,spanStatusfromHttpCode:()=>G,startIdleTransaction:()=>K,stripUrlQueryAndFragment:()=>X});var n,r=i(7712),s=i(3089),o=i(9122),a=i(8768),h=i(5827),l=i(7595),c=i(7161),u=i(5003),d=i(1915),p=i(9133),f=i(3468);function m(t){let e,i=t[0],n=1;for(;n<t.length;){const r=t[n],s=t[n+1];if(n+=2,("optionalAccess"===r||"optionalCall"===r)&&null==i)return;"access"===r||"optionalAccess"===r?(e=i,i=s(i)):"call"!==r&&"optionalCall"!==r||(i=s(((...t)=>i.call(e,...t))),e=void 0)}return i}!function(t){t.Ok="ok";t.DeadlineExceeded="deadline_exceeded";t.Unauthenticated="unauthenticated";t.PermissionDenied="permission_denied";t.NotFound="not_found";t.ResourceExhausted="resource_exhausted";t.InvalidArgument="invalid_argument";t.Unimplemented="unimplemented";t.Unavailable="unavailable";t.InternalError="internal_error";t.UnknownError="unknown_error";t.Cancelled="cancelled";t.AlreadyExists="already_exists";t.FailedPrecondition="failed_precondition";t.Aborted="aborted";t.OutOfRange="out_of_range";t.DataLoss="data_loss"}(n||(n={}));var g=i(3344),_=i(8864),y=i(9911),v=i(2628),b=i(9996);function w(t){const e=m([t,"call",t=>t(),"access",t=>t.getClient,"call",t=>t(),"optionalAccess",t=>t.getOptions,"call",t=>t()]);return"sentry"!==(m([e,"optionalAccess",t=>t.instrumenter])||"sentry")}class S{static __initStatic(){this.id="Apollo"}constructor(t={useNestjs:!1}){this.name=S.id,this._useNest=!!t.useNestjs}loadDependency(){return this._useNest?this._module=this._module||(0,g.Vw)("@nestjs/graphql"):this._module=this._module||(0,g.Vw)("apollo-server-core"),this._module}setupOnce(t,e){if(w(e))("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.log("Apollo Integration is skipped because of instrumenter configuration.");else if(this._useNest){const t=this.loadDependency();if(!t)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package."));(0,y.GS)(t.GraphQLFactory.prototype,"mergeWithSchema",(function(t){return function(...i){return(0,y.GS)(this.resolversExplorerService,"explore",(function(t){return function(){return T((0,v.k9)(t.call(this)),e)}})),t.call(this,...i)}}))}else{const t=this.loadDependency();if(!t)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("Apollo Integration was unable to require apollo-server-core package."));(0,y.GS)(t.ApolloServerBase.prototype,"constructSchema",(function(t){return function(){if(!this.config.resolvers)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this.config.schema?(_.vF.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),_.vF.warn()):this.config.modules&&_.vF.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),_.vF.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),t.call(this);const i=(0,v.k9)(this.config.resolvers);return this.config.resolvers=T(i,e),t.call(this)}}))}}}function T(t,e){return t.map((t=>(Object.keys(t).forEach((i=>{Object.keys(t[i]).forEach((n=>{"function"==typeof t[i][n]&&function(t,e,i,n){(0,y.GS)(t[e],i,(function(t){return function(...r){const s=m([n().getScope().getSpan(),"optionalAccess",t=>t.startChild,"call",t=>t({description:`${e}.${i}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),o=t.call(this,...r);return(0,b.Qg)(o)?o.then((t=>(m([s,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(m([s,"optionalAccess",t=>t.finish,"call",t=>t()]),o)}}))}(t,i,n,e)}))})),t)))}S.__initStatic();function x(t,e={}){const i=t.method&&t.method.toUpperCase();let n="",r="url";e.customRoute||t.route?(n=e.customRoute||`${t.baseUrl||""}${t.route&&t.route.path}`,r="route"):(t.originalUrl||t.url)&&(n=(0,d.f)(t.originalUrl||t.url||""));let s="";return e.method&&i&&(s+=i),e.method&&e.path&&(s+=" "),e.path&&n&&(s+=n),[s,r]}class E{static __initStatic(){this.id="Express"}constructor(t={}){this.name=E.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}setupOnce(t,e){this._router?w(e)?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.log("Express Integration is skipped because of instrumenter configuration."):(function(t,e=[]){e.forEach((e=>function(t,e){const i=t[e];return t[e]=function(...t){return i.call(this,...function(t,e){return t.map((t=>"function"==typeof t?A(t,e):Array.isArray(t)?t.map((t=>"function"==typeof t?A(t,e):t)):t))}(t,e))},t}(t,e)))}(this._router,this._methods),function(t){const e="settings"in t;e&&void 0===t._router&&t.lazyrouter&&t.lazyrouter();const i=e?t._router:t;if(!i)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.debug("Routing instrumentation is currently only supported in Express 4."));const n=Object.getPrototypeOf(i),r=n.process_params;n.process_params=function(t,e,i,n,s){i._reconstructedRoute||(i._reconstructedRoute="");const{layerRoutePath:o,isRegex:a,isArray:h,numExtraSegments:l}=function(t){const e=m([t,"access",t=>t.route,"optionalAccess",t=>t.path]),i=(0,b.gd)(e),n=Array.isArray(e);if(!e)return{isRegex:i,isArray:n,numExtraSegments:0};const r=n?Math.max((o=e,o.reduce(((t,e)=>t+(0,d.c4)(e.toString())),0)-(0,d.c4)(t.path||"")),0):0,s=function(t,e){if(t)return e.map((t=>t.toString())).join(",");return e&&e.toString()}(n,e);var o;return{layerRoutePath:s,isRegex:i,isArray:n,numExtraSegments:r}}(t);(o||a||h)&&(i._hasParameters=!0);const c=(o||t.path||"").split("/").filter((t=>t.length>0&&(a||h||!t.includes("*")))).join("/");c&&c.length>0&&(i._reconstructedRoute+=`/${c}${a?"/":""}`);if((0,d.c4)(i.originalUrl||"")+l===(0,d.c4)(i._reconstructedRoute)){i._hasParameters||i._reconstructedRoute!==i.originalUrl&&(i._reconstructedRoute=i.originalUrl?(0,d.f)(i.originalUrl):i.originalUrl);const t=n.__sentry_transaction;if(t&&"custom"!==t.metadata.source){const e=i._reconstructedRoute||"/";t.setName(...x(i,{path:!0,method:!0,customRoute:e}))}}return r.call(this,t,e,i,n,s)}}(this._router)):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("ExpressIntegration is missing an Express instance")}}function A(t,e){const i=t.length;switch(i){case 2:return function(i,n){const r=n.__sentry_transaction;if(r){const i=r.startChild({description:t.name,op:`middleware.express.${e}`,origin:"auto.middleware.express"});n.once("finish",(()=>{i.finish()}))}return t.call(this,i,n)};case 3:return function(i,n,r){const s=m([n.__sentry_transaction,"optionalAccess",t=>t.startChild,"call",i=>i({description:t.name,op:`middleware.express.${e}`,origin:"auto.middleware.express"})]);t.call(this,i,n,(function(...t){m([s,"optionalAccess",t=>t.finish,"call",t=>t()]),r.call(this,...t)}))};case 4:return function(i,n,r,s){const o=m([r.__sentry_transaction,"optionalAccess",t=>t.startChild,"call",i=>i({description:t.name,op:`middleware.express.${e}`,origin:"auto.middleware.express"})]);t.call(this,i,n,r,(function(...t){m([o,"optionalAccess",t=>t.finish,"call",t=>t()]),s.call(this,...t)}))};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${i}`)}}E.__initStatic();class I{static __initStatic(){this.id="GraphQL"}constructor(){this.name=I.id}loadDependency(){return this._module=this._module||(0,g.Vw)("graphql/execution/execute.js")}setupOnce(t,e){if(w(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.log("GraphQL Integration is skipped because of instrumenter configuration."));const i=this.loadDependency();i?(0,y.GS)(i,"execute",(function(t){return function(...i){const n=e().getScope(),r=n.getSpan(),s=m([r,"optionalAccess",t=>t.startChild,"call",t=>t({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);m([n,"optionalAccess",t=>t.setSpan,"call",t=>t(s)]);const o=t.call(this,...i);return(0,b.Qg)(o)?o.then((t=>(m([s,"optionalAccess",t=>t.finish,"call",t=>t()]),m([n,"optionalAccess",t=>t.setSpan,"call",t=>t(r)]),t))):(m([s,"optionalAccess",t=>t.finish,"call",t=>t()]),m([n,"optionalAccess",t=>t.setSpan,"call",t=>t(r)]),o)}})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("GraphQL Integration was unable to require graphql/execution package.")}}I.__initStatic();const C=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],P={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};class R{static __initStatic(){this.id="Mongo"}constructor(t={}){this.name=R.id,this._operations=Array.isArray(t.operations)?t.operations:C,this._describeOperations=!("describeOperations"in t)||t.describeOperations,this._useMongoose=!!t.useMongoose}loadDependency(){const t=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||(0,g.Vw)(t)}setupOnce(t,e){if(w(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.log("Mongo Integration is skipped because of instrumenter configuration."));const i=this.loadDependency();if(i)this._instrumentOperations(i.Collection,this._operations,e);else{const t=this._useMongoose?"mongoose":"mongodb";("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error(`Mongo Integration was unable to require \`${t}\` package.`)}}_instrumentOperations(t,e,i){e.forEach((e=>this._patchOperation(t,e,i)))}_patchOperation(t,e,i){if(!(e in t.prototype))return;const n=this._getSpanContextFromOperationArguments.bind(this);(0,y.GS)(t.prototype,e,(function(t){return function(...r){const s=r[r.length-1],o=i().getScope().getSpan();if("function"!=typeof s||"mapReduce"===e&&2===r.length){const i=m([o,"optionalAccess",t=>t.startChild,"call",t=>t(n(this,e,r))]),s=t.call(this,...r);if((0,b.Qg)(s))return s.then((t=>(m([i,"optionalAccess",t=>t.finish,"call",t=>t()]),t)));if((a=s)&&"object"==typeof a&&a.once&&"function"==typeof a.once){const t=s;try{t.once("close",(()=>{m([i,"optionalAccess",t=>t.finish,"call",t=>t()])}))}catch(t){m([i,"optionalAccess",t=>t.finish,"call",t=>t()])}return t}return m([i,"optionalAccess",t=>t.finish,"call",t=>t()]),s}var a;const h=m([o,"optionalAccess",t=>t.startChild,"call",t=>t(n(this,e,r.slice(0,-1)))]);return t.call(this,...r.slice(0,-1),(function(t,e){m([h,"optionalAccess",t=>t.finish,"call",t=>t()]),s(t,e)}))}}))}_getSpanContextFromOperationArguments(t,e,i){const n={"db.system":"mongodb","db.name":t.dbName,"db.operation":e,"db.mongodb.collection":t.collectionName},r={op:"db",origin:"auto.db.mongo",description:e,data:n},s=P[e],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!s||!o)return r;try{if("mapReduce"===e){const[t,e]=i;n[s[0]]="string"==typeof t?t:t.name||"<anonymous>",n[s[1]]="string"==typeof e?e:e.name||"<anonymous>"}else for(let t=0;t<s.length;t++)n[`db.mongodb.${s[t]}`]=JSON.stringify(i[t])}catch(t){}return r}}R.__initStatic();class O{static __initStatic(){this.id="Mysql"}constructor(){this.name=O.id}loadDependency(){return this._module=this._module||(0,g.Vw)("mysql/lib/Connection.js")}setupOnce(t,e){if(w(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.log("Mysql Integration is skipped because of instrumenter configuration."));const i=this.loadDependency();if(!i)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("Mysql Integration was unable to require `mysql` package."));let n;try{i.prototype.connect=new Proxy(i.prototype.connect,{apply:(t,e,i)=>(n||(n=e.config),t.apply(e,i))})}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("Mysql Integration was unable to instrument `mysql` config.")}function r(t){if(!t)return;const e=n?{"server.address":n.host,"server.port":n.port,"db.user":n.user}:{};Object.keys(e).forEach((i=>{t.setData(i,e[i])})),t.finish()}(0,y.GS)(i,"createQuery",(function(t){return function(i,n,s){const o=m([e().getScope().getSpan(),"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"==typeof i?i:i.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);return"function"==typeof s?t.call(this,i,n,(function(t,e,i){r(o),s(t,e,i)})):"function"==typeof n?t.call(this,i,(function(t,e,i){r(o),n(t,e,i)})):t.call(this,i,n,(function(){r(o)}))}}))}}O.__initStatic();class k{static __initStatic(){this.id="Postgres"}constructor(t={}){this.name=k.id,this._usePgNative=!!t.usePgNative}loadDependency(){return this._module=this._module||(0,g.Vw)("pg")}setupOnce(t,e){if(w(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.log("Postgres Integration is skipped because of instrumenter configuration."));const i=this.loadDependency();if(!i)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("Postgres Integration was unable to require `pg` package."));if(this._usePgNative&&!m([i,"access",t=>t.native,"optionalAccess",t=>t.Client]))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.error("Postgres Integration was unable to access 'pg-native' bindings."));const{Client:n}=this._usePgNative?i.native:i;(0,y.GS)(n.prototype,"query",(function(t){return function(i,n,r){const s=e().getScope().getSpan(),o={"db.system":"postgresql"};try{this.database&&(o["db.name"]=this.database),this.host&&(o["server.address"]=this.host),this.port&&(o["server.port"]=this.port),this.user&&(o["db.user"]=this.user)}catch(t){}const a=m([s,"optionalAccess",t=>t.startChild,"call",t=>t({description:"string"==typeof i?i:i.text,op:"db",origin:"auto.db.postgres",data:o})]);if("function"==typeof r)return t.call(this,i,n,(function(t,e){m([a,"optionalAccess",t=>t.finish,"call",t=>t()]),r(t,e)}));if("function"==typeof n)return t.call(this,i,(function(t,e){m([a,"optionalAccess",t=>t.finish,"call",t=>t()]),n(t,e)}));const h=void 0!==n?t.call(this,i,n):t.call(this,i);return(0,b.Qg)(h)?h.then((t=>(m([a,"optionalAccess",t=>t.finish,"call",t=>t()]),t))):(m([a,"optionalAccess",t=>t.finish,"call",t=>t()]),h)}}))}}k.__initStatic();var M=i(1205),D=i(7958);class N{static __initStatic(){this.id="Prisma"}constructor(t={}){if(this.name=N.id,(e=t.client)&&e.$use&&!t.client._sentryInstrumented){(0,y.my)(t.client,"_sentryInstrumented",!0);const e={};try{const i=t.client._engineConfig;if(i){const{activeProvider:t,clientVersion:n}=i;t&&(e["db.system"]=t),n&&(e["db.prisma.version"]=n)}}catch(t){}t.client.$use(((t,i)=>{if(w(M.BF))return i(t);const n=t.action,r=t.model;return(0,D.uP)({name:r?`${r} ${n}`:n,op:"db.sql.prisma",origin:"auto.db.prisma",data:{...e,"db.operation":n}},(()=>i(t)))}))}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&_.vF.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",t.client);var e}setupOnce(){}}N.__initStatic();const L=r.Jh,B=s.l,F=o.Z7,U=a.nc,G=h.o6,j=l.Z,H=h.L9,z=r.rj,W=c.h$,V=u.w,X=d.f,Y=a.MI,q=p.zX,$=c.Qb,K=f.p,J=n,Z={BrowserTracing:L,Apollo:S,Express:E,GraphQL:I,Mongo:R,Mysql:O,Postgres:k,Prisma:N};("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&(0,s.l)()},8172:(t,e,i)=>{"use strict";i.d(e,{De:()=>c,hF:()=>s,yD:()=>l});var n=i(9996),r=i(8864);const s="baggage",o="sentry-",a=/^sentry-/,h=8192;function l(t){if(!(0,n.Kg)(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce(((t,e)=>({...t,...u(e)})),{});else{if(!t)return;e=u(t)}const i=Object.entries(e).reduce(((t,[e,i])=>{if(e.match(a)){t[e.slice(o.length)]=i}return t}),{});return Object.keys(i).length>0?i:void 0}function c(t){if(!t)return;return function(t){if(0===Object.keys(t).length)return;return Object.entries(t).reduce(((t,[e,i],n)=>{const s=`${encodeURIComponent(e)}=${encodeURIComponent(i)}`,o=0===n?s:`${t},${s}`;return o.length>h?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn(`Not adding key: ${e} with val: ${i} to baggage header due to exceeding baggage size limits.`),t):o}),"")}(Object.entries(t).reduce(((t,[e,i])=>(i&&(t[`${o}${e}`]=i),t)),{}))}function u(t){return t.split(",").map((t=>t.split("=").map((t=>decodeURIComponent(t.trim()))))).reduce(((t,[e,i])=>(t[e]=i,t)),{})}},5514:(t,e,i)=>{"use strict";i.d(e,{$N:()=>h,Hd:()=>o,NX:()=>l});var n=i(9996);const r=(0,i(3289).VZ)(),s=80;function o(t,e={}){try{let i=t;const n=5,r=[];let o=0,h=0;const l=" > ",c=l.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||s;for(;i&&o++<n&&(u=a(i,d),!("html"===u||o>1&&h+r.length*c+u.length>=p));)r.push(u),h+=u.length,i=i.parentNode;return r.reverse().join(l)}catch(t){return"<unknown>"}}function a(t,e){const i=t,r=[];let s,o,a,h,l;if(!i||!i.tagName)return"";r.push(i.tagName.toLowerCase());const c=e&&e.length?e.filter((t=>i.getAttribute(t))).map((t=>[t,i.getAttribute(t)])):null;if(c&&c.length)c.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(i.id&&r.push(`#${i.id}`),s=i.className,s&&(0,n.Kg)(s))for(o=s.split(/\s+/),l=0;l<o.length;l++)r.push(`.${o[l]}`);const u=["aria-label","type","name","title","alt"];for(l=0;l<u.length;l++)a=u[l],h=i.getAttribute(a),h&&r.push(`[${a}="${h}"]`);return r.join("")}function h(){try{return r.document.location.href}catch(t){return""}}function l(t){return r.document&&r.document.querySelector?r.document.querySelector(t):null}},3369:(t,e,i)=>{"use strict";function n(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function r(){return"npm"}i.d(e,{Z:()=>n,e:()=>r})},8434:(t,e,i)=>{"use strict";i.d(e,{Er:()=>u,ON:()=>m});var n=i(9996),r=i(8864),s=i(9911),o=i(537),a=i(6900),h=i(3289);const l=(0,h.VZ)();const c=(0,h.VZ)(),u="__sentry_xhr_v2__",d={},p={};function f(t){if(!p[t])switch(p[t]=!0,t){case"console":!function(){if(!("console"in h.OW))return;r.Ow.forEach((function(t){t in h.OW.console&&(0,s.GS)(h.OW.console,t,(function(e){return r.Z9[t]=e,function(...e){g("console",{args:e,level:t});const i=r.Z9[t];i&&i.apply(h.OW.console,e)}}))}))}();break;case"dom":!function(){if(!c.document)return;const t=g.bind(null,"dom"),e=T(t,!0);c.document.addEventListener("click",e,!1),c.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const i=c[e]&&c[e].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&((0,s.GS)(i,"addEventListener",(function(e){return function(i,n,r){if("click"===i||"keypress"==i)try{const n=this,s=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},o=s[i]=s[i]||{refCount:0};if(!o.handler){const n=T(t);o.handler=n,e.call(this,i,n,r)}o.refCount++}catch(t){}return e.call(this,i,n,r)}})),(0,s.GS)(i,"removeEventListener",(function(t){return function(e,i,n){if("click"===e||"keypress"==e)try{const i=this,r=i.__sentry_instrumentation_handlers__||{},s=r[e];s&&(s.refCount--,s.refCount<=0&&(t.call(this,e,s.handler,n),s.handler=void 0,delete r[e]),0===Object.keys(r).length&&delete i.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,i,n)}})))}))}();break;case"xhr":!function(){if(!c.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;(0,s.GS)(t,"open",(function(t){return function(...e){const i=e[1],r=this[u]={method:(0,n.Kg)(e[0])?e[0].toUpperCase():e[0],url:e[1],request_headers:{}};(0,n.Kg)(i)&&"POST"===r.method&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const t=this[u];if(t&&4===this.readyState){try{t.status_code=this.status}catch(t){}g("xhr",{args:e,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?(0,s.GS)(this,"onreadystatechange",(function(t){return function(...e){return o(),t.apply(this,e)}})):this.addEventListener("readystatechange",o),(0,s.GS)(this,"setRequestHeader",(function(t){return function(...e){const[i,n]=e,r=this[u];return r&&(r.request_headers[i.toLowerCase()]=n),t.apply(this,e)}})),t.apply(this,e)}})),(0,s.GS)(t,"send",(function(t){return function(...e){const i=this[u];return i&&void 0!==e[0]&&(i.body=e[0]),g("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}();break;case"fetch":!function(){if(!(0,a.m7)())return;(0,s.GS)(h.OW,"fetch",(function(t){return function(...e){const{method:i,url:n}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,i]=t;return{url:y(e),method:_(i,"method")?String(i.method).toUpperCase():"GET"}}const e=t[0];return{url:y(e),method:_(e,"method")?String(e.method).toUpperCase():"GET"}}(e),r={args:e,fetchData:{method:i,url:n},startTimestamp:Date.now()};return g("fetch",{...r}),t.apply(h.OW,e).then((t=>(g("fetch",{...r,endTimestamp:Date.now(),response:t}),t)),(t=>{throw g("fetch",{...r,endTimestamp:Date.now(),error:t}),t}))}}))}();break;case"history":!function(){if(!function(){const t=l.chrome,e=t&&t.app&&t.app.runtime,i="history"in l&&!!l.history.pushState&&!!l.history.replaceState;return!e&&i}())return;const t=c.onpopstate;function e(t){return function(...e){const i=e.length>2?e[2]:void 0;if(i){const t=v,e=String(i);v=e,g("history",{from:t,to:e})}return t.apply(this,e)}}c.onpopstate=function(...e){const i=c.location.href,n=v;if(v=i,g("history",{from:n,to:i}),t)try{return t.apply(this,e)}catch(t){}},(0,s.GS)(c.history,"pushState",e),(0,s.GS)(c.history,"replaceState",e)}();break;case"error":x=c.onerror,c.onerror=function(t,e,i,n,r){return g("error",{column:n,error:r,line:i,msg:t,url:e}),!(!x||x.__SENTRY_LOADER__)&&x.apply(this,arguments)},c.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":E=c.onunhandledrejection,c.onunhandledrejection=function(t){return g("unhandledrejection",t),!(E&&!E.__SENTRY_LOADER__)||E.apply(this,arguments)},c.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.warn("unknown instrumentation type:",t))}}function m(t,e){d[t]=d[t]||[],d[t].push(e),f(t)}function g(t,e){if(t&&d[t])for(const i of d[t]||[])try{i(e)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&r.vF.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${(0,o.qQ)(i)}\nError:`,e)}}function _(t,e){return!!t&&"object"==typeof t&&!!t[e]}function y(t){return"string"==typeof t?t:t?_(t,"url")?t.url:t.toString?t.toString():"":""}let v;const b=1e3;let w,S;function T(t,e=!1){return i=>{if(!i||S===i)return;if(function(t){if("keypress"!==t.type)return!1;try{const e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(i))return;const n="keypress"===i.type?"input":i.type;(void 0===w||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(S,i))&&(t({event:i,name:n,global:e}),S=i),clearTimeout(w),w=c.setTimeout((()=>{w=void 0}),b)}}let x=null;let E=null},9996:(t,e,i)=>{"use strict";i.d(e,{BD:()=>a,Kg:()=>l,L2:()=>v,Qd:()=>u,Qg:()=>m,T2:()=>o,W6:()=>h,bJ:()=>r,gd:()=>f,mE:()=>g,sO:()=>c,tH:()=>y,vq:()=>p,xH:()=>d,yr:()=>_});const n=Object.prototype.toString;function r(t){switch(n.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return y(t,Error)}}function s(t,e){return n.call(t)===`[object ${e}]`}function o(t){return s(t,"ErrorEvent")}function a(t){return s(t,"DOMError")}function h(t){return s(t,"DOMException")}function l(t){return s(t,"String")}function c(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function u(t){return s(t,"Object")}function d(t){return"undefined"!=typeof Event&&y(t,Event)}function p(t){return"undefined"!=typeof Element&&y(t,Element)}function f(t){return s(t,"RegExp")}function m(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function g(t){return u(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function _(t){return"number"==typeof t&&t!=t}function y(t,e){try{return t instanceof e}catch(t){return!1}}function v(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}},8864:(t,e,i)=>{"use strict";i.d(e,{Ow:()=>r,Z9:()=>s,pq:()=>o,vF:()=>a});var n=i(3289);const r=["debug","info","warn","error","log","assert","trace"],s={};function o(t){if(!("console"in n.OW))return t();const e=n.OW.console,i={},r=Object.keys(s);r.forEach((t=>{const n=s[t];i[t]=e[t],e[t]=n}));try{return t()}finally{r.forEach((t=>{e[t]=i[t]}))}}const a=function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?r.forEach((i=>{e[i]=(...e)=>{t&&o((()=>{n.OW.console[i](`Sentry Logger [${i}]:`,...e)}))}})):r.forEach((t=>{e[t]=()=>{}})),e}()},2628:(t,e,i)=>{"use strict";i.d(e,{$X:()=>a,GR:()=>c,M6:()=>l,eJ:()=>s,gO:()=>h,k9:()=>u});var n=i(9911),r=i(3289);function s(){const t=r.OW,e=t.crypto||t.msCrypto;let i=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(i=()=>e.getRandomValues(new Uint8Array(1))[0])}catch(t){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&i())>>t/4).toString(16)))}function o(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function a(t){const{message:e,event_id:i}=t;if(e)return e;const n=o(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||i||"<unknown>":i||"<unknown>"}function h(t,e,i){const n=t.exception=t.exception||{},r=n.values=n.values||[],s=r[0]=r[0]||{};s.value||(s.value=e||""),s.type||(s.type=i||"Error")}function l(t,e){const i=o(t);if(!i)return;const n=i.mechanism;if(i.mechanism={type:"generic",handled:!0,...n,...e},e&&"data"in e){const t={...n&&n.data,...e.data};i.mechanism.data=t}}function c(t){if(t&&t.__sentry_captured__)return!0;try{(0,n.my)(t,"__sentry_captured__",!0)}catch(t){}return!1}function u(t){return Array.isArray(t)?t:[t]}},3344:(t,e,i)=>{"use strict";i.d(e,{Vw:()=>o,fj:()=>s,wD:()=>r});var n=i(3369);function r(){return!(0,n.Z)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function s(t,e){return t.require(e)}function o(e){let i;try{i=s(t,e)}catch(t){}try{const{cwd:n}=s(t,"process");i=s(t,`${n()}/node_modules/${e}`)}catch(t){}return i}t=i.hmd(t)},9911:(t,e,i)=>{"use strict";i.d(e,{Ce:()=>g,GS:()=>a,HF:()=>m,W4:()=>d,my:()=>h,pO:()=>l,sp:()=>c,u4:()=>u});var n=i(5514),r=i(9996),s=i(8864),o=i(9105);function a(t,e,i){if(!(e in t))return;const n=t[e],r=i(n);"function"==typeof r&&l(r,n),t[e]=r}function h(t,e,i){try{Object.defineProperty(t,e,{value:i,writable:!0,configurable:!0})}catch(i){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.vF.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function l(t,e){try{const i=e.prototype||{};t.prototype=e.prototype=i,h(t,"__sentry_original__",e)}catch(t){}}function c(t){return t.__sentry_original__}function u(t){return Object.keys(t).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)).join("&")}function d(t){if((0,r.bJ)(t))return{message:t.message,name:t.name,stack:t.stack,...f(t)};if((0,r.xH)(t)){const e={type:t.type,target:p(t.target),currentTarget:p(t.currentTarget),...f(t)};return"undefined"!=typeof CustomEvent&&(0,r.tH)(t,CustomEvent)&&(e.detail=t.detail),e}return t}function p(t){try{return(0,r.vq)(t)?(0,n.Hd)(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}}function f(t){if("object"==typeof t&&null!==t){const e={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}return{}}function m(t,e=40){const i=Object.keys(d(t));if(i.sort(),!i.length)return"[object has no keys]";if(i[0].length>=e)return(0,o.xv)(i[0],e);for(let t=i.length;t>0;t--){const n=i.slice(0,t).join(", ");if(!(n.length>e))return t===i.length?n:(0,o.xv)(n,e)}return""}function g(t){return _(t,new Map)}function _(t,e){if((0,r.Qd)(t)){const i=e.get(t);if(void 0!==i)return i;const n={};e.set(t,n);for(const i of Object.keys(t))void 0!==t[i]&&(n[i]=_(t[i],e));return n}if(Array.isArray(t)){const i=e.get(t);if(void 0!==i)return i;const n=[];return e.set(t,n),t.forEach((t=>{n.push(_(t,e))})),n}return t}},537:(t,e,i)=>{"use strict";i.d(e,{gd:()=>o,qQ:()=>l,vk:()=>a});const n=50,r=/\(error: (.*)\)/,s=/captureMessage|captureException/;function o(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,i=0)=>{const o=[],a=t.split("\n");for(let t=i;t<a.length;t++){const i=a[t];if(i.length>1024)continue;const s=r.test(i)?i.replace(r,"$1"):i;if(!s.match(/\S*Error: /)){for(const t of e){const e=t(s);if(e){o.push(e);break}}if(o.length>=n)break}}return function(t){if(!t.length)return[];const e=Array.from(t);/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop();e.reverse(),s.test(e[e.length-1].function||"")&&(e.pop(),s.test(e[e.length-1].function||"")&&e.pop());return e.slice(0,n).map((t=>({...t,filename:t.filename||e[e.length-1].filename,function:t.function||"?"})))}(o)}}function a(t){return Array.isArray(t)?o(...t):t}const h="<anonymous>";function l(t){try{return t&&"function"==typeof t&&t.name||h}catch(t){return h}}},9105:(t,e,i)=>{"use strict";i.d(e,{Xr:()=>o,gt:()=>s,xv:()=>r});var n=i(9996);function r(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function s(t,e){if(!Array.isArray(t))return"";const i=[];for(let e=0;e<t.length;e++){const r=t[e];try{(0,n.L2)(r)?i.push("[VueViewModel]"):i.push(String(r))}catch(t){i.push("[value cannot be serialized]")}}return i.join(e)}function o(t,e=[],i=!1){return e.some((e=>function(t,e,i=!1){return!!(0,n.Kg)(t)&&((0,n.gd)(e)?e.test(t):!!(0,n.Kg)(e)&&(i?t===e:t.includes(e)))}(t,e,i)))}},6900:(t,e,i)=>{"use strict";i.d(e,{ap:()=>o,m7:()=>a,vm:()=>s});var n=i(8864);const r=(0,i(3289).VZ)();function s(){if(!("fetch"in r))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}function o(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function a(){if(!s())return!1;if(o(r.fetch))return!0;let t=!1;const e=r.document;if(e&&"function"==typeof e.createElement)try{const i=e.createElement("iframe");i.hidden=!0,e.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(t=o(i.contentWindow.fetch)),e.head.removeChild(i)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.vF.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t}},1694:(t,e,i)=>{"use strict";i.d(e,{T2:()=>a,XW:()=>s,xg:()=>o});var n,r=i(9996);function s(t){return new a((e=>{e(t)}))}function o(t){return new a(((e,i)=>{i(t)}))}!function(t){t[t.PENDING=0]="PENDING";t[t.RESOLVED=1]="RESOLVED";t[t.REJECTED=2]="REJECTED"}(n||(n={}));class a{constructor(t){a.prototype.__init.call(this),a.prototype.__init2.call(this),a.prototype.__init3.call(this),a.prototype.__init4.call(this),this._state=n.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new a(((i,n)=>{this._handlers.push([!1,e=>{if(t)try{i(t(e))}catch(t){n(t)}else i(e)},t=>{if(e)try{i(e(t))}catch(t){n(t)}else n(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new a(((e,i)=>{let n,r;return this.then((e=>{r=!1,n=e,t&&t()}),(e=>{r=!0,n=e,t&&t()})).then((()=>{r?i(n):e(n)}))}))}__init(){this._resolve=t=>{this._setResult(n.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(n.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===n.PENDING&&((0,r.Qg)(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===n.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===n.RESOLVED&&t[1](this._value),this._state===n.REJECTED&&t[2](this._value),t[0]=!0)}))}}}},2461:(t,e,i)=>{"use strict";i.d(e,{k3:()=>d,lu:()=>l,zf:()=>c});var n=i(3344),r=i(3289);t=i.hmd(t);const s=(0,r.VZ)(),o={nowSeconds:()=>Date.now()/1e3};const a=(0,n.wD)()?function(){try{return(0,n.fj)(t,"perf_hooks").performance}catch(t){return}}():function(){const{performance:t}=s;if(!t||!t.now)return;return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}(),h=void 0===a?o:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},l=o.nowSeconds.bind(o),c=h.nowSeconds.bind(h);let u;const d=(()=>{const{performance:t}=s;if(!t||!t.now)return void(u="none");const e=36e5,i=t.now(),n=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+i-n):e,o=r<e,a=t.timing&&t.timing.navigationStart,h="number"==typeof a?Math.abs(a+i-n):e;return o||h<e?r<=h?(u="timeOrigin",t.timeOrigin):(u="navigationStart",a):(u="dateNow",n)})()},8768:(t,e,i)=>{"use strict";i.d(e,{E0:()=>a,MI:()=>s,TC:()=>h,nc:()=>o});var n=i(8172),r=i(2628);const s=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function o(t){if(!t)return;const e=t.match(s);if(!e)return;let i;return"1"===e[3]?i=!0:"0"===e[3]&&(i=!1),{traceId:e[1],parentSampled:i,parentSpanId:e[2]}}function a(t,e){const i=o(t),s=(0,n.yD)(e),{traceId:a,parentSpanId:h,parentSampled:l}=i||{},c={traceId:a||(0,r.eJ)(),spanId:(0,r.eJ)().substring(16),sampled:l};return h&&(c.parentSpanId=h),s&&(c.dsc=s),{traceparentData:i,dynamicSamplingContext:s,propagationContext:c}}function h(t=(0,r.eJ)(),e=(0,r.eJ)().substring(16),i){let n="";return void 0!==i&&(n=i?"-1":"-0"),`${t}-${e}${n}`}},1915:(t,e,i)=>{"use strict";function n(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const i=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:i,hash:n,relative:e[5]+i+n}}function r(t){return t.split(/[\?#]/,1)[0]}function s(t){return t.split(/\\?\//).filter((t=>t.length>0&&","!==t)).length}i.d(e,{Dl:()=>n,c4:()=>s,f:()=>r})},3289:(t,e,i)=>{"use strict";function n(t){return t&&t.Math==Math?t:void 0}i.d(e,{BY:()=>o,OW:()=>r,VZ:()=>s});const r="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof i.g&&n(i.g)||function(){return this}()||{};function s(){return r}function o(t,e,i){const n=i||r,s=n.__SENTRY__=n.__SENTRY__||{};return s[t]||(s[t]=e())}},3836:(t,e,i)=>{"use strict";var n=i(4499),r=i(6678),s=i(376),o=i(2088);t.exports=o||n.call(s,r)},6678:t=>{"use strict";t.exports=Function.prototype.apply},376:t=>{"use strict";t.exports=Function.prototype.call},946:(t,e,i)=>{"use strict";var n=i(4499),r=i(1711),s=i(376),o=i(3836);t.exports=function(t){if(t.length<1||"function"!=typeof t[0])throw new r("a function is required");return o(n,s,t)}},2088:t=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},3232:(t,e,i)=>{"use strict";var n=i(8897),r=i(946),s=r([n("%String.prototype.indexOf%")]);t.exports=function(t,e){var i=n(t,!!e);return"function"==typeof i&&s(t,".prototype.")>-1?r([i]):i}},1724:(t,e,i)=>{"use strict";var n,r=i(946),s=i(1399);try{n=[].__proto__===Array.prototype}catch(t){if(!t||"object"!=typeof t||!("code"in t)||"ERR_PROTO_ACCESS"!==t.code)throw t}var o=!!n&&s&&s(Object.prototype,"__proto__"),a=Object,h=a.getPrototypeOf;t.exports=o&&"function"==typeof o.get?r([o.get]):"function"==typeof h&&function(t){return h(null==t?t:a(t))}},5230:t=>{"use strict";function e(t,e,n){n=n||2;var s,o,a,h,u,d,f,m=e&&e.length,g=m?e[0]*n:t.length,_=i(t,0,g,n,!0),y=[];if(!_||_.next===_.prev)return y;if(m&&(_=function(t,e,n,r){var s,o,a,h=[];for(s=0,o=e.length;s<o;s++)(a=i(t,e[s]*r,s<o-1?e[s+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),h.push(p(a));for(h.sort(l),s=0;s<h.length;s++)n=c(h[s],n);return n}(t,e,_,n)),t.length>80*n){s=a=t[0],o=h=t[1];for(var v=n;v<g;v+=n)(u=t[v])<s&&(s=u),(d=t[v+1])<o&&(o=d),u>a&&(a=u),d>h&&(h=d);f=0!==(f=Math.max(a-s,h-o))?32767/f:0}return r(_,y,n,s,o,f,0),y}function i(t,e,i,n,r){var s,o;if(r===A(t,e,i,n)>0)for(s=e;s<i;s+=n)o=T(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=T(s,t[s],t[s+1],o);return o&&_(o,o.next)&&(x(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!_(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(x(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function r(t,e,i,l,c,u,p){if(t){!p&&u&&function(t,e,i,n){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1)}(r)}(t,l,c,u);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,u?o(t,l,c,u):s(t))e.push(f.i/i|0),e.push(t.i/i|0),e.push(m.i/i|0),x(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?r(t=a(n(t),e,i),e,i,l,c,u,2):2===p&&h(t,e,i,l,c,u):r(n(t),e,i,l,c,u,1);break}}}function s(t){var e=t.prev,i=t,n=t.next;if(g(e,i,n)>=0)return!1;for(var r=e.x,s=i.x,o=n.x,a=e.y,h=i.y,l=n.y,c=r<s?r<o?r:o:s<o?s:o,u=a<h?a<l?a:l:h<l?h:l,d=r>s?r>o?r:o:s>o?s:o,p=a>h?a>l?a:l:h>l?h:l,m=n.next;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=u&&m.y<=p&&f(r,a,s,h,o,l,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function o(t,e,i,n){var r=t.prev,s=t,o=t.next;if(g(r,s,o)>=0)return!1;for(var a=r.x,h=s.x,l=o.x,c=r.y,u=s.y,p=o.y,m=a<h?a<l?a:l:h<l?h:l,_=c<u?c<p?c:p:u<p?u:p,y=a>h?a>l?a:l:h>l?h:l,v=c>u?c>p?c:p:u>p?u:p,b=d(m,_,e,i,n),w=d(y,v,e,i,n),S=t.prevZ,T=t.nextZ;S&&S.z>=b&&T&&T.z<=w;){if(S.x>=m&&S.x<=y&&S.y>=_&&S.y<=v&&S!==r&&S!==o&&f(a,c,h,u,l,p,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;if(S=S.prevZ,T.x>=m&&T.x<=y&&T.y>=_&&T.y<=v&&T!==r&&T!==o&&f(a,c,h,u,l,p,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}for(;S&&S.z>=b;){if(S.x>=m&&S.x<=y&&S.y>=_&&S.y<=v&&S!==r&&S!==o&&f(a,c,h,u,l,p,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;T&&T.z<=w;){if(T.x>=m&&T.x<=y&&T.y>=_&&T.y<=v&&T!==r&&T!==o&&f(a,c,h,u,l,p,T.x,T.y)&&g(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function a(t,e,i){var r=t;do{var s=r.prev,o=r.next.next;!_(s,o)&&y(s,r,r.next,o)&&w(s,o)&&w(o,s)&&(e.push(s.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),x(r),x(r.next),r=t=o),r=r.next}while(r!==t);return n(r)}function h(t,e,i,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var c=S(h,l);return h=n(h,h.next),c=n(c,c.next),r(h,e,i,s,o,a,0),void r(c,e,i,s,o,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o&&(o=a,i=n.x<n.next.x?n:n.next,a===r))return i}n=n.next}while(n!==e);if(!i)return null;var h,l=i,c=i.x,d=i.y,p=1/0;n=i;do{r>=n.x&&n.x>=c&&r!==n.x&&f(s<d?r:o,s,c,d,s<d?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),w(n,t)&&(h<p||h===p&&(n.x>i.x||n.x===i.x&&u(i,n)))&&(i=n,p=h)),n=n.next}while(n!==l);return i}(t,e);if(!i)return e;var r=S(i,t);return n(r,r.next),n(i,i.next)}function u(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,n,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(i-o)*(e-a)&&(i-o)*(s-a)>=(r-o)*(n-a)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||_(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,n){var r=b(g(t,e,i)),s=b(g(t,e,n)),o=b(g(i,n,t)),a=b(g(i,n,e));return r!==s&&o!==a||(!(0!==r||!v(t,i,e))||(!(0!==s||!v(t,n,e))||(!(0!==o||!v(i,t,n))||!(0!==a||!v(i,e,n)))))}function v(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function w(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function S(t,e){var i=new E(t.i,t.x,t.y),n=new E(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function T(t,e,i,n){var r=new E(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function x(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(A(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,c=a<h-1?e[a+1]*i:t.length;o-=Math.abs(A(t,l,c,i))}var u=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;u+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},9920:t=>{"use strict";var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}t.exports=e},3841:t=>{"use strict";t.exports=EvalError},219:t=>{"use strict";t.exports=Error},6190:t=>{"use strict";t.exports=RangeError},3950:t=>{"use strict";t.exports=ReferenceError},6296:t=>{"use strict";t.exports=SyntaxError},1711:t=>{"use strict";t.exports=TypeError},3221:t=>{"use strict";t.exports=URIError},7960:t=>{"use strict";t.exports=Object},792:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new r(n,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,r,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,s),!0;case 6:return c.fn.call(c.context,e,n,r,s,o),!0}for(l=1,h=new Array(u-1);l<u;l++)h[l-1]=arguments[l];c.fn.apply(c.context,h)}else{var d,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!h)for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];c[l].fn.apply(c[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,n,r){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||o(this,s);else{for(var h=0,l=[],c=a.length;h<c;h++)(a[h].fn!==e||r&&!a[h].once||n&&a[h].context!==n)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},9076:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3910);Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}))},7885:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3299);n.registerVersion("firebase","9.23.0","app"),Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}))},8088:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(678);Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}))},3829:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5911);Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}))},2476:()=>{!function(t){"use strict";function e(t){return document.createElement(t)}function i(t,e){for(var i in e)try{t.style[i]=e[i]}catch(t){}return t}function n(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function r(t,e){if("array"!==n(e))return-1;if(e.indexOf)return e.indexOf(t);for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}function s(){var t=arguments;for(var e in t[1])if(t[1].hasOwnProperty(e))switch(n(t[1][e])){case"object":t[0][e]=s({},t[0][e],t[1][e]);break;case"array":t[0][e]=t[1][e].slice(0);break;default:t[0][e]=t[1][e]}return t.length>2?s.apply(null,[t[0]].concat(Array.prototype.slice.call(t,2))):t[0]}function o(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function a(t,e,i,n){t.addEventListener?t[n?"removeEventListener":"addEventListener"](e,i,!1):t.attachEvent&&t[n?"detachEvent":"attachEvent"]("on"+e,i)}var h;!function(){var e=t.performance;if(e&&(e.now||e.webkitNow)){var i=e.now?"now":"webkitNow";h=e[i].bind(e)}else h=function(){return+new Date}}();var l=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,c=t.requestAnimationFrame;!function(){for(var e=["moz","webkit","o"],i=0,n=0,r=e.length;n<r&&!l;++n)l=t[e[n]+"CancelAnimationFrame"]||t[e[n]+"CancelRequestAnimationFrame"],c=l&&t[e[n]+"RequestAnimationFrame"];l||(c=function(e){var n=h(),r=Math.max(0,16-(n-i));return i=n+r,t.setTimeout((function(){e(n+r)}),r)},l=function(t){clearTimeout(t)})}();var u="string"===n(document.createElement("div").textContent)?"textContent":"innerText";function d(t,m){"object"===n(t)&&undefined===t.nodeType&&(m=t,t=document.body),t||(t=document.body);var g,_,y,v,b,w,S,T,x,E=this,A=s({},d.defaults,m||{}),I={},C=[],P=100,R=[],O=A.threshold,k=0,M=h()-O,D=[],N=[],L="fps"===A.show;function B(t,e,i,n){return _[0|t][Math.round(Math.min((e-i)/(n-i)*P,P))]}function F(){I.legend.fps!==L&&(I.legend.fps=L,I.legend[u]=L?"FPS":"ms"),S=L?E.fps:E.duration,I.count[u]=S>999?"999+":S.toFixed(S>99?0:A.decimals)}function U(){if(y=h(),M<y-A.threshold&&(E.fps-=E.fps/Math.max(1,60*A.smoothing/A.interval),E.duration=1e3/E.fps),function(){for(T=A.history;T--;)D[T]=0===T?E.fps:D[T-1],N[T]=0===T?E.duration:N[T-1]}(),F(),A.heat){if(R.length)for(T=R.length;T--;)R[T].el.style[g[R[T].name].heatOn]=L?B(g[R[T].name].heatmap,E.fps,0,A.maxFps):B(g[R[T].name].heatmap,E.duration,A.threshold,0);if(I.graph&&g.column.heatOn)for(T=C.length;T--;)C[T].style[g.column.heatOn]=L?B(g.column.heatmap,D[T],0,A.maxFps):B(g.column.heatmap,N[T],A.threshold,0)}if(I.graph)for(x=0;x<A.history;x++)C[x].style.height=(L?D[x]?Math.round(w/A.maxFps*Math.min(D[x],A.maxFps)):0:N[x]?Math.round(w/A.threshold*Math.min(N[x],A.threshold)):0)+"px"}function G(){A.interval<20?(v=c(G),U()):(v=setTimeout(G,A.interval),b=c(U))}function j(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),E.toggle()}function H(){A.toggleOn&&a(I.container,A.toggleOn,j,1),t.removeChild(I.container)}function z(){for(var n in I.container&&H(),function(){if(g=d.theme[A.theme],!(_=g.compiledHeatmaps||[]).length&&g.heatmaps.length){for(x=0;x<g.heatmaps.length;x++)for(_[x]=[],T=0;T<=P;T++)_[x][T]=(t=.0033*T,e=g.heatmaps[x].saturation,n=void 0,r=void 0,s=void 0,a=void 0,h=void 0,l=void 0,c=void 0,0==(a=(i=g.heatmaps[x].lightness)<=.5?i*(1+e):i+e-i*e)?"#000":(c=a*((a-(h=2*i-a))/a)*((t*=6)-(l=Math.floor(t))),0===l||6===l?(n=a,r=h+c,s=h):1===l?(n=a-c,r=a,s=h):2===l?(n=h,r=a,s=h+c):3===l?(n=h,r=a-c,s=a):4===l?(n=h+c,r=h,s=a):(n=a,r=h,s=a-c),"#"+o(n)+o(r)+o(s)));g.compiledHeatmaps=_}var t,e,i,n,r,s,a,h,l,c}(),I.container=i(e("div"),g.container),I.count=I.container.appendChild(i(e("div"),g.count)),I.legend=I.container.appendChild(i(e("div"),g.legend)),I.graph=A.graph?I.container.appendChild(i(e("div"),g.graph)):0,R.length=0,I)I[n]&&g[n].heatOn&&R.push({name:n,el:I[n]});if(C.length=0,I.graph)for(I.graph.style.width=A.history*g.column.width+(A.history-1)*g.column.spacing+"px",T=0;T<A.history;T++)C[T]=I.graph.appendChild(i(e("div"),g.column)),C[T].style.position="absolute",C[T].style.bottom=0,C[T].style.right=T*g.column.width+T*g.column.spacing+"px",C[T].style.width=g.column.width+"px",C[T].style.height="0px";W(),F(),t.appendChild(I.container),I.graph&&(w=I.graph.clientHeight),A.toggleOn&&("click"===A.toggleOn&&(I.container.style.cursor="pointer"),a(I.container,A.toggleOn,j))}function W(){i(I.container,A)}E.options=A,E.fps=0,E.duration=0,E.isPaused=0,E.tickStart=function(){k=h()},E.tick=function(){y=h(),O+=(y-M-O)/A.smoothing,E.fps=1e3/O,E.duration=k<M?O:y-k,M=y},E.pause=function(){return v&&(E.isPaused=1,clearTimeout(v),l(v),l(b),v=b=0),E},E.resume=function(){return v||(E.isPaused=0,G()),E},E.set=function(t,e){return A[t]=e,L="fps"===A.show,-1!==r(t,p)&&z(),-1!==r(t,f)&&W(),E},E.showDuration=function(){return E.set("show","ms"),E},E.showFps=function(){return E.set("show","fps"),E},E.toggle=function(){return E.set("show",L?"ms":"fps"),E},E.hide=function(){return E.pause(),I.container.style.display="none",E},E.show=function(){return E.resume(),I.container.style.display="block",E},E.destroy=function(){E.pause(),H(),E.tick=E.tickStart=function(){}},z(),G()}d.extend=s,window.FPSMeter=d,d.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var p=["toggleOn","theme","heat","graph","history"],f=["position","zIndex","left","top","right","bottom","margin"]}(window),function(t,e){"use strict";e.theme={};var i=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},i,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},i,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},i,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},i,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter)},5845:t=>{"use strict";var e=Object.prototype.toString,i=Math.max,n=function(t,e){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var r=0;r<e.length;r+=1)i[r+t.length]=e[r];return i};t.exports=function(t){var r=this;if("function"!=typeof r||"[object Function]"!==e.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var s,o=function(t,e){for(var i=[],n=e||0,r=0;n<t.length;n+=1,r+=1)i[r]=t[n];return i}(arguments,1),a=i(0,r.length-o.length),h=[],l=0;l<a;l++)h[l]="$"+l;if(s=Function("binder","return function ("+function(t,e){for(var i="",n=0;n<t.length;n+=1)i+=t[n],n+1<t.length&&(i+=e);return i}(h,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var e=r.apply(this,n(o,arguments));return Object(e)===e?e:this}return r.apply(t,n(o,arguments))})),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}},4499:(t,e,i)=>{"use strict";var n=i(5845);t.exports=Function.prototype.bind||n},8897:(t,e,i)=>{"use strict";var n,r=i(7960),s=i(219),o=i(3841),a=i(6190),h=i(3950),l=i(6296),c=i(1711),u=i(3221),d=i(4822),p=i(3700),f=i(3888),m=i(4670),g=i(9988),_=Function,y=function(t){try{return _('"use strict"; return ('+t+").constructor;")()}catch(t){}},v=i(1399),b=i(9920),w=function(){throw new c},S=v?function(){try{return w}catch(t){try{return v(arguments,"callee").get}catch(t){return w}}}():w,T=i(4923)(),x=i(1724),E="function"==typeof Reflect&&Reflect.getPrototypeOf||r.getPrototypeOf||x,A=i(6678),I=i(376),C={},P="undefined"!=typeof Uint8Array&&E?E(Uint8Array):n,R={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":T&&E?E([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":C,"%AsyncGenerator%":C,"%AsyncGeneratorFunction%":C,"%AsyncIteratorPrototype%":C,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":_,"%GeneratorFunction%":C,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":T&&E?E(E([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&T&&E?E((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":h,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&T&&E?E((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":T&&E?E(""[Symbol.iterator]()):n,"%Symbol%":T?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":S,"%TypedArray%":P,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":I,"%Function.prototype.apply%":A,"%Object.defineProperty%":b,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":m,"%Math.pow%":g};if(E)try{null.error}catch(t){var O=E(E(t));R["%Error.prototype%"]=O}var k=function t(e){var i;if("%AsyncFunction%"===e)i=y("async function () {}");else if("%GeneratorFunction%"===e)i=y("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=y("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&E&&(i=E(r.prototype))}return R[e]=i,i},M={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D=i(4499),N=i(4313),L=D.call(I,Array.prototype.concat),B=D.call(A,Array.prototype.splice),F=D.call(I,String.prototype.replace),U=D.call(I,String.prototype.slice),G=D.call(I,RegExp.prototype.exec),j=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,H=/\\(\\)?/g,z=function(t,e){var i,n=t;if(N(M,n)&&(n="%"+(i=M[n])[0]+"%"),N(R,n)){var r=R[n];if(r===C&&(r=k(n)),void 0===r&&!e)throw new c("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:r}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new c('"allowMissing" argument must be a boolean');if(null===G(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(t){var e=U(t,0,1),i=U(t,-1);if("%"===e&&"%"!==i)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return F(t,j,(function(t,e,i,r){n[n.length]=i?F(r,H,"$1"):e||t})),n}(t),n=i.length>0?i[0]:"",r=z("%"+n+"%",e),s=r.name,o=r.value,a=!1,h=r.alias;h&&(n=h[0],B(i,L([0,1],h)));for(var u=1,d=!0;u<i.length;u+=1){var p=i[u],f=U(p,0,1),m=U(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===m||"'"===m||"`"===m)&&f!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==p&&d||(a=!0),N(R,s="%"+(n+="."+p)+"%"))o=R[s];else if(null!=o){if(!(p in o)){if(!e)throw new c("base intrinsic for "+t+" exists, but the property is not available.");return}if(v&&u+1>=i.length){var g=v(o,p);o=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:o[p]}else d=N(o,p),o=o[p];d&&!a&&(R[s]=o)}}return o}},6433:t=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},1399:(t,e,i)=>{"use strict";var n=i(6433);if(n)try{n([],"length")}catch(t){n=null}t.exports=n},1527:(t,e,i)=>{"use strict";function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}i.d(e,{gsap:()=>Kn});var s,o,a,h,l,c,u,d,p,f,m,g,_,y,v,b,w,S={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},T={duration:.5,overwrite:!1,delay:0},x=1e8,E=1e-8,A=2*Math.PI,I=A/4,C=0,P=Math.sqrt,R=Math.cos,O=Math.sin,k=function(t){return"string"==typeof t},M=function(t){return"function"==typeof t},D=function(t){return"number"==typeof t},N=function(t){return void 0===t},L=function(t){return"object"==typeof t},B=function(t){return!1!==t},F=function(){return"undefined"!=typeof window},U=function(t){return M(t)||k(t)},G="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},j=Array.isArray,H=/(?:-?\.?\d|\.)+/gi,z=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,W=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,V=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,X=/[+-]=-?[.\d]+/,Y=/[^,'"\[\]\s]+/gi,q=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,$={},K={},J=function(t){return(K=At(t,$))&&Ii},Z=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Q=function(t,e){return!e&&console.warn(t)},tt=function(t,e){return t&&($[t]=e)&&K&&(K[t]=e)||$},et=function(){return 0},it={suppressEvents:!0,isStart:!0,kill:!1},nt={suppressEvents:!0,kill:!1},rt={suppressEvents:!0},st={},ot=[],at={},ht={},lt={},ct=30,ut=[],dt="",pt=function(t){var e,i,n=t[0];if(L(n)||M(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=ut.length;i--&&!ut[i].targetTest(n););e=ut[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new je(t[i],e)))||t.splice(i,1);return t},ft=function(t){return t._gsap||pt(re(t))[0]._gsap},mt=function(t,e,i){return(i=t[e])&&M(i)?t[e]():N(i)&&t.getAttribute&&t.getAttribute(e)||i},gt=function(t,e){return(t=t.split(",")).forEach(e)||t},_t=function(t){return Math.round(1e5*t)/1e5||0},yt=function(t){return Math.round(1e7*t)/1e7||0},vt=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+n:"-"===i?t-n:"*"===i?t*n:t/n},bt=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},wt=function(){var t,e,i=ot.length,n=ot.slice(0);for(at={},ot.length=0,t=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},St=function(t,e,i,n){ot.length&&!o&&wt(),t.render(e,i,n||o&&e<0&&(t._initted||t._startAt)),ot.length&&!o&&wt()},Tt=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Y).length<2?e:k(t)?t.trim():t},xt=function(t){return t},Et=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},At=function(t,e){for(var i in e)t[i]=e[i];return t},It=function t(e,i){for(var n in i)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=L(i[n])?t(e[n]||(e[n]={}),i[n]):i[n]);return e},Ct=function(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n},Pt=function(t){var e,i=t.parent||h,n=t.keyframes?(e=j(t.keyframes),function(t,i){for(var n in i)n in t||"duration"===n&&e||"ease"===n||(t[n]=i[n])}):Et;if(B(t.inherit))for(;i;)n(t,i.vars.defaults),i=i.parent||i._dp;return t},Rt=function(t,e,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var s,o=t[n];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},Ot=function(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=e._prev,s=e._next;r?r._next=s:t[i]===e&&(t[i]=s),s?s._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null},kt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Mt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Dt=function(t,e,i,n){return t._startAt&&(o?t._startAt.revert(nt):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Nt=function t(e){return!e||e._ts&&t(e.parent)},Lt=function(t){return t._repeat?Bt(t._tTime,t=t.duration()+t._rDelay)*t:0},Bt=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Ft=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ut=function(t){return t._end=yt(t._start+(t._tDur/Math.abs(t._ts||t._rts||E)||0))},Gt=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=yt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ut(t),i._dirty||Mt(i,t)),t},jt=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=Ft(t.rawTime(),e),(!e._dur||Qt(0,e.totalDuration(),i)-e._tTime>E)&&e.render(i,!0)),Mt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},Ht=function(t,e,i,n){return e.parent&&kt(e),e._start=yt((D(i)?i:i||t!==h?Kt(t,i,e):t._time)+e._delay),e._end=yt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Rt(t,e,"_first","_last",t._sort?"_start":0),Xt(e)||(t._recent=e),n||jt(t,e),t._ts<0&&Gt(t,t._tTime),t},zt=function(t,e){return($.ScrollTrigger||Z("scrollTrigger",e))&&$.ScrollTrigger.create(e,t)},Wt=function(t,e,i,n,r){return $e(t,e,r),t._initted?!i&&t._pt&&!o&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&p!==Ce.frame?(ot.push(t),t._lazy=[r,n],1):void 0:1},Vt=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},Xt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Yt=function(t,e,i,n){var r=t._repeat,s=yt(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:yt(s*(r+1)+t._rDelay*r):s,o>0&&!n&&Gt(t,t._tTime=t._tDur*o),t.parent&&Ut(t),i||Mt(t.parent,t),t},qt=function(t){return t instanceof ze?Mt(t):Yt(t,t._dur)},$t={_start:0,endTime:et,totalDuration:et},Kt=function t(e,i,n){var r,s,o,a=e.labels,h=e._recent||$t,l=e.duration()>=x?h.endTime(!1):e._dur;return k(i)&&(isNaN(i)||i in a)?(s=i.charAt(0),o="%"===i.substr(-1),r=i.indexOf("="),"<"===s||">"===s?(r>=0&&(i=i.replace(/=/,"")),("<"===s?h._start:h.endTime(h._repeat>=0))+(parseFloat(i.substr(1))||0)*(o?(r<0?h:n).totalDuration()/100:1)):r<0?(i in a||(a[i]=l),a[i]):(s=parseFloat(i.charAt(r-1)+i.substr(r+1)),o&&n&&(s=s/100*(j(n)?n[0]:n).totalDuration()),r>1?t(e,i.substr(0,r-1),n)+s:l+s)):null==i?l:+i},Jt=function(t,e,i){var n,r,s=D(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=i,t){for(n=a,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=B(r.vars.inherit)&&r.parent;a.immediateRender=B(n.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new ti(e[0],a,e[o+1])},Zt=function(t,e){return t||0===t?e(t):e},Qt=function(t,e,i){return i<t?t:i>e?e:i},te=function(t,e){return k(t)&&(e=q.exec(t))?e[1]:""},ee=[].slice,ie=function(t,e){return t&&L(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&L(t[0]))&&!t.nodeType&&t!==l},ne=function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var n;return k(t)&&!e||ie(t,1)?(n=i).push.apply(n,re(t)):i.push(t)}))||i},re=function(t,e,i){return a&&!e&&a.selector?a.selector(t):!k(t)||i||!c&&Pe()?j(t)?ne(t,i):ie(t)?ee.call(t,0):t?[t]:[]:ee.call((e||u).querySelectorAll(t),0)},se=function(t){return t=re(t)[0]||Q("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return re(e,i.querySelectorAll?i:i===t?Q("Invalid scope")||u.createElement("div"):t)}},oe=function(t){return t.sort((function(){return.5-Math.random()}))},ae=function(t){if(M(t))return t;var e=L(t)?t:{each:t},i=Le(e.ease),n=e.from||0,r=parseFloat(e.base)||0,s={},o=n>0&&n<1,a=isNaN(n)||o,h=e.axis,l=n,c=n;return k(n)?l=c={center:.5,edges:.5,end:1}[n]||0:!o&&a&&(l=n[0],c=n[1]),function(t,o,u){var d,p,f,m,g,_,y,v,b,w=(u||e).length,S=s[w];if(!S){if(!(b="auto"===e.grid?0:(e.grid||[1,x])[1])){for(y=-x;y<(y=u[b++].getBoundingClientRect().left)&&b<w;);b<w&&b--}for(S=s[w]=[],d=a?Math.min(b,w)*l-.5:n%b,p=b===x?0:a?w*c/b-.5:n/b|0,y=0,v=x,_=0;_<w;_++)f=_%b-d,m=p-(_/b|0),S[_]=g=h?Math.abs("y"===h?m:f):P(f*f+m*m),g>y&&(y=g),g<v&&(v=g);"random"===n&&oe(S),S.max=y-v,S.min=v,S.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(b>w?w-1:h?"y"===h?w/b:b:Math.max(b,w/b))||0)*("edges"===n?-1:1),S.b=w<0?r-w:r,S.u=te(e.amount||e.each)||0,i=i&&w<0?De(i):i}return w=(S[t]-S.min)/S.max||0,yt(S.b+(i?i(w):w)*S.v)+S.u}},he=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=yt(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(D(i)?0:te(i))}},le=function(t,e){var i,n,r=j(t);return!r&&L(t)&&(i=r=t.radius||x,t.values?(t=re(t.values),(n=!D(t[0]))&&(i*=i)):t=he(t.increment)),Zt(e,r?M(t)?function(e){return n=t(e),Math.abs(n-e)<=i?n:e}:function(e){for(var r,s,o=parseFloat(n?e.x:e),a=parseFloat(n?e.y:0),h=x,l=0,c=t.length;c--;)(r=n?(r=t[c].x-o)*r+(s=t[c].y-a)*s:Math.abs(t[c]-o))<h&&(h=r,l=c);return l=!i||h<=i?t[l]:e,n||l===e||D(e)?l:l+te(e)}:he(t))},ce=function(t,e,i,n){return Zt(j(t)?!e:!0===i?!!(i=0):!n,(function(){return j(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*n)/n}))},ue=function(t,e,i){return Zt(i,(function(i){return t[~~e(i)]}))},de=function(t){for(var e,i,n,r,s=0,o="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),r="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(r?Y:H),o+=t.substr(s,e-s)+ce(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),s=n+1;return o+t.substr(s,t.length-s)},pe=function(t,e,i,n,r){var s=e-t,o=n-i;return Zt(r,(function(e){return i+((e-t)/s*o||0)}))},fe=function(t,e,i){var n,r,s,o=t.labels,a=x;for(n in o)(r=o[n]-e)<0==!!i&&r&&a>(r=Math.abs(r))&&(s=n,a=r);return s},me=function(t,e,i){var n,r,s,o=t.vars,h=o[e],l=a,c=t._ctx;if(h)return n=o[e+"Params"],r=o.callbackScope||t,i&&ot.length&&wt(),c&&(a=c),s=n?h.apply(r,n):h.call(r),a=l,s},ge=function(t){return kt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!o),t.progress()<1&&me(t,"onInterrupt"),t},_e=[],ye=function(t){if(t)if(t=!t.name&&t.default||t,F()||t.headless){var e=t.name,i=M(t),n=e&&!i&&t.init?function(){this._props=[]}:t,r={init:et,render:li,add:Ye,kill:ui,modifier:ci,rawVars:0},s={targetTest:0,get:0,getSetter:si,aliases:{},register:0};if(Pe(),t!==n){if(ht[e])return;Et(n,Et(Ct(t,r),s)),At(n.prototype,At(r,Ct(t,s))),ht[n.prop=e]=n,t.targetTest&&(ut.push(n),st[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}tt(e,n),t.register&&t.register(Ii,n,fi)}else _e.push(t)},ve=255,be={aqua:[0,ve,ve],lime:[0,ve,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ve],navy:[0,0,128],white:[ve,ve,ve],olive:[128,128,0],yellow:[ve,ve,0],orange:[ve,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ve,0,0],pink:[ve,192,203],cyan:[0,ve,ve],transparent:[ve,ve,ve,0]},we=function(t,e,i){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*ve+.5|0},Se=function(t,e,i){var n,r,s,o,a,h,l,c,u,d,p=t?D(t)?[t>>16,t>>8&ve,t&ve]:0:be.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),be[t])p=be[t];else if("#"===t.charAt(0)){if(t.length<6&&(n=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+n+n+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&ve,p&ve,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&ve,t&ve]}else if("hsl"===t.substr(0,3))if(p=d=t.match(H),e){if(~t.indexOf("="))return p=t.match(z),i&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,a=+p[1]/100,n=2*(h=+p[2]/100)-(r=h<=.5?h*(a+1):h+a-h*a),p.length>3&&(p[3]*=1),p[0]=we(o+1/3,n,r),p[1]=we(o,n,r),p[2]=we(o-1/3,n,r);else p=t.match(H)||be.transparent;p=p.map(Number)}return e&&!d&&(n=p[0]/ve,r=p[1]/ve,s=p[2]/ve,h=((l=Math.max(n,r,s))+(c=Math.min(n,r,s)))/2,l===c?o=a=0:(u=l-c,a=h>.5?u/(2-l-c):u/(l+c),o=l===n?(r-s)/u+(r<s?6:0):l===r?(s-n)/u+2:(n-r)/u+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*a+.5),p[2]=~~(100*h+.5)),i&&p.length<4&&(p[3]=1),p},Te=function(t){var e=[],i=[],n=-1;return t.split(Ee).forEach((function(t){var r=t.match(W)||[];e.push.apply(e,r),i.push(n+=r.length+1)})),e.c=i,e},xe=function(t,e,i){var n,r,s,o,a="",h=(t+a).match(Ee),l=e?"hsla(":"rgba(",c=0;if(!h)return t;if(h=h.map((function(t){return(t=Se(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(s=Te(t),(n=i.c).join(a)!==s.c.join(a)))for(o=(r=t.replace(Ee,"1").split(W)).length-1;c<o;c++)a+=r[c]+(~n.indexOf(c)?h.shift()||l+"0,0,0,0)":(s.length?s:h.length?h:i).shift());if(!r)for(o=(r=t.split(Ee)).length-1;c<o;c++)a+=r[c]+h[c];return a+r[o]},Ee=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in be)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Ae=/hsl[a]?\(/,Ie=function(t){var e,i=t.join(" ");if(Ee.lastIndex=0,Ee.test(i))return e=Ae.test(i),t[1]=xe(t[1],e),t[0]=xe(t[0],e,Te(t[1])),!0},Ce=function(){var t,e,i,n,r,s,o=Date.now,a=500,h=33,p=o(),f=p,g=1e3/240,_=g,y=[],v=function i(l){var c,u,d,m,v=o()-f,b=!0===l;if((v>a||v<0)&&(p+=v-h),((c=(d=(f+=v)-p)-_)>0||b)&&(m=++n.frame,r=d-1e3*n.time,n.time=d/=1e3,_+=c+(c>=g?4:g-c),u=1),b||(t=e(i)),u)for(s=0;s<y.length;s++)y[s](d,r,m,l)};return n={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(t){return r/(1e3/(t||60))},wake:function(){d&&(!c&&F()&&(l=c=window,u=l.document||{},$.gsap=Ii,(l.gsapVersions||(l.gsapVersions=[])).push(Ii.version),J(K||l.GreenSockGlobals||!l.gsap&&l||{}),_e.forEach(ye)),i="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&n.sleep(),e=i||function(t){return setTimeout(t,_-1e3*n.time+1|0)},m=1,v(2))},sleep:function(){(i?cancelAnimationFrame:clearTimeout)(t),m=0,e=et},lagSmoothing:function(t,e){a=t||1/0,h=Math.min(e||33,a)},fps:function(t){g=1e3/(t||240),_=1e3*n.time+g},add:function(t,e,i){var r=e?function(e,i,s,o){t(e,i,s,o),n.remove(r)}:t;return n.remove(t),y[i?"unshift":"push"](r),Pe(),r},remove:function(t,e){~(e=y.indexOf(t))&&y.splice(e,1)&&s>=e&&s--},_listeners:y}}(),Pe=function(){return!m&&Ce.wake()},Re={},Oe=/^[\d.\-M][\d.\-,\s]/,ke=/["']/g,Me=function(t){for(var e,i,n,r={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,h=s.length;a<h;a++)i=s[a],e=a!==h-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),r[o]=isNaN(n)?n.replace(ke,"").trim():+n,o=i.substr(e+1).trim();return r},De=function(t){return function(e){return 1-t(1-e)}},Ne=function t(e,i){for(var n,r=e._first;r;)r instanceof ze?t(r,i):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===i||(r.timeline?t(r.timeline,i):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=i)),r=r._next},Le=function(t,e){return t&&(M(t)?t:Re[t]||function(t){var e,i,n,r,s=(t+"").split("("),o=Re[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[Me(s[1])]:(e=t,i=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",i),e.substring(i,~r&&r<n?e.indexOf(")",n+1):n)).split(",").map(Tt)):Re._CE&&Oe.test(t)?Re._CE("",t):o}(t))||e},Be=function(t,e,i,n){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:i,easeInOut:n};return gt(t,(function(t){for(var e in Re[t]=$[t]=s,Re[r=t.toLowerCase()]=i,s)Re[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Re[t+"."+e]=s[e]})),s},Fe=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Ue=function t(e,i,n){var r=i>=1?i:1,s=(n||(e?.3:.45))/(i<1?i:1),o=s/A*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*O((t-o)*s)+1},h="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Fe(a);return s=A/s,h.config=function(i,n){return t(e,i,n)},h},Ge=function t(e,i){void 0===i&&(i=1.70158);var n=function(t){return t?--t*t*((i+1)*t+i)+1:0},r="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Fe(n);return r.config=function(i){return t(e,i)},r};gt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;Be(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),Re.Linear.easeNone=Re.none=Re.Linear.easeIn,Be("Elastic",Ue("in"),Ue("out"),Ue()),g=7.5625,v=2*(y=1/(_=2.75)),b=2.5*y,Be("Bounce",(function(t){return 1-w(1-t)}),w=function(t){return t<y?g*t*t:t<v?g*Math.pow(t-1.5/_,2)+.75:t<b?g*(t-=2.25/_)*t+.9375:g*Math.pow(t-2.625/_,2)+.984375}),Be("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Be("Circ",(function(t){return-(P(1-t*t)-1)})),Be("Sine",(function(t){return 1===t?1:1-R(t*I)})),Be("Back",Ge("in"),Ge("out"),Ge()),Re.SteppedEase=Re.steps=$.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,n=t+(e?0:1),r=e?1:0;return function(t){return((n*Qt(0,.99999999,t)|0)+r)*i}}},T.ease=Re["quad.out"],gt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return dt+=t+","+t+"Params,"}));var je=function(t,e){this.id=C++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:mt,this.set=e?e.getSetter:si},He=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Yt(this,+t.duration,1,1),this.data=t.data,a&&(this._ctx=a,a.data.push(this)),m||Ce.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Yt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Pe(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Gt(this,t),!i._dp||i.parent||jt(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Ht(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===E||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),St(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Lt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Lt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Bt(this._tTime,i)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var i=this.parent&&this._ts?Ft(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(Qt(-Math.abs(this._delay),this._tDur,i),!1!==e),Ut(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==E&&(this._tTime-=E)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Ht(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(B(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ft(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=rt);var e=o;return o=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),o=e,this},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,qt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,qt(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Kt(this,t),B(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,B(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-E))},e.eventCallback=function(t,e,i){var n=this.vars;return arguments.length>1?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(t){var e=this;return new Promise((function(i){var n=M(t)?t:xt,r=function(){var t=e.then;e.then=null,M(n)&&(n=n(e))&&(n.then||n===e)&&(e.then=t),i(n),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){ge(this)},t}();Et(He.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ze=function(t){function e(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=B(e.sortChildren),h&&Ht(e.parent||h,n(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&zt(n(r),e.scrollTrigger),r}r(e,t);var i=e.prototype;return i.to=function(t,e,i){return Jt(0,arguments,this),this},i.from=function(t,e,i){return Jt(1,arguments,this),this},i.fromTo=function(t,e,i,n){return Jt(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,Pt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ti(t,e,Kt(this,i),1),this},i.call=function(t,e,i){return Ht(this,ti.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,n,r,s,o){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=s,i.onCompleteParams=o,i.parent=this,new ti(t,i,Kt(this,r)),this},i.staggerFrom=function(t,e,i,n,r,s,o){return i.runBackwards=1,Pt(i).immediateRender=B(i.immediateRender),this.staggerTo(t,e,i,n,r,s,o)},i.staggerFromTo=function(t,e,i,n,r,s,o,a){return n.startAt=i,Pt(n).immediateRender=B(n.immediateRender),this.staggerTo(t,e,n,r,s,o,a)},i.render=function(t,e,i){var n,r,s,a,l,c,u,d,p,f,m,g,_=this._time,y=this._dirty?this.totalDuration():this._tDur,v=this._dur,b=t<=0?0:yt(t),w=this._zTime<0!=t<0&&(this._initted||!v);if(this!==h&&b>y&&t>=0&&(b=y),b!==this._tTime||i||w){if(_!==this._time&&v&&(b+=this._time-_,t+=this._time-_),n=b,p=this._start,c=!(d=this._ts),w&&(v||(_=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(m=this._yoyo,l=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*l+t,e,i);if(n=yt(b%l),b===y?(a=this._repeat,n=v):((a=~~(b/l))&&a===b/l&&(n=v,a--),n>v&&(n=v)),f=Bt(this._tTime,l),!_&&this._tTime&&f!==a&&this._tTime-f*l-this._dur<=0&&(f=a),m&&1&a&&(n=v-n,g=1),a!==f&&!this._lock){var S=m&&1&f,T=S===(m&&1&a);if(a<f&&(S=!S),_=S?0:b%v?v:b,this._lock=1,this.render(_||(g?0:yt(a*l)),e,!v)._lock=0,this._tTime=b,!e&&this.parent&&me(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),_&&_!==this._time||c!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,y=this._tDur,T&&(this._lock=2,_=S?v:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;Ne(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,yt(_),yt(n)),u&&(b-=n-(n=u._start))),this._tTime=b,this._time=n,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,_=0),!_&&n&&!e&&!a&&(me(this,"onStart"),this._tTime!==b))return this;if(n>=_&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||n>=r._start)&&r._ts&&u!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(r._ts>0?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!c){u=0,s&&(b+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var x=t<0?t:n;r;){if(s=r._prev,(r._act||x<=r._end)&&r._ts&&u!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(r._ts>0?(x-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(x-r._start)*r._ts,e,i||o&&(r._initted||r._startAt)),n!==this._time||!this._ts&&!c){u=0,s&&(b+=this._zTime=x?-1e-8:E);break}}r=s}}if(u&&!e&&(this.pause(),u.render(n>=_?0:-1e-8)._zTime=n>=_?1:-1,this._ts))return this._start=p,Ut(this),this.render(t,e,i);this._onUpdate&&!e&&me(this,"onUpdate",!0),(b===y&&this._tTime>=this.totalDuration()||!b&&_)&&(p!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((t||!v)&&(b===y&&this._ts>0||!b&&this._ts<0)&&kt(this,1),e||t<0&&!_||!b&&!_&&y||(me(this,b===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<y&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(t,e){var i=this;if(D(e)||(e=Kt(this,e,t)),!(t instanceof He)){if(j(t))return t.forEach((function(t){return i.add(t,e)})),this;if(k(t))return this.addLabel(t,e);if(!M(t))return this;t=ti.delayedCall(0,t)}return this!==t?Ht(this,t,e):this},i.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-x);for(var r=[],s=this._first;s;)s._start>=n&&(s instanceof ti?e&&r.push(s):(i&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,i)))),s=s._next;return r},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return k(t)?this.removeLabel(t):M(t)?this.killTweensOf(t):(Ot(this,t),t===this._recent&&(this._recent=this._last),Mt(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=yt(Ce.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=Kt(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var n=ti.delayedCall(0,e||et,i);return n.data="isPause",this._hasPause=1,Ht(this,n,Kt(this,t))},i.removePause=function(t){var e=this._first;for(t=Kt(this,t);e;)e._start===t&&"isPause"===e.data&&kt(e),e=e._next},i.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),r=n.length;r--;)We!==n[r]&&n[r].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,n=[],r=re(t),s=this._first,o=D(e);s;)s instanceof ti?bt(s._targets,r)&&(o?(!We||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&n.push(s):(i=s.getTweensOf(r,e)).length&&n.push.apply(n,i),s=s._next;return n},i.tweenTo=function(t,e){e=e||{};var i,n=this,r=Kt(n,t),s=e,o=s.startAt,a=s.onStart,h=s.onStartParams,l=s.immediateRender,c=ti.to(n,Et({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||E,onStart:function(){if(n.pause(),!i){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale());c._dur!==t&&Yt(c,t,0,1).render(c._time,!0,!0),i=1}a&&a.apply(c,h||[])}},e));return l?c.render(0):c},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,Et({startAt:{time:Kt(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),fe(this,Kt(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),fe(this,Kt(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+E)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,r=this._first,s=this.labels;r;)r._start>=i&&(r._start+=t,r._end+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return Mt(this)},i.invalidate=function(e){var i=this._first;for(this._lock=0;i;)i.invalidate(e),i=i._next;return t.prototype.invalidate.call(this,e)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Mt(this)},i.totalDuration=function(t){var e,i,n,r=0,s=this,o=s._last,a=x;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(i=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,Ht(s,o,i-o._delay,1)._lock=0):a=i,i<0&&o._ts&&(r-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-Infinity),a=0),o._end>r&&o._ts&&(r=o._end),o=e;Yt(s,s===h&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(h._ts&&(St(h,Ft(t,h)),p=Ce.frame),Ce.frame>=ct){ct+=S.autoSleep||120;var e=h._first;if((!e||!e._ts)&&S.autoSleep&&Ce._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ce.sleep()}}},e}(He);Et(ze.prototype,{_lock:0,_hasPause:0,_forcing:0});var We,Ve,Xe=function(t,e,i,n,r,s,o){var a,h,l,c,u,d,p,f,m=new fi(this._pt,t,e,0,1,hi,null,r),g=0,_=0;for(m.b=i,m.e=n,i+="",(p=~(n+="").indexOf("random("))&&(n=de(n)),s&&(s(f=[i,n],t,e),i=f[0],n=f[1]),h=i.match(V)||[];a=V.exec(n);)c=a[0],u=n.substring(g,a.index),l?l=(l+1)%5:"rgba("===u.substr(-5)&&(l=1),c!==h[_++]&&(d=parseFloat(h[_-1])||0,m._pt={_next:m._pt,p:u||1===_?u:",",s:d,c:"="===c.charAt(1)?vt(d,c)-d:parseFloat(c)-d,m:l&&l<4?Math.round:0},g=V.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=o,(X.test(n)||p)&&(m.e=0),this._pt=m,m},Ye=function(t,e,i,n,r,s,o,a,h,l){M(n)&&(n=n(r||0,t,s));var c,u=t[e],d="get"!==i?i:M(u)?h?t[e.indexOf("set")||!M(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,p=M(u)?h?ni:ii:ei;if(k(n)&&(~n.indexOf("random(")&&(n=de(n)),"="===n.charAt(1)&&((c=vt(d,n)+(te(d)||0))||0===c)&&(n=c)),!l||d!==n||Ve)return isNaN(d*n)||""===n?(!u&&!(e in t)&&Z(e,n),Xe.call(this,t,e,d,n,p,a||S.stringFilter,h)):(c=new fi(this._pt,t,e,+d||0,n-(d||0),"boolean"==typeof u?ai:oi,0,p),h&&(c.fp=h),o&&c.modifier(o,this,t),this._pt=c)},qe=function(t,e,i,n,r,s){var o,a,h,l;if(ht[t]&&!1!==(o=new ht[t]).init(r,o.rawVars?e[t]:function(t,e,i,n,r){if(M(t)&&(t=Je(t,r,e,i,n)),!L(t)||t.style&&t.nodeType||j(t)||G(t))return k(t)?Je(t,r,e,i,n):t;var s,o={};for(s in t)o[s]=Je(t[s],r,e,i,n);return o}(e[t],n,r,s,i),i,n,s)&&(i._pt=a=new fi(i._pt,r,t,0,1,o.render,o,0,o.priority),i!==f))for(h=i._ptLookup[i._targets.indexOf(r)],l=o._props.length;l--;)h[o._props[l]]=a;return o},$e=function t(e,i,n){var r,a,l,c,u,d,p,f,m,g,_,y,v,b=e.vars,w=b.ease,S=b.startAt,A=b.immediateRender,I=b.lazy,C=b.onUpdate,P=b.runBackwards,R=b.yoyoEase,O=b.keyframes,k=b.autoRevert,M=e._dur,D=e._startAt,N=e._targets,L=e.parent,F=L&&"nested"===L.data?L.vars.targets:N,U="auto"===e._overwrite&&!s,G=e.timeline;if(G&&(!O||!w)&&(w="none"),e._ease=Le(w,T.ease),e._yEase=R?De(Le(!0===R?w:R,T.ease)):0,R&&e._yoyo&&!e._repeat&&(R=e._yEase,e._yEase=e._ease,e._ease=R),e._from=!G&&!!b.runBackwards,!G||O&&!b.stagger){if(y=(f=N[0]?ft(N[0]).harness:0)&&b[f.prop],r=Ct(b,st),D&&(D._zTime<0&&D.progress(1),i<0&&P&&A&&!k?D.render(-1,!0):D.revert(P&&M?nt:it),D._lazy=0),S){if(kt(e._startAt=ti.set(N,Et({data:"isStart",overwrite:!1,parent:L,immediateRender:!0,lazy:!D&&B(I),startAt:null,delay:0,onUpdate:C&&function(){return me(e,"onUpdate")},stagger:0},S))),e._startAt._dp=0,e._startAt._sat=e,i<0&&(o||!A&&!k)&&e._startAt.revert(nt),A&&M&&i<=0&&n<=0)return void(i&&(e._zTime=i))}else if(P&&M&&!D)if(i&&(A=!1),l=Et({overwrite:!1,data:"isFromStart",lazy:A&&!D&&B(I),immediateRender:A,stagger:0,parent:L},r),y&&(l[f.prop]=y),kt(e._startAt=ti.set(N,l)),e._startAt._dp=0,e._startAt._sat=e,i<0&&(o?e._startAt.revert(nt):e._startAt.render(-1,!0)),e._zTime=i,A){if(!i)return}else t(e._startAt,E,E);for(e._pt=e._ptCache=0,I=M&&B(I)||I&&!M,a=0;a<N.length;a++){if(p=(u=N[a])._gsap||pt(N)[a]._gsap,e._ptLookup[a]=g={},at[p.id]&&ot.length&&wt(),_=F===N?a:F.indexOf(u),f&&!1!==(m=new f).init(u,y||r,e,_,F)&&(e._pt=c=new fi(e._pt,u,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(t){g[t]=c})),m.priority&&(d=1)),!f||y)for(l in r)ht[l]&&(m=qe(l,r,e,_,u,F))?m.priority&&(d=1):g[l]=c=Ye.call(e,u,l,"get",r[l],_,F,0,b.stringFilter);e._op&&e._op[a]&&e.kill(u,e._op[a]),U&&e._pt&&(We=e,h.killTweensOf(u,g,e.globalTime(i)),v=!e.parent,We=0),e._pt&&I&&(at[p.id]=1)}d&&pi(e),e._onInit&&e._onInit(e)}e._onUpdate=C,e._initted=(!e._op||e._pt)&&!v,O&&i<=0&&G.render(x,!0,!0)},Ke=function(t,e,i,n){var r,s,o=e.ease||n||"power1.inOut";if(j(e))s=i[t]||(i[t]=[]),e.forEach((function(t,i){return s.push({t:i/(e.length-1)*100,v:t,e:o})}));else for(r in e)s=i[r]||(i[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:o})},Je=function(t,e,i,n,r){return M(t)?t.call(e,i,n,r):k(t)&&~t.indexOf("random(")?de(t):t},Ze=dt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Qe={};gt(Ze+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Qe[t]=1}));var ti=function(t){function e(e,i,r,o){var a;"number"==typeof i&&(r.duration=i,i=r,r=null);var l,c,u,d,p,f,m,g,_=(a=t.call(this,o?i:Pt(i))||this).vars,y=_.duration,v=_.delay,b=_.immediateRender,w=_.stagger,T=_.overwrite,x=_.keyframes,E=_.defaults,A=_.scrollTrigger,I=_.yoyoEase,C=i.parent||h,P=(j(e)||G(e)?D(e[0]):"length"in i)?[e]:re(e);if(a._targets=P.length?pt(P):Q("GSAP target "+e+" not found. https://gsap.com",!S.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=T,x||w||U(y)||U(v)){if(i=a.vars,(l=a.timeline=new ze({data:"nested",defaults:E||{},targets:C&&"nested"===C.data?C.vars.targets:P})).kill(),l.parent=l._dp=n(a),l._start=0,w||U(y)||U(v)){if(d=P.length,m=w&&ae(w),L(w))for(p in w)~Ze.indexOf(p)&&(g||(g={}),g[p]=w[p]);for(c=0;c<d;c++)(u=Ct(i,Qe)).stagger=0,I&&(u.yoyoEase=I),g&&At(u,g),f=P[c],u.duration=+Je(y,n(a),c,f,P),u.delay=(+Je(v,n(a),c,f,P)||0)-a._delay,!w&&1===d&&u.delay&&(a._delay=v=u.delay,a._start+=v,u.delay=0),l.to(f,u,m?m(c,f,P):0),l._ease=Re.none;l.duration()?y=v=0:a.timeline=0}else if(x){Pt(Et(l.vars.defaults,{ease:"none"})),l._ease=Le(x.ease||i.ease||"none");var R,O,k,M=0;if(j(x))x.forEach((function(t){return l.to(P,t,">")})),l.duration();else{for(p in u={},x)"ease"===p||"easeEach"===p||Ke(p,x[p],u,x.easeEach);for(p in u)for(R=u[p].sort((function(t,e){return t.t-e.t})),M=0,c=0;c<R.length;c++)(k={ease:(O=R[c]).e,duration:(O.t-(c?R[c-1].t:0))/100*y})[p]=O.v,l.to(P,k,M),M+=k.duration;l.duration()<y&&l.to({},{duration:y-l.duration()})}}y||a.duration(y=l.duration())}else a.timeline=0;return!0!==T||s||(We=n(a),h.killTweensOf(P),We=0),Ht(C,n(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(b||!y&&!x&&a._start===yt(C._time)&&B(b)&&Nt(n(a))&&"nested"!==C.data)&&(a._tTime=-1e-8,a.render(Math.max(0,-v)||0)),A&&zt(n(a),A),a}r(e,t);var i=e.prototype;return i.render=function(t,e,i){var n,r,s,a,h,l,c,u,d,p=this._time,f=this._tDur,m=this._dur,g=t<0,_=t>f-E&&!g?f:t<E?0:t;if(m){if(_!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g){if(n=_,u=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*a+t,e,i);if(n=yt(_%a),_===f?(s=this._repeat,n=m):((s=~~(_/a))&&s===yt(_/a)&&(n=m,s--),n>m&&(n=m)),(l=this._yoyo&&1&s)&&(d=this._yEase,n=m-n),h=Bt(this._tTime,a),n===p&&!i&&this._initted&&s===h)return this._tTime=_,this;s!==h&&(u&&this._yEase&&Ne(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&this._time!==a&&this._initted&&(this._lock=i=1,this.render(yt(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(Wt(this,g?t:n,i,e,_))return this._tTime=0,this;if(!(p===this._time||i&&this.vars.repeatRefresh&&s!==h))return this;if(m!==this._dur)return this.render(t,e,i)}if(this._tTime=_,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(d||this._ease)(n/m),this._from&&(this.ratio=c=1-c),n&&!p&&!e&&!s&&(me(this,"onStart"),this._tTime!==_))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(t<0?t:u._dur*u._ease(n/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Dt(this,t,0,i),me(this,"onUpdate")),this._repeat&&s!==h&&this.vars.onRepeat&&!e&&this.parent&&me(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(g&&!this._onUpdate&&Dt(this,t,0,!0),(t||!m)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&kt(this,1),e||g&&!p||!(_||p||l)||(me(this,_===f?"onComplete":"onReverseComplete",!0),this._prom&&!(_<f&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,n){var r,s,a,h=t.ratio,l=e<0||!e&&(!t._start&&Vt(t)&&(t._initted||!Xt(t))||(t._ts<0||t._dp._ts<0)&&!Xt(t))?0:1,c=t._rDelay,u=0;if(c&&t._repeat&&(u=Qt(0,t._tDur,e),s=Bt(u,c),t._yoyo&&1&s&&(l=1-l),s!==Bt(t._tTime,c)&&(h=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==h||o||n||t._zTime===E||!e&&t._zTime){if(!t._initted&&Wt(t,e,n,i,u))return;for(a=t._zTime,t._zTime=e||(i?E:0),i||(i=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=u,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&Dt(t,e,0,!0),t._onUpdate&&!i&&me(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&me(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&kt(t,1),i||o||(me(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},i.resetTo=function(t,e,i,n,r){m||Ce.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||$e(this,s),function(t,e,i,n,r,s,o,a){var h,l,c,u,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],c=t._ptLookup,u=t._targets.length;u--;){if((h=c[u][e])&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return Ve=1,t.vars[e]="+=0",$e(t,o),Ve=0,a?Q(e+" not eligible for reset"):1;d.push(h)}for(u=d.length;u--;)(h=(l=d[u])._pt||l).s=!n&&0!==n||r?h.s+(n||0)+s*h.c:n,h.c=i-h.s,l.e&&(l.e=_t(i)+te(l.e)),l.b&&(l.b=h.s+te(l.b))}(this,t,e,i,n,this._ease(s/this._dur),s,r)?this.resetTo(t,e,i,n,1):(Gt(this,0),this.parent||Rt(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ge(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,We&&!0!==We.vars.overwrite)._first||ge(this),this.parent&&i!==this.timeline.totalDuration()&&Yt(this,this._dur*this.timeline._tDur/i,0,1),this}var n,r,s,o,a,h,l,c=this._targets,u=t?re(t):c,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(c,u))return"all"===e&&(this._pt=0),ge(this);for(n=this._op=this._op||[],"all"!==e&&(k(e)&&(a={},gt(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var i,n,r,s,o=t[0]?ft(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(n in i=At({},e),a)if(n in i)for(r=(s=a[n].split(",")).length;r--;)i[s[r]]=i[n];return i}(c,e)),l=c.length;l--;)if(~u.indexOf(c[l]))for(a in r=d[l],"all"===e?(n[l]=e,o=r,s={}):(s=n[l]=n[l]||{},o=e),o)(h=r&&r[a])&&("kill"in h.d&&!0!==h.d.kill(a)||Ot(this,h,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&p&&ge(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return Jt(1,arguments)},e.delayedCall=function(t,i,n,r){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},e.fromTo=function(t,e,i){return Jt(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return h.killTweensOf(t,e,i)},e}(He);Et(ti.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),gt("staggerTo,staggerFrom,staggerFromTo",(function(t){ti[t]=function(){var e=new ze,i=ee.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var ei=function(t,e,i){return t[e]=i},ii=function(t,e,i){return t[e](i)},ni=function(t,e,i,n){return t[e](n.fp,i)},ri=function(t,e,i){return t.setAttribute(e,i)},si=function(t,e){return M(t[e])?ii:N(t[e])&&t.setAttribute?ri:ei},oi=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},ai=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},hi=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},li=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ci=function(t,e,i,n){for(var r,s=this._pt;s;)r=s._next,s.p===n&&s.modifier(t,e,i),s=r},ui=function(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?Ot(this,n,"_pt"):n.dep||(e=1),n=i;return!e},di=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},pi=function(t){for(var e,i,n,r,s=t._pt;s;){for(e=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:r)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:r=s,s=e}t._pt=n},fi=function(){function t(t,e,i,n,r,s,o,a,h){this.t=e,this.s=n,this.c=r,this.p=i,this.r=s||oi,this.d=o||this,this.set=a||ei,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=di,this.m=t,this.mt=i,this.tween=e},t}();gt(dt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return st[t]=1})),$.TweenMax=$.TweenLite=ti,$.TimelineLite=$.TimelineMax=ze,h=new ze({sortChildren:!1,defaults:T,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),S.stringFilter=Ie;var mi=[],gi={},_i=[],yi=0,vi=0,bi=function(t){return(gi[t]||_i).map((function(t){return t()}))},wi=function(){var t=Date.now(),e=[];t-yi>2&&(bi("matchMediaInit"),mi.forEach((function(t){var i,n,r,s,o=t.queries,a=t.conditions;for(n in o)(i=l.matchMedia(o[n]).matches)&&(r=1),i!==a[n]&&(a[n]=i,s=1);s&&(t.revert(),r&&e.push(t))})),bi("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t,(function(e){return t.add(null,e)}))})),yi=t,bi("matchMedia"))},Si=function(){function t(t,e){this.selector=e&&se(e),this.data=[],this._r=[],this.isReverted=!1,this.id=vi++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,i){M(t)&&(i=e,e=t,t=M);var n=this,r=function(){var t,r=a,s=n.selector;return r&&r!==n&&r.data.push(n),i&&(n.selector=se(i)),a=n,t=e.apply(n,arguments),M(t)&&n._r.push(t),a=r,n.selector=s,n.isReverted=!1,t};return n.last=r,t===M?r(n,(function(t){return n.add(null,t)})):t?n[t]=r:r},e.ignore=function(t){var e=a;a=null,t(this),a=e},e.getTweens=function(){var e=[];return this.data.forEach((function(i){return i instanceof t?e.push.apply(e,i.getTweens()):i instanceof ti&&!(i.parent&&"nested"===i.parent.data)&&e.push(i)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var i=this;if(t?function(){for(var e,n=i.getTweens(),r=i.data.length;r--;)"isFlip"===(e=i.data[r]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach((function(t){return n.splice(n.indexOf(t),1)})));for(n.map((function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}})).sort((function(t,e){return e.g-t.g||-1/0})).forEach((function(e){return e.t.revert(t)})),r=i.data.length;r--;)(e=i.data[r])instanceof ze?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof ti)&&e.revert&&e.revert(t);i._r.forEach((function(e){return e(t,i)})),i.isReverted=!0}():this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e)for(var n=mi.length;n--;)mi[n].id===this.id&&mi.splice(n,1)},e.revert=function(t){this.kill(t||{})},t}(),Ti=function(){function t(t){this.contexts=[],this.scope=t,a&&a.data.push(this)}var e=t.prototype;return e.add=function(t,e,i){L(t)||(t={matches:t});var n,r,s,o=new Si(0,i||this.scope),h=o.conditions={};for(r in a&&!o.selector&&(o.selector=a.selector),this.contexts.push(o),e=o.add("onMatch",e),o.queries=t,t)"all"===r?s=1:(n=l.matchMedia(t[r]))&&(mi.indexOf(o)<0&&mi.push(o),(h[r]=n.matches)&&(s=1),n.addListener?n.addListener(wi):n.addEventListener("change",wi));return s&&e(o,(function(t){return o.add(null,t)})),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),xi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return ye(t)}))},timeline:function(t){return new ze(t)},getTweensOf:function(t,e){return h.getTweensOf(t,e)},getProperty:function(t,e,i,n){k(t)&&(t=re(t)[0]);var r=ft(t||{}).get,s=i?xt:Tt;return"native"===i&&(i=""),t?e?s((ht[e]&&ht[e].get||r)(t,e,i,n)):function(e,i,n){return s((ht[e]&&ht[e].get||r)(t,e,i,n))}:t},quickSetter:function(t,e,i){if((t=re(t)).length>1){var n=t.map((function(t){return Ii.quickSetter(t,e,i)})),r=n.length;return function(t){for(var e=r;e--;)n[e](t)}}t=t[0]||{};var s=ht[e],o=ft(t),a=o.harness&&(o.harness.aliases||{})[e]||e,h=s?function(e){var n=new s;f._pt=0,n.init(t,i?e+i:e,f,0,[t]),n.render(1,n),f._pt&&li(1,f)}:o.set(t,a);return s?h:function(e){return h(t,a,i?e+i:e,o,1)}},quickTo:function(t,e,i){var n,r=Ii.to(t,At(((n={})[e]="+=0.1",n.paused=!0,n),i||{})),s=function(t,i,n){return r.resetTo(e,t,i,n)};return s.tween=r,s},isTweening:function(t){return h.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Le(t.ease,T.ease)),It(T,t||{})},config:function(t){return It(S,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,r=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!ht[t]&&!$[t]&&Q(e+" effect requires "+t+" plugin.")})),lt[e]=function(t,e,n){return i(re(t),Et(e||{},r),n)},s&&(ze.prototype[e]=function(t,i,n){return this.add(lt[e](t,L(i)?i:(n=i)&&{},this),n)})},registerEase:function(t,e){Re[t]=Le(e)},parseEase:function(t,e){return arguments.length?Le(t,e):Re},getById:function(t){return h.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,n,r=new ze(t);for(r.smoothChildTiming=B(t.smoothChildTiming),h.remove(r),r._dp=0,r._time=r._tTime=h._time,i=h._first;i;)n=i._next,!e&&!i._dur&&i instanceof ti&&i.vars.onComplete===i._targets[0]||Ht(r,i,i._start-i._delay),i=n;return Ht(h,r,0),r},context:function(t,e){return t?new Si(t,e):a},matchMedia:function(t){return new Ti(t)},matchMediaRefresh:function(){return mi.forEach((function(t){var e,i,n=t.conditions;for(i in n)n[i]&&(n[i]=!1,e=1);e&&t.revert()}))||wi()},addEventListener:function(t,e){var i=gi[t]||(gi[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=gi[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:function t(e,i,n){var r=i-e;return j(e)?ue(e,t(0,e.length),i):Zt(n,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,i,n){var r=i-e,s=2*r;return j(e)?ue(e,t(0,e.length-1),i):Zt(n,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},distribute:ae,random:ce,snap:le,normalize:function(t,e,i){return pe(t,e,0,1,i)},getUnit:te,clamp:function(t,e,i){return Zt(i,(function(i){return Qt(t,e,i)}))},splitColor:Se,toArray:re,selector:se,mapRange:pe,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||te(i))}},interpolate:function t(e,i,n,r){var s=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!s){var o,a,h,l,c,u=k(e),d={};if(!0===n&&(r=1)&&(n=null),u)e={p:e},i={p:i};else if(j(e)&&!j(i)){for(h=[],l=e.length,c=l-2,a=1;a<l;a++)h.push(t(e[a-1],e[a]));l--,s=function(t){t*=l;var e=Math.min(c,~~t);return h[e](t-e)},n=i}else r||(e=At(j(e)?[]:{},e));if(!h){for(o in i)Ye.call(d,e,o,"get",i[o]);s=function(t){return li(t,d)||(u?e.p:e)}}}return Zt(n,s)},shuffle:oe},install:J,effects:lt,ticker:Ce,updateRoot:ze.updateRoot,plugins:ht,globalTimeline:h,core:{PropTween:fi,globals:tt,Tween:ti,Timeline:ze,Animation:He,getCache:ft,_removeLinkedListItem:Ot,reverting:function(){return o},context:function(t){return t&&a&&(a.data.push(t),t._ctx=a),a},suppressOverwrites:function(t){return s=t}}};gt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return xi[t]=ti[t]})),Ce.add(ze.updateRoot),f=xi.to({},{duration:0});var Ei=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Ai=function(t,e){return{name:t,rawVars:1,init:function(t,i,n){n._onInit=function(t){var n,r;if(k(i)&&(n={},gt(i,(function(t){return n[t]=1})),i=n),e){for(r in n={},i)n[r]=e(i[r]);i=n}!function(t,e){var i,n,r,s=t._targets;for(i in e)for(n=s.length;n--;)(r=t._ptLookup[n][i])&&(r=r.d)&&(r._pt&&(r=Ei(r,i)),r&&r.modifier&&r.modifier(e[i],t,s[n],i))}(t,i)}}}},Ii=xi.registerPlugin({name:"attr",init:function(t,e,i,n,r){var s,o,a;for(s in this.tween=i,e)a=t.getAttribute(s)||"",(o=this.add(t,"setAttribute",(a||0)+"",e[s],n,r,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(t,e){for(var i=e._pt;i;)o?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Ai("roundProps",he),Ai("modifiers"),Ai("snap",le))||xi;ti.version=ze.version=Ii.version="3.12.5",d=1,F()&&Pe();Re.Power0,Re.Power1,Re.Power2,Re.Power3,Re.Power4,Re.Linear,Re.Quad,Re.Cubic,Re.Quart,Re.Quint,Re.Strong,Re.Elastic,Re.Back,Re.SteppedEase,Re.Bounce,Re.Sine,Re.Expo,Re.Circ;var Ci,Pi,Ri,Oi,ki,Mi,Di,Ni,Li={},Bi=180/Math.PI,Fi=Math.PI/180,Ui=Math.atan2,Gi=/([A-Z])/g,ji=/(left|right|width|margin|padding|x)/i,Hi=/[\s,\(]\S/,zi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wi=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Vi=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Xi=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Yi=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},qi=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},$i=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Ki=function(t,e,i){return t.style[e]=i},Ji=function(t,e,i){return t.style.setProperty(e,i)},Zi=function(t,e,i){return t._gsap[e]=i},Qi=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},tn=function(t,e,i,n,r){var s=t._gsap;s.scaleX=s.scaleY=i,s.renderTransform(r,s)},en=function(t,e,i,n,r){var s=t._gsap;s[e]=i,s.renderTransform(r,s)},nn="transform",rn=nn+"Origin",sn=function t(e,i){var n=this,r=this.target,s=r.style,o=r._gsap;if(e in Li&&s){if(this.tfm=this.tfm||{},"transform"===e)return zi.transform.split(",").forEach((function(e){return t.call(n,e,i)}));if(~(e=zi[e]||e).indexOf(",")?e.split(",").forEach((function(t){return n.tfm[t]=Tn(r,t)})):this.tfm[e]=o.x?o[e]:Tn(r,e),e===rn&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(nn)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(rn,i,"")),e=nn}(s||i)&&this.props.push(e,i,s[e])},on=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},an=function(){var t,e,i=this.props,n=this.target,r=n.style,s=n._gsap;for(t=0;t<i.length;t+=3)i[t+1]?n[i[t]]=i[t+2]:i[t+2]?r[i[t]]=i[t+2]:r.removeProperty("--"===i[t].substr(0,2)?i[t]:i[t].replace(Gi,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(t=Di())&&t.isStart||r[nn]||(on(r),s.zOrigin&&r[rn]&&(r[rn]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},hn=function(t,e){var i={target:t,props:[],revert:an,save:sn};return t._gsap||Ii.core.getCache(t),e&&e.split(",").forEach((function(t){return i.save(t)})),i},ln=function(t,e){var i=Pi.createElementNS?Pi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Pi.createElement(t);return i&&i.style?i:Pi.createElement(t)},cn=function t(e,i,n){var r=getComputedStyle(e);return r[i]||r.getPropertyValue(i.replace(Gi,"-$1").toLowerCase())||r.getPropertyValue(i)||!n&&t(e,dn(i)||i,1)||""},un="O,Moz,ms,Ms,Webkit".split(","),dn=function(t,e,i){var n=(e||ki).style,r=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(un[r]+t in n););return r<0?null:(3===r?"ms":r>=0?un[r]:"")+t},pn=function(){"undefined"!=typeof window&&window.document&&(Ci=window,Pi=Ci.document,Ri=Pi.documentElement,ki=ln("div")||{style:{}},ln("div"),nn=dn(nn),rn=nn+"Origin",ki.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ni=!!dn("perspective"),Di=Ii.core.reverting,Oi=1)},fn=function t(e){var i,n=ln("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Ri.appendChild(n),n.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(i=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),Ri.removeChild(n),this.style.cssText=o,i},mn=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},gn=function(t){var e;try{e=t.getBBox()}catch(i){e=fn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===fn||(e=fn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+mn(t,["x","cx","x1"])||0,y:+mn(t,["y","cy","y1"])||0,width:0,height:0}},_n=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!gn(t))},yn=function(t,e){if(e){var i,n=t.style;e in Li&&e!==rn&&(e=nn),n.removeProperty?("ms"!==(i=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty("--"===i?e:e.replace(Gi,"-$1").toLowerCase())):n.removeAttribute(e)}},vn=function(t,e,i,n,r,s){var o=new fi(t._pt,e,i,0,1,s?$i:qi);return t._pt=o,o.b=n,o.e=r,t._props.push(i),o},bn={deg:1,rad:1,turn:1},wn={grid:1,flex:1},Sn=function t(e,i,n,r){var s,o,a,h,l=parseFloat(n)||0,c=(n+"").trim().substr((l+"").length)||"px",u=ki.style,d=ji.test(i),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===r,_="%"===r;if(r===c||!l||bn[r]||bn[c])return l;if("px"!==c&&!g&&(l=t(e,i,n,"px")),h=e.getCTM&&_n(e),(_||"%"===c)&&(Li[i]||~i.indexOf("adius")))return s=h?e.getBBox()[d?"width":"height"]:e[f],_t(_?l/s*m:l/100*s);if(u[d?"width":"height"]=m+(g?c:r),o=~i.indexOf("adius")||"em"===r&&e.appendChild&&!p?e:e.parentNode,h&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Pi&&o.appendChild||(o=Pi.body),(a=o._gsap)&&_&&a.width&&d&&a.time===Ce.time&&!a.uncache)return _t(l/a.width*m);if(!_||"height"!==i&&"width"!==i)(_||"%"===c)&&!wn[cn(o,"display")]&&(u.position=cn(e,"position")),o===e&&(u.position="static"),o.appendChild(ki),s=ki[f],o.removeChild(ki),u.position="absolute";else{var y=e.style[i];e.style[i]=m+r,s=e[f],y?e.style[i]=y:yn(e,i)}return d&&_&&((a=ft(o)).time=Ce.time,a.width=o[f]),_t(g?s*l/m:s&&l?m/s*l:0)},Tn=function(t,e,i,n){var r;return Oi||pn(),e in zi&&"transform"!==e&&~(e=zi[e]).indexOf(",")&&(e=e.split(",")[0]),Li[e]&&"transform"!==e?(r=Dn(t,n),r="transformOrigin"!==e?r[e]:r.svg?r.origin:Nn(cn(t,rn))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||n||~(r+"").indexOf("calc("))&&(r=In[e]&&In[e](t,e,i)||cn(t,e)||mt(t,e)||("opacity"===e?1:0)),i&&!~(r+"").trim().indexOf(" ")?Sn(t,e,r,i)+i:r},xn=function(t,e,i,n){if(!i||"none"===i){var r=dn(e,t,1),s=r&&cn(t,r,1);s&&s!==i?(e=r,i=s):"borderColor"===e&&(i=cn(t,"borderTopColor"))}var o,a,h,l,c,u,d,p,f,m,g,_=new fi(this._pt,t.style,e,0,1,hi),y=0,v=0;if(_.b=i,_.e=n,i+="","auto"===(n+="")&&(u=t.style[e],t.style[e]=n,n=cn(t,e)||n,u?t.style[e]=u:yn(t,e)),Ie(o=[i,n]),n=o[1],h=(i=o[0]).match(W)||[],(n.match(W)||[]).length){for(;a=W.exec(n);)d=a[0],f=n.substring(y,a.index),c?c=(c+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(c=1),d!==(u=h[v++]||"")&&(l=parseFloat(u)||0,g=u.substr((l+"").length),"="===d.charAt(1)&&(d=vt(l,d)+g),p=parseFloat(d),m=d.substr((p+"").length),y=W.lastIndex-m.length,m||(m=m||S.units[e]||g,y===n.length&&(n+=m,_.e+=m)),g!==m&&(l=Sn(t,e,u,m)||0),_._pt={_next:_._pt,p:f||1===v?f:",",s:l,c:p-l,m:c&&c<4||"zIndex"===e?Math.round:0});_.c=y<n.length?n.substring(y,n.length):""}else _.r="display"===e&&"none"===n?$i:qi;return X.test(n)&&(_.e=0),this._pt=_,_},En={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},An=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,r,s=e.t,o=s.style,a=e.u,h=s._gsap;if("all"===a||!0===a)o.cssText="",n=1;else for(r=(a=a.split(",")).length;--r>-1;)i=a[r],Li[i]&&(n=1,i="transformOrigin"===i?rn:nn),yn(s,i);n&&(yn(s,nn),h&&(h.svg&&s.removeAttribute("transform"),Dn(s,1),h.uncache=1,on(o)))}},In={clearProps:function(t,e,i,n,r){if("isFromStart"!==r.data){var s=t._pt=new fi(t._pt,e,i,0,0,An);return s.u=n,s.pr=-10,s.tween=r,t._props.push(i),1}}},Cn=[1,0,0,1,0,0],Pn={},Rn=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},On=function(t){var e=cn(t,nn);return Rn(e)?Cn:e.substr(7).match(z).map(_t)},kn=function(t,e){var i,n,r,s,o=t._gsap||ft(t),a=t.style,h=On(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Cn:h:(h!==Cn||t.offsetParent||t===Ri||o.svg||(r=a.display,a.display="block",(i=t.parentNode)&&t.offsetParent||(s=1,n=t.nextElementSibling,Ri.appendChild(t)),h=On(t),r?a.display=r:yn(t,"display"),s&&(n?i.insertBefore(t,n):i?i.appendChild(t):Ri.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},Mn=function(t,e,i,n,r,s){var o,a,h,l=t._gsap,c=r||kn(t,!0),u=l.xOrigin||0,d=l.yOrigin||0,p=l.xOffset||0,f=l.yOffset||0,m=c[0],g=c[1],_=c[2],y=c[3],v=c[4],b=c[5],w=e.split(" "),S=parseFloat(w[0])||0,T=parseFloat(w[1])||0;i?c!==Cn&&(a=m*y-g*_)&&(h=S*(-g/a)+T*(m/a)-(m*b-g*v)/a,S=S*(y/a)+T*(-_/a)+(_*b-y*v)/a,T=h):(S=(o=gn(t)).x+(~w[0].indexOf("%")?S/100*o.width:S),T=o.y+(~(w[1]||w[0]).indexOf("%")?T/100*o.height:T)),n||!1!==n&&l.smooth?(v=S-u,b=T-d,l.xOffset=p+(v*m+b*_)-v,l.yOffset=f+(v*g+b*y)-b):l.xOffset=l.yOffset=0,l.xOrigin=S,l.yOrigin=T,l.smooth=!!n,l.origin=e,l.originIsAbsolute=!!i,t.style[rn]="0px 0px",s&&(vn(s,l,"xOrigin",u,S),vn(s,l,"yOrigin",d,T),vn(s,l,"xOffset",p,l.xOffset),vn(s,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",S+" "+T)},Dn=function(t,e){var i=t._gsap||new je(t);if("x"in i&&!e&&!i.uncache)return i;var n,r,s,o,a,h,l,c,u,d,p,f,m,g,_,y,v,b,w,T,x,E,A,I,C,P,R,O,k,M,D,N,L=t.style,B=i.scaleX<0,F="px",U="deg",G=getComputedStyle(t),j=cn(t,rn)||"0";return n=r=s=h=l=c=u=d=p=0,o=a=1,i.svg=!(!t.getCTM||!_n(t)),G.translate&&("none"===G.translate&&"none"===G.scale&&"none"===G.rotate||(L[nn]=("none"!==G.translate?"translate3d("+(G.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==G.rotate?"rotate("+G.rotate+") ":"")+("none"!==G.scale?"scale("+G.scale.split(" ").join(",")+") ":"")+("none"!==G[nn]?G[nn]:"")),L.scale=L.rotate=L.translate="none"),g=kn(t,i.svg),i.svg&&(i.uncache?(C=t.getBBox(),j=i.xOrigin-C.x+"px "+(i.yOrigin-C.y)+"px",I=""):I=!e&&t.getAttribute("data-svg-origin"),Mn(t,I||j,!!I||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==Cn&&(b=g[0],w=g[1],T=g[2],x=g[3],n=E=g[4],r=A=g[5],6===g.length?(o=Math.sqrt(b*b+w*w),a=Math.sqrt(x*x+T*T),h=b||w?Ui(w,b)*Bi:0,(u=T||x?Ui(T,x)*Bi+h:0)&&(a*=Math.abs(Math.cos(u*Fi))),i.svg&&(n-=f-(f*b+m*T),r-=m-(f*w+m*x))):(N=g[6],M=g[7],R=g[8],O=g[9],k=g[10],D=g[11],n=g[12],r=g[13],s=g[14],l=(_=Ui(N,k))*Bi,_&&(I=E*(y=Math.cos(-_))+R*(v=Math.sin(-_)),C=A*y+O*v,P=N*y+k*v,R=E*-v+R*y,O=A*-v+O*y,k=N*-v+k*y,D=M*-v+D*y,E=I,A=C,N=P),c=(_=Ui(-T,k))*Bi,_&&(y=Math.cos(-_),D=x*(v=Math.sin(-_))+D*y,b=I=b*y-R*v,w=C=w*y-O*v,T=P=T*y-k*v),h=(_=Ui(w,b))*Bi,_&&(I=b*(y=Math.cos(_))+w*(v=Math.sin(_)),C=E*y+A*v,w=w*y-b*v,A=A*y-E*v,b=I,E=C),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,c=180-c),o=_t(Math.sqrt(b*b+w*w+T*T)),a=_t(Math.sqrt(A*A+N*N)),_=Ui(E,A),u=Math.abs(_)>2e-4?_*Bi:0,p=D?1/(D<0?-D:D):0),i.svg&&(I=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Rn(cn(t,nn)),I&&t.setAttribute("transform",I))),Math.abs(u)>90&&Math.abs(u)<270&&(B?(o*=-1,u+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,u+=u<=0?180:-180)),e=e||i.uncache,i.x=n-((i.xPercent=n&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+F,i.y=r-((i.yPercent=r&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+F,i.z=s+F,i.scaleX=_t(o),i.scaleY=_t(a),i.rotation=_t(h)+U,i.rotationX=_t(l)+U,i.rotationY=_t(c)+U,i.skewX=u+U,i.skewY=d+U,i.transformPerspective=p+F,(i.zOrigin=parseFloat(j.split(" ")[2])||!e&&i.zOrigin||0)&&(L[rn]=Nn(j)),i.xOffset=i.yOffset=0,i.force3D=S.force3D,i.renderTransform=i.svg?Hn:Ni?jn:Bn,i.uncache=0,i},Nn=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ln=function(t,e,i){var n=te(e);return _t(parseFloat(e)+parseFloat(Sn(t,"x",i+"px",n)))+n},Bn=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,jn(t,e)},Fn="0deg",Un="0px",Gn=") ",jn=function(t,e){var i=e||this,n=i.xPercent,r=i.yPercent,s=i.x,o=i.y,a=i.z,h=i.rotation,l=i.rotationY,c=i.rotationX,u=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,_=i.target,y=i.zOrigin,v="",b="auto"===g&&t&&1!==t||!0===g;if(y&&(c!==Fn||l!==Fn)){var w,S=parseFloat(l)*Fi,T=Math.sin(S),x=Math.cos(S);S=parseFloat(c)*Fi,w=Math.cos(S),s=Ln(_,s,T*w*-y),o=Ln(_,o,-Math.sin(S)*-y),a=Ln(_,a,x*w*-y+y)}m!==Un&&(v+="perspective("+m+Gn),(n||r)&&(v+="translate("+n+"%, "+r+"%) "),(b||s!==Un||o!==Un||a!==Un)&&(v+=a!==Un||b?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Gn),h!==Fn&&(v+="rotate("+h+Gn),l!==Fn&&(v+="rotateY("+l+Gn),c!==Fn&&(v+="rotateX("+c+Gn),u===Fn&&d===Fn||(v+="skew("+u+", "+d+Gn),1===p&&1===f||(v+="scale("+p+", "+f+Gn),_.style[nn]=v||"translate(0, 0)"},Hn=function(t,e){var i,n,r,s,o,a=e||this,h=a.xPercent,l=a.yPercent,c=a.x,u=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,g=a.scaleY,_=a.target,y=a.xOrigin,v=a.yOrigin,b=a.xOffset,w=a.yOffset,S=a.forceCSS,T=parseFloat(c),x=parseFloat(u);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Fi,p*=Fi,i=Math.cos(d)*m,n=Math.sin(d)*m,r=Math.sin(d-p)*-g,s=Math.cos(d-p)*g,p&&(f*=Fi,o=Math.tan(p-f),r*=o=Math.sqrt(1+o*o),s*=o,f&&(o=Math.tan(f),i*=o=Math.sqrt(1+o*o),n*=o)),i=_t(i),n=_t(n),r=_t(r),s=_t(s)):(i=m,s=g,n=r=0),(T&&!~(c+"").indexOf("px")||x&&!~(u+"").indexOf("px"))&&(T=Sn(_,"x",c,"px"),x=Sn(_,"y",u,"px")),(y||v||b||w)&&(T=_t(T+y-(y*i+v*r)+b),x=_t(x+v-(y*n+v*s)+w)),(h||l)&&(o=_.getBBox(),T=_t(T+h/100*o.width),x=_t(x+l/100*o.height)),o="matrix("+i+","+n+","+r+","+s+","+T+","+x+")",_.setAttribute("transform",o),S&&(_.style[nn]=o)},zn=function(t,e,i,n,r){var s,o,a=360,h=k(r),l=parseFloat(r)*(h&&~r.indexOf("rad")?Bi:1)-n,c=n+l+"deg";return h&&("short"===(s=r.split("_")[1])&&(l%=a)!==l%180&&(l+=l<0?a:-360),"cw"===s&&l<0?l=(l+36e9)%a-~~(l/a)*a:"ccw"===s&&l>0&&(l=(l-36e9)%a-~~(l/a)*a)),t._pt=o=new fi(t._pt,e,i,n,l,Vi),o.e=c,o.u="deg",t._props.push(i),o},Wn=function(t,e){for(var i in e)t[i]=e[i];return t},Vn=function(t,e,i){var n,r,s,o,a,h,l,c=Wn({},i._gsap),u=i.style;for(r in c.svg?(s=i.getAttribute("transform"),i.setAttribute("transform",""),u[nn]=e,n=Dn(i,1),yn(i,nn),i.setAttribute("transform",s)):(s=getComputedStyle(i)[nn],u[nn]=e,n=Dn(i,1),u[nn]=s),Li)(s=c[r])!==(o=n[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=te(s)!==(l=te(o))?Sn(i,r,s,l):parseFloat(s),h=parseFloat(o),t._pt=new fi(t._pt,n,r,a,h-a,Wi),t._pt.u=l||0,t._props.push(r));Wn(n,c)};gt("padding,margin,Width,Radius",(function(t,e){var i="Top",n="Right",r="Bottom",s="Left",o=(e<3?[i,n,r,s]:[i+s,i+n,r+n,r+s]).map((function(i){return e<2?t+i:"border"+i+t}));In[e>1?"border"+t:t]=function(t,e,i,n,r){var s,a;if(arguments.length<4)return s=o.map((function(e){return Tn(t,e,i)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(n+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,r)}}));var Xn,Yn,qn,$n={name:"css",register:pn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,r){var s,o,a,h,l,c,u,d,p,f,m,g,_,y,v,b,w,T,x,E,A=this._props,I=t.style,C=i.vars.startAt;for(u in Oi||pn(),this.styles=this.styles||hn(t),b=this.styles.props,this.tween=i,e)if("autoRound"!==u&&(o=e[u],!ht[u]||!qe(u,e,i,n,t,r)))if(l=typeof o,c=In[u],"function"===l&&(l=typeof(o=o.call(i,n,t,r))),"string"===l&&~o.indexOf("random(")&&(o=de(o)),c)c(this,t,u,o,i)&&(v=1);else if("--"===u.substr(0,2))s=(getComputedStyle(t).getPropertyValue(u)+"").trim(),o+="",Ee.lastIndex=0,Ee.test(s)||(d=te(s),p=te(o)),p?d!==p&&(s=Sn(t,u,s,p)+p):d&&(o+=d),this.add(I,"setProperty",s,o,n,r,0,0,u),A.push(u),b.push(u,0,I[u]);else if("undefined"!==l){if(C&&u in C?(s="function"==typeof C[u]?C[u].call(i,n,t,r):C[u],k(s)&&~s.indexOf("random(")&&(s=de(s)),te(s+"")||"auto"===s||(s+=S.units[u]||te(Tn(t,u))||""),"="===(s+"").charAt(1)&&(s=Tn(t,u))):s=Tn(t,u),h=parseFloat(s),(f="string"===l&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),u in zi&&("autoAlpha"===u&&(1===h&&"hidden"===Tn(t,"visibility")&&a&&(h=0),b.push("visibility",0,I.visibility),vn(this,I,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==u&&"transform"!==u&&~(u=zi[u]).indexOf(",")&&(u=u.split(",")[0])),m=u in Li)if(this.styles.save(u),g||((_=t._gsap).renderTransform&&!e.parseTransform||Dn(t,e.parseTransform),y=!1!==e.smoothOrigin&&_.smooth,(g=this._pt=new fi(this._pt,I,nn,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===u)this._pt=new fi(this._pt,_,"scaleY",_.scaleY,(f?vt(_.scaleY,f+a):a)-_.scaleY||0,Wi),this._pt.u=0,A.push("scaleY",u),u+="X";else{if("transformOrigin"===u){b.push(rn,0,I[rn]),T=void 0,x=void 0,E=void 0,T=(w=o).split(" "),x=T[0],E=T[1]||"50%","top"!==x&&"bottom"!==x&&"left"!==E&&"right"!==E||(w=x,x=E,E=w),T[0]=En[x]||x,T[1]=En[E]||E,o=T.join(" "),_.svg?Mn(t,o,0,y,0,this):((p=parseFloat(o.split(" ")[2])||0)!==_.zOrigin&&vn(this,_,"zOrigin",_.zOrigin,p),vn(this,I,u,Nn(s),Nn(o)));continue}if("svgOrigin"===u){Mn(t,o,1,y,0,this);continue}if(u in Pn){zn(this,_,u,h,f?vt(h,f+o):o);continue}if("smoothOrigin"===u){vn(this,_,"smooth",_.smooth,o);continue}if("force3D"===u){_[u]=o;continue}if("transform"===u){Vn(this,o,t);continue}}else u in I||(u=dn(u)||u);if(m||(a||0===a)&&(h||0===h)&&!Hi.test(o)&&u in I)a||(a=0),(d=(s+"").substr((h+"").length))!==(p=te(o)||(u in S.units?S.units[u]:d))&&(h=Sn(t,u,s,p)),this._pt=new fi(this._pt,m?_:I,u,h,(f?vt(h,f+a):a)-h,m||"px"!==p&&"zIndex"!==u||!1===e.autoRound?Wi:Yi),this._pt.u=p||0,d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=Xi);else if(u in I)xn.call(this,t,u,s,f?f+o:o);else if(u in t)this.add(t,u,s||t[u],f?f+o:o,n,r);else if("parseTransform"!==u){Z(u,o);continue}m||(u in I?b.push(u,0,I[u]):b.push(u,1,s||t[u])),A.push(u)}v&&pi(this)},render:function(t,e){if(e.tween._time||!Di())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Tn,aliases:zi,getSetter:function(t,e,i){var n=zi[e];return n&&n.indexOf(",")<0&&(e=n),e in Li&&e!==rn&&(t._gsap.x||Tn(t,"x"))?i&&Mi===i?"scale"===e?Qi:Zi:(Mi=i||{})&&("scale"===e?tn:en):t.style&&!N(t.style[e])?Ki:~e.indexOf("-")?Ji:si(t,e)},core:{_removeProperty:yn,_getMatrix:kn}};Ii.utils.checkPrefix=dn,Ii.core.getStyleSaver=hn,qn=gt((Xn="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(Yn="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Li[t]=1})),gt(Yn,(function(t){S.units[t]="deg",Pn[t]=1})),zi[qn[13]]=Xn+","+Yn,gt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");zi[e[1]]=qn[e[0]]})),gt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){S.units[t]="px"})),Ii.registerPlugin($n);var Kn=Ii.registerPlugin($n)||Ii;Kn.core.Tween},4923:(t,e,i)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,r=i(4361);t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&r())))}},4361:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(var n in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(t,e);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},4313:(t,e,i)=>{"use strict";var n=Function.prototype.call,r=Object.prototype.hasOwnProperty,s=i(4499);t.exports=s.call(n,r)},7472:(t,e,i)=>{var n;!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||s;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var o=e._howls[i]._soundById(n[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||s,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator?t._navigator.userAgent:"",r=n.match(/OPR\/(\d+)/g),o=r&&parseInt(r[0].split("/")[1],10)<33,a=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),h=n.match(/Version\/(.*?) /),l=a&&h&&parseInt(h[1],10)<15;return t._codecs={mp3:!(o||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||s;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var s=t._howls[r]._getSoundIds(),o=0;o<s.length;o++){var a=t._howls[r]._soundById(s[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),void 0===h.start?h.noteOn(0):h.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||s;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||s;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new r,o=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};o.prototype={init:function(t){var e=this;return s.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,void 0!==s.ctx&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(s.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if("string"!=typeof(r=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&s.codecs(n)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&l(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(r++,n=i._sounds[o]._id);1===r?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var h=a._id;return i._queue.push({event:"play",action:function(){i.play(h)}}),h}if(n&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&s._autoResume();var l=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),c=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),u=1e3*c/Math.abs(a._rate),d=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=d,a._stop=p,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(l>=p)){var m=a._node;if(i._webAudio){var g=function(){i._playLock=!1,f(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;m.gain.setValueAtTime(t,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,c):a._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,c),u!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),u)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===s.state&&"interrupted"!==s.ctx.state?g():(i._playLock=!0,i.once("resume",g),i._clearTimer(a._id))}else{var _=function(){m.currentTime=l,m.muted=a._muted||i._muted||s._muted||m.muted,m.volume=a._volume*s.volume(),m.playbackRate=a._rate;try{var n=m.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,f(),n.then((function(){i._playLock=!1,m._unlocked=!0,e?i._loadQueue():i._emit("play",a._id)})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",a._id)),m.playbackRate=a._rate,m.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),u):(i._endTimers[a._id]=function(){i._ended(a),m.removeEventListener("ended",i._endTimers[a._id],!1)},m.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=i._src,m.load());var y=window&&window.ejecta||!m.readyState&&s._navigator.isCocoonJS;if(m.readyState>=3||y)_();else{i._playLock=!0,i._state="loading";var v=function(){i._state="loaded",_(),m.removeEventListener(s._canPlayEvent,v,!1)};m.addEventListener(s._canPlayEvent,v,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),e||i._emit("stop",s._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var o=i._soundById(n[r]);o&&(o._muted=t,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,s.ctx.currentTime):o._node&&(o._node.muted=!!s._muted||t),i._emit("mute",o._id))}return i},volume:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]?n._getSoundIds().indexOf(r[0])>=0?e=parseInt(r[0],10):t=parseFloat(r[0]):r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10)),!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var o=0;o<e.length;o++)(i=n._soundById(e[o]))&&(i._volume=t,r[2]||n._stopFade(e[o]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,s.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*s.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,n);for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var h=r._soundById(o[a]);if(h){if(n||r._stopFade(o[a]),r._webAudio&&!h._muted){var l=s.ctx.currentTime,c=l+i/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(e,c)}r._startFadeInterval(h,t,e,i,o[a],void 0===n)}}return r},_startFadeInterval:function(t,e,i,n,r,s){var o=this,a=e,h=i-e,l=Math.abs(h/.01),c=Math.max(4,l>0?n/l:n),u=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var r=(Date.now()-u)/n;u=Date.now(),a+=h*r,a=Math.round(100*a)/100,a=h<0?Math.max(i,a):Math.min(i,a),o._webAudio?t._volume=a:o.volume(a,t._id,!0),s&&(o._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(i,t._id),o._emit("fade",t._id))}),c)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s=n._getSoundIds(e),o=0;o<s.length;o++)(i=n._soundById(s[o]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(s[o])&&(n.pause(s[o],!0),n.play(s[o],!0)))));return n},rate:function(){var t,e,i,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var o=0;o<e.length;o++)if(i=n._soundById(e[o])){n.playing(e[o])&&(i._rateSeek=n.seek(e[o]),i._playStart=n._webAudio?s.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,s.ctx.currentTime):i._node&&(i._node.playbackRate=t);var a=n.seek(e[o]),h=1e3*((n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-a)/Math.abs(i._rate);!n._endTimers[e[o]]&&i._paused||(n._clearTimer(e[o]),n._endTimers[e[o]]=setTimeout(n._ended.bind(n,i),h)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===n.length){i._getSoundIds().indexOf(n[0])>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var r=i._soundById(e);if(r){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var o=i.playing(e)?s.ctx.currentTime-r._playStart:0,a=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(a+o*Math.abs(r._rate))}return r._node.currentTime}var h=i.playing(e);h&&i.pause(e,!0),r._seek=t,r._ended=!1,i._clearTimer(e),i._webAudio||!r._node||isNaN(r._node.duration)||(r._node.currentTime=t);var l=function(){h&&i.play(e,!0),i._emit("seek",e)};if(h&&!i._webAudio){var c=function(){i._playLock?setTimeout(c,0):l()};setTimeout(c,0)}else l()}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(s._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),s._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=s._howls.indexOf(t);n>=0&&s._howls.splice(n,1);var r=!0;for(i=0;i<s._howls.length;i++)if(s._howls[i]._src===t._src||t._src.indexOf(s._howls[i]._src)>=0){r=!1;break}return h&&r&&delete h[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this["_on"+t];return"function"==typeof e&&r.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this,r=n["_on"+t],s=0;if("number"==typeof e&&(i=e,e=null),e||i)for(s=0;s<r.length;s++){var o=i===r[s].id;if(e===r[s].fn&&o||!e&&o){r.splice(s,1);break}}else if(t)n["_on"+t]=[];else{var a=Object.keys(n);for(s=0;s<a.length;s++)0===a[s].indexOf("_on")&&Array.isArray(n[a[s]])&&(n[a[s]]=[])}return n},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this,r=n["_on"+t],s=r.length-1;s>=0;s--)r[s].id&&r[s].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,r[s].fn),0),r[s].once&&n.off(t,r[s].fn,r[s].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),s._autoSuspend()),e._webAudio||n||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new a(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=h[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,s.ctx.currentTime),this},_cleanBuffer:function(t){var e=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return this;if(s._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=s._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=s._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),t._node.gain.setValueAtTime(i,s.ctx.currentTime),t._node.paused=!0,t._node.connect(s.masterGain)):s.noAudio||(t._node=s._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(s._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=i*s.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(s._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var h={},l=function(t){var e=t._src;if(h[e])return t._duration=h[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);u(n.buffer,t)}else{var s=new XMLHttpRequest;s.open(t._xhr.method,e,!0),s.withCredentials=t._xhr.withCredentials,s.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){s.setRequestHeader(e,t._xhr.headers[e])})),s.onload=function(){var e=(s.status+"")[0];"0"===e||"2"===e||"3"===e?u(s.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete h[e],t.load())},c(s)}},c=function(t){try{t.send()}catch(e){t.onerror()}},u=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(h[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===s.ctx.decodeAudioData.length?s.ctx.decodeAudioData(t).then(n).catch(i):s.ctx.decodeAudioData(t,n,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(s.usingWebAudio){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!n&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};void 0===(n=function(){return{Howler:s,Howl:o}}.apply(e,[]))||(t.exports=n),e.Howler=s,e.Howl=o,void 0!==i.g?(i.g.HowlerGlobal=r,i.g.Howler=s,i.g.Howl=o,i.g.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=s,window.Howl=o,window.Sound=a)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,s){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,r="number"!=typeof r?a[4]:r,s="number"!=typeof s?a[5]:s,"number"!=typeof t?a:(o._orientation=[t,e,i,n,r,s],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(t,e,i,n,r,s),o)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var s=n._getSoundIds(i),o=0;o<s.length;o++){var a=n._soundById(s[o]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,r),"spatial"===r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(t,i,n,r)}}),s;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof t)return s._pos;s._pos=[t,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,n],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setPosition(t,i,n)),s._emit("pos",h._id)}}return s},Howl.prototype.orientation=function(t,i,n,r){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(t,i,n,r)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,n="number"!=typeof n?s._orientation[2]:n,void 0===r){if("number"!=typeof t)return s._orientation;s._orientation=[t,i,n]}for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,n],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setOrientation(t,i,n)),s._emit("orientation",h._id)}}return s},Howl.prototype.pannerAttr=function(){var t,i,n,r=this,s=arguments;if(!r._webAudio)return r;if(0===s.length)return r._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(n=r._soundById(parseInt(s[0],10)))?n._pannerAttr:r._pannerAttr;t=s[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===s.length&&(t=s[0],i=parseInt(s[1],10));for(var o=r._getSoundIds(i),a=0;a<o.length;a++)if(n=r._soundById(o[a])){var h=n._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=n._panner;l||(n._pos||(n._pos=r._pos||[0,0,-.5]),e(n,"spatial"),l=n._panner),l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel}return r},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},3863:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Symbol.for("INJECTION");function n(t,e,n,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r&&!Reflect.hasMetadata(i,this,e)&&Reflect.defineMetadata(i,n(),this,e),Reflect.hasMetadata(i,this,e)?Reflect.getMetadata(i,this,e):n()},set:function(t){Reflect.defineMetadata(i,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(i){return function(r,s){n(r,s,(function(){return t.get(i)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(i,r){return function(s,o){n(s,o,(function(){return t.getNamed(i,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(i,r,s){return function(o,a){n(o,a,(function(){return t.getTagged(i,r,s)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(i){return function(r,s){n(r,s,(function(){return t.getAll(i)}),e)}}}},5237:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3863);e.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:n.makePropertyInjectDecorator(t,e),lazyInjectNamed:n.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:n.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:n.makePropertyMultiInjectDecorator(t,e)}}},2777:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var n=i(6319),r=i(5034);function s(t,e,i,r,s){var o={},a="number"==typeof s,h=void 0!==s&&a?s.toString():i;if(a&&void 0!==i)throw new Error(n.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var l=o[h];if(Array.isArray(l))for(var c=0,u=l;c<u.length;c++){var d=u[c];if(d.key===r.key)throw new Error(n.DUPLICATED_METADATA+" "+d.key.toString())}else l=[];l.push(r),o[h]=l,Reflect.defineMetadata(t,o,e)}function o(t,e){Reflect.decorate(t,e)}function a(t,e){return function(i,n){e(i,n,t)}}e.tagParameter=function(t,e,i,n){s(r.TAGGED,t,e,n,i)},e.tagProperty=function(t,e,i){s(r.TAGGED_PROP,t.constructor,e,i)},e.decorate=function(t,e,i){"number"==typeof i?o([a(i,t)],e):"string"==typeof i?Reflect.decorate([t],e,i):o([t],e)}},6253:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var n=i(6319),r=i(5034),s=i(301),o=i(2777),a=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=a,e.inject=function(t){return function(e,i,a){if(void 0===t)throw new Error(n.UNDEFINED_INJECT_ANNOTATION(e.name));var h=new s.Metadata(r.INJECT_TAG,t);"number"==typeof a?o.tagParameter(e,i,a,h):o.tagProperty(e,i,h)}}},2425:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var n=i(6319),r=i(5034);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(n.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},1123:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var n=i(5034),r=i(301),s=i(2777);e.multiInject=function(t){return function(e,i,o){var a=new r.Metadata(n.MULTI_INJECT_TAG,t);"number"==typeof o?s.tagParameter(e,i,o,a):s.tagProperty(e,i,a)}}},6647:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var n=i(5034),r=i(301),s=i(2777);e.named=function(t){return function(e,i,o){var a=new r.Metadata(n.NAMED_TAG,t);"number"==typeof o?s.tagParameter(e,i,o,a):s.tagProperty(e,i,a)}}},6772:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var n=i(5034),r=i(301),s=i(2777);e.optional=function(){return function(t,e,i){var o=new r.Metadata(n.OPTIONAL_TAG,!0);"number"==typeof i?s.tagParameter(t,e,i,o):s.tagProperty(t,e,o)}}},2368:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var n=i(6319),r=i(5034),s=i(301);e.postConstruct=function(){return function(t,e,i){var o=new s.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(n.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,o,t.constructor)}}},2068:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var n=i(301),r=i(2777);e.tagged=function(t,e){return function(i,s,o){var a=new n.Metadata(t,e);"number"==typeof o?r.tagParameter(i,s,o,a):r.tagProperty(i,s,a)}}},6779:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var n=i(5034),r=i(301),s=i(2777);e.targetName=function(t){return function(e,i,o){var a=new r.Metadata(n.NAME_TAG,t);s.tagParameter(e,i,o,a)}}},9642:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var n=i(5034),r=i(301),s=i(2777);e.unmanaged=function(){return function(t,e,i){var o=new r.Metadata(n.UNMANAGED_TAG,!0);s.tagParameter(t,e,i,o)}}},5648:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var n=i(477),r=i(7539),s=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=n.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===n.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=s},4096:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},6319:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},477:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},5034:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]},8641:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var i,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var o=i(5648),a=i(6319),h=i(477),l=i(5034),c=i(4759),u=i(9214),d=i(8343),p=i(4387),f=i(7539),m=i(8160),g=i(1176),_=i(9894),y=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!=typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=h.BindingScopeEnum.Transient;else if(e.defaultScope!==h.BindingScopeEnum.Singleton&&e.defaultScope!==h.BindingScopeEnum.Transient&&e.defaultScope!==h.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new _.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return t.merge=function(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=new t,a=s([e,i],n).map((function(t){return u.getBindingDictionary(t)})),h=u.getBindingDictionary(o);return a.forEach((function(t){var e;e=h,t.traverse((function(t,i){i.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))})),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._getContainerModuleHelpersFactory(),n=0,r=t;n<r.length;n++){var s=r[n],o=i(s.id);s.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(this,void 0,void 0,(function(){var e,i,n,s,o;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),i=0,n=t,r.label=1;case 1:return i<n.length?(s=n[i],o=e(s.id),[4,s.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){var i,n=(i=e.id,function(t){return t.moduleId===i});t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||h.BindingScopeEnum.Transient,i=new o.Binding(t,e);return this._bindingDictionary.add(t,i),new p.BindingToSyntax(i)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+m.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new _.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,l.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,i){var n=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),s=u.createMockRequest(this,t,e,i);n=r.some((function(t){return t.constraint(s)}))}return!n&&this.parent&&(n=this.parent.isBoundTagged(t,e,i)),n},t.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var i=new t(e||this.options);return i.parent=this,i},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var i=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),i)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,h.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,i){return this._get(!1,!1,h.TargetTypeEnum.Variable,t,e,i)},t.prototype.getNamed=function(t,e){return this.getTagged(t,l.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,h.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,i){return this._get(!1,!0,h.TargetTypeEnum.Variable,t,e,i)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,l.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},i=function(i){return function(n){var r=t.rebind.bind(t)(n);return e(r,i),r}};return function(n){return{bindFunction:(r=n,function(i){var n=t.bind.bind(t)(i);return e(n,r),n}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:i(n),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,i,n,r,s){var o=null,h={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:n,targetType:i,value:s};if(this._middleware){if(null==(o=this._middleware(h)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else o=this._planAndResolve()(h);return o},t.prototype._planAndResolve=function(){var t=this;return function(e){var i=u.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return i=e.contextInterceptor(i),d.resolve(i)}},t}();e.Container=y},5764:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var n=i(7539),r=function(t){this.id=n.id(),this.registry=t};e.ContainerModule=r;var s=function(t){this.id=n.id(),this.registry=t};e.AsyncContainerModule=s},1176:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var i=function(){function t(){}return t.of=function(e,i){var n=new t;return n.bindings=e,n.middleware=i,n},t}();e.ContainerSnapshot=i},9894:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var n=i(6319),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(n.NULL_ARGUMENT);if(null==e)throw new Error(n.NULL_ARGUMENT);var i=this._map.get(t);void 0!==i?(i.push(e),this._map.set(t,i)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(n.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(n.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(n.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(n.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(i,n){var r=i.filter((function(e){return!t(e)}));r.length>0?e._map.set(n,r):e._map.delete(n)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(n.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,i){t.forEach((function(t){return e.add(i,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,i){t(i,e)}))},t}();e.Lookup=r},3339:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=e.getServiceIdentifierAsString=e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=e.decorate=e.id=e.MetadataReader=e.postConstruct=e.targetName=e.multiInject=e.unmanaged=e.optional=e.LazyServiceIdentifer=e.inject=e.named=e.tagged=e.injectable=e.ContainerModule=e.AsyncContainerModule=e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=e.Container=e.METADATA_KEY=void 0;var n=i(5034);e.METADATA_KEY=n;var r=i(8641);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r.Container}});var s=i(477);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return s.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return s.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return s.TargetTypeEnum}});var o=i(5764);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return o.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return o.ContainerModule}});var a=i(2425);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return a.injectable}});var h=i(2068);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return h.tagged}});var l=i(6647);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return l.named}});var c=i(6253);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return c.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return c.LazyServiceIdentifer}});var u=i(6772);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return u.optional}});var d=i(9642);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return d.unmanaged}});var p=i(1123);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return p.multiInject}});var f=i(6779);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return f.targetName}});var m=i(2368);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return m.postConstruct}});var g=i(4759);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return g.MetadataReader}});var _=i(7539);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return _.id}});var y=i(2777);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return y.decorate}});var v=i(8839);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=i(8160);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var w=i(4835);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return w.multiBindToService}})},6545:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var n=i(7539),r=function(){function t(t){this.id=n.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},301:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=i(5034),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===n.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},4759:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var n=i(5034),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(n.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(n.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(n.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},2999:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var i=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=i},9214:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var n=i(4096),r=i(6319),s=i(477),o=i(5034),a=i(9232),h=i(8160),l=i(6545),c=i(301),u=i(2999),d=i(5695),p=i(2807),f=i(6741);function m(t){return t._bindingDictionary}function g(t,e,i,s,o){var a=y(i.container,o.serviceIdentifier),l=[];return a.length===n.BindingCount.NoBindingsAvailable&&i.container.options.autoBindInjectable&&"function"==typeof o.serviceIdentifier&&t.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(i.container.bind(o.serviceIdentifier).toSelf(),a=y(i.container,o.serviceIdentifier)),l=e?a:a.filter((function(t){var e=new p.Request(t.serviceIdentifier,i,s,t,o);return t.constraint(e)})),function(t,e,i,s){switch(e.length){case n.BindingCount.NoBindingsAvailable:if(i.isOptional())return e;var o=h.getServiceIdentifierAsString(t),a=r.NOT_REGISTERED;throw a+=h.listMetadataForTarget(o,i),a+=h.listRegisteredBindingsForServiceIdentifier(s,o,y),new Error(a);case n.BindingCount.OnlyOneBindingAvailable:if(!i.isArray())return e;case n.BindingCount.MultipleBindingsAvailable:default:if(i.isArray())return e;o=h.getServiceIdentifierAsString(t),a=r.AMBIGUOUS_MATCH+" "+o;throw a+=h.listRegisteredBindingsForServiceIdentifier(s,o,y),new Error(a)}}(o.serviceIdentifier,l,o,i.container),l}function _(t,e,i,n,o,a){var h,l;if(null===o){h=g(t,e,n,null,a),l=new p.Request(i,n,null,h,a);var c=new u.Plan(n,l);n.addPlan(c)}else h=g(t,e,n,o,a),l=o.addChildRequest(a.serviceIdentifier,h,a);h.forEach((function(e){var i=null;if(a.isArray())i=l.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;i=l}if(e.type===s.BindingTypeEnum.Instance&&null!==e.implementationType){var o=d.getDependencies(t,e.implementationType);if(!n.container.options.skipBaseClassChecks){var h=d.getBaseClassDependencyCount(t,e.implementationType);if(o.length<h){var c=r.ARGUMENTS_LENGTH_MISMATCH(d.getFunctionName(e.implementationType));throw new Error(c)}}o.forEach((function(e){_(t,!1,e.serviceIdentifier,n,i,e)}))}}))}function y(t,e){var i=[],n=m(t);return n.hasKey(e)?i=n.get(e):null!==t.parent&&(i=y(t.parent,e)),i}e.getBindingDictionary=m,e.plan=function(t,e,i,n,r,s,u,d){void 0===d&&(d=!1);var p=new l.Context(e),m=function(t,e,i,n,r,s){var a=t?o.MULTI_INJECT_TAG:o.INJECT_TAG,h=new c.Metadata(a,i),l=new f.Target(e,n,i,h);if(void 0!==r){var u=new c.Metadata(r,s);l.metadata.push(u)}return l}(i,n,r,"",s,u);try{return _(t,d,r,p,null,m),p}catch(t){throw a.isStackOverflowExeption(t)&&p.plan&&h.circularDependencyToException(p.plan.rootRequest),t}},e.createMockRequest=function(t,e,i,n){var r=new f.Target(s.TargetTypeEnum.Variable,"",e,new c.Metadata(i,n)),o=new l.Context(t);return new p.Request(e,o,null,[],r)}},1372:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var i=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,i=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},i)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=i},5695:function(t,e,i){"use strict";var n=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var r=i(6253),s=i(6319),o=i(477),a=i(5034),h=i(8160);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return h.getFunctionName}});var l=i(6741);function c(t,e,i,r){var o=t.getConstructorMetadata(i),a=o.compilerGeneratedMetadata;if(void 0===a){var h=s.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(h)}var l=o.userGeneratedMetadata,c=Object.keys(l),p=0===i.length&&c.length>0,f=c.length>i.length,m=function(t,e,i,n,r){for(var s=[],o=0;o<r;o++){var a=u(o,t,e,i,n);null!==a&&s.push(a)}return s}(r,e,a,l,p||f?c.length:i.length),g=d(t,i);return n(n([],m),g)}function u(t,e,i,n,a){var h=a[t.toString()]||[],c=p(h),u=!0!==c.unmanaged,d=n[t],f=c.inject||c.multiInject;if((d=f||d)instanceof r.LazyServiceIdentifer&&(d=d.unwrap()),u){if(!e&&(d===Object||d===Function||void 0===d)){var m=s.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+i+".";throw new Error(m)}var g=new l.Target(o.TargetTypeEnum.ConstructorArgument,c.targetName,d);return g.metadata=h,g}return null}function d(t,e){for(var i=t.getPropertiesMetadata(e),r=[],s=0,a=Object.keys(i);s<a.length;s++){var h=a[s],c=i[h],u=p(i[h]),f=u.targetName||h,m=u.inject||u.multiInject,g=new l.Target(o.TargetTypeEnum.ClassProperty,f,m);g.metadata=c,r.push(g)}var _=Object.getPrototypeOf(e.prototype).constructor;if(_!==Object){var y=d(t,_);r=n(n([],r),y)}return r}function p(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[a.INJECT_TAG],multiInject:e[a.MULTI_INJECT_TAG],targetName:e[a.NAME_TAG],unmanaged:e[a.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return c(t,h.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,i){var n=Object.getPrototypeOf(i.prototype).constructor;if(n!==Object){var r=c(e,h.getFunctionName(n),n,!0),s=r.map((function(t){return t.metadata.filter((function(t){return t.key===a.UNMANAGED_TAG}))})),o=[].concat.apply([],s).length,l=r.length-o;return l>0?l:t(e,n)}return 0}},2807:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var n=i(7539),r=function(){function t(t,e,i,r,s){this.id=n.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=i,this.target=s,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===i?new Map:null}return t.prototype.addChildRequest=function(e,i,n){var r=new t(e,this.parentContext,this,i,n);return this.childRequests.push(r),r},t}();e.Request=r},6741:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var n=i(5034),r=i(7539),s=i(301),o=i(1372),a=function(){function t(t,e,i,a){this.id=r.id(),this.type=t,this.serviceIdentifier=i,this.name=new o.QueryableString(e||""),this.metadata=new Array;var h=null;"string"==typeof a?h=new s.Metadata(n.NAMED_TAG,a):a instanceof s.Metadata&&(h=a),null!==h&&this.metadata.push(h)}return t.prototype.hasTag=function(t){for(var e=0,i=this.metadata;e<i.length;e++){if(i[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(n.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(n.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(n.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return n.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(n.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===n.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return n.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(n.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(i){for(var n=0,r=e.metadata;n<r.length;n++){var s=r[n];if(s.key===t&&s.value===i)return!0}return!1}},t}();e.Target=a},9524:function(t,e,i){"use strict";var n=this&&this.__spreadArray||function(t,e){for(var i=0,n=e.length,r=t.length;i<n;i++,r++)t[r]=e[i];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var r=i(6319),s=i(477),o=i(5034);e.resolveInstance=function(t,e,i){var a,h,l=null;if(e.length>0){var c=e.filter((function(t){return null!==t.target&&t.target.type===s.TargetTypeEnum.ConstructorArgument})).map(i);h=c,l=function(t,e,i){var n=e.filter((function(t){return null!==t.target&&t.target.type===s.TargetTypeEnum.ClassProperty})),r=n.map(i);return n.forEach((function(e,i){var n;n=e.target.name.value();var s=r[i];t[n]=s})),t}(l=new((a=t).bind.apply(a,n([void 0],h))),e,i)}else l=new t;return function(t,e){if(Reflect.hasMetadata(o.POST_CONSTRUCT,t)){var i=Reflect.getMetadata(o.POST_CONSTRUCT,t);try{e[i.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,l),l}},8343:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var n=i(6319),r=i(477),s=i(9232),o=i(8160),a=i(9524),h=function(t,e,i){try{return i()}catch(i){throw s.isStackOverflowExeption(i)?new Error(n.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):i}},l=function(t){return function(e){e.parentContext.setCurrentRequest(e);var i=e.bindings,s=e.childRequests,c=e.target&&e.target.isArray(),u=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(c&&u)return s.map((function(e){return l(t)(e)}));var d=null;if(!e.target.isOptional()||0!==i.length){var p=i[0],f=p.scope===r.BindingScopeEnum.Singleton,m=p.scope===r.BindingScopeEnum.Request;if(f&&p.activated)return p.cache;if(m&&null!==t&&t.has(p.id))return t.get(p.id);if(p.type===r.BindingTypeEnum.ConstantValue)d=p.cache,p.activated=!0;else if(p.type===r.BindingTypeEnum.Function)d=p.cache,p.activated=!0;else if(p.type===r.BindingTypeEnum.Constructor)d=p.implementationType;else if(p.type===r.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)d=h("toDynamicValue",p.serviceIdentifier,(function(){return p.dynamicValue(e.parentContext)}));else if(p.type===r.BindingTypeEnum.Factory&&null!==p.factory)d=h("toFactory",p.serviceIdentifier,(function(){return p.factory(e.parentContext)}));else if(p.type===r.BindingTypeEnum.Provider&&null!==p.provider)d=h("toProvider",p.serviceIdentifier,(function(){return p.provider(e.parentContext)}));else{if(p.type!==r.BindingTypeEnum.Instance||null===p.implementationType){var g=o.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(n.INVALID_BINDING_TYPE+" "+g)}d=a.resolveInstance(p.implementationType,s,l(t))}return"function"==typeof p.onActivation&&(d=p.onActivation(e.parentContext,d)),f&&(p.cache=d,p.activated=!0),m&&null!==t&&!t.has(p.id)&&t.set(p.id,d),d}}};e.resolve=function(t){return l(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},9369:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var n=i(477),r=i(5322),s=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=n.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=n.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=n.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=s},5192:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var n=i(9369),r=i(5299),s=i(2652),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new s.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new n.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=o},5299:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var n=i(2652),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new n.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},4387:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var n=i(6319),r=i(477),s=i(5192),o=i(5322),a=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new s.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+n.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new s.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(n.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,this._binding.scope=r.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=a},5322:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var n=i(5299),r=i(2652),s=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new n.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=s},2652:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var n=i(5299),r=i(8839),s=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new n.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new n.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new n.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new n.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new n.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new n.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(i){return r.taggedConstraint(t)(e)(i.parentRequest)},new n.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new n.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new n.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new n.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new n.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(i){return r.traverseAncerstors(i,r.taggedConstraint(t)(e))},new n.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(i){return!r.traverseAncerstors(i,r.taggedConstraint(t)(e))},new n.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new n.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new n.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=s},8839:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var n=i(5034),r=i(301),s=function(t,e){var i=t.parentRequest;return null!==i&&(!!e(i)||s(i,e))};e.traverseAncerstors=s;var o=function(t){return function(e){var i=function(i){return null!==i&&null!==i.target&&i.target.matchesTag(t)(e)};return i.metaData=new r.Metadata(t,e),i}};e.taggedConstraint=o;var a=o(n.NAMED_TAG);e.namedConstraint=a;e.typeConstraint=function(t){return function(e){var i=null;if(null!==e){if(i=e.bindings[0],"string"==typeof t)return i.serviceIdentifier===t;var n=e.bindings[0].implementationType;return t===n}return!1}}},4835:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0;e.multiBindToService=function(t){return function(e){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i.forEach((function(i){return t.bind(i).toService(e)}))}}}},9232:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var n=i(6319);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===n.STACK_OVERFLOW}},7539:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var i=0;e.id=function(){return i++}},8160:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var n=i(6319);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function s(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||s(t.parentRequest,e))}function o(t){if(t.name)return t.name;var e=t.toString(),i=e.match(/^function\s*([^\s(]+)/);return i?i[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,i){var n="",r=i(t,e);return 0!==r.length&&(n="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=o(t.implementationType)),n=n+"\n "+e,t.constraint.metaData&&(n=n+" - "+t.constraint.metaData)}))),n},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(s(e,e.serviceIdentifier)){var i=function(t){var e=function t(e,i){void 0===i&&(i=[]);var n=r(e.serviceIdentifier);return i.push(n),null!==e.parentRequest?t(e.parentRequest,i):i}(t);return e.reverse().join(" --\x3e ")}(e);throw new Error(n.CIRCULAR_DEPENDENCY+" "+i)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var i="",n=e.getNamedTag(),r=e.getCustomTags();return null!==n&&(i+=n.toString()+"\n"),null!==r&&r.forEach((function(t){i+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+i}return" "+t},e.getFunctionName=o},4822:t=>{"use strict";t.exports=Math.abs},3700:t=>{"use strict";t.exports=Math.floor},3888:t=>{"use strict";t.exports=Math.max},4670:t=>{"use strict";t.exports=Math.min},9988:t=>{"use strict";t.exports=Math.pow},1664:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var s,o,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),h=1;h<arguments.length;h++){for(var l in s=Object(arguments[h]))i.call(s,l)&&(a[l]=s[l]);if(e){o=e(s);for(var c=0;c<o.length;c++)n.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},8527:(t,e,i)=>{var n="function"==typeof Map&&Map.prototype,r=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=n&&r&&"function"==typeof r.get?r.get:null,o=n&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,h=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=a&&h&&"function"==typeof h.get?h.get:null,c=a&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,_=String.prototype.match,y=String.prototype.slice,v=String.prototype.replace,b=String.prototype.toUpperCase,w=String.prototype.toLowerCase,S=RegExp.prototype.test,T=Array.prototype.concat,x=Array.prototype.join,E=Array.prototype.slice,A=Math.floor,I="function"==typeof BigInt?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,R="function"==typeof Symbol&&"object"==typeof Symbol.iterator,O="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===R||"symbol")?Symbol.toStringTag:null,k=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function D(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||S.call(/e/,e))return e;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-A(-t):A(t);if(n!==t){var r=String(n),s=y.call(e,r.length+1);return v.call(r,i,"$&_")+"."+v.call(v.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(e,i,"$&_")}var N=i(3966),L=N.custom,B=W(L)?L:null,F={__proto__:null,double:'"',single:"'"},U={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function G(t,e,i){var n=i.quoteStyle||e,r=F[n];return r+t+r}function j(t){return v.call(String(t),/"/g,"&quot;")}function H(t){return!("[object Array]"!==Y(t)||O&&"object"==typeof t&&O in t)}function z(t){return!("[object RegExp]"!==Y(t)||O&&"object"==typeof t&&O in t)}function W(t){if(R)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!P)return!1;try{return P.call(t),!0}catch(t){}return!1}t.exports=function t(e,n,r,a){var h=n||{};if(X(h,"quoteStyle")&&!X(F,h.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(X(h,"maxStringLength")&&("number"==typeof h.maxStringLength?h.maxStringLength<0&&h.maxStringLength!==1/0:null!==h.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var m=!X(h,"customInspect")||h.customInspect;if("boolean"!=typeof m&&"symbol"!==m)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(X(h,"indent")&&null!==h.indent&&"\t"!==h.indent&&!(parseInt(h.indent,10)===h.indent&&h.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(X(h,"numericSeparator")&&"boolean"!=typeof h.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var b=h.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return $(e,h);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var S=String(e);return b?D(e,S):S}if("bigint"==typeof e){var A=String(e)+"n";return b?D(e,A):A}var C=void 0===h.depth?5:h.depth;if(void 0===r&&(r=0),r>=C&&C>0&&"object"==typeof e)return H(e)?"[Array]":"[Object]";var L=function(t,e){var i;if("\t"===t.indent)i="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;i=x.call(Array(t.indent+1)," ")}return{base:i,prev:x.call(Array(e+1),i)}}(h,r);if(void 0===a)a=[];else if(q(a,e)>=0)return"[Circular]";function U(e,i,n){if(i&&(a=E.call(a)).push(i),n){var s={depth:h.depth};return X(h,"quoteStyle")&&(s.quoteStyle=h.quoteStyle),t(e,s,r+1,a)}return t(e,h,r+1,a)}if("function"==typeof e&&!z(e)){var V=function(t){if(t.name)return t.name;var e=_.call(g.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),K=et(e,U);return"[Function"+(V?": "+V:" (anonymous)")+"]"+(K.length>0?" { "+x.call(K,", ")+" }":"")}if(W(e)){var it=R?v.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(e);return"object"!=typeof e||R?it:J(it)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var nt="<"+w.call(String(e.nodeName)),rt=e.attributes||[],st=0;st<rt.length;st++)nt+=" "+rt[st].name+"="+G(j(rt[st].value),"double",h);return nt+=">",e.childNodes&&e.childNodes.length&&(nt+="..."),nt+="</"+w.call(String(e.nodeName))+">"}if(H(e)){if(0===e.length)return"[]";var ot=et(e,U);return L&&!function(t){for(var e=0;e<t.length;e++)if(q(t[e],"\n")>=0)return!1;return!0}(ot)?"["+tt(ot,L)+"]":"[ "+x.call(ot,", ")+" ]"}if(function(t){return!("[object Error]"!==Y(t)||O&&"object"==typeof t&&O in t)}(e)){var at=et(e,U);return"cause"in Error.prototype||!("cause"in e)||k.call(e,"cause")?0===at.length?"["+String(e)+"]":"{ ["+String(e)+"] "+x.call(at,", ")+" }":"{ ["+String(e)+"] "+x.call(T.call("[cause]: "+U(e.cause),at),", ")+" }"}if("object"==typeof e&&m){if(B&&"function"==typeof e[B]&&N)return N(e,{depth:C-r});if("symbol"!==m&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!s||!t||"object"!=typeof t)return!1;try{s.call(t);try{l.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var ht=[];return o&&o.call(e,(function(t,i){ht.push(U(i,e,!0)+" => "+U(t,e))})),Q("Map",s.call(e),ht,L)}if(function(t){if(!l||!t||"object"!=typeof t)return!1;try{l.call(t);try{s.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var lt=[];return c&&c.call(e,(function(t){lt.push(U(t,e))})),Q("Set",l.call(e),lt,L)}if(function(t){if(!u||!t||"object"!=typeof t)return!1;try{u.call(t,u);try{d.call(t,d)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Z("WeakMap");if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{d.call(t,d);try{u.call(t,u)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Z("WeakSet");if(function(t){if(!p||!t||"object"!=typeof t)return!1;try{return p.call(t),!0}catch(t){}return!1}(e))return Z("WeakRef");if(function(t){return!("[object Number]"!==Y(t)||O&&"object"==typeof t&&O in t)}(e))return J(U(Number(e)));if(function(t){if(!t||"object"!=typeof t||!I)return!1;try{return I.call(t),!0}catch(t){}return!1}(e))return J(U(I.call(e)));if(function(t){return!("[object Boolean]"!==Y(t)||O&&"object"==typeof t&&O in t)}(e))return J(f.call(e));if(function(t){return!("[object String]"!==Y(t)||O&&"object"==typeof t&&O in t)}(e))return J(U(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==i.g&&e===i.g)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==Y(t)||O&&"object"==typeof t&&O in t)}(e)&&!z(e)){var ct=et(e,U),ut=M?M(e)===Object.prototype:e instanceof Object||e.constructor===Object,dt=e instanceof Object?"":"null prototype",pt=!ut&&O&&Object(e)===e&&O in e?y.call(Y(e),8,-1):dt?"Object":"",ft=(ut||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(pt||dt?"["+x.call(T.call([],pt||[],dt||[]),": ")+"] ":"");return 0===ct.length?ft+"{}":L?ft+"{"+tt(ct,L)+"}":ft+"{ "+x.call(ct,", ")+" }"}return String(e)};var V=Object.prototype.hasOwnProperty||function(t){return t in this};function X(t,e){return V.call(t,e)}function Y(t){return m.call(t)}function q(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function $(t,e){if(t.length>e.maxStringLength){var i=t.length-e.maxStringLength,n="... "+i+" more character"+(i>1?"s":"");return $(y.call(t,0,e.maxStringLength),e)+n}var r=U[e.quoteStyle||"single"];return r.lastIndex=0,G(v.call(v.call(t,r,"\\$1"),/[\x00-\x1f]/g,K),"single",e)}function K(t){var e=t.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return i?"\\"+i:"\\x"+(e<16?"0":"")+b.call(e.toString(16))}function J(t){return"Object("+t+")"}function Z(t){return t+" { ? }"}function Q(t,e,i,n){return t+" ("+e+") {"+(n?tt(i,n):x.call(i,", "))+"}"}function tt(t,e){if(0===t.length)return"";var i="\n"+e.prev+e.base;return i+x.call(t,","+i)+"\n"+e.prev}function et(t,e){var i=H(t),n=[];if(i){n.length=t.length;for(var r=0;r<t.length;r++)n[r]=X(t,r)?e(t[r],t):""}var s,o="function"==typeof C?C(t):[];if(R){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var h in t)X(t,h)&&(i&&String(Number(h))===h&&h<t.length||R&&s["$"+h]instanceof Symbol||(S.call(/[^\w$]/,h)?n.push(e(h,t)+": "+e(t[h],t)):n.push(h+": "+e(t[h],t))));if("function"==typeof C)for(var l=0;l<o.length;l++)k.call(t,o[l])&&n.push("["+e(o[l])+"]: "+e(t[o[l]],t));return n}},4937:(t,e,i)=>{var n;!function(t){!function(){var e="object"==typeof i.g?i.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=r(t);function r(t,e){return function(i,n){"function"!=typeof t[i]&&Object.defineProperty(t,i,{configurable:!0,writable:!0,value:n}),e&&e(i,n)}}void 0===e.Reflect?e.Reflect=t:n=r(e.Reflect,n),function(t){var e=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,n=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,o={__proto__:[]}instanceof Array,a=!s&&!o,h={create:s?function(){return nt(Object.create(null))}:o?function(){return nt({__proto__:null})}:function(){return nt({})},has:a?function(t,i){return e.call(t,i)}:function(t,e){return e in t},get:a?function(t,i){return e.call(t,i)?t[i]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),c="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,d=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,p=new(c||"function"!=typeof WeakMap?it():WeakMap);function f(t,e,i,n){if(N(i)){if(!W(t))throw new TypeError;if(!X(e))throw new TypeError;return x(t,e)}if(!W(t))throw new TypeError;if(!F(e))throw new TypeError;if(!F(n)&&!N(n)&&!L(n))throw new TypeError;return L(n)&&(n=void 0),E(t,e,i=z(i),n)}function m(t,e){function i(i,n){if(!F(i))throw new TypeError;if(!N(n)&&!Y(n))throw new TypeError;O(t,e,i,n)}return i}function g(t,e,i,n){if(!F(i))throw new TypeError;return N(n)||(n=z(n)),O(t,e,i,n)}function _(t,e,i){if(!F(e))throw new TypeError;return N(i)||(i=z(i)),I(t,e,i)}function y(t,e,i){if(!F(e))throw new TypeError;return N(i)||(i=z(i)),C(t,e,i)}function v(t,e,i){if(!F(e))throw new TypeError;return N(i)||(i=z(i)),P(t,e,i)}function b(t,e,i){if(!F(e))throw new TypeError;return N(i)||(i=z(i)),R(t,e,i)}function w(t,e){if(!F(t))throw new TypeError;return N(e)||(e=z(e)),k(t,e)}function S(t,e){if(!F(t))throw new TypeError;return N(e)||(e=z(e)),M(t,e)}function T(t,e,i){if(!F(e))throw new TypeError;N(i)||(i=z(i));var n=A(e,i,!1);if(N(n))return!1;if(!n.delete(t))return!1;if(n.size>0)return!0;var r=p.get(e);return r.delete(i),r.size>0||p.delete(e),!0}function x(t,e){for(var i=t.length-1;i>=0;--i){var n=(0,t[i])(e);if(!N(n)&&!L(n)){if(!X(n))throw new TypeError;e=n}}return e}function E(t,e,i,n){for(var r=t.length-1;r>=0;--r){var s=(0,t[r])(e,i,n);if(!N(s)&&!L(s)){if(!F(s))throw new TypeError;n=s}}return n}function A(t,e,i){var n=p.get(t);if(N(n)){if(!i)return;n=new u,p.set(t,n)}var r=n.get(e);if(N(r)){if(!i)return;r=new u,n.set(e,r)}return r}function I(t,e,i){if(C(t,e,i))return!0;var n=Q(e);return!L(n)&&I(t,n,i)}function C(t,e,i){var n=A(e,i,!1);return!N(n)&&j(n.has(t))}function P(t,e,i){if(C(t,e,i))return R(t,e,i);var n=Q(e);return L(n)?void 0:P(t,n,i)}function R(t,e,i){var n=A(e,i,!1);if(!N(n))return n.get(t)}function O(t,e,i,n){A(i,n,!0).set(t,e)}function k(t,e){var i=M(t,e),n=Q(t);if(null===n)return i;var r=k(n,e);if(r.length<=0)return i;if(i.length<=0)return r;for(var s=new d,o=[],a=0,h=i;a<h.length;a++){var l=h[a];s.has(l)||(s.add(l),o.push(l))}for(var c=0,u=r;c<u.length;c++){l=u[c];s.has(l)||(s.add(l),o.push(l))}return o}function M(t,e){var i=[],n=A(t,e,!1);if(N(n))return i;for(var r=$(n.keys()),s=0;;){var o=J(r);if(!o)return i.length=s,i;var a=K(o);try{i[s]=a}catch(t){try{Z(r)}finally{throw t}}s++}}function D(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function N(t){return void 0===t}function L(t){return null===t}function B(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function U(t,e){switch(D(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var i=3===e?"string":5===e?"number":"default",r=q(t,n);if(void 0!==r){var s=r.call(t,i);if(F(s))throw new TypeError;return s}return G(t,"default"===i?"number":i)}function G(t,e){if("string"===e){var i=t.toString;if(V(i))if(!F(r=i.call(t)))return r;if(V(n=t.valueOf))if(!F(r=n.call(t)))return r}else{var n;if(V(n=t.valueOf))if(!F(r=n.call(t)))return r;var r,s=t.toString;if(V(s))if(!F(r=s.call(t)))return r}throw new TypeError}function j(t){return!!t}function H(t){return""+t}function z(t){var e=U(t,3);return B(e)?e:H(e)}function W(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function V(t){return"function"==typeof t}function X(t){return"function"==typeof t}function Y(t){switch(D(t)){case 3:case 4:return!0;default:return!1}}function q(t,e){var i=t[e];if(null!=i){if(!V(i))throw new TypeError;return i}}function $(t){var e=q(t,r);if(!V(e))throw new TypeError;var i=e.call(t);if(!F(i))throw new TypeError;return i}function K(t){return t.value}function J(t){var e=t.next();return!e.done&&e}function Z(t){var e=t.return;e&&e.call(t)}function Q(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var i=t.prototype,n=i&&Object.getPrototypeOf(i);if(null==n||n===Object.prototype)return e;var r=n.constructor;return"function"!=typeof r||r===t?e:r}function tt(){var t={},e=[],i=function(){function t(t,e,i){this._index=0,this._keys=t,this._values=e,this._selector=i}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var i=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var i=this._find(t,!0);return this._values[i]=e,this},e.prototype.delete=function(e){var i=this._find(e,!1);if(i>=0){for(var n=this._keys.length,r=i+1;r<n;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new i(this._keys,this._values,n)},e.prototype.values=function(){return new i(this._keys,this._values,s)},e.prototype.entries=function(){return new i(this._keys,this._values,o)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function n(t,e){return t}function s(t,e){return e}function o(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new u}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function it(){var t=16,i=h.create(),n=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=s(t,!1);return void 0!==e&&h.has(e,this._key)},t.prototype.get=function(t){var e=s(t,!1);return void 0!==e?h.get(e,this._key):void 0},t.prototype.set=function(t,e){return s(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=s(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var t;do{t="@@WeakMap@@"+l()}while(h.has(i,t));return i[t]=!0,t}function s(t,i){if(!e.call(t,n)){if(!i)return;Object.defineProperty(t,n,{value:h.create()})}return t[n]}function o(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t)}function l(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var i="",n=0;n<t;++n){var r=e[n];4!==n&&6!==n&&8!==n||(i+="-"),r<16&&(i+="0"),i+=r.toString(16).toLowerCase()}return i}}function nt(t){return t.__=void 0,delete t.__,t}t("decorate",f),t("metadata",m),t("defineMetadata",g),t("hasMetadata",_),t("hasOwnMetadata",y),t("getMetadata",v),t("getOwnMetadata",b),t("getMetadataKeys",w),t("getOwnMetadataKeys",S),t("deleteMetadata",T)}(n)}()}(n||(n={}))},3575:(t,e,i)=>{"use strict";var n=i(8527),r=i(1711),s=function(t,e,i){for(var n,r=t;null!=(n=r.next);r=n)if(n.key===e)return r.next=n.next,i||(n.next=t.next,t.next=n),n};t.exports=function(){var t,e={assert:function(t){if(!e.has(t))throw new r("Side channel does not contain "+n(t))},delete:function(e){var i=t&&t.next,n=function(t,e){if(t)return s(t,e,!0)}(t,e);return n&&i&&i===n&&(t=void 0),!!n},get:function(e){return function(t,e){if(t){var i=s(t,e);return i&&i.value}}(t,e)},has:function(e){return function(t,e){return!!t&&!!s(t,e)}(t,e)},set:function(e,i){t||(t={next:void 0}),function(t,e,i){var n=s(t,e);n?n.value=i:t.next={key:e,next:t.next,value:i}}(t,e,i)}};return e}},9167:(t,e,i)=>{"use strict";var n=i(8897),r=i(3232),s=i(8527),o=i(1711),a=n("%Map%",!0),h=r("Map.prototype.get",!0),l=r("Map.prototype.set",!0),c=r("Map.prototype.has",!0),u=r("Map.prototype.delete",!0),d=r("Map.prototype.size",!0);t.exports=!!a&&function(){var t,e={assert:function(t){if(!e.has(t))throw new o("Side channel does not contain "+s(t))},delete:function(e){if(t){var i=u(t,e);return 0===d(t)&&(t=void 0),i}return!1},get:function(e){if(t)return h(t,e)},has:function(e){return!!t&&c(t,e)},set:function(e,i){t||(t=new a),l(t,e,i)}};return e}},9075:(t,e,i)=>{"use strict";var n=i(8897),r=i(3232),s=i(8527),o=i(9167),a=i(1711),h=n("%WeakMap%",!0),l=r("WeakMap.prototype.get",!0),c=r("WeakMap.prototype.set",!0),u=r("WeakMap.prototype.has",!0),d=r("WeakMap.prototype.delete",!0);t.exports=h?function(){var t,e,i={assert:function(t){if(!i.has(t))throw new a("Side channel does not contain "+s(t))},delete:function(i){if(h&&i&&("object"==typeof i||"function"==typeof i)){if(t)return d(t,i)}else if(o&&e)return e.delete(i);return!1},get:function(i){return h&&i&&("object"==typeof i||"function"==typeof i)&&t?l(t,i):e&&e.get(i)},has:function(i){return h&&i&&("object"==typeof i||"function"==typeof i)&&t?u(t,i):!!e&&e.has(i)},set:function(i,n){h&&i&&("object"==typeof i||"function"==typeof i)?(t||(t=new h),c(t,i,n)):o&&(e||(e=o()),e.set(i,n))}};return i}:o},588:(t,e,i)=>{"use strict";var n=i(1711),r=i(8527),s=i(3575),o=i(9167),a=i(9075)||o||s;t.exports=function(){var t,e={assert:function(t){if(!e.has(t))throw new n("Side channel does not contain "+r(t))},delete:function(e){return!!t&&t.delete(e)},get:function(e){return t&&t.get(e)},has:function(e){return!!t&&t.has(e)},set:function(e,i){t||(t=a()),t.set(e,i)}};return e}},146:function(t,e,i){var n;t=i.nmd(t),function(){e&&e.nodeType,t&&t.nodeType;var r="object"==typeof i.g&&i.g;r.global!==r&&r.window!==r&&r.self;var s,o=2147483647,a=36,h=/^xn--/,l=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,p=String.fromCharCode;function f(t){throw new RangeError(u[t])}function m(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function g(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+m((t=t.replace(c,".")).split("."),e).join(".")}function _(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function y(t){return m(t,(function(t){var e="";return t>65535&&(e+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=p(t)})).join("")}function v(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,i){var n=0;for(t=i?d(t/700):t>>1,t+=d(t/e);t>455;n+=a)t=d(t/35);return d(n+36*t/(t+38))}function w(t){var e,i,n,r,s,h,l,c,u,p,m,g=[],_=t.length,v=0,w=128,S=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&f("not-basic"),g.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<_;){for(s=v,h=1,l=a;r>=_&&f("invalid-input"),((c=(m=t.charCodeAt(r++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:a)>=a||c>d((o-v)/h))&&f("overflow"),v+=c*h,!(c<(u=l<=S?1:l>=S+26?26:l-S));l+=a)h>d(o/(p=a-u))&&f("overflow"),h*=p;S=b(v-s,e=g.length+1,0==s),d(v/e)>o-w&&f("overflow"),w+=d(v/e),v%=e,g.splice(v++,0,w)}return y(g)}function S(t){var e,i,n,r,s,h,l,c,u,m,g,y,w,S,T,x=[];for(y=(t=_(t)).length,e=128,i=0,s=72,h=0;h<y;++h)(g=t[h])<128&&x.push(p(g));for(n=r=x.length,r&&x.push("-");n<y;){for(l=o,h=0;h<y;++h)(g=t[h])>=e&&g<l&&(l=g);for(l-e>d((o-i)/(w=n+1))&&f("overflow"),i+=(l-e)*w,e=l,h=0;h<y;++h)if((g=t[h])<e&&++i>o&&f("overflow"),g==e){for(c=i,u=a;!(c<(m=u<=s?1:u>=s+26?26:u-s));u+=a)T=c-m,S=a-m,x.push(p(v(m+T%S,0))),c=d(T/S);x.push(p(v(c,0))),s=b(i,w,n==r),i=0,++n}++i,++e}return x.join("")}s={version:"1.4.1",ucs2:{decode:_,encode:y},decode:w,encode:S,toASCII:function(t){return g(t,(function(t){return l.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return g(t,(function(t){return h.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return s}.call(e,i,e,t))||(t.exports=n)}()},8818:t=>{"use strict";var e=String.prototype.replace,i=/%20/g,n="RFC1738",r="RFC3986";t.exports={default:r,formatters:{RFC1738:function(t){return e.call(t,i,"+")},RFC3986:function(t){return String(t)}},RFC1738:n,RFC3986:r}},3718:(t,e,i)=>{"use strict";var n=i(3755),r=i(2757),s=i(8818);t.exports={formats:s,parse:r,stringify:n}},2757:(t,e,i)=>{"use strict";var n=i(1175),r=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},h=function(t,e){return t&&"string"==typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},l=function(t,e,i,n){if(t){var s=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=i.depth>0&&/(\[[^[\]]*])/.exec(s),l=a?s.slice(0,a.index):s,c=[];if(l){if(!i.plainObjects&&r.call(Object.prototype,l)&&!i.allowPrototypes)return;c.push(l)}for(var u=0;i.depth>0&&null!==(a=o.exec(s))&&u<i.depth;){if(u+=1,!i.plainObjects&&r.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(a[1])}if(a){if(!0===i.strictDepth)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");c.push("["+s.slice(a.index)+"]")}return function(t,e,i,n){for(var r=n?e:h(e,i),s=t.length-1;s>=0;--s){var o,a=t[s];if("[]"===a&&i.parseArrays)o=i.allowEmptyArrays&&(""===r||i.strictNullHandling&&null===r)?[]:[].concat(r);else{o=i.plainObjects?{__proto__:null}:{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=i.decodeDotInKeys?l.replace(/%2E/g,"."):l,u=parseInt(c,10);i.parseArrays||""!==c?!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&i.parseArrays&&u<=i.arrayLimit?(o=[])[u]=r:"__proto__"!==c&&(o[c]=r):o={0:r}}r=o}return r}(c,e,i,n)}};t.exports=function(t,e){var i=function(t){if(!t)return o;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.decodeDotInKeys&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===t.charset?o.charset:t.charset,i=void 0===t.duplicates?o.duplicates:t.duplicates;if("combine"!==i&&"first"!==i&&"last"!==i)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===t.allowDots?!0===t.decodeDotInKeys||o.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:o.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:o.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:o.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:o.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:o.decoder,delimiter:"string"==typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:o.depth,duplicates:i,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:o.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling}}(e);if(""===t||null==t)return i.plainObjects?{__proto__:null}:{};for(var c="string"==typeof t?function(t,e){var i={__proto__:null},l=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;l=l.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var c,u=e.parameterLimit===1/0?void 0:e.parameterLimit,d=l.split(e.delimiter,u),p=-1,f=e.charset;if(e.charsetSentinel)for(c=0;c<d.length;++c)0===d[c].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[c]?f="utf-8":"utf8=%26%2310003%3B"===d[c]&&(f="iso-8859-1"),p=c,c=d.length);for(c=0;c<d.length;++c)if(c!==p){var m,g,_=d[c],y=_.indexOf("]="),v=-1===y?_.indexOf("="):y+1;-1===v?(m=e.decoder(_,o.decoder,f,"key"),g=e.strictNullHandling?null:""):(m=e.decoder(_.slice(0,v),o.decoder,f,"key"),g=n.maybeMap(h(_.slice(v+1),e),(function(t){return e.decoder(t,o.decoder,f,"value")}))),g&&e.interpretNumericEntities&&"iso-8859-1"===f&&(g=a(String(g))),_.indexOf("[]=")>-1&&(g=s(g)?[g]:g);var b=r.call(i,m);b&&"combine"===e.duplicates?i[m]=n.combine(i[m],g):b&&"last"!==e.duplicates||(i[m]=g)}return i}(t,i):t,u=i.plainObjects?{__proto__:null}:{},d=Object.keys(c),p=0;p<d.length;++p){var f=d[p],m=l(f,c[f],i,"string"==typeof t);u=n.merge(u,m,i)}return!0===i.allowSparse?u:n.compact(u)}},3755:(t,e,i)=>{"use strict";var n=i(588),r=i(1175),s=i(8818),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},h=Array.isArray,l=Array.prototype.push,c=function(t,e){l.apply(t,h(e)?e:[e])},u=Date.prototype.toISOString,d=s.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:r.encode,encodeValuesOnly:!1,filter:void 0,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(t){return u.call(t)},skipNulls:!1,strictNullHandling:!1},f={},m=function t(e,i,s,o,a,l,u,d,m,g,_,y,v,b,w,S,T,x){for(var E,A=e,I=x,C=0,P=!1;void 0!==(I=I.get(f))&&!P;){var R=I.get(e);if(C+=1,void 0!==R){if(R===C)throw new RangeError("Cyclic object value");P=!0}void 0===I.get(f)&&(C=0)}if("function"==typeof g?A=g(i,A):A instanceof Date?A=v(A):"comma"===s&&h(A)&&(A=r.maybeMap(A,(function(t){return t instanceof Date?v(t):t}))),null===A){if(l)return m&&!S?m(i,p.encoder,T,"key",b):i;A=""}if("string"==typeof(E=A)||"number"==typeof E||"boolean"==typeof E||"symbol"==typeof E||"bigint"==typeof E||r.isBuffer(A))return m?[w(S?i:m(i,p.encoder,T,"key",b))+"="+w(m(A,p.encoder,T,"value",b))]:[w(i)+"="+w(String(A))];var O,k=[];if(void 0===A)return k;if("comma"===s&&h(A))S&&m&&(A=r.maybeMap(A,m)),O=[{value:A.length>0?A.join(",")||null:void 0}];else if(h(g))O=g;else{var M=Object.keys(A);O=_?M.sort(_):M}var D=d?String(i).replace(/\./g,"%2E"):String(i),N=o&&h(A)&&1===A.length?D+"[]":D;if(a&&h(A)&&0===A.length)return N+"[]";for(var L=0;L<O.length;++L){var B=O[L],F="object"==typeof B&&B&&void 0!==B.value?B.value:A[B];if(!u||null!==F){var U=y&&d?String(B).replace(/\./g,"%2E"):String(B),G=h(A)?"function"==typeof s?s(N,U):N:N+(y?"."+U:"["+U+"]");x.set(e,C);var j=n();j.set(f,x),c(k,t(F,G,s,o,a,l,u,d,"comma"===s&&S&&h(A)?null:m,g,_,y,v,b,w,S,T,j))}}return k};t.exports=function(t,e){var i,r=t,l=function(t){if(!t)return p;if(void 0!==t.allowEmptyArrays&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==t.encodeDotInKeys&&"boolean"!=typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||p.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=s.default;if(void 0!==t.format){if(!o.call(s.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var n,r=s.formatters[i],l=p.filter;if(("function"==typeof t.filter||h(t.filter))&&(l=t.filter),n=t.arrayFormat in a?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=void 0===t.allowDots?!0===t.encodeDotInKeys||p.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:p.addQueryPrefix,allowDots:c,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:n,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:p.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:void 0===t.delimiter?p.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:p.encode,encodeDotInKeys:"boolean"==typeof t.encodeDotInKeys?t.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof t.encoder?t.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:p.encodeValuesOnly,filter:l,format:i,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:p.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:p.strictNullHandling}}(e);"function"==typeof l.filter?r=(0,l.filter)("",r):h(l.filter)&&(i=l.filter);var u=[];if("object"!=typeof r||null===r)return"";var d=a[l.arrayFormat],f="comma"===d&&l.commaRoundTrip;i||(i=Object.keys(r)),l.sort&&i.sort(l.sort);for(var g=n(),_=0;_<i.length;++_){var y=i[_],v=r[y];l.skipNulls&&null===v||c(u,m(v,y,d,f,l.allowEmptyArrays,l.strictNullHandling,l.skipNulls,l.encodeDotInKeys,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,g))}var b=u.join(l.delimiter),w=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}},1175:(t,e,i)=>{"use strict";var n=i(8818),r=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var i=e&&e.plainObjects?{__proto__:null}:{},n=0;n<t.length;++n)void 0!==t[n]&&(i[n]=t[n]);return i},h=1024;t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,i){return t[i]=e[i],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],n=0;n<e.length;++n)for(var r=e[n],o=r.obj[r.prop],a=Object.keys(o),h=0;h<a.length;++h){var l=a[h],c=o[l];"object"==typeof c&&null!==c&&-1===i.indexOf(c)&&(e.push({obj:o,prop:l}),i.push(c))}return function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(s(i)){for(var n=[],r=0;r<i.length;++r)void 0!==i[r]&&n.push(i[r]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,i){var n=t.replace(/\+/g," ");if("iso-8859-1"===i)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(t){return n}},encode:function(t,e,i,r,s){if(0===t.length)return t;var a=t;if("symbol"==typeof t?a=Symbol.prototype.toString.call(t):"string"!=typeof t&&(a=String(t)),"iso-8859-1"===i)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var l="",c=0;c<a.length;c+=h){for(var u=a.length>=h?a.slice(c,c+h):a,d=[],p=0;p<u.length;++p){var f=u.charCodeAt(p);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||s===n.RFC1738&&(40===f||41===f)?d[d.length]=u.charAt(p):f<128?d[d.length]=o[f]:f<2048?d[d.length]=o[192|f>>6]+o[128|63&f]:f<55296||f>=57344?d[d.length]=o[224|f>>12]+o[128|f>>6&63]+o[128|63&f]:(p+=1,f=65536+((1023&f)<<10|1023&u.charCodeAt(p)),d[d.length]=o[240|f>>18]+o[128|f>>12&63]+o[128|f>>6&63]+o[128|63&f])}l+=d.join("")}return l},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(s(t)){for(var i=[],n=0;n<t.length;n+=1)i.push(e(t[n]));return i}return e(t)},merge:function t(e,i,n){if(!i)return e;if("object"!=typeof i&&"function"!=typeof i){if(s(e))e.push(i);else{if(!e||"object"!=typeof e)return[e,i];(n&&(n.plainObjects||n.allowPrototypes)||!r.call(Object.prototype,i))&&(e[i]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(i);var o=e;return s(e)&&!s(i)&&(o=a(e,n)),s(e)&&s(i)?(i.forEach((function(i,s){if(r.call(e,s)){var o=e[s];o&&"object"==typeof o&&i&&"object"==typeof i?e[s]=t(o,i,n):e.push(i)}else e[s]=i})),e):Object.keys(i).reduce((function(e,s){var o=i[s];return r.call(e,s)?e[s]=t(e[s],o,n):e[s]=o,e}),o)}}},9983:(t,e,i)=>{"use strict";var n=i(146);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),c=["%","/","?",";","#"].concat(l),u=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i(3718);function y(t,e,i){if(t&&"object"==typeof t&&t instanceof r)return t;var n=new r;return n.parse(t,e,i),n}r.prototype.parse=function(t,e,i){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),o=-1!==r&&r<t.indexOf("#")?"?":"#",h=t.split(o);h[0]=h[0].replace(/\\/g,"/");var y=t=h.join(o);if(y=y.trim(),!i&&1===t.split("#").length){var v=a.exec(y);if(v)return this.path=y,this.href=y,this.pathname=v[1],v[2]?(this.search=v[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=s.exec(y);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,y=y.substr(b.length)}if(i||b||y.match(/^\/\/[^@/]+@[^@/]+/)){var S="//"===y.substr(0,2);!S||b&&m[b]||(y=y.substr(2),this.slashes=!0)}if(!m[b]&&(S||b&&!g[b])){for(var T,x,E=-1,A=0;A<u.length;A++){-1!==(I=y.indexOf(u[A]))&&(-1===E||I<E)&&(E=I)}-1!==(x=-1===E?y.lastIndexOf("@"):y.lastIndexOf("@",E))&&(T=y.slice(0,x),y=y.slice(x+1),this.auth=decodeURIComponent(T)),E=-1;for(A=0;A<c.length;A++){var I;-1!==(I=y.indexOf(c[A]))&&(-1===E||I<E)&&(E=I)}-1===E&&(E=y.length),this.host=y.slice(0,E),y=y.slice(E),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var P=this.hostname.split(/\./),R=(A=0,P.length);A<R;A++){var O=P[A];if(O&&!O.match(d)){for(var k="",M=0,D=O.length;M<D;M++)O.charCodeAt(M)>127?k+="x":k+=O[M];if(!k.match(d)){var N=P.slice(0,A),L=P.slice(A+1),B=O.match(p);B&&(N.push(B[1]),L.unshift(B[2])),L.length&&(y="/"+L.join(".")+y),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=n.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!f[w])for(A=0,R=l.length;A<R;A++){var G=l[A];if(-1!==y.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),y=y.split(G).join(j)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var z=y.indexOf("?");if(-1!==z?(this.search=y.substr(z),this.query=y.substr(z+1),e&&(this.query=_.parse(this.query)),y=y.slice(0,z)):e&&(this.search="",this.query={}),y&&(this.pathname=y),g[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var W=this.search||"";this.path=F+W}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(s=_.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),e+r+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(o=o.replace("#","%23"))+n},r.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if("string"==typeof t){var e=new r;e.parse(t,!1,!0),t=e}for(var i=new r,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var l=a[h];"protocol"!==l&&(i[l]=t[l])}return g[i.protocol]&&i.hostname&&!i.pathname&&(i.pathname="/",i.path=i.pathname),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var f=i.pathname||"",_=i.search||"";i.path=f+_}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||y||i.host&&t.pathname,w=b,S=i.pathname&&i.pathname.split("/")||[],T=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!g[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===S[0])),v)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),i.search=t.search,i.query=t.query;else if(null!=t.search){if(T)i.host=S.shift(),i.hostname=i.host,(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.hostname=C.shift(),i.host=i.hostname);return i.search=t.search,i.query=t.query,null===i.pathname&&null===i.search||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var x=S.slice(-1)[0],E=(i.host||t.host||S.length>1)&&("."===x||".."===x)||""===x,A=0,I=S.length;I>=0;I--)"."===(x=S[I])?S.splice(I,1):".."===x?(S.splice(I,1),A++):A&&(S.splice(I,1),A--);if(!b&&!w)for(;A--;A)S.unshift("..");!b||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var C,P=""===S[0]||S[0]&&"/"===S[0].charAt(0);T&&(i.hostname=P?"":S.length?S.shift():"",i.host=i.hostname,(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.hostname=C.shift(),i.host=i.hostname));return(b=b||i.host&&S.length)&&!P&&S.unshift(""),S.length>0?i.pathname=S.join("/"):(i.pathname=null,i.path=null),null===i.pathname&&null===i.search||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},r.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.qg=y,e.hd=function(t,e){return y(t,!1,!0).resolve(e)},e.GP=function(t){return"string"==typeof t&&(t=y(t)),t instanceof r?t.format():r.prototype.format.call(t)}},9279:(t,e,i)=>{"use strict";i.d(e,{T:()=>n});const n={PAUSE_MANAGAMENT_DIRECTLY_ALLOWED:!0,SHOW_SETTINGS_ICON:!0,INTER_AD_ALLOWED:!0,REWARDED_AD_ALLOWED:!0,LANDSCAPE_MODE_NEEDED:!1,SHOW_SLOTS_TIP_TEXT:!0}},3271:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var n=i(7472),r=i(5603),s=i(3339);class o{maxSize=5;items=new Map;constructor(t,e={}){this.url=t,this.options=e,r.Core.LocalSettings.on("SettingsChanged",(()=>{for(let t of this.items.values())t.mute(!r.Core.LocalSettings.Sound)}))}play(){if(!r.Core.LocalSettings.Sound)return;for(let[t,e]of this.items.entries())if(!e.playing(t))return e.play(t);if(this.items.size>=this.maxSize)return;let t=new n.Howl({src:[this.url],...this.options}),e=t.play();return this.items.set(e,t),e}stop(){for(let[t,e]of this.items.entries())e.stop(t)}unload(){for(let[t,e]of this.items.entries())e.unload(t);this.items.clear()}}class a{music=null;sounds=new Map;Init(){this.onSettingsChanged=this.onSettingsChanged.bind(this);let t=[...Object.keys(r.Core.app.loader.resources)].filter((t=>t.startsWith("sounds/")));for(let e of t){let t=e.replace("sounds/",""),i=r.Core.app.loader.resources[e].url;this.sounds.set(t,new o(i))}this.music=new n.Howl({src:[r.Core.app.loader.resources["music/Music"].url],volume:.5,loop:!0,onplayerror:()=>{this.music.once("unlock",(()=>this.music.play()))}}),r.Core.LocalSettings.on("SettingsChanged",this.onSettingsChanged),this.onSettingsChanged()}SetMuted(t){Howler.mute(!!t)}Play(t){let e=this.sounds.get(t);e&&e.play()}onSettingsChanged(){r.Core.LocalSettings&&this.music.mute(!r.Core.LocalSettings.Music)}PlayLobbyTheme(){this.music.playing()||(this.music.soundId=this.music.play(this.music.soundId))}Reset(){this.Destroy()}Destroy(){this.music&&this.music.unload(),this.music=null;for(let t of this.sounds.values())t&&t.unload();this.sounds.clear()}}(0,s.decorate)((0,s.injectable)(),a)},5603:(t,e,i)=>{"use strict";i.d(e,{Core:()=>Ko});var n={};i.r(n),i.d(n,{Emitter:()=>qs,LinkedListContainer:()=>No,Particle:()=>Vs,ParticleUtils:()=>Ws,PropertyList:()=>oo,PropertyNode:()=>ks,behaviors:()=>Mo,upgradeConfig:()=>Do});var r=i(4643);const s=JSON.parse('{"vip":{"hardMoneyBonus":1.2,"softMoneyIncomeBonus":2,"hardMoneyDailyBonus":30},"hardAdsBonusReward":{"type":1,"valueStr":"3"},"inAppProducts":[{"id":"hard1","rewards":[{"type":1,"valueStr":"60"}]},{"id":"hard2","rewards":[{"type":1,"valueStr":"500"}]},{"id":"hard3","rewards":[{"type":1,"valueStr":"3500"}]},{"id":"noads","rewards":[{"type":2}]},{"id":"starter_pack","rewards":[{"type":1,"valueStr":"60"},{"type":2}]},{"id":"vip","rewards":[{"type":5}]},{"id":"first_creature_offer_1","rewards":[{"type":13}]},{"id":"first_creature_offer_2","rewards":[{"type":13}]},{"id":"skip_epochs_offer","rewards":[{"type":14}]},{"id":"spins_offer_1","rewards":[{"type":15}]},{"id":"spins_offer_2","rewards":[{"type":16}]}],"inGameProducts":[{"id":"soft1","price":{"priceType":1,"priceValueStr":"59"},"rewards":[{"type":3,"valueStr":"3600"}]},{"id":"soft2","price":{"priceType":1,"priceValueStr":"199"},"rewards":[{"type":3,"valueStr":"14400"}]},{"id":"soft3","price":{"priceType":1,"priceValueStr":"349"},"rewards":[{"type":3,"valueStr":"28800"}]}],"boosters":[{"boosterType":0,"price":{"priceType":1,"priceValueStr":"15"},"durationSeconds":7200},{"boosterType":1,"price":{"priceType":1,"priceValueStr":"15"},"durationSeconds":7200},{"boosterType":2,"price":{"priceType":1,"priceValueStr":"15"},"durationSeconds":7200}]}'),o=JSON.parse('{"rewardTypes":[{"type":1,"help":"хард валюта, valueStr = награда"},{"type":3,"help":"софт валюта, относительно текущей скорости заработка софт валюты, valueStr * текущую скорость = награда"},{"type":6,"help":"случайный герой из открытых в текущей эпохе, кроме топового"},{"type":7,"help":"бустер х4 софт валюты, valueInt = количество секунд"},{"type":8,"help":"бустер скидка на покупку существ, valueInt = количество секунд"}],"rewards":[{"id":1,"weight":120,"type":1,"valueStr":"2"},{"id":2,"weight":30,"type":1,"valueStr":"5"},{"id":3,"weight":10,"type":1,"valueStr":"10"},{"id":4,"weight":100,"type":3,"valueStr":"60"},{"id":5,"weight":40,"type":3,"valueStr":"150"},{"id":6,"weight":120,"type":3,"valueStr":"30"},{"id":7,"weight":120,"type":6},{"id":8,"weight":80,"type":7,"valueInt":300},{"id":9,"weight":50,"type":7,"valueInt":600},{"id":10,"weight":120,"type":7,"valueInt":180},{"id":11,"weight":80,"type":8,"valueInt":300},{"id":12,"weight":50,"type":8,"valueInt":600},{"id":13,"weight":120,"type":8,"valueInt":180}]}'),a=JSON.parse('{"defaultTimeout":120,"startTimeout":120,"timeoutBetweenRewardedAds":10,"starterPackCreatureId":6,"adsEvolveBonusCreatureId":5,"interstitialAdsCollectionSize":6,"chestCreatureId":1,"spinsRestorePeriod":1200,"creatureRankTimeouts":[1,120,2,120,3,120,4,120,5,120,6,120,7,120,8,120,9,120,10,120,11,120,12,120,13,120,14,120,15,120,16,120,17,120,18,120,19,120,20,120,21,120,22,120,23,120,24,120]}'),h=JSON.parse('{"creatures":[{"id":1,"creatureName":"creature1","creatureRank":0,"basePriceHard":1,"basicIncomeSoftStr":"1"},{"id":2,"creatureName":"creature2","creatureRank":1,"basePriceHard":1,"basicIncomeSoftStr":"2"},{"id":3,"creatureName":"creature3","creatureRank":2,"basePriceHard":2,"basicIncomeSoftStr":"4"},{"id":4,"creatureName":"creature4","creatureRank":3,"basePriceHard":2,"basicIncomeSoftStr":"10"},{"id":5,"creatureName":"creature5","creatureRank":4,"basePriceHard":3,"basicIncomeSoftStr":"21"},{"id":6,"creatureName":"creature6","creatureRank":5,"basePriceHard":3,"basicIncomeSoftStr":"45"},{"id":7,"creatureName":"creature7","creatureRank":6,"basePriceHard":4,"basicIncomeSoftStr":"92"},{"id":8,"creatureName":"creature8","creatureRank":7,"basePriceHard":4,"basicIncomeSoftStr":"188"},{"id":9,"creatureName":"creature9","creatureRank":8,"basePriceHard":5,"basicIncomeSoftStr":"380"},{"id":10,"creatureName":"creature10","creatureRank":9,"basePriceHard":5,"basicIncomeSoftStr":"763"},{"id":11,"creatureName":"creature11","creatureRank":10,"basePriceHard":6,"basicIncomeSoftStr":"1526"},{"id":12,"creatureName":"creature12","creatureRank":11,"basePriceHard":6,"basicIncomeSoftStr":"3052"},{"id":13,"creatureName":"creature13","creatureRank":12,"basePriceHard":7,"basicIncomeSoftStr":"6104"},{"id":14,"creatureName":"creature14","creatureRank":13,"basePriceHard":7,"basicIncomeSoftStr":"12207"},{"id":15,"creatureName":"creature15","creatureRank":14,"basePriceHard":7,"basicIncomeSoftStr":"24414"},{"id":16,"creatureName":"creature16","creatureRank":15,"basePriceHard":8,"basicIncomeSoftStr":"48828"},{"id":17,"creatureName":"creature17","creatureRank":16,"basePriceHard":8,"basicIncomeSoftStr":"97656"},{"id":18,"creatureName":"creature18","creatureRank":17,"basePriceHard":8,"basicIncomeSoftStr":"195313"},{"id":19,"creatureName":"creature19","creatureRank":12,"basePriceHard":7,"basicIncomeSoftStr":"6104"},{"id":20,"creatureName":"creature20","creatureRank":13,"basePriceHard":7,"basicIncomeSoftStr":"12207"},{"id":21,"creatureName":"creature21","creatureRank":14,"basePriceHard":7,"basicIncomeSoftStr":"24414"},{"id":22,"creatureName":"creature22","creatureRank":15,"basePriceHard":8,"basicIncomeSoftStr":"48828"},{"id":23,"creatureName":"creature23","creatureRank":16,"basePriceHard":8,"basicIncomeSoftStr":"97656"},{"id":24,"creatureName":"creature24","creatureRank":17,"basePriceHard":8,"basicIncomeSoftStr":"195313"},{"id":25,"creatureName":"creature25","creatureRank":18,"basePriceHard":8,"basicIncomeSoftStr":"390625"},{"id":26,"creatureName":"creature26","creatureRank":19,"basePriceHard":9,"basicIncomeSoftStr":"781250"},{"id":27,"creatureName":"creature27","creatureRank":20,"basePriceHard":9,"basicIncomeSoftStr":"1562500"},{"id":28,"creatureName":"creature28","creatureRank":21,"basePriceHard":9,"basicIncomeSoftStr":"3125000"},{"id":29,"creatureName":"creature29","creatureRank":22,"basePriceHard":9,"basicIncomeSoftStr":"6250000"},{"id":30,"creatureName":"creature30","creatureRank":23,"basePriceHard":9,"basicIncomeSoftStr":"12500000"},{"id":31,"creatureName":"creature31","creatureRank":18,"basePriceHard":8,"basicIncomeSoftStr":"390625"},{"id":32,"creatureName":"creature32","creatureRank":19,"basePriceHard":9,"basicIncomeSoftStr":"781250"},{"id":33,"creatureName":"creature33","creatureRank":20,"basePriceHard":9,"basicIncomeSoftStr":"1562500"},{"id":34,"creatureName":"creature34","creatureRank":21,"basePriceHard":9,"basicIncomeSoftStr":"3125000"},{"id":35,"creatureName":"creature35","creatureRank":22,"basePriceHard":9,"basicIncomeSoftStr":"6250000"},{"id":36,"creatureName":"creature36","creatureRank":23,"basePriceHard":9,"basicIncomeSoftStr":"12500000"},{"id":37,"creatureName":"creature37","creatureRank":18,"basePriceHard":8,"basicIncomeSoftStr":"390625"},{"id":38,"creatureName":"creature38","creatureRank":19,"basePriceHard":9,"basicIncomeSoftStr":"781250"},{"id":39,"creatureName":"creature39","creatureRank":20,"basePriceHard":9,"basicIncomeSoftStr":"1562500"},{"id":40,"creatureName":"creature40","creatureRank":21,"basePriceHard":9,"basicIncomeSoftStr":"3125000"},{"id":41,"creatureName":"creature41","creatureRank":22,"basePriceHard":9,"basicIncomeSoftStr":"6250000"},{"id":42,"creatureName":"creature42","creatureRank":23,"basePriceHard":9,"basicIncomeSoftStr":"12500000"},{"id":43,"creatureName":"creature43","creatureRank":18,"basePriceHard":8,"basicIncomeSoftStr":"390625"},{"id":44,"creatureName":"creature44","creatureRank":19,"basePriceHard":9,"basicIncomeSoftStr":"781250"},{"id":45,"creatureName":"creature45","creatureRank":20,"basePriceHard":9,"basicIncomeSoftStr":"1562500"},{"id":46,"creatureName":"creature46","creatureRank":21,"basePriceHard":9,"basicIncomeSoftStr":"3125000"},{"id":47,"creatureName":"creature47","creatureRank":22,"basePriceHard":9,"basicIncomeSoftStr":"6250000"},{"id":48,"creatureName":"creature48","creatureRank":23,"basePriceHard":9,"basicIncomeSoftStr":"12500000"},{"id":49,"creatureName":"creature49","creatureRank":24,"basePriceHard":10,"basicIncomeSoftStr":"25000000"},{"id":50,"creatureName":"creature50","creatureRank":24,"basePriceHard":10,"basicIncomeSoftStr":"25000000"},{"id":51,"creatureName":"creature51","creatureRank":24,"basePriceHard":10,"basicIncomeSoftStr":"25000000"},{"id":52,"creatureName":"creature52","creatureRank":24,"basePriceHard":10,"basicIncomeSoftStr":"25000000"},{"id":53,"creatureName":"creature53","creatureRank":12,"basePriceHard":7,"basicIncomeSoftStr":"6104"},{"id":54,"creatureName":"creature54","creatureRank":13,"basePriceHard":7,"basicIncomeSoftStr":"12207"},{"id":55,"creatureName":"creature55","creatureRank":14,"basePriceHard":7,"basicIncomeSoftStr":"24414"},{"id":56,"creatureName":"creature56","creatureRank":15,"basePriceHard":8,"basicIncomeSoftStr":"48828"},{"id":57,"creatureName":"creature57","creatureRank":16,"basePriceHard":8,"basicIncomeSoftStr":"97656"},{"id":58,"creatureName":"creature58","creatureRank":17,"basePriceHard":8,"basicIncomeSoftStr":"195313"},{"id":59,"creatureName":"creature59","creatureRank":18,"basePriceHard":8,"basicIncomeSoftStr":"390625"},{"id":60,"creatureName":"creature60","creatureRank":19,"basePriceHard":9,"basicIncomeSoftStr":"781250"},{"id":61,"creatureName":"creature61","creatureRank":20,"basePriceHard":9,"basicIncomeSoftStr":"1562500"},{"id":62,"creatureName":"creature62","creatureRank":21,"basePriceHard":9,"basicIncomeSoftStr":"3125000"},{"id":63,"creatureName":"creature63","creatureRank":22,"basePriceHard":9,"basicIncomeSoftStr":"6250000"},{"id":64,"creatureName":"creature64","creatureRank":23,"basePriceHard":9,"basicIncomeSoftStr":"12500000"},{"id":65,"creatureName":"creature65","creatureRank":18,"basePriceHard":8,"basicIncomeSoftStr":"390625"},{"id":66,"creatureName":"creature66","creatureRank":19,"basePriceHard":9,"basicIncomeSoftStr":"781250"},{"id":67,"creatureName":"creature67","creatureRank":20,"basePriceHard":9,"basicIncomeSoftStr":"1562500"},{"id":68,"creatureName":"creature68","creatureRank":21,"basePriceHard":9,"basicIncomeSoftStr":"3125000"},{"id":69,"creatureName":"creature69","creatureRank":22,"basePriceHard":9,"basicIncomeSoftStr":"6250000"},{"id":70,"creatureName":"creature70","creatureRank":23,"basePriceHard":9,"basicIncomeSoftStr":"12500000"},{"id":71,"creatureName":"creature71","creatureRank":24,"basePriceHard":10,"basicIncomeSoftStr":"25000000"},{"id":72,"creatureName":"creature72","creatureRank":24,"basePriceHard":10,"basicIncomeSoftStr":"25000000"}]}'),l=JSON.parse('{"epochs":[{"id":1,"epochName":"epoch1","creatures":[1,2,3,4,5,6],"nextEpochs":[2],"epochLevel":1},{"id":2,"epochName":"epoch2","creatures":[7,8,9,10,11,12],"nextEpochs":[3,4,13],"epochLevel":2},{"id":3,"epochName":"epoch3","creatures":[13,14,15,16,17,18],"nextEpochs":[5,6],"epochLevel":3},{"id":4,"epochName":"epoch4","creatures":[19,20,21,22,23,24],"nextEpochs":[7,8],"epochLevel":3},{"id":5,"epochName":"epoch5","creatures":[25,26,27,28,29,30],"nextEpochs":[9],"epochLevel":4},{"id":6,"epochName":"epoch6","creatures":[31,32,33,34,35,36],"nextEpochs":[10],"epochLevel":4},{"id":7,"epochName":"epoch7","creatures":[37,38,39,40,41,42],"nextEpochs":[11],"epochLevel":4},{"id":8,"epochName":"epoch8","creatures":[43,44,45,46,47,48],"nextEpochs":[12],"epochLevel":4},{"id":9,"epochName":"epoch9","creatures":[49],"epochLevel":5},{"id":10,"epochName":"epoch10","creatures":[50],"epochLevel":5},{"id":11,"epochName":"epoch11","creatures":[51],"epochLevel":5},{"id":12,"epochName":"epoch12","creatures":[52],"epochLevel":5},{"id":13,"epochName":"epoch13","creatures":[53,54,55,56,57,58],"nextEpochs":[14,15],"epochLevel":3},{"id":14,"epochName":"epoch14","creatures":[59,60,61,62,63,64],"nextEpochs":[16],"epochLevel":4},{"id":15,"epochName":"epoch15","creatures":[65,66,67,68,69,70],"nextEpochs":[17],"epochLevel":4},{"id":16,"epochName":"epoch16","creatures":[71],"epochLevel":5},{"id":17,"epochName":"epoch17","creatures":[72],"epochLevel":5}]}'),c=JSON.parse('{"creaturePurchaseDistance":4,"adsCreaturePurchasesPerSession":999,"boostersCreatureLock":7,"mapCreatureLock":9,"incomeX2Seconds":14400,"incomeX4Seconds":180,"spinsOfferTimeMinutes":2880,"spinsOfferBonus1":8,"spinsOfferBonus2":10,"spinsOfferThreshold1":30,"spinsOfferThreshold2":120,"spinsOfferThreshold3":150}'),u=JSON.parse('{"rewardTypes":[{"type":1,"help":"хард валюта, valueStr = награда"},{"type":3,"help":"софт валюта, относительно текущей скорости заработка софт валюты, valueStr * текущую скорость = награда"},{"type":6,"help":"случайный герой из открытых в текущей эпохе, кроме топового"},{"type":7,"help":"бустер х4 софт валюты, valueInt = количество секунд"},{"type":8,"help":"бустер скидка на покупку существ, valueInt = количество секунд"},{"type":9,"help":"спины valueInt=количество"},{"type":10,"help":"существо на valueInt ниже максимального"},{"type":11,"help":"последнее магазинное существо"},{"type":12,"help":"бустер инкама х2 на valueInt секунд"}],"rewardsX2Unactive":[{"id":1,"weight":5,"type":1,"valueStr":"3"},{"id":2,"weight":15,"type":9,"valueInt":3},{"id":3,"weight":20,"type":10,"valueInt":6},{"id":4,"weight":5,"type":11},{"id":5,"weight":20,"type":3,"valueStr":"30"},{"id":6,"weight":10,"type":12,"valueInt":7200}],"rewardsX2Active":[{"id":1,"weight":5,"type":1,"valueStr":"3"},{"id":2,"weight":15,"type":9,"valueInt":3},{"id":3,"weight":20,"type":10,"valueInt":6},{"id":4,"weight":5,"type":11},{"id":5,"weight":20,"type":3,"valueStr":"30"},{"id":6,"weight":10,"type":7,"valueInt":180}],"rewardsForChoose":[{"id":1,"weight":5,"type":1,"valueStr":"3"},{"id":2,"weight":15,"type":9,"valueInt":3},{"id":5,"weight":20,"type":3,"valueStr":"30"}]}'),d=JSON.parse('{"missions":[{"id":1,"missionName":"first_mission","durationSeconds":300,"rewards":[{"type":3,"valueStr":"14400"},{"type":1,"valueStr":"10"}]},{"id":2,"missionName":"general_mission","durationSeconds":21600,"rewards":[{"type":3,"valueStr":"10800"},{"type":1,"valueStr":"5"}]},{"id":3,"missionName":"general_mission","durationSeconds":21600,"rewards":[{"type":3,"valueStr":"10800"},{"type":4,"valueStr":"1"}]},{"id":4,"missionName":"rare_mission","durationSeconds":43200,"rewards":[{"type":3,"valueStr":"18000"},{"type":1,"valueStr":"10"},{"type":4,"valueStr":"1"}]}]}'),p=JSON.parse('{"basicPlanetPriceSoftStr":"2017000","basicCreaturePriceSoftStr":"560","planets":[{"id":1,"planetName":"planet1","creaturePriceIncreaseHard":0,"priceFactorSoftStr":"1","incomeFactorSoftStr":"2","evolutionBaseSoft":2.8,"purchasesBaseSoft":1.15,"tapIncomeMultiplayer":2},{"id":2,"planetName":"planet2","creaturePriceIncreaseHard":3,"priceFactorSoftStr":"410000","incomeFactorSoftStr":"230000000","evolutionBaseSoft":4.23,"purchasesBaseSoft":1.36,"tapIncomeMultiplayer":3},{"id":3,"planetName":"planet3","creaturePriceIncreaseHard":6,"priceFactorSoftStr":"94300000000000","incomeFactorSoftStr":"52900000000000000","evolutionBaseSoft":4.9,"purchasesBaseSoft":1.4,"tapIncomeMultiplayer":5},{"id":4,"planetName":"planet4","creaturePriceIncreaseHard":9,"priceFactorSoftStr":"21689000000000000000000","incomeFactorSoftStr":"12167000000000000000000000","evolutionBaseSoft":5.68,"purchasesBaseSoft":1.45,"tapIncomeMultiplayer":10},{"id":5,"planetName":"planet5","creaturePriceIncreaseHard":12,"priceFactorSoftStr":"4988470000000000000000000000000","incomeFactorSoftStr":"2798410000000000000000000000000000","evolutionBaseSoft":6.59,"purchasesBaseSoft":1.5,"tapIncomeMultiplayer":20},{"id":6,"planetName":"planet6","creaturePriceIncreaseHard":15,"priceFactorSoftStr":"1147348100000000000000000000000000000000","incomeFactorSoftStr":"643634300000000000000000000000000000000000","evolutionBaseSoft":7.64,"purchasesBaseSoft":1.54,"tapIncomeMultiplayer":50}]}'),f=JSON.parse('{"itemIdToName":[[0,"MoneySoft1"],[1,"MoneySoft2"],[2,"Spin"],[3,"MoneyHard"],[4,"Creature1"],[5,"Creature2"]],"availableFromCollectionSize":6,"spinsMaxCount":12,"restorePeriodInSeconds":600,"restoreSpinsNumberByTime":1,"restoreSpinsNumberByAds":3,"purchaseSpinsPrice":{"priceType":1,"priceValueStr":"1"},"purchaseSpinsNumber":1,"comboRewards":[{"itemType":0,"reward":{"type":3,"valueStr":"400"}},{"itemType":1,"reward":{"type":3,"valueStr":"2000"}},{"itemType":2,"reward":{"type":9,"valueInt":3}},{"itemType":3,"reward":{"type":1,"valueStr":"5"}},{"itemType":4,"reward":{"type":10,"valueInt":4}},{"itemType":5,"reward":{"type":10,"valueInt":2}}],"noComboRewards":[{"itemType":0,"reward":{"type":3,"valueStr":"20"}},{"itemType":1,"reward":{"type":3,"valueStr":"100"}}],"sets":[{"conditions":{"spinsMin":0,"spinsMax":3},"mainRandom":[{"hasCombo":1,"itemType":0,"weight":13},{"hasCombo":1,"itemType":1,"weight":10},{"hasCombo":1,"itemType":2,"weight":1},{"hasCombo":1,"itemType":3,"weight":2},{"hasCombo":1,"itemType":4,"weight":10},{"hasCombo":1,"itemType":5,"weight":6},{"hasCombo":0,"weight":4},{"hasCombo":0,"teasering":1,"weight":14}],"nocomboRandom":[{"itemType":0,"weight":10},{"itemType":1,"weight":10},{"itemType":2,"weight":5},{"itemType":3,"weight":5},{"itemType":4,"weight":5},{"itemType":5,"weight":5}],"teaseringRandom":[{"itemType":0,"weight":5},{"itemType":1,"weight":5},{"itemType":2,"weight":10},{"itemType":3,"weight":10},{"itemType":4,"weight":5},{"itemType":5,"weight":10}]},{"conditions":{"spinsMin":4,"spinsMax":9},"mainRandom":[{"hasCombo":1,"itemType":0,"weight":12},{"hasCombo":1,"itemType":1,"weight":10},{"hasCombo":1,"itemType":2,"weight":10},{"hasCombo":1,"itemType":3,"weight":3},{"hasCombo":1,"itemType":4,"weight":10},{"hasCombo":1,"itemType":5,"weight":6},{"hasCombo":0,"weight":20},{"hasCombo":0,"teasering":1,"weight":30}],"nocomboRandom":[{"itemType":0,"weight":10},{"itemType":1,"weight":10},{"itemType":2,"weight":5},{"itemType":3,"weight":5},{"itemType":4,"weight":5},{"itemType":5,"weight":5}],"teaseringRandom":[{"itemType":0,"weight":5},{"itemType":1,"weight":5},{"itemType":2,"weight":5},{"itemType":3,"weight":10},{"itemType":4,"weight":10},{"itemType":5,"weight":10}]},{"conditions":{"spinsMin":10,"spinsMax":12},"mainRandom":[{"hasCombo":1,"itemType":0,"weight":13},{"hasCombo":1,"itemType":1,"weight":10},{"hasCombo":1,"itemType":2,"weight":1},{"hasCombo":1,"itemType":3,"weight":2},{"hasCombo":1,"itemType":4,"weight":10},{"hasCombo":1,"itemType":5,"weight":6},{"hasCombo":0,"weight":14},{"hasCombo":0,"teasering":1,"weight":4}],"nocomboRandom":[{"itemType":0,"weight":10},{"itemType":1,"weight":10},{"itemType":2,"weight":5},{"itemType":3,"weight":5},{"itemType":4,"weight":5},{"itemType":5,"weight":5}],"teaseringRandom":[{"itemType":0,"weight":7},{"itemType":1,"weight":7},{"itemType":2,"weight":1},{"itemType":3,"weight":10},{"itemType":4,"weight":10},{"itemType":5,"weight":10}]}]}'),m=JSON.parse('{"isActive":true,"duration":15,"baseClickCount":40,"victoryDurationIncrease":10,"lostDurationDecrease":20,"maxClickAmount":99999,"reward":{"valueStr":"600","type":0},"rewardMultiplyRate":3,"additionalTime":10}'),g=JSON.parse('{"upgrades":[{"upgradeType":0,"unlockCreatureId":5,"steps":[{"value":10},{"price":{"priceType":0,"priceValueStr":"3000"},"value":-1},{"price":{"priceType":0,"priceValueStr":"10000"},"value":-1},{"price":{"priceType":0,"priceValueStr":"100000"},"value":-1},{"price":{"priceType":0,"priceValueStr":"1000000"},"value":-1},{"price":{"priceType":0,"priceValueStr":"10000000"},"value":-1},{"price":{"priceType":1,"priceValueStr":"10"},"value":-1},{"price":{"priceType":1,"priceValueStr":"20"},"value":-1}]},{"upgradeType":1,"unlockCreatureId":6,"steps":[{"value":3600},{"price":{"priceType":0,"priceValueStr":"3000"},"value":3600},{"price":{"priceType":0,"priceValueStr":"50000"},"value":1800},{"price":{"priceType":0,"priceValueStr":"500000"},"value":1800},{"price":{"priceType":0,"priceValueStr":"5000000"},"value":1800},{"price":{"priceType":0,"priceValueStr":"10000000"},"value":1800},{"price":{"priceType":0,"priceValueStr":"50000000"},"value":1800},{"price":{"priceType":1,"priceValueStr":"10"},"value":1800},{"price":{"priceType":1,"priceValueStr":"20"},"value":1800},{"price":{"priceType":1,"priceValueStr":"35"},"value":1800}]},{"upgradeType":2,"unlockCreatureId":100,"steps":[]},{"upgradeType":3,"unlockCreatureId":8,"steps":[{"value":60},{"price":{"priceType":0,"priceValueStr":"50000"},"value":-2},{"price":{"priceType":0,"priceValueStr":"150000"},"value":-2},{"price":{"priceType":0,"priceValueStr":"750000"},"value":-2},{"price":{"priceType":0,"priceValueStr":"3750000"},"value":-2},{"price":{"priceType":0,"priceValueStr":"18750000"},"value":-2},{"price":{"priceType":1,"priceValueStr":"5"},"value":-2},{"price":{"priceType":1,"priceValueStr":"10"},"value":-2},{"price":{"priceType":1,"priceValueStr":"15"},"value":-2},{"price":{"priceType":1,"priceValueStr":"25"},"value":-2},{"price":{"priceType":1,"priceValueStr":"35"},"value":-2}]},{"upgradeType":4,"unlockCreatureId":9,"steps":[{"value":0},{"price":{"priceType":0,"priceValueStr":"150000"},"value":1},{"price":{"priceType":0,"priceValueStr":"750000"},"value":1},{"price":{"priceType":0,"priceValueStr":"2500000"},"value":1},{"price":{"priceType":1,"priceValueStr":"10"},"value":1},{"price":{"priceType":1,"priceValueStr":"20"},"value":1}]},{"upgradeType":9,"unlockCreatureId":9,"steps":[{"value":50}]}]}'),_=JSON.parse('{"MinSecondsToFire":604800,"MoneyBoxMultiplayer":10}');var y=i(170),v=i(7373),b=i(9677);class w{static StringsToInts(t){let e=[];for(let i=0;i<t.length;i++)e[i]=parseInt(t[i])||0;return e}static StringsToShorts(t){let e=[];for(let i=0;i<t.length;i++)e[i]=~~t[i];return e}static IntsToString(t){return[...t].join(",")}static CheckPlanarDistance(t,e,i,n,r){return(t-i)*(t-i)+(e-n)*(e-n)<r*r}static CheckPlanarDistanceXY(t,e,i){return this.CheckPlanarDistance(t.x,t.y,e.x,e.y,i)}static GetPlanarDistance(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))}static scaleBetween(t,e,i,n,r){return(i-e)*(t-n)/(r-n)+e}static DayId(t){return Number.isInteger(t)&&(t=new Date(t)),~~(""+t.getFullYear()+t.getMonth()+t.getDate())}static Format(t,...e){for(let i=0;i<e.length;i++){let n=new RegExp(`\\{${i}\\}`,"g");t=t.replace(n,e[i])}return t.match(/{(\d+)}/g)&&console.warn(`STRING missing parameters for '${t}'`),t}}class S{static Choose(t){if(t.length<2)return t[0];let e=t.reduce(((t,e)=>t+e.GetWeight()),0),i=v.o.Range(0,e),n=0;for(let e of t){for(let t=n;t<e.GetWeight()+n;t++)if(t>=i)return e;n+=e.GetWeight()}return t[0]}static ChooseReverse(t){if(t.length<2)return t[0];let e=Math.max(...t.map((t=>t.GetWeight())));for(let i of t)i.ReverseWeight=e-i.GetWeight();let i=t.reduce(((t,e)=>t+e.ReverseWeight),0),n=v.o.Range(0,i),r=0;for(let e of t){for(let t=r;t<e.ReverseWeight+r;t++)if(t>=n)return e;r+=e.ReverseWeight}}}var T=i(3162);class x extends T.p{constructor(t){super(),this.Awake(),t&&this.Init(t)}Awake(){super.Awake()}Init(t){this.fromJSON(t)}fromJSON(t){t=t||{};for(let[e,i]of Object.entries(t))this[e]=i}toJSON(){return this}}class E extends T.p{constructor(){super(),this.Config=new A,this.AppStore=new B,this.Gameplay=new W,this.Creatures=new I,this.Epochs=new P,this.Upgrades=new k,this.Planets=new R,this.Missions=new V,this.Chest=new Y,this.Slots=new $,this.InterstitialRewards=new tt,this.WelcomeBack=new it,this.TapChallenge=new C}Init(){this.Config.Init(a),this.AppStore.Init(s),this.Gameplay.Init(c),this.Creatures.Init(h),this.Epochs.Init(l),this.Planets.Init(p),this.Upgrades.Init(g),this.Missions.Init(d),this.Chest.Init(o),this.Slots.Init(f),this.InterstitialRewards.Init(u),this.WelcomeBack.Init(_),this.TapChallenge.Init(m)}GetAppStoreProductByPlatformId(t){for(let e of this.AppStore.inAppProducts)if(e.PlatformStoreId===t)return e;return null}GetInGameProductById(t){for(let e of this.AppStore.inGameProducts)if(e.id===t)return e;return null}GetAppStoreProductById(t){for(let e of this.AppStore.inAppProducts)if(e.id===t)return e;return null}toJSON(){return{Config:this.Config.toJSON(),AppStore:this.AppStore.toJSON(),Gameplay:this.Gameplay.toJSON(),Creatures:this.Creatures.toJSON(),Epochs:this.Epochs.toJSON(),Upgrades:this.Upgrades.toJSON(),Planets:this.Planets.toJSON(),Missions:this.Missions.toJSON(),Chest:this.Chest.toJSON(),Slots:this.Slots.toJSON(),InterstitialRewards:this.InterstitialRewards.toJSON(),WelcomeBack:this.WelcomeBack.toJSON(),TapChallenge:this.TapChallenge.toJSON()}}}class A extends x{Awake(){super.Awake(),this.creatureRankTimeouts=[]}GetTimeoutByCreature(t){if(this.creatureRankTimeouts&&this.creatureRankTimeouts.length>=2&&this.creatureRankTimeouts.length%2==0)for(let e=this.creatureRankTimeouts.length-2;e>=0;e-=2)if(this.creatureRankTimeouts[e]<=t)return this.creatureRankTimeouts[e+1];return this.defaultTimeout}}class I extends x{Awake(){super.Awake(),this.creatures=[],this.creaturesDic=new Map}Get(t){return this.creaturesDic.get(t)}fromJSON(t){super.fromJSON(t),this.creatures=this.creatures.map((t=>new L(t)));for(let t of this.creatures)this.creaturesDic.set(t.id,t)}toJSON(){return{creatures:this.creatures.map((t=>t.toJSON()))}}}class C extends x{Awake(){super.Awake(),this.isActive=!1,this.duration=0,this.baseClickCount=0,this.reward=new j,this.additionalTime=0,this.victoryDurationIncrease=0,this.lostDurationDecrease=0,this.maxClickAmount=0,this.rewardMultiplyRate=0}fromJSON(t){super.fromJSON(t),this.reward=new j(this.reward)}}class P extends x{Awake(){super.Awake(),this.epochs=[],this.epochById=new Map,this.epochByCreature=new Map,this.epochsByLevel=new Map}fromJSON(t){super.fromJSON(t),this.epochs=this.epochs.map((t=>new N(t)));for(let t of this.epochs){this.epochById.set(t.id,t),this.epochsByLevel.has(t.epochLevel)||this.epochsByLevel.set(t.epochLevel,[]),this.epochsByLevel.get(t.epochLevel).push(t);for(let e of t.creatures)this.epochByCreature.set(e,t);if(!t.nextEpochs||!t.nextEpochs.length){Ko.GameData.Creatures.Get(t.creatures[0]).IsFinalForm=!0}}for(let t of this.epochs)if(1!=t.epochLevel)for(let e of this.epochsByLevel.get(t.epochLevel-1))if(e.nextEpochs.includes(t.id)){t.PrevEpochId=e.id;break}}toJSON(){return{epochs:this.epochs.map((t=>t.toJSON()))}}GetNextCreature(t){for(let e=0;e<this.epochs.length;e++){let i=this.epochs[e];for(let n=0;n<i.creatures.length;n++)if(i.creatures[n]==t)return n<i.creatures.length-1?i.creatures[n+1]:e<epochs.Length-1?this.epochs[e+1].creatures[0]:-1}return-1}GetById(t){return this.epochById.get(t)}GetByCreatureId(t){return this.epochByCreature.get(t)}GetEpochsDepth(){let t=0,e=this.epochs[0];for(;null!=e;)t++,e=e.nextEpochs&&e.nextEpochs.length>0?Ko.GameData.Epochs.GetById(e.nextEpochs[0]):null;return t}GetEpochsList(t){let e=[],i=(this.GetEpochsDepth(),Ko.GameData.Epochs.GetById(t)),n=i;for(;null!=n;)e.push(n.id),n=n.nextEpochs&&n.nextEpochs.length>0?Ko.GameData.Epochs.GetById(n.nextEpochs[0]):null;for(n=i;0!=n.PrevEpochId;)n=Ko.GameData.Epochs.GetById(n.PrevEpochId),e.unshift(n.id);return e}}class R extends x{Awake(){super.Awake(),this.basicPlanetPriceSoft=0n,this.basicCreaturePriceSoft=0n,this.basicPlanetPriceSoftStr="0",this.basicCreaturePriceSoftStr="0",this.planets=[],this.planetsDic=new Map}fromJSON(t){super.fromJSON(t),this.basicPlanetPriceSoft=BigInt(this.basicPlanetPriceSoftStr),this.basicCreaturePriceSoft=BigInt(this.basicCreaturePriceSoftStr),this.planets=this.planets.map((t=>new O(t)));for(let t of this.planets)this.planetsDic.set(t.id,t)}toJSON(){return{basicPlanetPriceSoftStr:this.basicPlanetPriceSoft.toString(),basicCreaturePriceSoftStr:this.basicCreaturePriceSoft.toString(),planets:this.planets.map((t=>t.toJSON()))}}GetPlanet(t){return this.planetsDic.get(t)}}class O extends x{Awake(){super.Awake(),this.id=0,this.planetName="",this.evolutionBaseSoft=0,this.purchasesBaseSoft=0,this.creaturePriceIncreaseHard=0,this.tapIncomeMultiplayer=0,this.eventId=0,this.pricesFactorSoft=0n,this.incomeFactorSoft=0n,this.priceFactorSoftStr="0",this.incomeFactorSoftStr="0"}fromJSON(t){super.fromJSON(t),this.pricesFactorSoft=BigInt(this.priceFactorSoftStr),this.incomeFactorSoft=BigInt(this.incomeFactorSoftStr)}toJSON(){return{id:this.id,planetName:this.planetName,evolutionBaseSoft:this.evolutionBaseSoft,purchasesBaseSoft:this.purchasesBaseSoft,creaturePriceIncreaseHard:this.creaturePriceIncreaseHard,tapIncomeMultiplayer:this.tapIncomeMultiplayer,eventId:this.eventId,priceFactorSoftStr:this.pricesFactorSoft.toString(),incomeFactorSoftStr:this.incomeFactorSoft.toString()}}GetEvent(){return null}GetPrice(){let t=new G;return t.priceType=y.zc.Soft,t.priceValue=Ko.GameData.Planets.basicPlanetPriceSoft*this.pricesFactorSoft,t}}class k extends x{Awake(){super.Awake(),this.upgrades=[],this.upgradesDic=new Map}fromJSON(t){super.fromJSON(t),this.upgrades=this.upgrades.map((t=>new M(t)));for(let t of this.upgrades)this.upgradesDic.set(t.upgradeType,t)}toJSON(){return{upgrades:this.upgrades.map((t=>t.toJSON()))}}UpgradeByType(t){return this.upgradesDic.get(t)}}class M extends x{Awake(){super.Awake(),this.upgradeType="",this.steps=[],this.unlockCreatureId=0}fromJSON(t){super.fromJSON(t),this.steps=this.steps.map((t=>new D(t)))}toJSON(){return{upgradeType:this.upgradeType,steps:this.steps.map((t=>t.toJSON())),unlockCreatureId:this.unlockCreatureId}}TotalValue(t){let e=0,i=this.steps.slice(0,t+1);for(let t of i)e+=t.value;return e}}class D extends x{Awake(){super.Awake(),this.price=new G,this.value=0}fromJSON(t){super.fromJSON(t),this.price=new G(this.price)}toJSON(){return{price:this.price.toJSON(),value:this.value}}GetPrice(){let t=new G;if(t.priceType=this.price.priceType,t.priceValue=this.price.priceValue,t.priceType==y.zc.Soft){let e=Ko.GameData.Planets.GetPlanet(Ko.Player.PlanetsSave.currentPlanetId);t.priceValue*=e.pricesFactorSoft}return t}}class N extends x{get EpochIcon(){return this.icon,this.icon}Awake(){super.Awake(),this.id=0,this.epochName="",this.nextEpochs=[],this.creatures=[],this.epochLevel=0,this.PrevEpochId=0,this.spritesByPlanetsIds=new Map,this.icon=null}fromJSON(t){super.fromJSON(t)}toJSON(){return{id:this.id,epochName:this.epochName,nextEpochs:this.nextEpochs,creatures:this.creatures,epochLevel:this.epochLevel}}EpochSprite(t){return null==this.spritesByPlanetsIds&&(this.spritesByPlanetsIds=new Map),this.spritesByPlanetsIds.get(t)}}class L extends x{Awake(){super.Awake(),this.id=0,this.creatureName="",this.creatureRank=0,this.basePriceHard=0,this.basicIncomeSoft=0n,this.basicIncomeSoftStr="0",this.IsFinalForm=!1,this.sprite=null}fromJSON(t){super.fromJSON(t),this.basicIncomeSoft=BigInt(this.basicIncomeSoftStr)}toJSON(){return{id:this.id,creatureName:this.creatureName,creatureRank:this.creatureRank,basePriceHard:this.basePriceHard,basicIncomeSoftStr:this.basicIncomeSoft.toString()}}GetSoftPerSecond(){let t=Ko.GameData.Planets.GetPlanet(Ko.Player.PlanetsSave.currentPlanetId),e=this.basicIncomeSoft*t.incomeFactorSoft;return Ko.Store.VipActive?e*BigInt(Ko.GameData.AppStore.vip.softMoneyIncomeBonus):e}}class B extends x{Awake(){super.Awake(),this.inAppProducts=[],this.inGameProducts=[],this.hardAdsBonusReward=new j,this.boosters=[],this.vip=new F,this.boostersDic=new Map}fromJSON(t){super.fromJSON(t),this.inAppProducts=this.inAppProducts.map((t=>new z(t))),this.inGameProducts=this.inGameProducts.map((t=>new H(t))),this.boosters=this.boosters.map((t=>new U(t)));for(let t of this.boosters)this.boostersDic.set(t.boosterType,t);this.hardAdsBonusReward=new j(this.hardAdsBonusReward),this.vip=new F(this.vip)}toJSON(){return{inAppProducts:this.inAppProducts.map((t=>t.toJSON())),inGameProducts:this.inGameProducts.map((t=>t.toJSON())),hardAdsBonusReward:this.hardAdsBonusReward.toJSON(),boosters:this.boosters.map((t=>t.toJSON())),vip:this.vip.toJSON()}}GetBooster(t){return this.boostersDic.get(t)}GetInAppProduct(t){return this.inAppProducts.find((e=>e.id===t))}GetInGameProduct(t){return this.inGameProducts.find((e=>e.id===t))}}class F extends x{Awake(){super.Awake(),this.hardMoneyBonus=0,this.softMoneyIncomeBonus=0,this.hardMoneyDailyBonus=0}toJSON(){return{hardMoneyBonus:this.hardMoneyBonus,softMoneyIncomeBonus:this.softMoneyIncomeBonus,hardMoneyDailyBonus:this.hardMoneyDailyBonus}}}class U extends x{Awake(){super.Awake(),this.boosterType="",this.price=new G,this.durationSeconds=0}fromJSON(t){super.fromJSON(t),this.price=new G(this.price)}toJSON(){return{boosterType:this.boosterType,price:this.price.toJSON(),durationSeconds:this.durationSeconds}}}class G extends x{get priceValueStr(){return this.priceValue.toString()}set priceValueStr(t){this.priceValue=BigInt(t||0)}Awake(){super.Awake(),this.priceType="",this.priceValue=0n}fromJSON(t){super.fromJSON(t),this.priceValueStr=t.priceValueStr}toJSON(){return{priceType:this.priceType,priceValueStr:this.priceValueStr}}}class j extends x{get name(){switch(this.type){case y.E.MoneyHard:return"Gems";case y.E.MoneySoft:return"Coins";case y.E.NoAds:return"No ads";default:return""}}get realValue(){switch(this.type){case y.E.MoneyHard:if(Ko.Store.VipActive){let t=100,e=BigInt(Ko.GameData.AppStore.vip.hardMoneyBonus*t);return this.value*e/BigInt(t)}return this.value;case y.E.MoneySoft:return this.value;case y.E.NoAds:return"";case y.E.MoneySoftBySoftSpeed:return this.value*(GameManager.gameController.MoneySoftSpeed||1n);case y.E.MaxCreature:let t=Ko.Player.PlanetsSave.LastNotEventPlanet.collection.length;return t>0?Ko.Player.PlanetsSave.LastNotEventPlanet.collection[t-1]:0;case y.E.RandomCreatureFromCurrentEpoch:return"";case y.E.BoosterIncomeX4:case y.E.BoosterIncomeX2:case y.E.BoosterCreaturesDiscount:case y.E.Spins:return this.valueInt;case y.E.CreatureFromCollectionWithOffset:return Ko.Player.PlanetsSave.CurrentPlanet.GetCollectionCreatureWithOffset(this.valueInt);case y.E.LastShopCreature:let e=Ko.Player.PlanetsSave.CurrentPlanet.GetAvailableForPurchaseCreatures();return e.length>0?e[e.length-1]:0;case y.E.FirstCreatureOffer:return Ko.UI.firstCreatureOffer.RequestedCreatureId;case y.E.SkipEpochsOffer:case y.E.SpinsOffer1:case y.E.SpinsOffer2:return""}}Awake(){super.Awake(),this.type="",this.value=0n,this.valueStr="0",this.valueInt=0}fromJSON(t){super.fromJSON(t),this.value=BigInt(this.valueStr||0)}toJSON(){return{type:this.type,valueStr:this.value.toString(),valueInt:this.valueInt}}toString(){return`${y.E[this.type]} ${this.realValue}`.trim()}Take(t,e=!1){let i=Ko.UI?Ko.UI.GetGameScreen():y.JD.empty,{valueInt:n}=this;switch(console.log("TAKE REWARD",this.toString()),this.type){case y.E.MoneyHard:let r=e&&Ko.Store.VipActive?this.realValue:this.value;Ko.Player.AddMoney(y.zc.Hard,r,GameCategory.empty,i,t);break;case y.E.MoneySoft:Ko.Player.AddMoney(y.zc.Soft,this.value);break;case y.E.NoAds:Ko.Player.NoAds=1;break;case y.E.MoneySoftBySoftSpeed:let s=0==GameManager.gameController.MoneySoftSpeed?1:GameManager.gameController.MoneySoftSpeed;Ko.Player.AddMoney(y.zc.Soft,this.value*s);break;case y.E.MaxCreature:let o=Ko.Player.PlanetsSave.LastNotEventPlanet.collection.length;if(o>0){let t=Ko.Player.PlanetsSave.LastNotEventPlanet.collection[o-1];Ko.Player.PlanetsSave.LastNotEventPlanet.AddCreature(t,!0),GameManager.UpdateCurrentPlanet()}break;case y.E.RandomCreatureFromCurrentEpoch:let a=GameManager.gameView.selectedEpochId,h=Ko.Player.PlanetsSave.CurrentPlanet,l=[];for(let t of h.collection){let e=Ko.GameData.Epochs.GetByCreatureId(t).id===a,i=h.collection[h.collection.length-1]==t;e&&(i&&0!=l.length||l.push(t))}if(l.length>0){let t=l[~~v.o.Range(0,l.length-1)];GameManager.gameController.AddCreatureRandomPosition(t,!1)}break;case y.E.BoosterIncomeX4:Ko.Boosters.AddBoosterTime(BoosterType.IncomeX4,n);break;case y.E.BoosterIncomeX2:Ko.Boosters.AddBoosterTime(BoosterType.Income,n);break;case y.E.BoosterCreaturesDiscount:Ko.Boosters.AddBoosterTime(BoosterType.CreaturesDiscount,n);break;case y.E.Spins:Ko.Player.AddMoney(y.zc.Spins,n);break;case y.E.CreatureFromCollectionWithOffset:let c=Ko.Player.PlanetsSave.CurrentPlanet.GetCollectionCreatureWithOffset(n);GameManager.gameController.AddCreatureRandomPosition(c,!1);break;case y.E.LastShopCreature:let u=Ko.Player.PlanetsSave.CurrentPlanet.GetAvailableForPurchaseCreatures();if(u.length>0){let t=u[u.length-1];GameManager.gameController.AddCreatureRandomPosition(t,!1)}break;case y.E.FirstCreatureOffer:for(let t=0;t<6;t++)GameManager.gameController.AddCreatureRandomPosition(Ko.UI.firstCreatureOffer.RequestedCreatureId,!1);Ko.Player.Timers.firstCreatureOfferTime=0;break;case y.E.SkipEpochsOffer:for(let t=1;t<=2;t++){let e=Ko.GameData.Epochs.GetById(t);for(let t of e.creatures)Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(t)||Ko.Player.PlanetsSave.CurrentPlanet.collection.push(t);Ko.Player.PlanetsSave.CurrentPlanet.epochs.includes(t)||Ko.Player.PlanetsSave.CurrentPlanet.epochs.push(t),2==e.id&&(GameManager.gameController.AddCreatureRandomPosition(e.creatures[e.creatures.length-1],!1),GameManager.gameController.AddCreatureRandomPosition(e.creatures[e.creatures.length-1],!1))}Ko.Player.CallOnChanged();break;case y.E.SpinsOffer1:Ko.Player.MaxSpinsBonus=Ko.GameData.Gameplay.spinsOfferBonus1,Ko.Player.AddMoney(y.zc.Spins,Ko.Player.MaxSpinsNumber),Ko.Player.SpinsOfferType=SpinOfferType.Second,Ko.Player.SpinsUsed=0;break;case y.E.SpinsOffer2:Ko.Player.MaxSpinsBonus=Ko.GameData.Gameplay.spinsOfferBonus1+Ko.GameData.Gameplay.spinsOfferBonus2,Ko.Player.AddMoney(y.zc.Spins,Ko.Player.MaxSpinsNumber),Ko.Player.SpinsOfferType=SpinOfferType.Complete,Ko.Player.SpinsUsed=0}return!0}}class H extends x{Awake(){super.Awake(),this.rewards=[],this.id="",this.price=new G}fromJSON(t){super.fromJSON(t),this.price=new G(this.price),this.rewards=this.rewards.map((t=>new j(t)))}toJSON(){return{rewards:this.rewards.map((t=>t.toJSON())),id:this.id,price:this.price.toJSON()}}}class z extends x{get PlatformStoreId(){return""}Awake(){super.Awake(),this.rewards=[],this.id=""}fromJSON(t){super.fromJSON(t),this.rewards=this.rewards.map((t=>new j(t)))}toJSON(){return{rewards:this.rewards.map((t=>t.toJSON())),id:this.id}}}class W extends x{Awake(){super.Awake(),this.creaturePurchaseDistance=0,this.adsCreaturePurchasesPerSession=0,this.boostersCreatureLock=0,this.mapCreatureLock=0,this.incomeX2Seconds=0,this.incomeX4Seconds=0,this.spinsOfferTimeMinutes=0,this.spinsOfferBonus1=0,this.spinsOfferBonus2=0,this.spinsOfferThreshold1=0,this.spinsOfferThreshold2=0,this.spinsOfferThreshold3=0}toJSON(){return{creaturePurchaseDistance:this.creaturePurchaseDistance,adsCreaturePurchasesPerSession:this.adsCreaturePurchasesPerSession,boostersCreatureLock:this.boostersCreatureLock,mapCreatureLock:this.mapCreatureLock,incomeX2Seconds:this.incomeX2Seconds,incomeX4Seconds:this.incomeX4Seconds,spinsOfferTimeMinutes:this.spinsOfferTimeMinutes,spinsOfferBonus1:this.spinsOfferBonus1,spinsOfferBonus2:this.spinsOfferBonus2,spinsOfferThreshold1:this.spinsOfferThreshold1,spinsOfferThreshold2:this.spinsOfferThreshold2,spinsOfferThreshold3:this.spinsOfferThreshold3}}}class V extends x{Awake(){super.Awake(),this.missions=[],this.missionsDic=new Map}fromJSON(t){super.fromJSON(t),this.missions=this.missions.map((t=>new X(t)));for(let t of this.missions)this.missionsDic.set(t.id,t)}toJSON(){return{missions:this.missions.map((t=>t.toJSON()))}}GetMission(t){return this.missionsDic.get(t)}}class X extends x{get MissionSprite(){return this.sprite,this.sprite}Awake(){super.Awake(),this.id=0,this.durationSeconds=0,this.missionName="",this.rewards=[],this.sprite=null}fromJSON(t){super.fromJSON(t),this.rewards=this.rewards.map((t=>new j(t)))}toJSON(){return{id:this.id,durationSeconds:this.durationSeconds,missionName:this.missionName,rewards:this.rewards.map((t=>t.toJSON()))}}}class Y extends x{Awake(){super.Awake(),this.rewards=[],this.lastItem=null}fromJSON(t){super.fromJSON(t),this.rewards=this.rewards.map((t=>new q(t)))}toJSON(){return{rewards:this.rewards.map((t=>t.toJSON()))}}Get(t){for(let e of this.rewards)if(e.id==t)return e;return null}GetRandomReverse(){return S.ChooseReverse(this.rewards)}GetRandom(){let t=S.Choose(this.rewards),e=0;for(;t==this.lastItem&&e<5;)t=S.Choose(this.rewards),e++;return this.lastItem=t,t}GetItemsByType(t){let e=[];for(let i of this.rewards)i.type==t&&e.push(i);return e}}class q extends j{Awake(){super.Awake(),this.id=0,this.weight=0,this.ReverseWeight=0}GetWeight(){return this.weight}toJSON(){return{...super.toJSON(),id:this.id,weight:this.weight}}}class $ extends x{Awake(){super.Awake(),this.availableFromCollectionSize=0,this.spinsMaxCount=0,this.restorePeriodInSeconds=0,this.restoreSpinsNumberByTime=0,this.restoreSpinsNumberByAds=0,this.purchaseSpinsPrice=new G,this.purchaseSpinsNumber=0,this.sets=[],this.comboRewards=[],this.noComboRewards=[],this.helpComboRewards=new Map,this.helpNoComboRewards=new Map}fromJSON(t){super.fromJSON(t),this.purchaseSpinsPrice=new G(this.purchaseSpinsPrice),this.sets=this.sets.map((t=>new J(t))),this.comboRewards=this.comboRewards.map((t=>new K(t))),this.noComboRewards=this.noComboRewards.map((t=>new K(t)));for(let t of this.comboRewards)this.helpComboRewards.set(t.itemType,t);for(let t of this.noComboRewards)this.helpNoComboRewards.set(t.itemType,t)}toJSON(){return{availableFromCollectionSize:this.availableFromCollectionSize,spinsMaxCount:this.spinsMaxCount,restorePeriodInSeconds:this.restorePeriodInSeconds,restoreSpinsNumberByTime:this.restoreSpinsNumberByTime,restoreSpinsNumberByAds:this.restoreSpinsNumberByAds,purchaseSpinsPrice:this.purchaseSpinsPrice.toJSON(),purchaseSpinsNumber:this.purchaseSpinsNumber,sets:this.sets.map((t=>t.toJSON())),comboRewards:this.comboRewards.map((t=>t.toJSON())),noComboRewards:this.noComboRewards.map((t=>t.toJSON()))}}GetComboRewardForItem(t){return this.helpComboRewards.get(t)}GetNoComboRewardForItem(t){return this.helpNoComboRewards.get(t)}GetNoComboRewardForItems(t){let e=0n;for(let i of t){let t=Ko.GameData.Slots.GetNoComboRewardForItem(i);!t||t.itemType!=y.Wn.MoneySoft1&&t.itemType!=y.Wn.MoneySoft2||(e+=t.reward.value)}if(e>0n)return new K({itemType:y.Wn.MoneySoft1,reward:{type:y.E.MoneySoftBySoftSpeed,valueStr:e.toString()}})}GetSet(t){return this.sets.find((e=>e.conditions.spinsMin<=t&&e.conditions.spinsMax>=t))||this.sets[this.sets.length-1]}GetMainRandom(t){let e=this.GetSet(t);return S.Choose(e.mainRandom)}GetNoComboRandom(t){let e=this.GetSet(t);return S.Choose(e.nocomboRandom)}GetNoComboRandomExcept(t,e){let i=this.GetSet(t).nocomboRandom.filter((t=>t.itemType!==e));return S.Choose(i)}GetTeaseringItem(t){let e=this.GetSet(t);return S.Choose(e.teaseringRandom)}}class K extends x{Awake(){super.Awake(),this.itemType="",this.reward=new j}fromJSON(t){super.fromJSON(t),this.reward=new j(this.reward)}toJSON(){return{itemType:this.itemType,reward:this.reward.toJSON()}}}class J extends x{Awake(){super.Awake(),this.conditions=new Q,this.mainRandom=[],this.nocomboRandom=[],this.teaseringRandom=[]}fromJSON(t){super.fromJSON(t),this.conditions=new Q(this.conditions),this.mainRandom=this.mainRandom.map((t=>new Z(t))),this.nocomboRandom=this.nocomboRandom.map((t=>new Z(t))),this.teaseringRandom=this.teaseringRandom.map((t=>new Z(t)))}toJSON(){return{conditions:this.conditions.toJSON(),mainRandom:this.mainRandom.map((t=>t.toJSON())),nocomboRandom:this.nocomboRandom.map((t=>t.toJSON())),teaseringRandom:this.teaseringRandom.map((t=>t.toJSON()))}}}class Z extends x{get HasCombo(){return 1==this.hasCombo}get Teasering(){return 1==this.teasering}Awake(){super.Awake(),this.teasering=0,this.hasCombo=0,this.itemType="",this.weight=0,this.ReverseWeight=0}toJSON(){return{teasering:this.teasering,hasCombo:this.hasCombo,itemType:this.itemType,weight:this.weight}}GetWeight(){return this.weight}}class Q extends x{Awake(){super.Awake(),this.spinsMin=0,this.spinsMax=0}toJSON(){return{spinsMin:this.spinsMin,spinsMax:this.spinsMax}}}class tt extends x{Awake(){super.Awake(),this.rewardsX2Unactive=[],this.rewardsX2Active=[],this.rewardsForChoose=[]}fromJSON(t){super.fromJSON(t),this.rewardsX2Unactive=this.rewardsX2Unactive.map((t=>new et(t))),this.rewardsX2Active=this.rewardsX2Active.map((t=>new et(t))),this.rewardsForChoose=this.rewardsForChoose.map((t=>new et(t)))}toJSON(){return{rewardsX2Unactive:this.rewardsX2Unactive.map((t=>t.toJSON())),rewardsX2Active:this.rewardsX2Active.map((t=>t.toJSON())),rewardsForChoose:this.rewardsForChoose.map((t=>t.toJSON()))}}}class et extends j{Awake(){super.Awake(),this.id=0,this.weight=0,this.ReverseWeight=0}toJSON(){return{...super.toJSON(),id:this.id,weight:this.weight}}GetWeight(){return this.weight}}class it extends x{Awake(){super.Awake(),this.MinSecondsToFire=0,this.MoneyBoxMultiplayer=0}toJSON(){return{MinSecondsToFire:this.MinSecondsToFire,MoneyBoxMultiplayer:this.MoneyBoxMultiplayer}}}class nt extends x{static get GLOBAL_VERSION_VALUE(){return 76}_changed=!1;get MaxSpinsBonus(){return this.PlanetsSave.MaxSpinsBonus}set MaxSpinsBonus(t){this.PlanetsSave.MaxSpinsBonus=t}get SpinsUsed(){return this.PlanetsSave.SpinsUsed}set SpinsUsed(t){this.PlanetsSave.SpinsUsed=t}get SpinsOfferType(){return this.PlanetsSave.SpinsOfferType}set SpinsOfferType(t){this.PlanetsSave.SpinsOfferType=t}get MaxSpinsNumber(){return this.PlanetsSave.MaxSpinsBonus+Ko.GameData.Slots.spinsMaxCount}get MoneySoftStr(){return this.MoneySoft.toString()}set MoneySoftStr(t){this.MoneySoft=BigInt(t||0)}get MoneyHardStr(){return this.MoneyHard.toString()}set MoneyHardStr(t){this.MoneyHard=BigInt(t||0)}get CollectionCreatures(){let t=new Set;for(let e of this.PlanetsSave.planets)for(let i of e.collection)t.add(i);return[...t]}Awake(){super.Awake(),this.Initialized=!1,this.DefaultData=!1,this.MoneySoft=0n,this.MoneyHard=0n,this.SpinsNumber=0,this.Missions=new at,this.Timers=new rt,this.PlanetsSave=new ct,this.TapChallengeSave=new ot,this.NoAds=!1,this.StarterPack=0,this.Version=0,this.GlobalVersion=0}fromJSON(t){super.fromJSON(t),this.Missions=new at(this.Missions),this.Timers=new rt(this.Timers),this.PlanetsSave=new ct(this.PlanetsSave),this.TapChallengeSave=new ot(this.TapChallengeSave),this.MoneySoft=BigInt(t.MoneySoftStr||0),this.MoneyHard=BigInt(t.MoneyHardStr||0),this.Initialized=!0,this.NoAds=!!t.NoAds}toJSON(){return{NoAds:!!this.NoAds,MoneySoftStr:this.MoneySoftStr,MoneyHardStr:this.MoneyHardStr,SpinsNumber:this.SpinsNumber,Missions:this.Missions.toJSON(),Timers:this.Timers.toJSON(),PlanetsSave:this.PlanetsSave.toJSON(),TapChallengeSave:this.TapChallengeSave.toJSON(),StarterPack:this.StarterPack,Version:this.GlobalVersion,GlobalVersion:this.GlobalVersion}}DefaultStart(){Ko.DeleteAllPlayerPrefs();const t={DefaultData:!0,PlanetsSave:{},Timers:{},Missions:{},TapChallengeSave:{},MoneySoftStr:"0",MoneyHardStr:"0",SpinsNumber:this.MaxSpinsNumber,NoAds:0,StarterPack:0,Version:0,GlobalVersion:76};this.Init(t),this.PlanetsSave.MaxSpinsBonus=0,this.PlanetsSave.AddPlanet(1,!1),this.PlanetsSave.SetCurrentPlanet(1,!1)}CopyPlayerFrom(t){this.Init(t)}ClearTimers(){if(this.Timers&&this.Timers.timers)for(let t=this.Timers.timers.length-1;t>=0;t--){let e=this.Timers.timers[t];if(e.IsFinished){this.Missions&&this.Missions.missionInProgress&&this.Missions.missionInProgress.timerId==e.tId||this.Timers.timers.splice(t,1)}}}CallOnMergeBonus(){this.emit("MergeBonus")}CallOnChanged(){this.Version++,this._changed=!0}EmitOnChanged(){this._changed&&this.emit("Changed"),this._changed=!1}CallOnNewCreatureInCollection(t){this.emit("NewCreatureInCollection",t)}AddMoney(t,e,i="",n="",r=""){let s=i&&n&&r;switch(e=BigInt(~~e),t){case y.zc.Hard:console.log("ADD DIAMONDS",e),this.MoneyHard+=e,s&&Ko.Analytics.SendHardEvent(i,n,r,Number(e));break;case y.zc.Soft:this.MoneySoft+=e;break;case y.zc.Spins:console.log("ADD SPINS",e),this.SpinsNumber=Math.max(0,Math.min(this.MaxSpinsNumber,this.SpinsNumber+Number(e)))}this.CallOnChanged()}EnoughMoney(t,e){switch("object"==typeof t&&t.priceValue&&(e=t.priceValue,t=t.priceType),t){case y.zc.Hard:return this.MoneyHard>=e;case y.zc.Soft:return this.MoneySoft>=e;case y.zc.Spins:return this.SpinsNumber>=e}return!1}SpendMoney(t,...e){let i=t;"object"==typeof t&&t&&t.priceValue&&(e.unshift(t.priceValue),i=t.priceType);let[n,r="",s="",o=""]=e;if(console.log("SPEND:",i,n,r,s,o),!this.EnoughMoney(i,n))return!1;n=BigInt(~~n);let a=r&&s&&o;switch(i){case y.zc.Hard:this.MoneyHard-=n,a&&Ko.Analytics.SendHardEvent(r,s,o,-Number(n));break;case y.zc.Soft:this.MoneySoft-=n,a&&Ko.Analytics.SendSoftEvent(r,s,o,Number(n));break;case y.zc.Spins:this.SpinsNumber>=Ko.Player.MaxSpinsNumber&&(Ko.Player.Timers.LastSpinsRestoreTicks=Ko.Time.serverTime),this.SpinsNumber-=Number(n)}return this.CallOnChanged(),!0}IsEpochLocked(t){let e=this.getNextEpochs(t),i=!0;for(let t of e){let e=!1;for(let i of Ko.Player.PlanetsSave.planets)i.epochs.includes(t)&&(e=!0);e||(i=!1)}return i}getNextEpochs(t,e=new Set){let i=Ko.GameData.Epochs.GetById(t);if(i.nextEpochs)for(let t of i.nextEpochs)e.add(t),this.getNextEpochs(t,e);return[...e]}}class rt extends x{get registrationTime(){return this.t0}set registrationTime(t){this.t0=t}get lastActionTime(){return this.t1}set lastActionTime(t){this.t1=t}get starterPackTime(){return this.t2}set starterPackTime(t){this.t2=t}get firstCreatureOfferTime(){return this.t3}set firstCreatureOfferTime(t){this.t3=t}get spinsOfferTime(){return this.t4}set spinsOfferTime(t){this.t4=t}get RestoreSpinsByAdsDay(){return this.sdid}set RestoreSpinsByAdsDay(t){this.sdid=t}get SlotsOpened(){return!!this.s}set SlotsOpened(t){this.s=~~!!t}get LastSpinsRestoreTicks(){return this.lsr}set LastSpinsRestoreTicks(t){this.lsr=t}get TicksFromLastSpinsRestore(){return Ko.Time.serverTime-this.lsr}Awake(){super.Awake(),this.nextTimerId=0,this.t0=0,this.t1=0,this.t2=0,this.t3=0,this.t4=0,this.ts=0,this.ir=0,this.sdid=0,this.s=0,this.sb=0,this.st=0,this.lt=0,this.sn=0,this.vipDailyRewards=[],this.vipActivationTime=0,this.l4b=0,this.l2b=0,this.lsr=0,this.incomeBoosterTimerId=0,this.incomeX4BoosterTimerId=0,this.discountBoosterTimerId=0,this.bubbleBoosterTimerId=0,this.timers=[],this.timersById=new Map}fromJSON(t){super.fromJSON(t),this.timers=this.timers.map((t=>new st(t)))}toJSON(){return{nextTimerId:this.nextTimerId,t0:this.t0,t1:this.t1,t2:this.t2,t3:this.t3,t4:this.t4,ts:this.ts,ir:this.ir,sdid:this.sdid,s:this.s,sb:this.sb,st:this.st,lt:this.lt,sn:this.sn,vipDailyRewards:this.vipDailyRewards,vipActivationTime:this.vipActivationTime,l4b:this.l4b,l2b:this.l2b,lsr:this.lsr,incomeBoosterTimerId:this.incomeBoosterTimerId,incomeX4BoosterTimerId:this.incomeX4BoosterTimerId,discountBoosterTimerId:this.discountBoosterTimerId,bubbleBoosterTimerId:this.bubbleBoosterTimerId,timers:this.timers.map((t=>t.toJSON()))}}OnVipTaken(){this.vipDailyRewards=[Ko.Time.DayUniqId],Ko.Player.CallOnChanged()}IsVipTakenToday(){if(!this.vipDailyRewards)return!1;if(!Ko.Time.Initialized)return!1;Ko.Time.TicksToDayId(this.vipActivationTime);return this.vipDailyRewards.includes(Ko.Time.DayUniqId)}AddTimer(t=0){Ko.Player.ClearTimers();let e=new st;return e.tId=++this.nextTimerId,e.tTargetSeconds=e.tSeconds=t,this.timers.push(e),this.timersById.set(e.tId,e),Ko.Player.CallOnChanged(),e}RemoveTimer(t){this.timers=this.timers.filter((e=>e.tId!=t)),this.timersById.delete(t)}GetTimerById(t){if(this.timersById.has(t))return this.timersById.get(t);for(let e of this.timers)if(e.tId==t)return e;return null}TimeReset(){for(let t of this.timers)t.IsFinished||(t.tSeconds=t.tTargetSeconds=120,t.tMinusSeconds=0)}GetBoosterTimer(t){switch(t){case y.nA.BubbleTime:return this.GetTimerById(this.bubbleBoosterTimerId);case y.nA.CreaturesDiscount:return this.GetTimerById(this.discountBoosterTimerId);case y.nA.Income:return this.GetTimerById(this.incomeBoosterTimerId);case y.nA.IncomeX4:return this.GetTimerById(this.incomeX4BoosterTimerId)}}AddBoosterTimer(t,e){let i=this.AddTimer(t);switch(e){case y.nA.BubbleTime:this.bubbleBoosterTimerId=i.tId;break;case y.nA.CreaturesDiscount:this.discountBoosterTimerId=i.tId;break;case y.nA.Income:this.incomeBoosterTimerId=i.tId;break;case y.nA.IncomeX4:this.incomeX4BoosterTimerId=i.tId}return i}}class st extends x{get IsFinished(){return this.SecondsLeft<=0}get SecondsLeft(){return~~this.tSeconds-~~this.tMinusSeconds}get TicksLeft(){return this.SecondsLeft*this.ticksInSecond}AddSeconds(t){this.tTargetSeconds+=t,this.tSeconds+=t,Ko.Player.CallOnChanged()}MinusSeconds(t){this.tMinusSeconds+=t,Ko.Player.CallOnChanged()}InitializeStartTime(t){this.tStart||(this.lastTUpdate=t,t-=(this.tTargetSeconds-this.tSeconds)*this.ticksInSecond,this.tStart=t),Ko.Player.CallOnChanged()}StepServerTime(t){this.lastTUpdate=t,this.tSeconds=this.tTargetSeconds-(t-this.tStart)/1e3,Ko.Player.CallOnChanged()}Step(t){this.tSeconds-=t,Ko.Player.CallOnChanged()}Awake(){super.Awake(),this.ticksInSecond=1e7,this.tId=0,this.tTargetSeconds=0,this.tSeconds=0,this.tStart=0,this.lastTUpdate=0,this.tMinusSeconds=0}toJSON(){return{tId:this.tId,tTargetSeconds:this.tTargetSeconds,tSeconds:this.tSeconds,tStart:this.tStart,lastTUpdate:this.lastTUpdate,tMinusSeconds:this.tMinusSeconds}}}class ot extends x{Awake(){super.Awake(),this.challengesLostCount=0,this.challengesWinedCount=0,this.challengesStarted=0}toJSON(){return{challengesLostCount:this.challengesLostCount,challengesWinedCount:this.challengesWinedCount,challengesStarted:this.challengesStarted}}ChallengeStart(){this.challengesStarted++}ChallengeWin(){this.challengesWinedCount++}ChallengeLost(){this.challengesLostCount++}}class at extends x{Awake(){super.Awake(),this.missionInProgress=null,this.nextMissionSavedId=0,this.tutorialMissionComplete=0}fromJSON(t){super.fromJSON(t),this.missionInProgress&&(this.missionInProgress=new ht(this.missionInProgress))}toJSON(){return{missionInProgress:this.missionInProgress?this.missionInProgress.toJSON():null,nextMissionSavedId:this.nextMissionSavedId,tutorialMissionComplete:this.tutorialMissionComplete}}IsTutorial(){return 0==this.tutorialMissionComplete}HasActiveMission(){return this.missionInProgress&&this.missionInProgress.missionSaveId}IsInProgress(){if(!this.HasActiveMission())return!1;let t=Ko.Player.Timers.GetTimerById(this.missionInProgress.timerId);return t&&!t.IsFinished}CreateMission(t){let e=Ko.GameData.Missions.GetMission(t),i=new ht;i.missionSaveId=++this.nextMissionSavedId,i.missionId=t,i.timerId=Ko.Player.Timers.AddTimer(e.durationSeconds).tId,this.missionInProgress=i,Ko.Player.CallOnChanged()}FinishMission(){this.missionInProgress=null,this.tutorialMissionComplete=1,Ko.Player.CallOnChanged()}MinusTime(t){if(this.HasActiveMission()){var e=Ko.Player.Timers.GetTimerById(this.missionInProgress.timerId);e&&(e.MinusSeconds(t),Ko.Player.CallOnChanged())}}}class ht extends x{Awake(){super.Awake(),this.missionSaveId=0,this.missionId=0,this.timerId=0}toJSON(){return{missionSaveId:this.missionSaveId,missionId:this.missionId,timerId:this.timerId}}}class lt extends x{get step(){return this.bubbles<3?this.bubbles:this.merged?this.creatures?this.creature?this.spins?this.spin?this.map?this.missions?this.mission?NaN:10:9:8:7:6:5:4:3}Awake(){super.Awake(),this.bubbles=0,this.merged=!1,this.creatures=!1,this.creature=!1,this.spin=!1,this.map=!1,this.missions=!1,this.mission=!1}toJSON(){return{bubbles:this.bubbles,merged:this.merged,creatures:this.creatures,creature:this.creature,spins:this.spins,spin:this.spin,map:this.map,missions:this.missions,mission:this.mission}}}class ct extends x{get LastNotEventPlanet(){return this.LastPlanet}get LastPlanet(){return this.planets[this.planets.length-1]}get CurrentPlanet(){return this.GetPlanet(this.currentPlanetId)}get openedEpochs(){let t=new Set;for(let e of this.planets)for(let i of e.epochs)t.add(i);return[...t]}Awake(){super.Awake(),this.planets=[],this.collection=[],this.completedEvents=[],this.currentPlanetId=0,this.TutorSave=new lt,this.MaxSpinsBonus=0,this.SpinsUsed=0,this.SpinsOfferType=y.fD.FirstLevel1,this.planetsDic=new Map}fromJSON(t){super.fromJSON(t),this.planets=(this.planets||[]).map((t=>new ut(t))),this.TutorSave=new lt(this.TutorSave);for(let t of this.planets)this.planetsDic.set(t.planetId,t);this.currentPlanetId>100&&(this.currentPlanetId=1)}toJSON(){return{planets:this.planets.map((t=>t.toJSON())),collection:this.collection,completedEvents:this.completedEvents,currentPlanetId:this.currentPlanetId,TutorSave:this.TutorSave.toJSON(),MaxSpinsBonus:this.MaxSpinsBonus,SpinsUsed:this.SpinsUsed,SpinsOfferType:this.SpinsOfferType}}AddBubble(){this.CurrentPlanet.bubbles++,Ko.Player.CallOnChanged()}RemoveCreature(t){let e=this.CurrentPlanet.creatures.indexOf(t);e>=0&&this.CurrentPlanet.creatures.splice(e,1),Ko.Player.CallOnChanged()}RemoveBubble(){this.CurrentPlanet.bubbles--,Ko.Player.CallOnChanged()}GetPlanet(t){if(this.planetsDic&&this.planetsDic.has(t))return this.planetsDic.get(t);if(this.planets)for(let e of this.planets)if(e.planetId===t)return e;return null}AddPlanet(t,e=!0,i=1){if(this.planetsDic.has(t))return;for(let e of this.planets)if(e.planetId===t)return;let n=new ut({planetId:t},i);this.planets.push(n),this.planetsDic.set(t,n),Ko.Analytics.SendPlanetUnlockEvent(t),e&&Ko.Player&&Ko.Player.CallOnChanged()}RemovePlanet(t,e=!0){if(!planetsDic.ContainsKey(t)||0==t)return;let i=-1;for(let e=0;e<this.planets.length;e++)if(this.planets[e].planetId===t){i=e;break}Ko.WaitBefore(1,(()=>{i>=0&&(this.planetsDic.delete(t),this.planets.splice(i,1),e&&Ko.Player&&Ko.Player.CallOnChanged())}))}SetCurrentPlanet(t,e=!0){this.CurrentPlanet&&this.CurrentPlanet.off("EpochUnlocked"),this.currentPlanetId=t,Ko.Player.emit("CurrentPlanetChanged"),e&&Ko.Player.CallOnChanged(),Ko.UI.skipEpochsOffer.Check(),Ko.UI.game.rightPanel.skipEpochsOfferBtn.Check(),this.CurrentPlanet.on("EpochUnlocked",(t=>this.emit("EpochUnlocked",t)))}HasPlanet(t){for(let e of this.planets)if(e.planetId===t)return!0;return!1}GetUpgradeProgress(t){return this.CurrentPlanet.GetUpgradeProgress(t)}Upgrade(t,e=void 0){this.CurrentPlanet.Upgrade(t,e)}EpochCanBeChosen(t){let e=Ko.GameData.Epochs.GetById(t);if(!e)return!1;if(!this.openedEpochs.includes(e.id))return!0;for(let t of e.nextEpochs)if(this.EpochCanBeChosen(t))return!0;return!1}}class ut extends x{constructor(t,e=1){super(t),this.epochs.includes(e)||this.epochs.push(e),Ko.Analytics.SendEpochUnlockEvent(e,this.planetId)}get EventId(){return Ko.GameData.Planets.GetPlanet(Ko.Player.PlanetsSave.currentPlanetId).eventId}get StartEpoch(){return this.epochs.length>0?this.epochs[0]:1}get mergeProgressTarget(){let t=Ko.Player.PlanetsSave.GetUpgradeProgress(y.Tq.TapChallengeMergeBonus),e=Ko.GameData.Upgrades.UpgradeByType(y.Tq.TapChallengeMergeBonus);return t.upgradeIndex>0?e.TotalValue(t.upgradeIndex)-5*(this.planetId-1):0}get mergeProgressPercentage(){return Math.max(0,Math.min(1,this.mergeProgress/this.mergeProgressTarget))}Awake(){super.Awake(),this.planetId=0,this.creatures=[],this.creaturesInBox=[],this.creaturePurchases=[],this.collection=[],this.epochs=[],this.bubbles=0,this.upgradesProgress=[],this.mergeProgress=0,this.mergeCount=0,this.eventMoneySoft=0n,this.eventMoneySoftStr="0",this.availableCreaturesForPurchase=[]}fromJSON(t){super.fromJSON(t),this.eventMoneySoft=BigInt(this.eventMoneySoftStr||0),this.creaturePurchases=this.creaturePurchases.map((t=>new pt(t))),this.upgradesProgress=this.upgradesProgress.map((t=>new dt(t))),Ko.GameData.TapChallenge.isActive&&this.collection.includes(Ko.GameData.Upgrades.UpgradeByType(y.Tq.TapChallengeMergeBonus).unlockCreatureId)&&0==this.GetUpgradeProgress(y.Tq.TapChallengeMergeBonus).upgradeIndex&&this.Upgrade(y.Tq.TapChallengeMergeBonus)}toJSON(){return{planetId:this.planetId,creatures:this.creatures,creaturesInBox:this.creaturesInBox,creaturePurchases:this.creaturePurchases.map((t=>t.toJSON())),collection:this.collection,epochs:this.epochs,bubbles:this.bubbles,upgradesProgress:this.upgradesProgress.map((t=>t.toJSON())),mergeProgress:this.mergeProgress,mergeCount:this.mergeCount,eventMoneySoftStr:this.eventMoneySoft.toString()}}GetBankCreatureWithOffset(t){let e=this.GetAvailableForPurchaseCreatures(),i=0;if(0==e.length)i=1;else{i=e[Math.max(0,e.length-1-t)]}return i}GetCollectionCreatureWithOffset(t){let e=this.collection,i=0;if(0==e.length)i=1;else{i=e[Math.max(0,e.length-1-t)]}return i}RemoveBoxCreature(t){if(this.creaturesInBox){let e=this.creaturesInBox.indexOf(t);e>=0&&this.creaturesInBox.splice(e,1),Ko.Player.CallOnChanged()}}AddCreature(t,e=!1){this.creatures.push(t);let i=Ko.GameData.Creatures.Get(t);if(e&&(this.creaturesInBox||(this.creaturesInBox=[]),this.creaturesInBox.push(t)),Ko.Player.PlanetsSave.collection.includes(t)||(Ko.Player.PlanetsSave.collection.push(t),Ko.Player.CallOnNewCreatureInCollection(t),t>=Ko.GameData.Config.starterPackCreatureId&&Ko.Time.Initialized&&0==Ko.Player.Timers.starterPackTime&&(Ko.Player.Timers.starterPackTime=Ko.Time.serverTime,b.g.HasKey("starterpack")||Ko.WaitBefore(.5,(()=>{b.g.SetInt("starterpack",1),Ko.UI.starterPackPopup.Show()})))),this.collection.includes(t)||(this.collection.push(t),1!=t&&Ko.UI.newCreature.Show(t),Ko.GameData.TapChallenge.isActive&&Ko.GameData.Upgrades.UpgradeByType(y.Tq.TapChallengeMergeBonus).unlockCreatureId==t&&this.Upgrade(y.Tq.TapChallengeMergeBonus),Ko.Analytics.SendMonsterUnlockEvent(t,this.planetId,i.creatureRank)),t<=6){let e=Ko.GameData.Epochs.GetById(1);for(let i=e.creatures.length-1;i>=0;i--){let n=e.creatures[i];n<t&&!this.collection.includes(n)&&this.collection.unshift(n)}}Ko.Player.CallOnChanged()}GetAvailableForPurchaseCreatures(){let t=this.availableCreaturesForPurchase||[];t.splice(0);let e=this.collection.length;if(0==e)return t;this.collection[this.collection.length-1];let i=Ko.GameData.Gameplay.creaturePurchaseDistance;e<=4&&i--;for(let n of this.collection){Ko.Player.PlanetsSave.CurrentPlanet.collection.indexOf(n)+i<e&&t.push(n)}return 0==t.length&&this.planetId>1&&t.push(1),t}GetCreatureSoftPriceWithMultiplayer(t){let e=this.GetCreaturePurchasesSoft(t),i=Ko.GameData.Creatures.Get(t),n=Ko.GameData.Planets.GetPlanet(Ko.Player.PlanetsSave.currentPlanetId),r=Ko.GameData.Planets.basicCreaturePriceSoft,s=new G;s.priceType=y.zc.Soft;let o=parseInt(100*n.evolutionBaseSoft),a=Math.pow(100,i.creatureRank),h=Math.pow(o,i.creatureRank),l=parseInt(100*n.purchasesBaseSoft),c=Math.pow(100,e),u=Math.pow(l,e);return s.priceValue=r*n.pricesFactorSoft*BigInt(Math.floor(h/a*(u/c))),Ko.Boosters.IsCreaturesDiscountActive&&(s.priceValue=3n*s.priceValue/4n,0n==s.priceValue&&(s.priceValue=1n)),s}GetCreatureHardPriceWithMultiplayer(t){let e=this.GetCreaturePurchasesHard(t),i=Ko.GameData.Creatures.Get(t),n=Ko.GameData.Planets.GetPlanet(Ko.Player.PlanetsSave.currentPlanetId),r=new G;return r.priceType=y.zc.Hard,r.priceValue=i.basePriceHard+n.creaturePriceIncreaseHard+e/10,Ko.Boosters.IsCreaturesDiscountActive&&(r.priceValue=r.priceValue/4*3,0n==r.priceValue&&(r.priceValue=1n)),r}GetCreaturePurchasesSoft(t){for(let e of this.creaturePurchases)if(e.id==t)return e.s;return 0}GetCreaturePurchasesHard(t){for(let e of this.creaturePurchases)if(e.id==t)return e.h;return 0}AddCreaturePurchase(t,e){for(let i of this.creaturePurchases)if(i.id==t)return i[e?"s":"h"]++,void Ko.Player.CallOnChanged();let i=new pt;i.id=t,i[e?"s":"h"]=1,this.creaturePurchases.push(i),Ko.Player.CallOnChanged()}AddEpoch(t){this.epochs.includes(t)||(this.epochs.push(t),this.emit("EpochUnlocked",t),Ko.Analytics.SendEpochUnlockEvent(t,this.planetId))}firstCreatureOffer(t){let e=Ko.GameData.Epochs.GetById(t);e.epochLevel<3||e.epochLevel>4||(Ko.Store.ProductAvailable("first_creature_offer_1")||Ko.Store.ProductAvailable("first_creature_offer_2"))&&Ko.Time.Initialized&&(Ko.Player.Timers.firstCreatureOfferTime||(Ko.Player.Timers.firstCreatureOfferTime=Ko.Time.serverTime,Ko.UI.firstCreatureOffer.Show(e.creatures[0])))}GetUpgradeProgress(t){for(let e of this.upgradesProgress)if(e.upgradeType==t)return e;let e=new dt;return e.upgradeType=t,this.upgradesProgress.push(e),Ko.Player.CallOnChanged(),e}Upgrade(t,e=null){let i=this.upgradesProgress.find((e=>e.upgradeType==t));i?Ko.Analytics.SendUpgradeEvent(t,i.upgradeIndex,this.planetId):(i=new dt,i.upgradeType=t,i.upgradeIndex=0,this.upgradesProgress.push(i)),null===e&&(e=i.upgradeIndex+1),console.log("UPGRADE",y.Tq[t],e),i.upgradeIndex=e,Ko.Player.CallOnChanged()}AddMergeProgress(){this.mergeCount++,Ko.Player.PlanetsSave.GetUpgradeProgress(y.Tq.TapChallengeMergeBonus).upgradeIndex>0&&(this.mergeProgress++,this.mergeProgress>=this.mergeProgressTarget&&(this.mergeProgress=0,Ko.Player.CallOnMergeBonus()),Ko.Player.CallOnChanged())}GetMergeProgress(){return this.mergeProgress}GetMergeCount(){return this.mergeCount}HasAnyUpgradesAvailable(){for(let t of Ko.GameData.Upgrades.upgrades)if(this.collection.includes(t.unlockCreatureId))return!0;return!1}GetAvailableUpgradesNumber(){let t=0;for(let e of Ko.GameData.Upgrades.upgrades)this.collection.includes(e.unlockCreatureId)&&t++;return t}CheckTapChallengeStatus(){Ko.GameData.TapChallenge.isActive&&this.collection.includes(Ko.GameData.Upgrades.UpgradeByType(y.Tq.TapChallengeMergeBonus).unlockCreatureId)&&0==this.GetUpgradeProgress(y.Tq.TapChallengeMergeBonus).upgradeIndex&&this.Upgrade(y.Tq.TapChallengeMergeBonus)}}class dt extends x{Awake(){super.Awake(),this.upgradeType="",this.upgradeIndex=0}toJSON(){return{upgradeType:this.upgradeType,upgradeIndex:this.upgradeIndex}}}class pt extends x{Awake(){super.Awake(),this.id=0,this.s=0,this.h=0}toJSON(){return{id:this.id,s:this.s,h:this.h}}}var ft=i(7468);const mt=()=>{const t=(0,r.lazyGet)(ft.TypesSocial.vibrationManager);return!!t&&t.supported};class gt{async Vibrate(t=!1){if(!Ko.LocalSettings.Vibro&&!t)return!1;let e=!1;try{if(mt()){const t=(0,r.lazyGet)(TypesSocial.vibrationManager);t&&(t.vibrate(),e=!0)}}catch(t){}return e}}const _t=1e3,yt=6e4,vt=36e5,bt=24*vt;class wt{static TICK=1e4;static TicksPerSecond=1e7;_data=[0,0,0,0,0,0];_ticks=0;constructor(...t){this._parseArgs(t)}get Days(){return this._data[0]}get Hours(){return this._data[1]}get Milliseconds(){return this._data[4]}get Minutes(){return this._data[2]}get Seconds(){return this._data[3]}get Ticks(){return this._ticks}get TotalDays(){return this._ticks/wt.TICK/bt}get TotalHours(){return this._ticks/wt.TICK/vt}get TotalMilliseconds(){return this._ticks/wt.TICK}get TotalMinutes(){return this._ticks/wt.TICK/yt}get TotalSeconds(){return this._ticks/wt.TICK/_t}static FromDays(t){return new wt(t,0,0,0,0)}static FromHours(t){return new wt(0,t,0,0,0)}valueOf(){return this._ticks}toString(){let[t,e,i,n,r,s]=this._data;return(0!==t?t+".":"")+[e.toString().padStart(2,"0"),i.toString().padStart(2,"0"),n.toString().padStart(2,"0")].join(":")+"."+(r*wt.TICK+s)}_parseArgs(t){if(t.length>0){if(![1,3,4,5].includes(t.length))throw new Error("Invalid TimeSpan constructor arguments count: "+t.join(", "));let e=1===t.length?[0,0,0,0,0,~~t[0]]:[0,0,0,0,0,...t,0].slice(t.length,t.length+6);this._updateData(e)}}_updateData(t=this._data){let e,[i,n,r,s,o,a]=t;e=~~(a/wt.TICK),o+=e*wt.TICK,a-=e*wt.TICK,e=~~(o/1e3),s+=1e3*e,o-=1e3*e,e=~~(s/60),r+=60*e,s-=60*e,e=~~(r/60),n+=60*e,r-=60*e,e=~~(n/24),i+=24*e,n-=24*e,this._data=[i,n,r,s,o,a],this._ticks=(i*bt+n*vt+r*yt+s*_t+o)*wt.TICK+a}Add(t){return new wt(this._ticks+t||0)}Compare(t){return Math.sign(this-t)||0}Divide(t){return new wt(~~(this._ticks/t))}Duration(){return new wt(this._ticks)}Equals(t){return 1*this==1*t}FromMilliseconds(t){return new wt(0,0,0,0,t)}FromMinutes(t){return new wt(0,0,t,0,0)}FromSeconds(t){return new wt(0,0,0,t,0)}FromTicks(t){return new wt(t)}Multiply(t){return new wt(~~(this._ticks*t))}Negate(){return new wt(-this._ticks)}Subtract(t){return new wt(~~(this._ticks-t))}}var St=i(7547);const Tt="Homo Evolution";class xt{static minTime=new wt(9,0,0);static maxTime=new wt(23,59,59);timeWasFixed=!1;Start(){this.clearAll()}clearAll(){}OnApplicationPause(t=!1){t?this.updateNotifications():this.clearAll()}OnApplicationQuit(){this.updateNotifications()}isMissionInProgress=0;missionSecondsLeft=0;moneyBoxStoredSeconds=0;secondsBeforeAllSpinsRestore=0;slotsAvailable=!1;pushMissions="";pushMoneyBox="";pushDay1="";pushDay2="";pushSpins="";updateTimer=0;Update(){if(this.updateTimer+=St.g.deltaTime,updateTimer<2)return;if(this.updateTimer=0,!Core.GameData)return;if(!Core.Player)return;if(!Core.Player.PlanetsSave)return;if(!Core.GameData.Missions)return;if(!Core.Player.PlanetsSave.CurrentPlanet)return;if(this.isMissionInProgress=Core.Player.Missions.IsInProgress(),this.isMissionInProgress){let t=Core.Player.Missions.missionInProgress;if(Core.GameData.Missions.GetMission(t.missionId)){if(this.isMissionInProgress){let e=Core.Player.Timers.GetTimerById(t.timerId);this.missionSecondsLeft=e?e.SecondsLeft:0}}else this.isMissionInProgress=!1}let t=Core.Player.PlanetsSave.GetUpgradeProgress(UpgradeType.MoneyBox);this.moneyBoxStoredSeconds=Core.GameData.Upgrades.UpgradeByType(UpgradeType.MoneyBox).TotalValue(t.upgradeIndex),this.slotsAvailable=Core.Player.PlanetsSave.collection.Count>=Core.GameData.Slots.availableFromCollectionSize,this.slotsAvailable&&(this.secondsBeforeAllSpinsRestore=Math.Ceil((Core.Player.MaxSpinsNumber-Core.Player.SpinsNumber)/Core.GameData.Slots.restoreSpinsNumberByTime)*Core.GameData.Config.spinsRestorePeriod)}updateNotifications(){this.clearAll(),this.updateMoneyBoxNotification(),this.timeWasFixed||this.updateMissionNotification(),this.timeWasFixed||this.updateSpinsNotification(),this.timeWasFixed||this.updateComebackNotifications()}updateSpinsNotification(){if(this.slotsAvailable&&this.secondsBeforeAllSpinsRestore>60){this.secondsBeforeAllSpinsRestore+=40;let t=new Date(Date.now()+1e3*this.secondsBeforeAllSpinsRestore),e=this.checkForNight(t)-Date.now();this.SendNotification(e,Tt,this.pushSpins)}}setTestNotification(){}updateMoneyBoxNotification(){let t=new Date(Date.now()+1e3*this.moneyBoxStoredSeconds),e=this.checkForNight(t)-Date.now();SendNotification(e,Tt,this.pushMoneyBox)}updateMissionNotification(){if(this.isMissionInProgress){let t=new Date(Date.now()+1e3*this.missionSecondsLeft),e=this.checkForNight(t)-Date.now();SendNotification(e,Tt,this.pushMissions)}}updateComebackNotifications(){let t=this.checkForNight(new Date(Date.now()+864e5)),e=this.checkForNight(new Date(Date.now()+1728e5)),i=t-Date.now(),n=e-Date.now();SendNotification(i,Tt,this.pushDay1),SendNotification(n,Tt,this.pushDay2)}checkForNight(t){this.timeWasFixed=!1;let e=new wt(t.getHours(),t.getMinutes(),t.getSeconds()),i=new Date(t.getTime());return e<this.minTime&&(i.setHours(this.minTime.Hours),i.setMinutes(this.minTime.Minutes),i.setSeconds(this.minTime.Seconds),this.timeWasFixed=!0),i}SendNotification(t,e,i){console.log("NOTIFICATION:",t.TotalSeconds,e,i)}}class Et extends T.p{SendVideoAdsAvailable(t,e,i){this.SendEvent("video_ads_available",{placement:t,isReady:e,isWaited:i})}SendVideoAdsStarted(t,e){this.SendEvent("video_ads_started",{placement:t,isAdStarted:e})}SendVideoAdsEvent(t,e,i){this.SendEvent("video_ads_watch",{placement:t,result:e,object_id:i})}SendVideoAdsLoaded(t,e){this.SendEvent("video_ads_loaded",{placement:t,sec:e})}SendInterstitialNotReady(t){this.SendEvent("interstitial_ads_not_ready",{timesPerSession:t})}SendVideoAdsCancel(t){t=t||"",this.SendEvent("video_ads_cancel",{objectId:t})}SendChestEvent(t){this.SendEvent("open_chest",{reason:t})}SendHardEvent(t,e,i,n){this.SendEvent("hard_currency",{category:t,screen:e,item_id:i,value:n})}SendSoftEvent(t,e,i,n){this.SendEvent("soft_currency",{category:t,screen:e,item_id:i,value:n})}SendPlanetUnlockEvent(t){this.SendEvent("planet_unlock",{planet_id:t})}SendMonsterUnlockEvent(t,e,i){this.SendEvent("moster_unlock",{monster_id:t,planet_id:e,monster_rank:i})}SendEpochUnlockEvent(t,e){this.SendEvent("level_unlock",{epoch_id:t,planet_id:e})}SendTutorialEvent(t){this.SendEvent("tutorial",{step:t})}SendOfferEvent(t,e,i,n,r,s){this.SendEvent("offer",{offer_name:t,offer_price:e,offer_content:i,offer_duration:n,offer_purchase_time:r,offer_action:s})}SendUpgradeEvent(t,e,i){this.SendEvent("upgrade_purchse",{item_id:t,level:e,planet_id:i})}SendBoosterEvent(t){this.SendEvent("booster_purchase",{booster_id:t})}SendMonsterEvent(t,e,i,n,r){this.SendEvent("monster_purchase",{currency_name:t,value:e,monster_id:i,planet_id:n,monster_rank:r})}SendPaymentEvent(t,e,i,n){this.SendEvent("payment_succeed",{inapp_id:t,currency:e,price:i,transaction_id:n})}SendMissionEvent(t,e,i){this.SendEvent("missions",{mission_id:t,mission_time:e,reward:i})}SendSlotSpinEvent(t,e,i,n){this.SendEvent("slot_spin",{spin_currency:t,currency_value:e,reward:i,reward_value:n})}SendEvent(t,e){console.log("ANALYTICS:",t,e)}}var At=i(8600),It=i(2494);function Ct(){return(t=>{let e="EN";return t&&(e=t.split("_",1)[0].toUpperCase()),e})(At.Localize.defaultLocale)}class Pt{_locale=Ct();_localCharacters=new Set;_bitmapFont;locales=["EN"];translations={EN:{}};get locale(){return this._locale}set locale(t){this._locale=t,this._updateLocaleFont()}_updateLocaleFont(){this._localCharacters.clear();for(let t=0;t<=126;t++)this._localCharacters.add(String.fromCharCode(t));for(let t in this.translations){let e=this.translations[t][this._locale]||this.translations[t].EN;for(let t=0;t<e.length;t++)this._localCharacters.add(e[t])}this._bitmapFont=It.BitmapFont.from("GameFont",{fontFamily:"Rubik",fill:16777215,align:"center",fontSize:64,dropShadow:!0,dropShadowAlpha:.75,dropShadowAngle:.6*Math.PI,dropShadowBlur:1,dropShadowColor:0,dropShadowDistance:2},{chars:[...this._localCharacters]}),console.log("LOCALE",this._locale,"CHARACTERS:",this._localCharacters.size)}Init(t){t=t.split("\n").map((t=>t.split("\t")));const[,...e]=t.shift();this.locales=e.map((t=>t.toUpperCase().trim())),this.translations=t.reduce(((t,[e,...i])=>(t[e]=this.locales.reduce(((t,e,n)=>(t[e]=(i[n]||i[0]||"").replace(/<[^>]*>/g,"").trim(),t)),{}),t)),{}),this.locale=Ct()}SetLanguage(t){t=(t||"").toUpperCase(),this.locale=this.locales.includes(t)?t:this.locales[0]}Get(t,...e){if(!this.translations[t])return console.warn("LOCALIZATION key not found:",t),t;let i=this.translations[t][this.locale]||this.translations[t].EN;for(let t=0;t<e.length;t++){let n=new RegExp(`\\{${t}\\}`,"g");i=i.replace(n,e[t])}let n=i.match(/{(\d+)}/g);return n&&console.warn(`LOCALIZATION missing parameters for '${t}':`,n.join(", ")),i}Destroy(){}}class Rt extends T.p{Awake(){super.Awake(),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.IsBubbleActive=!1,this.IsCreaturesDiscountActive=!1,this.IsIncomeActive=!1,this.IsIncome2Active=!1,this.bubbleTimer=null,this.incomeTimer=null,this.creatureDiscountTimer=null,this.income2Timer=null}Init(){Ko.Player.on("Changed",this.onPlayerChanged)}onPlayerChanged(){Ko.Player.Initialized&&(this.bubbleTimer=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.bubbleBoosterTimerId),this.incomeTimer=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.incomeBoosterTimerId),this.creatureDiscountTimer=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.discountBoosterTimerId),this.income2Timer=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.incomeX4BoosterTimerId),this.IsBubbleActive=this.bubbleTimer&&!this.bubbleTimer.IsFinished,this.IsCreaturesDiscountActive=this.creatureDiscountTimer&&!this.creatureDiscountTimer.IsFinished,this.IsIncomeActive=this.incomeTimer&&!this.incomeTimer.IsFinished,this.IsIncome2Active=this.income2Timer&&!this.income2Timer.IsFinished)}AddBoosterTime(t,e){let i=Ko.Player.Timers.GetBoosterTimer(t);i&&i.IsFinished&&(Ko.Player.Timers.RemoveTimer(i.tId),i=null),i=i||Ko.Player.Timers.AddBoosterTimer(0,t),i.AddSeconds(e)}}class Ot extends T.p{Initialized=!1;get DayUniqId(){return w.DayId(this.serverTime)}get serverTime(){return Date.now()}TicksToDayId(t){return w.DayId(new Date(t))}Awake(){this.Initialized=!1}Init(){this.requestTime()}OnApplicationPause(t){t||this.requestTime()}requestTime(){this.Initialized=!0,Core.Player.Timers.registrationTime||(Core.Player.Timers.registrationTime=this.serverTime),Core.Player.Timers.lastActionTime||(Core.Player.Timers.lastActionTime=this.serverTime),Core.UI.state!=y.Su.Loading&&Core.UI.moneyBox.Check(),this.emit("TimeLoaded")}Update(){this.requestTime()}}class kt{timeFromLastUpdate=0;timeFromLastActionUpdate=0;Init(){this.serverTimeUpdate(!0)}serverTimeUpdate(t=!1){let e=St.g.deltaTime;if(Core.Time.Initialized&&Core.Player.Initialized&&(this.timeFromLastUpdate+=e,t||this.timeFromLastUpdate>1)){let t=Core.Time.serverTime;for(let e of Core.Player.Timers.timers)0==e.tStart?e.InitializeStartTime(t):e.IsFinished||e.StepServerTime(t);this.timeFromLastUpdate=0}}localTimeUpdate(){if(!Core.Time.Initialized)for(let t of Core.Player.Timers.timers)t.IsFinished||t.Step(St.g.deltaTime)}Update(){Core.Initialized&&(this.serverTimeUpdate(),this.localTimeUpdate(),this.updateMoneyBox())}updateMoneyBox(){if(Core.Time.Initialized){let t=St.g.deltaTime;this.timeFromLastActionUpdate+=t,this.timeFromLastActionUpdate>300&&(Core.Player.Timers.lastActionTime=Core.Time.serverTime,this.timeFromLastActionUpdate=0)}}Destroy(){}}i(3271);const Mt="homo-evolution-player-data";class Dt extends T.p{resetRequested=!1;#t=r.di.get(ft.TypesSocial.cookie);Authenticate(){this.emit("AuthComplete",!0)}async SaveLocal(){if(!this.resetRequested)try{let t=Ko.Player.toJSON();await this.#t.save(Mt,t)}catch(t){console.log("SAVE ERROR",t)}}async LoadLocal(){try{let t=await this.#t.get([Mt]);t=t[Mt]&&t[Mt].PlanetsSave.TutorSave.bubbles?t[Mt]:null,t?(Ko.Player.CopyPlayerFrom(t),t.GlobalVersion<nt.GLOBAL_VERSION_VALUE&&Ko.Player.DefaultStart()):Ko.Player.DefaultStart()}catch(t){console.log("LOAD ERROR",t)}}async Reset(){this.resetRequested=!0,await this.#t.erase(Mt)}}const Nt="homo-evolution-purchases",Lt=new Map;Lt.toJSON=function(){return this.size>0?[...this.entries()]:null},Lt.Load=async function(){const t=r.di.get(ft.TypesSocial.cookie);let e=await t.get([Nt]),i=e?e[Nt]:null;if(i)for(let[t,e]of i)this.set(t,e)},Lt.Save=async function(){const t=r.di.get(ft.TypesSocial.cookie);await t.save(Nt,this.size>0?this:null)},Lt.Reset=function(){this.clear(),this.Save()};let Bt=new Map,Ft={description:"",imageURI:"",price:"$$$",priceAmount:0,priceCurrencyCode:"XXX",productID:"",title:""};class Ut{id=0;rewards=[];appProduct={};#e=r.di.get(ft.TypesSocial.model);get purchased(){return Lt.get(this.id)}set purchased(t){t?Lt.set(this.id,t):Lt.delete(this.id),Lt.Save()}Init(t){this.id=t.id,this.appProduct={...Ft,...Bt.get(this.id)||{}};for(let e of t.rewards)this.rewards.push(new j(e))}async Purchase(){try{let t=await FBInstant.payments.purchaseAsync({productID:this.id});this.purchased=Date.now(),await this.ConsumeRewards(t)}catch(t){console.log("PURCHASE FAILED",t)}}async ConsumeRewards(t=null){for(let t of this.rewards)t.Take(this.id,!0);if(t)try{await FBInstant.payments.consumePurchaseAsync(t.purchaseToken)}catch(t){console.log("PURCHASE CONSUME ERROR",t)}}GetPrice(){return this.appProduct.price}GetPriceNumber(){return this.appProduct.priceAmount}}class Gt extends T.p{products=new Map;available=!1;get purchasedProducts(){return Lt}get VipActive(){return!!Lt.get("vip")}set VipActive(t){Lt.set("vip",t?Date.now():null),Lt.Save()}get IsInitialized(){return this.available&&this.products.size>0}async Init(){if(!this.IsInitialized&&(Lt.Load(),this.available=!0,this.available)){try{let t=await FBInstant.payments.getCatalogAsync();if(t)for(let e of t)Bt.set(e.productID,{...e})}catch(t){return void console.warn("AppStore error",t)}for(let t of Ko.GameData.AppStore.inAppProducts){let e=new Ut;e.Init(t),this.products.set(e.id,e)}await this.ConsumeAll()}}async ConsumeAll(){let t=await FBInstant.payments.getPurchasesAsync();for(let e of t)await this.ConsumePurchase(e)}async ConsumePurchase(t){let e=this.GetProduct(t.productID);e&&await e.ConsumeRewards(t)}GetProduct(t){return this.products.get(t)}ProductAvailable(t,e=!1){let i=this.GetProduct(t);return i&&(!e||!i.purchased)}BuyProductID(t){let e=this.GetProduct(t);if(!e)return console.warn("STORE: Trying to buy unknown product",t),!1;e.Purchase(),this.emit("Purchased",e)}GetPrice(t){let e=this.GetProduct(t);return e?e.GetPrice():Ft.price}GetPriceNumber(t){let e=this.GetProduct(t);return e?e.GetPriceNumber():0}Reset(){Lt.Reset()}}const jt="FPS60",Ht="LANGUAGE",zt="MUSIC",Wt="SOUND",Vt="VIBRO";class Xt extends T.p{_FPS60=!1;get FPS60(){return!!this._FPS60}set FPS60(t){let e=(t=!!t)!==this._FPS60;this._FPS60=!!t,b.g.SetInt(jt,~~this._FPS60),e&&this.emit("SettingsChanged")}_Language=0;get Language(){return~~this._Language}set Language(t){let e=t!==this._Language;this._Language=t,b.g.SetInt(Ht,~~this._Language),e&&this.emit("SettingsChanged")}_Sound=!1;get Sound(){return!!this._Sound}set Sound(t){let e=(t=!!t)!==this._Sound;this._Sound=!!t,b.g.SetInt(Wt,~~this._Sound),e&&this.emit("SettingsChanged")}_Music=!1;get Music(){return!!this._Music}set Music(t){let e=(t=!!t)!==this._Music;this._Music=!!t,b.g.SetInt(zt,~~this._Music),e&&this.emit("SettingsChanged")}_Vibro=!1;get Vibro(){return!!this._Vibro}set Vibro(t){let e=(t=!!t)!==this._Vibro;this._Vibro=!!t,b.g.SetInt(Vt,~~this._Vibro),e&&this.emit("SettingsChanged")}constructor(){super(),this._FPS60=!!b.g.GetInt(jt,1),this._Language=b.g.GetInt(Ht,0),this._Music=!!b.g.GetInt(zt,1),this._Sound=!!b.g.GetInt(Wt,1),this._Vibro=!!b.g.GetInt(Vt,1)}}var Yt=i(2774),qt=i(7706),$t=i(1684);class Kt extends qt.M{constructor(...t){super(...t),this.interactive=!0,this.cursor="pointer",this.on("pointertap",(()=>Ko.Audio.Play("Click"))),this._initTapHighlight()}}var Jt=i(1527),Zt=i(9279),Qt=i(2494);const te={green:["rgb(25, 59, 38)","rgb(38, 100, 58)"],orange:["rgb(148, 58, 0)","rgb(170, 113, 0)"],magenta:["rgb(107, 58, 203)","rgb(170, 113, 255)"]};class ee extends Qt.Graphics{_rect=new Qt.RoundedRectangle(0,0,1,1,50);skin="green";get radius(){return this._rect.radius}set radius(t){this._rect.radius=t,this.fitLayout()}constructor(t="green"){super(),this.skin=t}getShape(){return this._rect.clone()}fitLayout(t=this._rect){this._rect.x=t.x,this._rect.y=t.y,this._rect.width=t.width,this._rect.height=t.height,this.position.copyFrom(this._rect);const e=function(t="green"){let e=`popup-back-skin-${t=te[t]?t:"green"}`;if(!Qt.utils.TextureCache[e]){const i=document.createElement("canvas");i.width=1,i.height=Ko.app.viewport.height;const n=i.getContext("2d"),r=n.createLinearGradient(0,0,0,i.height),[s,o]=te[t]||te.green;r.addColorStop(0,s),r.addColorStop(1,o),n.fillStyle=r,n.fillRect(0,0,i.width,i.height);let a=Qt.Texture.from(i);Qt.Texture.addToCache(a,e)}return Qt.utils.TextureCache[e]}(this.skin),i=this.getShape();i.x=i.y=0,this.clear().beginTextureFill({texture:e,alpha:.9}).drawShape(i)}}class ie extends Qt.Graphics{_rect=new Qt.Rectangle;fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(this._rect),this.clear().beginFill(0,.5).drawRect(0,0,this._rect.width,this._rect.height)}}const ne=[];class re extends Yt.e{_popupRect=new Qt.Rectangle(0,0,1,1);closeBtnOffsetFactorX=.95;closeBtnOffsetFactorY=.5;closeBtnAlpha=.5;closeBtnAdditionalScaleFactor=1;Awake({skin:t="green",masked:e=!1,title:i="",closeButton:n=!1,sound:r="PopupShow"}={}){this.visible=!1,this.Active=!1,this.antiClick=this.addChild(new qt.M("particles/rect")),this.antiClick.interactive=!0,this.antiClick.tint=0,this.antiClick.alpha=.75,this.wrapper=this.addChild(new Qt.Container),this.back=this.wrapper.addChild(new ee(t)),this.content=this.wrapper.addChild(new Qt.Container),this.header=this.content.addChild(new ie),this.header.SetActive(!!i),this.title=this.content.addChild(new $t.g(i||"")),this.title.SetActive(!!i),this.closeBtn=this.content.addChild(new Kt("button-close")),this.setAdditionalLayoutAndStyleConfig(),this.closeBtn.alpha=this.closeBtnAlpha,this.closeBtn.SetActive(!!n),this.masked=e,this.sound=r,this.closeBtn.on("pointertap",(()=>this.Hide()))}setAdditionalLayoutAndStyleConfig(){}Init(){super.Init()}setPopupSize(t,e){this.setPopupRect(new Qt.Rectangle(.5*(Ko.app.viewport.width-t),.5*(Ko.app.viewport.height-e),t,e))}setPopupRect(t){this._popupRect.copyFrom(t)}getPopupRect(){return this._popupRect.clone()}getContentSize(t=!1){let e=this._popupRect.clone();if(e.x=e.y=0,t){let t=this.header.height;e.y+=t,e.height-=t}return e}_renderMask(){let t=1/Ko.app.renderer.resolution,e=this.back.getShape();e.x*=t,e.y*=t,e.width*=t,e.height*=t;let i=(new Qt.Graphics).beginFill(16777215,1).drawShape(e);this.back.mask=i,this.header.mask=i,this.content.mask=this.masked?i:null}fitLayout(t=Ko.app.viewport){this.setAdditionalLayoutAndStyleConfig(),1===this._popupRect.width&&1===this._popupRect.height&&this.setPopupRect(t.clone().pad(.05*-t.width)),this.antiClick.position.set(.5*t.width,.5*t.height),this.antiClick.width=t.width,this.antiClick.height=t.height,this.wrapper.position.set(0,0),this.back.fitLayout(this._popupRect),this.content.position.copyFrom(this._popupRect);let e=this.getContentSize(),i=new Qt.Rectangle(0,0,e.width,.17*e.width);this.fitHeader(i),this._renderMask()}fitHeader(t){this.header.fitLayout(t);let e=t.clone();e.width=.55*t.width,e.height=.9*t.height,e.x=.5*(t.width-e.width),e.y=.5*(t.height-e.height),this.title.fitLayout(e),e.width=.5*t.height,e.height=.5*t.height,e.x=(t.width-e.width)*this.closeBtnOffsetFactorX,e.y=(t.height-e.height)*this.closeBtnOffsetFactorY,this.closeBtn.fitRect(e),this.closeBtn.scale.x=this.closeBtn.scale.x*this.closeBtnAdditionalScaleFactor,this.closeBtn.scale.y=this.closeBtn.scale.x}_updateStackVisibility(){let t=ne.indexOf(this);this.Active?t<0&&ne.push(this):t>=0&&(ne.splice(t,1),t=-1),t<0&&(t=ne.length-1);for(let e=0;e<ne.length;e++)ne[e].x=e===t?0:3*-Ko.app.viewport.width}SetActive(t){super.SetActive(t),this._updateStackVisibility()}Show(){super.Show(),this.fitLayout(),Jt.gsap.timeline().fromTo(this.wrapper,{alpha:0},{alpha:1,duration:.3},0),this.sound&&Ko.Audio.Play(this.sound),this._updateStackVisibility()}Hide(){super.Hide(),this._updateStackVisibility()}}var se=i(7693),oe=i(8449),ae=i(2494);class he extends se.z{constructor(t,e=""){super(t),this.cursor="pointer",this.interactive=!0,this.content=this.addChild(new oe.L(e)),this._initialFit(),this._setTapHighlight=this._setTapHighlight.bind(this),this._removeTapHighlight=this._removeTapHighlight.bind(this),this.on("pointertap",(()=>Ko.Audio.Play("UIButton"))),this._initTapHighlight()}_initialFit(){let t=this.content.getLocalBounds();this.width=1.1*t.width,this.height=1.1*t.height,this.content.position.set(.05*t.width,.05*t.height)}get label(){return this.content._label.text}set label(t){this.content._label.text=t||"",this.fitLayout()}get icon(){return this.content._icon.texture}set icon(t){this.content._icon.setImage(t),this.fitLayout()}_fitChildren(){let t=new ae.Rectangle(0,0,this.width,this.height).pad(.1*-this.width,.1*-this.height);this.content.fitLayout(t)}fitLayout(t=new ae.Rectangle(this.x,this.y,this.width,this.height)){this.position.copyFrom(t),this.width=t.width,this.height=t.height,this._fitChildren()}}var le=i(2494);class ce extends qt.M{constructor(...t){super(),this.Update=this.Update.bind(this),this._rect=new le.Rectangle(0,0,1,1),this.button=this.addChild(new he(...t)),this.disabler=this.addChild(new he("btn-gray",{label:"wait"})),this.disabler.interactive=!1,this.disabler.cursor="wait",Ko.on("Updated",this.Update)}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(this._rect),(t=this._rect.clone()).x=t.y=0,this.button.fitLayout(t),this.disabler.fitLayout(t)}get label(){return this.button.label}set label(t){this.button.label=t||""}get icon(){return this.button.icon}set icon(t){this.button.icon=t}Update(){let t=Math.ceil(Ko.Ads.nextRewardedTimeout),e=t>0||!Ko.Ads.rewardedAdReady,i=e!==this.disabler.Active;this.disabler.SetActive(e),this.button.SetActive(!e),this.interactive=!e,this.cursor=e?"wait":"pointer",e&&(this.disabler.label=t>0?`${t} sec`:this.button.label),i&&this.fitLayout()}}const ue="2ctynyv5vb4n572c4334",de=3e5;class pe extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;get nextEvolveBonusAvailable(){return b.g.GetInt(ue,Date.now()+de)}set nextEvolveBonusAvailable(t){b.g.SetInt(ue,t)}_resetTimeout(){this.nextEvolveBonusAvailable=Date.now()+de}Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake({title:Ko.Localizator.Get("evolve_bonus_title"),closeButton:!0}),this.onWatched=this.onWatched.bind(this),this.description=this.content.addChild(new $t.g(Ko.Localizator.Get("evolve_bonus_desc"),{fontSize:16*Ko.app.renderer.resolution})),this.creaturesBack=this.content.addChild(new se.z("bg-rounding-28px")),this.creaturesBack.tint=0,this.creaturesBack.alpha=.3,this.arrow=this.content.addChild(new qt.M("arrow-green")),this.creature1Image=this.content.addChild(new qt.M),this.creature2Image=this.content.addChild(new qt.M),this.evolveBtn=this.content.addChild(new ce("btn-green",{label:Ko.Localizator.Get("evolve")})),this.requestedCreatureView=null,this.requestedCreatureId=0,this.nextCreatureId=0,this._resetTimeout(),this.evolveBtn.on("pointertap",(()=>{Ko.Ads.TriggerRewarded(this.onWatched)}))}onWatched(){this.requestedCreatureView&&this.requestedCreatureView.creatureController&&this.requestedCreatureView.creatureController.creatureId==this.requestedCreatureId&&(this._resetTimeout(),this.requestedCreatureView.Evolve(this.nextCreatureId),this.Hide())}_checkTapChallenge(){let t=Ko.Player.PlanetsSave.GetUpgradeProgress(y.Tq.TapChallengeMergeBonus);if(!t||0===t.upgradeIndex)return!0;let e=Ko.Player.PlanetsSave.CurrentPlanet.GetMergeProgress();return 0!==e&&e!==Ko.GameData.Upgrades.UpgradeByType(y.Tq.TapChallengeMergeBonus).TotalValue(t.upgradeIndex)-1}Show(t,e){if(!this._checkTapChallenge())return;if(this.nextEvolveBonusAvailable>Date.now())return;let i=Ko.GameData.Creatures.Get(t);if(!Ko.Player.PlanetsSave.CurrentPlanet||!i)return;let n=Ko.Player.PlanetsSave.CurrentPlanet.collection,r=n.slice(Ko.GameData.Config.adsEvolveBonusCreatureId-1,-2).slice(-4);if(r.length<1)return;if(!r.includes(t))return;this.nextCreatureId=n[n.indexOf(t)+1];let s=Ko.GameData.Creatures.Get(this.nextCreatureId);s&&this._rewardedAdAllowed&&(this.requestedCreatureId=t,this.requestedCreatureView=e,this.creature1Image.setImage(`creatures/${i.id}`),this.creature2Image.setImage(`creatures/${s.id}`),this._resetTimeout(),super.Show())}fitLayout(t=Ko.app.viewport){this.setPopupSize(.8*t.width,.9*t.width),super.fitLayout(t);let e=this.getContentSize();e.y+=.15*e.width,e.height-=e.y;let i=e.clone().pad(.1*-e.width,0);i.height=.2*e.height,this.description.fitLayout(i);let n=e.clone().pad(.05*-e.width,.2*-e.height);n.y=i.bottom,this.creaturesBack.fitLayout(n);let r=.05*n.width,s=n.clone().pad(-r),o=s.clone();o.width=.35*s.width,this.creature1Image.fitRect(o),o.x=o.right+r,o.width=.2*s.width,this.arrow.fitRect(o),o.x=o.right+r,o.width=.35*s.width,this.creature2Image.fitRect(o);let a=e.clone().pad(.3*-e.width,.45*-e.height);a.y=e.bottom-a.height-.05*e.height,this.evolveBtn.fitLayout(a)}}var fe=i(9135),me=i(2494),ge=i(5489),_e=i(5825),ye=i(161);class ve{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};var we,Se,Te,xe=(we=function(t,e){(function(){var e,i;i=e={linear:function(t,e,i,n){return i*t/n+e},easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var r,s,o;return o=1.70158,0===t||(t/=n),(s=0)||(s=.3*n),(r=i)<Math.abs(i)?(r=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)+e},easeOutElastic:function(t,e,i,n){var r,s,o;return o=1.70158,0===t||(t/=n),(s=0)||(s=.3*n),(r=i)<Math.abs(i)?(r=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-o)*(2*Math.PI)/s)+i+e},easeInOutElastic:function(t,e,i,n){var r,s,o;return o=1.70158,0===t||(t/=n/2),(s=0)||(s=n*(.3*1.5)),(r=i)<Math.abs(i)?(r=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)*.5+i+e},easeInBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,i,n,r){return n-e.easeOutBounce(r-t,0,n,r)+i},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,n,r){return t<r/2?.5*e.easeInBounce(2*t,0,n,r)+i:.5*e.easeOutBounce(2*t-r,0,n,r)+.5*n+i}},t.exports=i}).call(be)},we(Te={path:Se,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&Te.path)}},Te.exports),Te.exports);function Ee(t,e){return t?"function"==typeof t?t:"string"==typeof t?xe[t]:void 0:xe[e]}const Ae={removeOnInterrupt:!1,ease:"linear",time:1e3};class Ie extends ve{__init(){this.startWidth=null}__init2(){this.startHeight=null}__init3(){this.deltaWidth=null}__init4(){this.deltaHeight=null}__init5(){this.width=null}__init6(){this.height=null}__init7(){this.time=0}constructor(t,e={}){super(t),Ie.prototype.__init.call(this),Ie.prototype.__init2.call(this),Ie.prototype.__init3.call(this),Ie.prototype.__init4.call(this),Ie.prototype.__init5.call(this),Ie.prototype.__init6.call(this),Ie.prototype.__init7.call(this),this.options=Object.assign({},Ae,e),this.options.ease=Ee(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){void 0!==this.options.position?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,void 0!==this.options.scale?this.width=this.parent.screenWidth/this.options.scale:void 0!==this.options.scaleX||void 0!==this.options.scaleY?(void 0!==this.options.scaleX&&(this.width=this.parent.screenWidth/this.options.scaleX),void 0!==this.options.scaleY&&(this.height=this.parent.screenHeight/this.options.scaleY)):(void 0!==this.options.width&&(this.width=this.options.width),void 0!==this.options.height&&(this.height=this.options.height)),null!==this.width&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),null!==this.height&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),null!==this.width&&this.parent.fitWidth(this.width,this.keepCenter,null===this.height),null!==this.height&&this.parent.fitHeight(this.height,this.keepCenter,null===this.width),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const e=new ge.bR(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const t=this.parent.width,i=this.parent.height;this.complete(),t===this.parent.width&&i===this.parent.height||this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}else{const t=this.options.ease(this.time,0,1,this.options.time);if(null!==this.width){const e=this.startWidth,i=this.deltaWidth;this.parent.fitWidth(e+i*t,this.keepCenter,null===this.height)}if(null!==this.height){const e=this.startHeight,i=this.deltaHeight;this.parent.fitHeight(e+i*t,this.keepCenter,null===this.width)}if(null===this.width?this.parent.scale.x=this.parent.scale.y:null===this.height&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const e=this.startX,i=this.startY,n=this.deltaX,r=this.deltaY,s=new ge.bR(this.parent.x,this.parent.y);this.parent.moveCenter(e+n*t,i+r*t),this.parent.emit("moved",{viewport:this.parent,original:s,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:e,type:"animate"})}}}function Ce(t){let e,i=t[0],n=1;for(;n<t.length;){const r=t[n],s=t[n+1];if(n+=2,("optionalAccess"===r||"optionalCall"===r)&&null==i)return;"access"===r||"optionalAccess"===r?(e=i,i=s(i)):"call"!==r&&"optionalCall"!==r||(i=s(((...t)=>i.call(e,...t))),e=void 0)}return i}const Pe={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class Re extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},Pe,e),this.ease=Ee(this.options.ease,"easeInOutSine"),this.options.sides?"all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?(this.right=this.left=!0,this.top=this.bottom=!1):"vertical"===this.options.sides?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right")):this.left=this.top=this.right=this.bottom=!1;const i=this.options.underflow.toLowerCase();"center"===i?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==i.indexOf("left")?-1:-1!==i.indexOf("right")?1:0,this.underflowY=-1!==i.indexOf("top")?-1:-1!==i.indexOf("bottom")?1:0),this.reset()}isActive(){return null!==this.toX||null!==this.toY}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=void 0===t.x?0:t.x,i=void 0===t.y?0:t.y,n=void 0===t.width?this.parent.worldWidth:t.width,r=void 0===t.height?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>n,top:this.parent.top<i,bottom:this.parent.bottom>r,topLeft:new ge.bR(e*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new ge.bR(n*this.parent.scale.x-this.parent.screenWidth,r*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new ge.bR(0,0),bottomRight:new ge.bR(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let t,e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.x&&e.percentChangeX===Ce([e,"access",t=>t.options,"optionalAccess",t=>t.friction])||e.y&&e.percentChangeY===Ce([e,"access",t=>t.options,"optionalAccess",t=>t.friction]))&&(t=this.oob(),(t.left&&this.left||t.right&&this.right)&&(e.percentChangeX=this.options.friction),(t.top&&this.top||t.bottom&&this.bottom)&&(e.percentChangeY=this.options.friction));const i=this.parent.plugins.get("drag",!0)||{},n=this.parent.plugins.get("pinch",!0)||{};if(e=e||{},!(Ce([i,"optionalAccess",t=>t.active])||Ce([n,"optionalAccess",t=>t.active])||this.toX&&this.toY||e.x&&e.y)){t=t||this.oob();const i=t.topLeft,n=t.bottomRight;if(!this.toX&&!e.x){let e=null;t.left&&this.left?e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-i.x:t.right&&this.right&&(e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-n.x),null!==e&&this.parent.x!==e&&(this.toX={time:0,start:this.parent.x,delta:e-this.parent.x,end:e},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!e.y){let e=null;t.top&&this.top?e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-i.y:t.bottom&&this.bottom&&(e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-n.y),null!==e&&this.parent.y!==e&&(this.toY={time:0,start:this.parent.y,delta:e-this.parent.y,end:e},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const Oe={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class ke extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},Oe,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused)return;if(this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t={x:this.parent.x,y:this.parent.y},e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,i=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,i=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const Me={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class De extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},Me,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){const t=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/t,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if("number"==typeof this.options.minScale)t.x=this.options.minScale,t.y=this.options.minScale;else if(null!==this.options.minScale){const e=this.options.minScale;t.x=void 0===e.x?null:e.x,t.y=void 0===e.y?null:e.y}if("number"==typeof this.options.maxScale)e.x=this.options.maxScale,e.y=this.options.maxScale;else if(null!==this.options.maxScale){const t=this.options.maxScale;e.x=void 0===t.x?null:t.x,e.y=void 0===t.y?null:t.y}let i=this.parent.scale.x,n=this.parent.scale.y;null!==t.x&&i<t.x&&(i=t.x),null!==e.x&&i>e.x&&(i=e.x),null!==t.y&&n<t.y&&(n=t.y),null!==e.y&&n>e.y&&(n=e.y),i===this.parent.scale.x&&n===this.parent.scale.y||(this.parent.scale.set(i,n),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const Ne={friction:.98,bounce:.8,minSpeed:.01},Le=16;class Be extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},Ne,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",(t=>this.moved(t)))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!(!this.x&&!this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(1===t||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}moved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];"clamp-x"===t.type?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(0===this.parent.input.count()&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const i=t-e.time;this.x=(this.parent.x-e.x)/i,this.y=(this.parent.y-e.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){void 0!==(t=t||{}).x&&(this.x=t.x,this.percentChangeX=this.options.friction),void 0!==t.y&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,i=this.timeSinceRelease,n=this.timeSinceRelease+t;if(this.x){const e=this.percentChangeX,r=Math.log(e);this.parent.x+=this.x*Le/r*(Math.pow(e,n/Le)-Math.pow(e,i/Le)),this.x*=Math.pow(this.percentChangeX,t/Le)}if(this.y){const e=this.percentChangeY,r=Math.log(e);this.parent.y+=this.y*Le/r*(Math.pow(e,n/Le)-Math.pow(e,i/Le)),this.y*=Math.pow(this.percentChangeY,t/Le)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const Fe={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class Ue extends ve{__init(){this.windowEventHandlers=new Array}constructor(t,e={}){super(t),Ue.prototype.__init.call(this),this.options=Object.assign({},Fe,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){this.addWindowEventHandler("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})),this.addWindowEventHandler("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}))}addWindowEventHandler(t,e){window.addEventListener(t,e),this.windowEventHandlers.push({event:t,handler:e})}destroy(){this.windowEventHandlers.forEach((({event:t,handler:e})=>{window.removeEventListener(t,e)}))}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e="mouse"===t.data.pointerType,i=this.parent.input.count();return!(!(1===i||i>1&&!this.parent.plugins.get("pinch",!0))||e&&!this.mouse[t.data.button])}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType}down(t){return!(this.paused||!this.options.pressDrag)&&(this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.data.global.x,y:t.data.global.y},this.current=t.data.pointerId,!0):(this.last=null,!1))}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.data.global.x,i=t.data.global.y,n=this.parent.input.count();if(1===n||n>1&&!this.parent.plugins.get("pinch",!0)){const n=e-this.last.x,r=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(n)||this.yDirection&&this.parent.input.checkThreshold(r)){const n={x:e,y:i};return this.xDirection&&(this.parent.x+=(n.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(n.y-this.last.y)*this.options.factor),this.last=n,this.moved||this.parent.emit("drag-start",{event:t,screen:new ge.bR(this.last.x,this.last.y),world:this.parent.toWorld(new ge.bR(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(1===e.length){const t=e[0];return t.last&&(this.last={x:t.last.x,y:t.last.y},this.current=t.id),this.moved=!1,!0}if(this.last&&this.moved){const e=new ge.bR(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const e=t.deltaMode?this.options.lineHeight:1,i=[t.deltaX,t.deltaY],[n,r]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=n*e*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=r*e*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const Ge={speed:0,acceleration:null,radius:null};class je extends ve{constructor(t,e,i={}){super(t),this.target=e,this.options=Object.assign({},Ge,i),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let i=this.target.x,n=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;{const t=Math.atan2(this.target.y-e.y,this.target.x-e.x);i=this.target.x-Math.cos(t)*this.options.radius,n=this.target.y-Math.sin(t)*this.options.radius}}const r=i-e.x,s=n-e.y;if(r||s)if(this.options.speed)if(this.options.acceleration){const t=Math.atan2(n-e.y,i-e.x),o=Math.sqrt(Math.pow(r,2)+Math.pow(s,2));if(o){const a=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=o>a?{x:Math.min(this.velocity.x+(this.options.acceleration,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration,this.options.speed))}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const h=Math.cos(t)*this.velocity.x,l=Math.sin(t)*this.velocity.y,c=Math.abs(h)>Math.abs(r)?i:e.x+h,u=Math.abs(l)>Math.abs(s)?n:e.y+l;this.parent.moveCenter(c,u),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const t=Math.atan2(n-e.y,i-e.x),o=Math.cos(t)*this.options.speed,a=Math.sin(t)*this.options.speed,h=Math.abs(o)>Math.abs(r)?i:e.x+o,l=Math.abs(a)>Math.abs(s)?n:e.y+a;this.parent.moveCenter(h,l),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,n),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const He={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class ze extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},He,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared="number"==typeof this.options.radius?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.screenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused)return!1;if("mouse"!==t.data.pointerType&&1!==t.data.identifier||!this.options.allowButtons&&0!==t.data.buttons)return!1;const e=t.data.global.x,i=t.data.global.y;if(this.radiusSquared){const t=this.parent.toScreen(this.parent.center);if(Math.pow(t.x-e,2)+Math.pow(t.y-i,2)>=this.radiusSquared){const n=Math.atan2(t.y-i,t.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(n))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(n))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(n)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(n)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&i<this.top?this.vertical=Number(this.reverse)*this.options.speed*.06:null!==this.bottom&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const We={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class Ve extends ve{__init(){this.active=!1}__init2(){this.pinching=!1}__init3(){this.moved=!1}constructor(t,e={}){super(t),Ve.prototype.__init.call(this),Ve.prototype.__init2.call(this),Ve.prototype.__init3.call(this),this.options=Object.assign({},We,e)}down(){return this.parent.input.count()>=2&&(this.active=!0,!0)}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const e=t.data.global.x,i=t.data.global.y,n=this.parent.input.touches;if(n.length>=2){const r=n[0],s=n[1],o=r.last&&s.last?Math.sqrt(Math.pow(s.last.x-r.last.x,2)+Math.pow(s.last.y-r.last.y,2)):null;if(r.id===t.data.pointerId?r.last={x:e,y:i,data:t.data}:s.id===t.data.pointerId&&(s.last={x:e,y:i,data:t.data}),o){let t;const e={x:r.last.x+(s.last.x-r.last.x)/2,y:r.last.y+(s.last.y-r.last.y)/2};this.options.center||(t=this.parent.toLocal(e));let i=Math.sqrt(Math.pow(s.last.x-r.last.x,2)+Math.pow(s.last.y-r.last.y,2));i=0===i?i=1e-10:i;const n=(1-o/i)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=n),this.isAxisY()&&(this.parent.scale.y+=n),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:e});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=(e.x-i.x)*this.options.factor,this.parent.y+=(e.y-i.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(e.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(e.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=e,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return!!(this.pinching&&this.parent.input.touches.length<=1)&&(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0)}}const Xe={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class Ye extends ve{constructor(t,e,i,n={}){super(t),this.options=Object.assign({},Xe,n),this.ease=Ee(n.ease,"easeInOutSine"),this.x=e,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(0===this.parent.input.count()){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){const e=this.snapping;let i,n,r;e.time+=t;const s=this.startX,o=this.startY,a=this.deltaX,h=this.deltaY;if(e.time>this.options.time)i=!0,n=s+a,r=o+h;else{const t=this.ease(e.time,0,1,this.options.time);n=s+a*t,r=o+h*t}this.options.topLeft?this.parent.moveCorner(n,r):this.parent.moveCenter(n,r),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;t.x===this.x&&t.y===this.y||this.snapStart()}}}const qe={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class $e extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},qe,e),this.ease=Ee(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,n=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:i-t,deltaY:n-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused)return;if(this.options.interrupt&&0!==this.parent.input.count())return;let e;if(this.options.center||this.options.noMove||(e=this.parent.center),this.snapping){if(this.snapping){const i=this.snapping;if(i.time+=t,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const t=this.snapping,e=this.ease(t.time,t.startX,t.deltaX,this.options.time),i=this.ease(t.time,t.startY,t.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/e,this.parent.scale.y=this.parent.screenHeight/i}const n=this.parent.plugins.get("clamp-zoom",!0);n&&n.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else this.parent.scale.x===this.xScale&&this.parent.scale.y===this.yScale||this.createSnapping()}resume(){this.snapping=null,super.resume()}}const Ke={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class Je extends ve{constructor(t,e={}){super(t),this.options=Object.assign({},Ke,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)})),window.addEventListener("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const n=this.parent.plugins.get("clamp-zoom",!0);if(n&&n.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const e=this.parent.toGlobal(i);this.parent.x+=t.x-e.x,this.parent.y+=t.y-e.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),i=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,n=Math.pow(2,(1+this.options.percent)*i);let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=n),this.isAxisY()&&(this.parent.scale.y*=n),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const t=this.parent.toGlobal(r);this.parent.x+=e.x-t.x,this.parent.y+=e.y-t.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent})}wheel(t){if(this.paused)return!1;if(!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,n=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const t={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+t.x)*n-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+t.y)*n-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=n),this.isAxisY()&&(this.parent.scale.y*=n),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class Ze{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new ge.M_(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if("mouse"===t.data.pointerType?this.isMouseDown=!0:this.get(t.data.pointerId)||this.touches.push({id:t.data.pointerId,last:null}),1===this.count()){this.last=t.data.global.clone();const e=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);e&&e.isActive()||i&&i.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const e=t.data.global.x-this.last.x,i=t.data.global.y-this.last.y;(this.checkThreshold(e)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;"mouse"===t.data.pointerType&&(this.isMouseDown=!1),"mouse"!==t.data.pointerType&&this.remove(t.data.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new ge.bR;if(this.viewport.options.interaction)this.viewport.options.interaction.mapPositionToPoint(e,t.clientX,t.clientY);else if(this.viewport.options.useDivWheelForInputManager&&this.viewport.options.divWheel){const i=this.viewport.options.divWheel.getBoundingClientRect();e.x=t.clientX-i.left,e.y=t.clientY-i.top}else e.x=t.clientX,e.y=t.clientY;return e}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if(this.viewport.options.interaction&&this.viewport.options.interaction.interactionDOMElement!==t.target)return;const e=this.viewport.toLocal(this.getPointerPosition(t));if(this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom){this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}function Qe(t){let e,i=t[0],n=1;for(;n<t.length;){const r=t[n],s=t[n+1];if(n+=2,("optionalAccess"===r||"optionalCall"===r)&&null==i)return;"access"===r||"optionalAccess"===r?(e=i,i=s(i)):"call"!==r&&"optionalCall"!==r||(i=s(((...t)=>i.call(e,...t))),e=void 0)}return i}const ti=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class ei{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,i=ti.length){const n=this.plugins[t];n&&n.destroy(),this.plugins[t]=e;const r=ti.indexOf(t);-1!==r&&ti.splice(r,1),ti.splice(i,0,t),this.sort()}get(t,e){return e&&Qe([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.paused])?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach((t=>{t.destroy()})),this.plugins={},this.sort()}remove(t){this.plugins[t]&&(Qe([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.destroy,"call",t=>t()]),delete this.plugins[t],this.viewport.emit(`${t}-remove`),this.sort())}pause(t){Qe([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.pause,"call",t=>t()])}resume(t){Qe([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.resume,"call",t=>t()])}sort(){this.list=[];for(const t of ti)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const i of this.list)i.down(t)&&(e=!0);return e}move(t){let e=!1;for(const i of this.viewport.plugins.list)i.move(t)&&(e=!0);return e}up(t){let e=!1;for(const i of this.list)i.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const i of this.list)i.wheel(t)&&(e=!0);return e}}const ii={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1,ticker:ye.Rv.shared};class ni extends _e.mc{__init(){this._disableOnContextMenu=t=>t.preventDefault()}constructor(t={}){super(),ni.prototype.__init.call(this),this.options=Object.assign({},{divWheel:document.body},ii,t),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&this.options.divWheel.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new Ze(this),this.plugins=new ei(this)}destroy(t){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.divWheel.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new ge.M_(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,e=window.innerHeight,i,n){this.screenWidth=t,this.screenHeight=e,void 0!==i&&(this._worldWidth=i),void 0!==n&&(this._worldHeight=n),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new ge.M_(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new ge.bR(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new ge.bR(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new ge.bR(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,i;"number"==typeof t[0]?(e=t[0],i=t[1]):(e=t[0].x,i=t[0].y);const n=(this.worldScreenWidth/2-e)*this.scale.x,r=(this.worldScreenHeight/2-i)*this.scale.y;return this.x===n&&this.y===r||(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get corner(){return new ge.bR(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,i;return 1===t.length?(e=-t[0].x*this.scale.x,i=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,i=-t[1]*this.scale.y),e===this.x&&i===this.y||(this.position.set(e,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const i=this.screenWidth/t,n=this.screenHeight/e;return Math.min(i,n)}findCover(t,e){const i=this.screenWidth/t,n=this.screenHeight/e;return Math.max(i,n)}fitWidth(t=this.worldWidth,e,i=!0,n){let r;e&&(r=this.center),this.scale.x=this.screenWidth/t,i&&(this.scale.y=this.scale.x);const s=this.plugins.get("clamp-zoom",!0);return!n&&s&&s.clamp(),e&&r&&this.moveCenter(r),this}fitHeight(t=this.worldHeight,e,i=!0,n){let r;e&&(r=this.center),this.scale.y=this.screenHeight/t,i&&(this.scale.x=this.scale.y);const s=this.plugins.get("clamp-zoom",!0);return!n&&s&&s.clamp(),e&&r&&this.moveCenter(r),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,i=this.worldHeight){let n;t&&(n=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&n&&this.moveCenter(n),this}setZoom(t,e){let i;e&&(i=this.center),this.scale.set(t);const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),e&&i&&this.moveCenter(i),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new $e(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new ge.bR(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new ge.M_(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new Ue(this,t)),this}clamp(t){return this.plugins.add("clamp",new ke(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new Be(this,t)),this}bounce(t){return this.plugins.add("bounce",new Re(this,t)),this}pinch(t){return this.plugins.add("pinch",new Ve(this,t)),this}snap(t,e,i){return this.plugins.add("snap",new Ye(this,t,e,i)),this}follow(t,e){return this.plugins.add("follow",new je(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new Je(this,t)),this}animate(t){return this.plugins.add("animate",new Ie(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new De(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new ze(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,i,n,r){r&&(i>this.worldScreenWidth||n>this.worldScreenHeight)&&(this.fit(!0,i,n),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let s=!1;t<this.left?(this.left=t,s=!0):t+i>this.right&&(this.right=t+i,s=!0),e<this.top?(this.top=e,s=!0):e+n>this.bottom&&(this.bottom=e+n,s=!0),s&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}var ri="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};var si=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){(function(){var e;(function(e){t.exports=e})(e={linear:function(t,e,i,n){return i*t/n+e},easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var r,s,o;return o=1.70158,0===t||(t/=n),(s=0)||(s=.3*n),(r=i)<Math.abs(i)?(r=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)+e},easeOutElastic:function(t,e,i,n){var r,s,o;return o=1.70158,0===t||(t/=n),(s=0)||(s=.3*n),(r=i)<Math.abs(i)?(r=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-o)*(2*Math.PI)/s)+i+e},easeInOutElastic:function(t,e,i,n){var r,s,o;return o=1.70158,0===t||(t/=n/2),(s=0)||(s=n*(.3*1.5)),(r=i)<Math.abs(i)?(r=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/s)*.5+i+e},easeInBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,i,n,r){return n-e.easeOutBounce(r-t,0,n,r)+i},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,n,r){return t<r/2?.5*e.easeInBounce(2*t,0,n,r)+i:.5*e.easeOutBounce(2*t-r,0,n,r)+.5*n+i}})}).call(ri)}));const oi={boxWidth:100,boxHeight:100,scrollbarSize:10,scrollbarBackground:14540253,scrollbarBackgroundAlpha:1,scrollbarForeground:8947848,scrollbarForegroundAlpha:1,dragScroll:!0,stopPropagation:!0,scrollbarOffsetHorizontal:0,scrollbarOffsetVertical:0,underflow:"top-left",fadeScrollbar:!1,fadeScrollbarTime:1e3,fadeScrollboxWait:3e3,fadeScrollboxEase:"easeInOutSine",passiveWheel:!1,clampWheel:!0};class ai extends me.Container{constructor(t={}){if(super(),this.options=Object.assign({},oi,t),t.overflow&&(this.options.overflowX=this.options.overflowY=t.overflow),this.ease="function"==typeof this.options.fadeScrollboxEase?this.options.fadeScrollboxEase:si[this.options.fadeScrollboxEase],this.content=this.addChild(new ni({passiveWheel:!1,stopPropagation:this.options.stopPropagation,screenWidth:this.options.boxWidth,screenHeight:this.options.boxHeight,interaction:this.options.interaction,divWheel:this.options.divWheel})),this.content.decelerate().on("moved",(()=>this._drawScrollbars())),t.ticker)this.options.ticker=t.ticker;else{let e;const i=me;e=parseInt(/^(\d+)\./.exec(me.VERSION)[1])<5?i.ticker.shared:i.Ticker.shared,this.options.ticker=t.ticker||e}this.scrollbar=this.addChild(new me.Graphics),this.scrollbar.interactive=!0,this.scrollbar.on("pointerdown",this.scrollbarDown,this),this.interactive=!0,this.on("pointermove",this.scrollbarMove,this),this.on("pointerup",this.scrollbarUp,this),this.on("pointercancel",this.scrollbarUp,this),this.on("pointerupoutside",this.scrollbarUp,this),this._maskContent=this.addChild(new me.Graphics),this.update(),this.options.noTicker||(this.tickerFunction=()=>this.updateLoop(Math.min(this.options.ticker.elapsedMS,16.6667)),this.options.ticker.add(this.tickerFunction))}get scrollbarOffsetHorizontal(){return this.options.scrollbarOffsetHorizontal}set scrollbarOffsetHorizontal(t){this.options.scrollbarOffsetHorizontal=t}get scrollbarOffsetVertical(){return this.options.scrollbarOffsetVertical}set scrollbarOffsetVertical(t){this.options.scrollbarOffsetVertical=t}get disable(){return this._disabled}set disable(t){this._disabled!==t&&(this._disabled=t,this.update())}get stopPropagation(){return this.options.stopPropagation}set stopPropagation(t){this.options.stopPropagation=t}get dragScroll(){return this.options.dragScroll}set dragScroll(t){this.options.dragScroll=t,t?this.content.drag():void 0!==this.content.removePlugin?this.content.removePlugin("drag"):this.content.plugins.remove("drag"),this.update()}get boxWidth(){return this.options.boxWidth}set boxWidth(t){this.options.boxWidth=t,this.content.screenWidth=t,this.update()}get overflow(){return this.options.overflow}set overflow(t){this.options.overflow=t,this.options.overflowX=t,this.options.overflowY=t,this.update()}get overflowX(){return this.options.overflowX}set overflowX(t){this.options.overflowX=t,this.update()}get overflowY(){return this.options.overflowY}set overflowY(t){this.options.overflowY=t,this.update()}get boxHeight(){return this.options.boxHeight}set boxHeight(t){this.options.boxHeight=t,this.content.screenHeight=t,this.update()}get scrollbarSize(){return this.options.scrollbarSize}set scrollbarSize(t){this.options.scrollbarSize=t}get contentWidth(){return this.options.boxWidth-(this.isScrollbarVertical?this.options.scrollbarSize:0)}get contentHeight(){return this.options.boxHeight-(this.isScrollbarHorizontal?this.options.scrollbarSize:0)}get isScrollbarVertical(){return this._isScrollbarVertical}get isScrollbarHorizontal(){return this._isScrollbarHorizontal}get scrollTop(){return this.content.top}set scrollTop(t){this.content.top=t,this._drawScrollbars()}get scrollLeft(){return this.content.left}set scrollLeft(t){this.content.left=t,this._drawScrollbars()}get scrollWidth(){return this._scrollWidth||this.content.width}set scrollWidth(t){this._scrollWidth=t}get scrollHeight(){return this._scrollHeight||this.content.height}set scrollHeight(t){this._scrollHeight=t}_drawScrollbars(){this._isScrollbarHorizontal="scroll"===this.overflowX||-1===["hidden","none"].indexOf(this.overflowX)&&this.scrollWidth>this.options.boxWidth,this._isScrollbarVertical="scroll"===this.overflowY||-1===["hidden","none"].indexOf(this.overflowY)&&this.scrollHeight>this.options.boxHeight,this.scrollbar.clear(),this.scrollWidth,this._isScrollbarVertical&&this.options.scrollbarSize,this.scrollHeight,this.isScrollbarHorizontal&&this.options.scrollbarSize;const t=this.scrollWidth+(this.isScrollbarVertical?this.options.scrollbarSize:0),e=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);this.scrollbarTop=this.content.top/e*this.boxHeight,this.scrollbarTop=this.scrollbarTop<0?0:this.scrollbarTop,this.scrollbarHeight=this.boxHeight/e*this.boxHeight,this.scrollbarHeight=this.scrollbarTop+this.scrollbarHeight>this.boxHeight?this.boxHeight-this.scrollbarTop:this.scrollbarHeight,this.scrollbarLeft=this.content.left/t*this.boxWidth,this.scrollbarLeft=this.scrollbarLeft<0?0:this.scrollbarLeft,this.scrollbarWidth=this.boxWidth/t*this.boxWidth,this.scrollbarWidth=this.scrollbarWidth+this.scrollbarLeft>this.boxWidth?this.boxWidth-this.scrollbarLeft:this.scrollbarWidth,this.isScrollbarVertical&&this.scrollbar.beginFill(this.options.scrollbarBackground,this.options.scrollbarBackgroundAlpha).drawRect(this.boxWidth-this.scrollbarSize+this.options.scrollbarOffsetVertical,0,this.scrollbarSize,this.boxHeight).endFill(),this.isScrollbarHorizontal&&this.scrollbar.beginFill(this.options.scrollbarBackground,this.options.scrollbarBackgroundAlpha).drawRect(0,this.boxHeight-this.scrollbarSize+this.options.scrollbarOffsetHorizontal,this.boxWidth,this.scrollbarSize).endFill(),this.isScrollbarVertical&&this.scrollbar.beginFill(this.options.scrollbarForeground,this.options.scrollbarForegroundAlpha).drawRect(this.boxWidth-this.scrollbarSize+this.options.scrollbarOffsetVertical,this.scrollbarTop,this.scrollbarSize,this.scrollbarHeight).endFill(),this.isScrollbarHorizontal&&this.scrollbar.beginFill(this.options.scrollbarForeground,this.options.scrollbarForegroundAlpha).drawRect(this.scrollbarLeft,this.boxHeight-this.scrollbarSize+this.options.scrollbarOffsetHorizontal,this.scrollbarWidth,this.scrollbarSize).endFill(),this.activateFade()}_drawMask(){this._maskContent.beginFill(0).drawRect(0,0,this.boxWidth,this.boxHeight).endFill(),this.content.mask=this._maskContent}update(){if(this.content.mask=null,this._maskContent.clear(),!this._disabled){this._drawScrollbars(),this._drawMask();const t=this.isScrollbarHorizontal&&this.isScrollbarVertical?"all":this.isScrollbarHorizontal?"x":"y";null!==t&&(this.options.dragScroll&&this.content.drag({clampWheel:this.options.clampWheel,direction:t}),this.content.clamp({direction:t,underflow:this.options.underflow}))}}updateLoop(t){if(this.fade){if(this.fade.wait>0){if(this.fade.wait-=t,!(this.fade.wait<=0))return;t+=this.fade.wait}this.fade.duration+=t,this.fade.duration>=this.options.fadeScrollbarTime?(this.fade=null,this.scrollbar.alpha=0):this.scrollbar.alpha=this.ease(this.fade.duration,1,-1,this.options.fadeScrollbarTime),this.content.dirty=!0}}get dirty(){return this.content.dirty}set dirty(t){this.content.dirty=t}activateFade(){!this.fade&&this.options.fade&&(this.scrollbar.alpha=1,this.fade={wait:this.options.fadeScrollboxWait,duration:0})}scrollbarDown(t){const e=this.toLocal(t.data.global);return this.isScrollbarHorizontal&&e.y>this.boxHeight-this.scrollbarSize?(e.x>=this.scrollbarLeft&&e.x<=this.scrollbarLeft+this.scrollbarWidth?this.pointerDown={type:"horizontal",last:e}:e.x>this.scrollbarLeft?(this.content.left+=this.content.worldScreenWidth,this.update()):(this.content.left-=this.content.worldScreenWidth,this.update()),void(this.options.stopPropagation&&t.stopPropagation())):this.isScrollbarVertical&&e.x>this.boxWidth-this.scrollbarSize?(e.y>=this.scrollbarTop&&e.y<=this.scrollbarTop+this.scrollbarWidth?this.pointerDown={type:"vertical",last:e}:e.y>this.scrollbarTop?(this.content.top+=this.content.worldScreenHeight,this.update()):(this.content.top-=this.content.worldScreenHeight,this.update()),void(this.options.stopPropagation&&t.stopPropagation())):void 0}scrollbarMove(t){if(this.pointerDown){if("horizontal"===this.pointerDown.type){const e=this.toLocal(t.data.global),i=this.scrollWidth+(this.isScrollbarVertical?this.options.scrollbarSize:0);this.scrollbarLeft+=e.x-this.pointerDown.last.x,this.content.left=this.scrollbarLeft/this.boxWidth*i,this.pointerDown.last=e,this.update()}else if("vertical"===this.pointerDown.type){const e=this.toLocal(t.data.global),i=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);this.scrollbarTop+=e.y-this.pointerDown.last.y,this.content.top=this.scrollbarTop/this.boxHeight*i,this.pointerDown.last=e,this.update()}this.options.stopPropagation&&t.stopPropagation()}}scrollbarUp(){this.pointerDown=null}resize(t){this.options.boxWidth=void 0!==t.boxWidth?t.boxWidth:this.options.boxWidth,this.options.boxHeight=void 0!==t.boxHeight?t.boxHeight:this.options.boxHeight,t.scrollWidth&&(this.scrollWidth=t.scrollWidth),t.scrollHeight&&(this.scrollHeight=t.scrollHeight),this.content.resize(this.options.boxWidth,this.options.boxHeight,this.scrollWidth,this.scrollHeight),this.update()}ensureVisible(t,e,i,n){this.content.ensureVisible(t,e,i,n),this._drawScrollbars()}}var hi=i(2494);const li={Boosters:[{type:y.nA.Income,title:"booster_income_title",description:"booster_income_desc",image:"x2"},{type:y.nA.BubbleTime,title:"booster_bubble_time_title",description:"booster_bubble_time_desc",image:"upgrades/booster-fasterbubble-ico"},{type:y.nA.CreaturesDiscount,title:"booster_monster_discount",description:"booster_monster_discount_desc",image:"upgrades/booster-monstersale-ico"}],HardMoney:[{id:"hard1",price:"$$$",reward:new j({type:y.E.MoneyHard,valueStr:"60"}),title:"hard_pack_1_title",image:"bank/pack-gems-box"},{id:"hard2",price:"$$$",reward:new j({type:y.E.MoneyHard,valueStr:"500"}),title:"hard_pack_2_title",image:"bank/pack-gems-sack"},{id:"hard3",price:"$$$",reward:new j({type:y.E.MoneyHard,valueStr:"3500"}),title:"hard_pack_3_title",image:"bank/pack-gems-case"},{id:"ads",price:null,reward:new j({type:y.E.MoneyHard,valueStr:"3"}),title:"",image:"bank/pack-gems-handful"}],NoAds:{id:"noads",price:"$$$",reward:new j({type:y.E.NoAds,valueStr:"1"}),title:"no_ads_title",description:"no_ads_description",image:"offers/noads"},SoftMoney:[{id:"soft1",price:new G({priceType:y.zc.Hard,priceValueStr:"59"}),reward:new j({type:y.E.MoneySoft,valueStr:"43100000000000000000"}),title:"soft_pack_1_title",image:"bank/pack-gold-sack"},{id:"soft2",price:new G({priceType:y.zc.Hard,priceValueStr:"199"}),reward:new j({type:y.E.MoneySoft,valueStr:"172400000000000000000"}),title:"soft_pack_2_title",image:"bank/pack-gold-safe"},{id:"soft3",price:new G({priceType:y.zc.Hard,priceValueStr:"349"}),reward:new j({type:y.E.MoneySoft,valueStr:"344800000000000000000"}),title:"soft_pack_3_title",image:"bank/pack-gold-mountain"}]};function ci(t){switch(t){case y.zc.Soft:return"ico-gold";case y.zc.Hard:return"ico-diamond";default:return""}}class ui extends qt.M{constructor(t){super(),this.onClick=this.onClick.bind(this),this.config=t,this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.3,this.picture=this.addChild(new qt.M(t.image)),this.title=this.addChild(new $t.g(Ko.Localizator.Get(t.title))),this.durationBack=this.addChild(new se.z("bg-simple")),this.durationBack.tint=0,this.durationBack.alpha=.3,this.clock=this.addChild(new qt.M("ico-clock")),this.duration=this.addChild(new $t.g("")),this.descriptionBack=this.addChild(new se.z("bg-simple")),this.descriptionBack.tint=0,this.descriptionBack.alpha=.3,this.description=this.addChild(new $t.g(Ko.Localizator.Get(t.description))),this.btn=this.addChild(new he("btn-blue",{label:"",icon:"ico-diamond",iconAlign:"right",iconSize:.9})),this.btn.on("pointertap",this.onClick)}Init(){let t=Ko.GameData.AppStore.GetBooster(this.config.type);this.config.price=new G(t.price),this.duration.text=w.Format("{0}h",Math.floor(t.durationSeconds/60/60)),this.btn.label=fe.c.FormatMoney(Ko.GameData.AppStore.GetBooster(this.config.type).price.priceValue),this.btn.icon=ci(this.config.price.priceType)}onClick(){let t=Ko.GameData.AppStore.GetBooster(this.config.type);Ko.Player.SpendMoney(t.price,y.DE.booster,y.JD.boosters,t.boosterType)?(Ko.Analytics.SendBoosterEvent(this.config.type),Ko.Boosters.AddBoosterTime(this.config.type,t.durationSeconds)):Ko.UI.notEnoughHardMoney.Show()}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.width=e.width,this.back.height=e.height,e=t.clone(),e.width=.2*t.width,e.height=.6*t.height,e.x=.05*(t.width-e.width),e.y=.08*(t.height-e.height),this.picture.fitRect(e),e=t.clone(),e.width=.47*t.width,e.height=.25*t.height,e.x=.47*(t.width-e.width),e.y=.08*(t.height-e.height),this.title.anchor.set(0,.5),this.title.fitLayout(e);let i=new hi.Rectangle;i.width=.37*t.width,i.height=.17*t.height,i.x=.45*(t.width-i.width),i.y=.45*(t.height-i.height),this.durationBack.fitLayout(i),e=i.clone(),e.width=e.height=1.5*i.height,e.x=i.x+0*(i.width-e.width)-.5*e.width,e.y=i.y+.5*(i.height-e.height),this.clock.fitRect(e),e=i.clone(),e.width=e.height=i.height,e.x=i.x+.5*(i.width-e.width),e.y=i.y+.5*(i.height-e.height),this.duration.fitLayout(e);let n=new hi.Rectangle;n.width=.9*t.width,n.height=.3*t.height,n.x=.5*(t.width-n.width),n.y=.9*(t.height-n.height),this.descriptionBack.fitLayout(n),e=n.clone(),e.width=.9*n.width,e.height=n.height,e.x=n.x+.5*(n.width-e.width),e.y=n.y+.5*(n.height-e.height),this.description.fitLayout(e),e=t.clone(),e.width=.25*t.width,e.height=.4*t.height,e.x=.95*(t.width-e.width),e.y=.3*(t.height-e.height),this.btn.fitLayout(e)}}class di extends qt.M{constructor(t){super(),this.onClick=this.onClick.bind(this),this.config=t,this.back=this.addChild(new qt.M("offers/shop-bg")),this.picture=this.addChild(new qt.M(t.image)),this.title=this.addChild(new $t.g(Ko.Localizator.Get(t.title))),this.title.SetActive(!!t.title),this.reward=this.addChild(new oe.L({label:"",icon:"ico-diamond",iconAlign:"right",iconSize:1})),this.btn=this.addChild("ads"===t.id?new ce("btn-green",{label:Ko.Localizator.Get(t.id)}):new he("btn-green",{label:t.price})),this.mask=this.addChild(new hi.Graphics),this.btn.on("pointertap",this.onClick)}Init(){if("ads"!==this.config.id){let t=Ko.Store.GetProduct(this.config.id);t?(this.btn.label=t.GetPrice(),this.config.reward=t.rewards[0]):this.SetActive(!1)}else this.config.reward=Ko.GameData.AppStore.hardAdsBonusReward;this.reward.label=fe.c.FormatMoney(this.config.reward.realValue)}onClick(){"ads"===this.config.id?Ko.Ads.TriggerRewarded((()=>Ko.GameData.AppStore.hardAdsBonusReward.Take(this.config.id))):Ko.Store.BuyProductID(this.config.id)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.anchor.set(0,0),this.back.scale.set(e.width/this.back.texture.width,e.height/this.back.texture.height),this.mask.clear().beginFill(16777215,1).drawRoundedRect(e.x,e.y,e.width,e.height,28),e=t.clone(),e.width=.7*t.width,e.height=.2*t.height,e.x=.5*(t.width-e.width),e.y=.05*(t.height-e.height),this.title.fitLayout(e),e=t.clone(),e.width=.4*t.width,e.height=.22*t.height,e.x=.5*(t.width-e.width),e.y=(t.height-e.height)*(""===this.config.title?.05:.35),this.reward.fitLayout(e),e=t.clone(),e.width=.4*t.width,e.height=.7*t.height,e.x=.05*(t.width-e.width),e.y=.9*(t.height-e.height),this.picture.fitRect(e,!0),e=t.clone(),e.width=.35*t.width,e.height=.35*t.height,e.x=.9*(t.width-e.width),e.y=.9*(t.height-e.height),this.btn.fitLayout(e)}}class pi extends qt.M{constructor(t){super(),this.onClick=this.onClick.bind(this),this.config=t,this.back=this.addChild(new qt.M(hi.Texture.WHITE)),this.back.tint=0,this.back.alpha=.3,this.picture=this.addChild(new qt.M(t.image)),this.title=this.addChild(new $t.g(Ko.Localizator.Get(t.title))),this.title.anchor.set(0,.5),this.description=this.addChild(new $t.g(Ko.Localizator.Get(t.description),{wordWrap:!1})),this.btn=this.addChild(new he("btn-green",{label:t.price})),this.mask=this.addChild(new hi.Graphics),this.btn.on("pointertap",this.onClick)}Init(){return this.Update()}Update(){let t=Ko.Store.GetProduct(this.config.id);this.SetActive(t&&!Ko.Player.NoAds),this.btn.label=this.Active?t.GetPrice():""}onClick(){Ko.Store.BuyProductID(this.config.id)}fitLayout(t){this.position.copyFrom(t),this.y+=t.height;let e=t.clone();e.x=e.y=0,this.back.anchor.set(0,0),this.back.scale.set(e.width/this.back.texture.width,e.height/this.back.texture.height),this.mask.clear().beginFill(16777215,1).drawRoundedRect(e.x,e.y,e.width,e.height,28);let i=e.clone();i.width*=.3,i.pad(.05*-i.width,0),this.picture.fitRect(i);let n=e.clone();n.height*=.4,n.y=.1*e.height,n.width=.9*e.width-i.width,n.x=i.right+.05*e.width,this.title.fitLayout(n);let r=n.clone();r.y=n.bottom,r.height=e.height-n.bottom-.1*e.height,r.width*=.5,this.description.fitLayout(r);let s=r.clone();s.x=r.right,s.width=n.width-r.width,s.pad(.1*-s.width,0),this.btn.fitLayout(s)}}class fi extends qt.M{constructor(t){super(),this.onClick=this.onClick.bind(this),this.config=t,this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.3,this.picture=this.addChild(new qt.M(t.image)),this.title=this.addChild(new $t.g(Ko.Localizator.Get(t.title))),this.reward=this.addChild(new oe.L({label:fe.c.FormatMoney(t.reward.value),icon:"ico-gold",iconAlign:"right",iconSize:1})),this.btn=this.addChild(new he("btn-green",{label:"",icon:"ico-diamond",iconAlign:"right",iconSize:1})),this.btn.on("pointertap",this.onClick)}Init(){let t=Ko.GameData.AppStore.GetInGameProduct(this.config.id);this.config.price=new G(t.price),this.config.reward=new j(t.rewards[0]),this.btn.label=fe.c.FormatMoney(this.config.price.priceValue),this.btn.icon=ci(this.config.price.priceType),this.reward.label=fe.c.FormatMoney(this.config.reward.realValue)}onClick(){Ko.Player.SpendMoney(this.config.price)?this.config.reward.Take(this.config.id):Ko.UI.notEnoughHardMoney.Show()}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.width=e.width,this.back.height=e.height,e=t.clone(),e.width=.7*t.width,e.height=.22*t.height,e.x=.5*(t.width-e.width),e.y=.05*(t.height-e.height),this.title.fitLayout(e),e=t.clone(),e.width=.4*t.width,e.height=.24*t.height,e.x=.5*(t.width-e.width),e.y=(t.height-e.height)*(""===this.config.title?.05:.35),this.reward.fitLayout(e),e=t.clone(),e.width=.4*t.width,e.height=.7*t.height,e.x=.05*(t.width-e.width),e.y=.75*(t.height-e.height),this.picture.fitRect(e,!0),e=t.clone(),e.width=.35*t.width,e.height=.35*t.height,e.x=.9*(t.width-e.width),e.y=.9*(t.height-e.height),this.btn.fitLayout(e);let i=new hi.Rectangle(0,0,this.btn.width,this.btn.height).pad(.05*-this.btn.width,.2*-this.btn.height);this.btn.content.fitLayout(i)}}class mi extends qt.M{Awake(){super.Awake(),this.title=this.addChild(new $t.g("")),this.content=this.addChild(new qt.M)}fitLayout(t){this.position.set(0,t.bottom);let e=t.clone();e.height=.13*t.width,e.x=0,e.y=.08*t.width,this.title.fitLayout(e),this.content.position.set(0,e.bottom),t.height+=e.height+e.y}}class gi extends mi{Awake(){super.Awake(),this.title.text=Ko.Localizator.Get("vip");let t=new qt.M("offers/vip-badge-bg");t.addChild(new qt.M("offers/crown")),this.btn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("gold_membership"),icon:t,iconSize:1})),this.btn.on("pointertap",(()=>Ko.UI.vip.Show()))}Update(){this.SetActive(!1)}fitLayout(t){super.fitLayout(t);let e=t.clone();e.height=.3*t.width,e.x=0,e.y=.01*t.width,this.btn.fitLayout(e),this.btn.content._icon.y-=.03*e.height,t.height+=e.height+e.y}}class _i extends mi{Awake(){super.Awake(),this.title.text=Ko.Localizator.Get("boosters"),this.items=[];for(let t of li.Boosters)this.items.push(this.content.addChild(new ui(t)))}Init(){for(let t of this.items)t.Init()}fitLayout(t){super.fitLayout(t);let e=t.clone();e.height=.35*t.width,e.y=.05*e.width;let i=.07*e.width,n=e.height+i;for(let t of this.items)t.fitLayout(e),e.y+=n;t.height+=e.y-i}}class yi extends mi{Awake(){super.Awake(),this.title.text=Ko.Localizator.Get("hard_money"),this.items=[];for(let t of li.HardMoney)this.items.push(this.content.addChild(new di(t)));this.noAds=this.addChild(new pi(li.NoAds))}Init(){for(let t of this.items)t.Init()}Update(){for(let t of this.items)t.Update();this.noAds.Update()}fitLayout(t){super.fitLayout(t);let e=t.clone();e.height=.5*t.width,e.y=.05*e.width;let i=.07*e.width,n=e.height+i,r=this.items.filter((t=>t.Active));for(let t of r)t.fitLayout(e),e.y+=n;if(this.noAds.Active){let t=e.clone();t.height*=.5,this.noAds.fitLayout(t),e.y+=t.height+i}t.height+=e.y-i}}class vi extends mi{Awake(){super.Awake(),this.title.text=Ko.Localizator.Get("soft_money"),this.items=[];for(let t of li.SoftMoney)this.items.push(this.content.addChild(new fi(t)))}Init(){for(let t of this.items)t.Init()}fitLayout(t){super.fitLayout(t);let e=t.clone();e.height=.45*t.width,e.y=.05*e.width;let i=.07*e.width,n=e.height+i;for(let t of this.items)t.fitLayout(e),e.y+=n;t.height+=e.y,t.height+=.3*n}}class bi extends re{Awake(){super.Awake({masked:!0}),this.scrollbox=this.content.addChild(new ai({overflow:"hidden",interaction:Ko.app.renderer.plugins.interaction})),this.btnClose=this.content.addChild(new Kt("button-close")),this.btnClose.alpha=Zt.T.LANDSCAPE_MODE_NEEDED?1:.5,this.vip=this.scrollbox.content.addChild(new gi),this.boosters=this.scrollbox.content.addChild(new _i);const{REWARDED_AD_ALLOWED:t}=Zt.T;t&&(this.hardMoney=this.scrollbox.content.addChild(new yi)),this.softMoney=this.scrollbox.content.addChild(new vi),this.sections=t?[this.vip,this.boosters,this.hardMoney,this.softMoney]:[this.vip,this.boosters,this.softMoney],this.HideWithBackButton=!0}viewportPopupWidthRatio=.85;viewportPopupHeightRatio=.85;setAdditionalLayoutAndStyleConfig(){super.setAdditionalLayoutAndStyleConfig(),Zt.T.LANDSCAPE_MODE_NEEDED&&(this.viewportPopupHeightRatio=.82,this.viewportPopupWidthRatio=.82,this.closeBtnAlpha=1,this.closeBtnOffsetFactorX=.89,this.closeBtnOffsetFactorY=1)}Init(){super.Init(),this.onClickClose=this.onClickClose.bind(this),this.onProductPurchased=this.onProductPurchased.bind(this),this.btnClose.on("pointertap",this.onClickClose),this.antiClick.on("pointertap",this.onClickClose),Ko.Store.on("Purchased",this.onProductPurchased)}fitSections(t=this.scrollbox.scrollWidth){let e=new hi.Rectangle(0,0,t,0);for(let t of this.sections)t.Active&&t.fitLayout(e);return e}fitLayout(t=Ko.app.viewport){let e=Math.min(t.width*this.viewportPopupWidthRatio,t.height*this.viewportPopupHeightRatio/1.7),i=1.7*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize();this.btnClose.scale=this.closeBtn.scale,this.btnClose.position=this.closeBtn.position;let r=n.clone().pad(.05*-n.width,0),s=this.fitSections(r.width);this.scrollbox.position.copyFrom(r),this.scrollbox.resize({boxWidth:r.width,boxHeight:r.height,scrollWidth:s.width,scrollHeight:s.height}),this._renderMask()}onProductPurchased(t){"vip"==t.id&&this.vip.SetActive(!1),this.Update(),this.fitLayout()}Update(){for(let t of this.sections)t.Update()}Show(){const{REWARDED_AD_ALLOWED:t}=Zt.T;for(let t of this.sections)t.Init();switch(this.Update(),this.fitLayout(),Ko.UI.state){case y.Su.BankHard:t&&(this.scrollbox.scrollTop=this.hardMoney.y);break;case y.Su.BankSoft:this.scrollbox.scrollTop=this.softMoney.y;break;default:this.scrollbox.scrollTop=0}super.Show()}onClickClose(){Ko.UI.SetState(y.Su.Game)}Hide(){this.Active&&Ko.Ads.TriggerInterstitial(),super.Hide()}}var wi=i(2494);const Si="ruy3n874xz3948rymx34r";class Ti extends qt.M{static createList(){let t=new Set;for(let e of Ko.GameData.Chest.rewards)t.add(e.type);return[...t].map((t=>new this(t))).filter((t=>t.Active))}constructor(t){super(),this.rewardType=t,this.Init()}get rewards(){return Ko.GameData.Chest.rewards.filter((t=>t.type===this.rewardType))}get values(){return this.rewards.map((t=>t.value||t.valueInt))}get iconImage(){switch(this.rewardType){case y.E.MoneyHard:return"ico-diamond";case y.E.MoneySoftBySoftSpeed:return"ico-gold";case y.E.RandomCreatureFromCurrentEpoch:return"box";case y.E.BoosterIncomeX4:return"x4";case y.E.BoosterCreaturesDiscount:return"upgrades/booster-monstersale-ico"}return""}get labelText(){let t=this.values,e=[1/0,-1/0];if(t.length>1)for(let i of t)i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i);switch(this.rewardType){case y.E.MoneyHard:return e.join("-");case y.E.MoneySoftBySoftSpeed:return e.map((t=>NUtils.FormatMoney(t))).join("-");case y.E.RandomCreatureFromCurrentEpoch:return Ko.Localizator.Get("random_monster");case y.E.BoosterIncomeX4:case y.E.BoosterCreaturesDiscount:return e.map((t=>Math.ceil(t/60))).join("-")+" "+Ko.Localizator.Get("minutes")}return""}Awake(){super.Awake(),this.icon=this.addChild(new qt.M),this.label=this.addChild(new $t.g(""))}Init(){super.Init(),this.icon.setImage(this.iconImage),this.label.text=this.labelText,this.SetActive(this.rewards.length>0)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0;let i=e.clone().pad(.15*-e.width,.15*-e.height);i.x=.5*(e.width-i.width),i.y=.2*(e.height-i.height),this.icon.fitRect(i);let n=e.clone();n.height*=.25,n.y=e.height-n.height,this.label.fitLayout(n)}}class xi extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new se.z("bg-simple")),this.back.tint=0,this.back.alpha=.3,this.items=[]}Init(){this.items=Ti.createList();for(let t of this.items)this.addChild(t)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e);let i=Math.min(.8*e.width/3,.9*e.height/2),n=(e.width-3*i)/4,r=(e.height-2*i)/3,s=new wi.Rectangle(n,r,i,i);for(let t=0;t<this.items.length;t++)this.items[t].fitLayout(s),2===t?(s.x=.5*(e.width-(2*i+n)),s.y=i+2*r):s.x+=i+n}}class Ei extends re{get freeChestOpened(){return b.g.HasKey(Si)}set freeChestOpened(t){b.g.SetInt(Si,1)}Awake(){super.Awake({title:Ko.Localizator.Get("chest_open_title"),closeButton:!0,sound:"CreatureMerge"}),this.onWatched=this.onWatched.bind(this),this.description=this.content.addChild(new $t.g(Ko.Localizator.Get("chest_open_disc"))),this.description.fill=12763842,this.rewardItems=this.content.addChild(new xi),this.openBtn=this.content.addChild(new ce("btn-green",{label:Ko.Localizator.Get("chest_open_button"),icon:this.freeChestOpened?"play-icon":void 0,iconAlign:"right",iconSize:.7})),this.openBtn.on("pointertap",(()=>{this.freeChestOpened?Ko.Ads.TriggerRewarded(this.onWatched):(this.Hide(),Ko.UI.chestReward.Show(),this.freeChestOpened=!0,Ko.Analytics.SendChestEvent("free_chest"))})),this.closeBtn.on("pointertap",(()=>{Ko.UI.game.chestBtn.SetActive(!1),Ko.UI.game.chestBtn.ShowAfterNMinutes(30),this.Hide()}))}Init(){this.rewardItems.Init()}onWatched(){this.Hide(),Ko.UI.chestReward.Show(),Ko.Analytics.SendChestEvent("video_ads")}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.6*t.height/1.1),i=1.1*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.07*n.height,r.width=.8*n.width,r.x=.5*(n.width-r.width),r.y=.21*(n.height-r.height),this.description.fitLayout(r),r=n.clone(),r.height=.45*n.height,r.width=.8*n.width,r.x=.5*(n.width-r.width),r.y=.56*(n.height-r.height),this.rewardItems.fitLayout(r),r=n.clone(),r.height=.15*n.height,r.width=.5*n.width,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.openBtn.fitLayout(r)}}var Ai=i(3795),Ii=i(2494);class Ci extends qt.M{Awake(){super.Awake(),this.bgActiveContainer=this.addChild(new Ii.Container),this.bgActive=this.bgActiveContainer.addChild(new qt.M(Ii.Texture.WHITE)),this.bgActive.alpha=.3,this.bgActive.SetActive(!1),this.border=this.addChild(new Ii.Graphics),this.icon=this.addChild(new qt.M),this.label=this.addChild(new $t.g),this.lightAnimation=null,this._rect=new Ii.Rectangle}SetItem(t,e){if(this.item!==t){switch(this.item=t,t.type){case y.E.MoneyHard:this.icon.setImage("ico-diamond"),this.label.text=t.value;break;case y.E.MoneySoftBySoftSpeed:this.icon.setImage("ico-gold"),this.label.text=NUtils.FormatMoney(t.value*Ai.GameManager.gameController.MoneySoftSpeed);break;case y.E.RandomCreatureFromCurrentEpoch:this.icon.setImage("box"),this.label.text=Ko.Localizator.Get("random_monster");break;case y.E.BoosterIncomeX4:this.icon.setImage("x4"),this.label.text=Math.ceil(t.valueInt/60)+" "+Ko.Localizator.Get("minutes");break;case y.E.BoosterCreaturesDiscount:this.icon.setImage("upgrades/booster-monstersale-ico"),this.label.text=Math.ceil(t.valueInt/60)+" "+Ko.Localizator.Get("minutes");break;default:this.icon.setImage(""),this.label.text=""}this._fitSize()}}_fitSize(){let t=this._rect;this.bgActiveContainer.position.set(t.x+.5*t.width,t.y+.5*t.height);let e=t.clone();e.x=.5*-t.width,e.y=.5*-t.height,this.bgActive.anchor.set(.5,.5),this.bgActive.fitRect(t),this.bgActive.position.set(0,0),this.border.clear().lineStyle(1,16777215,1).drawRect(t.x,t.y,t.width,t.height);let i=t.clone().pad(.2*-t.height);i.y=.1*t.height,this.icon.fitRect(i);let n=t.clone().pad(0,.4*-t.height);n.y=t.bottom-n.height,this.label.fitLayout(n)}fitLayout(t){this.position.copyFrom(t),this._rect.copyFrom(t),this._rect.x=this._rect.y=0,this._fitSize()}PlayChooseAnimation(){this.bgActiveContainer.scale.set(0),this.bgActive.SetActive(!0),Jt.gsap.timeline().to(this.bgActiveContainer,{pixi:{scale:1.2},duration:.3}).to(this.bgActiveContainer,{pixi:{scale:1},duration:.2})}ClearChooseAnimation(){this.bgActive.SetActive(!1)}}var Pi=i(2494);class Ri extends qt.M{get traveledDistance(){return this._traveledDistance}set traveledDistance(t){this._traveledDistance;this._traveledDistance=t,this._renderTraveledDistance()}Awake(){super.Awake(),this._rect=new Pi.Rectangle(0,0,1,1),this.mask=this.addChild(new Pi.Graphics).clear().beginFill(16777215,1).drawRect(0,0,1,1),this.back=this.addChild(new se.z("particles/rect")),this.back.tint=0,this.back.alpha=.3,this.items=[],this.targetReward=null,this.callback=null,this.spin=!1;for(let t=0;t<9;t++){let t=this.addChild(new Ci);this.items.push(t)}this.cursor=this.addChild(new Pi.Graphics).beginFill(16777215,1).drawRect(-2,0,4,1),this.itemSize=0,this.totalWidth=0,this._traveledDistance=0,this.sequence=[],this.reset(),this._generateSequence()}Init(t,e){t||(t=Ko.GameData.Chest.GetRandomReverse()),this.callback=e,this.targetReward=t,this.reset()}reset(){this.spinning&&(this.spinning.kill(),this.spinning=null),this.sequence.splice(0),this._generateSequence(),this._traveledDistance=0;for(let t of this.items)t.ClearChooseAnimation()}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.set(t.x+.5*t.width,t.y);let e=t.clone();e.x=.5*-e.width,e.y=0;let i=e.clone().pad(0,1.05*e.height);this.mask.position.copyFrom(i),this.mask.width=i.width,this.mask.height=i.height,this.back.fitLayout(e),this.itemSize=e.height,this.totalWidth=this.items.length*this.itemSize,this.cursor.position.set(-2,0),this.cursor.height=e.height,this._renderTraveledDistance()}_generateSequence(){for(this.sequence=[];this.sequence.length<50;)this.sequence.push(Ko.GameData.Chest.GetRandom());this._truncateTraveledDistance(),this.targetReward&&(this.sequence[46]=this.targetReward),this._renderTraveledDistance()}_truncateTraveledDistance(){if(this._traveledDistance=Math.round(this._traveledDistance),0!==this._traveledDistance){for(;this._traveledDistance<0;)this._traveledDistance+=this.sequence.length;for(;this._traveledDistance>this.sequence.length;)this._traveledDistance-=this.sequence.length;for(;this._traveledDistance>0;)this.sequence.push(this.sequence.shift()),this._traveledDistance--}}_renderTraveledDistance(){let t=Math.round(this._traveledDistance)-Math.floor(this.items.length/2);t<0&&(t+=this.sequence.length);let e=this.sequence.slice(t,t+this.items.length);e.length<this.items.length&&e.push(...this.sequence.slice(0,this.items.length-e.length));let i=this._rect.height,n=new Pi.Rectangle(i*(.5*this.items.length-1),0,i,i),r=Math.round(this._traveledDistance)-this._traveledDistance;for(let t=this.items.length-1;t>=0;t--)this.items[t].SetItem(e[e.length-t-1]),this.items[t].fitLayout(n),this.items[t].pivot.x=r*i,n.x-=i}run(){this.traveledDistance=0,console.log("REWARD",y.E[this.targetReward.type],this.targetReward.value||this.targetReward.valueInt),this._generateSequence();let t=this.sequence.length-4+.45-.9*Math.random(),e=this.traveledDistance;this.spinning=Jt.gsap.timeline().to(this,{traveledDistance:t,duration:4,ease:"circ.out"}).eventCallback("onUpdate",(()=>{let t=Math.ceil(this.traveledDistance);e!==t&&(e=t,Ko.Audio.Play("SpinTic"))})).eventCallback("onComplete",(()=>{this.spinning=null,this.items[~~(this.items.length/2)].PlayChooseAnimation(),this.callback()}))}}const Oi="43v89netyc8nert3cn834crt";class ki extends re{get FirstRewardTaken(){return b.g.HasKey(Oi)}set FirstRewardTaken(t){t?b.g.SetInt(Oi,1):b.g.DeleteKey(Oi)}Awake(){super.Awake({title:Ko.Localizator.Get("chest_open_title")}),this.onRouletteFinished=this.onRouletteFinished.bind(this),this.okBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("ok")})),this.spinButton=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("chest_open_spin")})),this.roulette=this.content.addChild(new Ri),this.targetReward=new q,this.spinButton.on("pointertap",(()=>{this.roulette.run(),this.spinButton.interactive=!1,Ko.UI.game.chestBtn.SetActive(!1)})),this.okBtn.on("pointertap",(()=>{this.targetReward&&(this.targetReward.Take("chest_reward"),this.FirstRewardTaken=!0),this.Hide()}))}Show(){this.FirstRewardTaken?this.targetReward=Ko.GameData.Chest.GetRandom():this.targetReward=Ko.GameData.Chest.Get(3),this.spinButton.interactive=!0,this.spinButton.SetActive(!0),this.okBtn.SetActive(!1),this.roulette.Init(this.targetReward,this.onRouletteFinished),super.Show()}fitLayout(t=Ko.app.viewport){let e=Math.min(.95*t.width,.6*t.height/.8),i=.8*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.4*n.height,r.width=n.width,r.x=.5*(n.width-r.width),r.y=.5*(n.height-r.height),this.roulette.fitLayout(r),r=n.clone(),r.width=.42*n.width,r.height=.2*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.spinButton.fitLayout(r),this.okBtn.fitLayout(r)}onRouletteFinished(){console.log("ROULETTE FINISHED",this.targetReward),this.spinButton.SetActive(!1),this.okBtn.SetActive(!0)}}class Mi extends qt.M{}var Di=i(2494);class Ni extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake({title:Ko.Localizator.Get("bonus_gold_title"),closeButton:!0}),this.onWatched=this.onWatched.bind(this),this.objectX2=this.content.addChild(new Mi),this.objectX4=this.content.addChild(new Mi),this.iconBack=this.content.addChild(new se.z("bg-simple")),this.iconBack.tint=0,this.iconBack.alpha=.3,this.iconImage=this.content.addChild(new qt.M("bank/pack-gold-mountain")),this.clockBack=this.content.addChild(new se.z("bg-simple")),this.clockBack.tint=0,this.clockBack.alpha=.3,this.clock=this.content.addChild(new qt.M("ico-clock")),this.multiplier=this.content.addChild(new $t.g),this.buttonTake=this.content.addChild(new ce("btn-green",{label:Ko.Localizator.Get("take").toUpperCase(),icon:"play-icon",iconAlign:"right",iconSize:.7})),this.timeTextField=this.content.addChild(new $t.g),this.timeNumbersField=this.content.addChild(new $t.g("",{fitTextTemplate:"00h 00m 00s"})),this.descField=this.content.addChild(new $t.g),this.buttonTake.on("pointertap",(()=>{Ko.Ads.TriggerRewarded(this.onWatched)}))}onWatched(){let t=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.incomeBoosterTimerId),e=t&&!t.IsFinished,i=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.incomeX4BoosterTimerId);i&&i.IsFinished;e?(Ko.Player.Timers.l4b=Ko.Time.DayUniqId,Ko.Boosters.AddBoosterTime(y.nA.IncomeX4,Ko.GameData.Gameplay.incomeX4Seconds)):(Ko.Player.Timers.l2b=Ko.Time.DayUniqId,Ko.Boosters.AddBoosterTime(y.nA.Income,Ko.GameData.Gameplay.incomeX2Seconds)),this.Hide()}Show(){if(!this._rewardedAdAllowed)return;let t=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.incomeBoosterTimerId),e=t&&!t.IsFinished,i=Ko.Player.Timers.GetTimerById(Ko.Player.Timers.incomeX4BoosterTimerId);i&&!i.IsFinished||(this.objectX2.SetActive(!e),this.objectX4.SetActive(e),e?(this.timeNumbersField.text=fe.c.FormatSecondsToTime(Ko.GameData.Gameplay.incomeX4Seconds),this.timeTextField.text=Ko.Localizator.Get("for_n_minutes",Math.floor(Ko.GameData.Gameplay.incomeX4Seconds/60)),this.descField.text=Ko.Localizator.Get("bonus_gold_desc_х4"),this.multiplier.text="x4"):(this.timeNumbersField.text=fe.c.FormatSecondsToTime(Ko.GameData.Gameplay.incomeX2Seconds),this.timeTextField.text=Ko.Localizator.Get("for_n_hours",Math.floor(Ko.GameData.Gameplay.incomeX2Seconds/60/60)),this.descField.text=Ko.Localizator.Get("bonus_gold_desc"),this.multiplier.text="x2"),super.Show())}fitLayout(t=Ko.app.viewport){let e=Math.min(.7*t.width,.7*t.height/1.35),i=1.35*e;this.setPopupRect(new Di.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(!0),r=n.clone();r.height=.12*n.height,r.width=.42*n.width,r.x=.5*(n.width-r.width),r.y=n.y+.02*(n.height-r.height),this.descField.fitLayout(r),r=n.clone(),r.height=.6*n.height,r.width=.75*n.width,r.x=.5*(n.width-r.width),r.y=n.y+.38*(n.height-r.height),this.iconBack.fitLayout(r);let s=new Di.Rectangle(this.iconBack.x,this.iconBack.y,this.iconBack.width,this.iconBack.height);r=s.clone(),r.height=.62*s.height,r.width=.65*s.width,r.x=s.x+.5*(s.width-r.width),r.y=s.y+0*(s.height-r.height),this.iconImage.fitRect(r),r=s.clone(),r.height=.25*s.height,r.width=.25*s.height,r.x=this.iconImage.x+.5*(this.iconImage.width-r.width),r.y=s.y+.5*(s.height-r.height),this.multiplier.fitLayout(r),r=s.clone(),r.height=.09*s.height,r.width=.6*s.width,r.x=s.x+.5*(s.width-r.width),r.y=s.y+.75*(s.height-r.height),this.timeTextField.fitLayout(r);let o=new Di.Rectangle;o.width=.4*s.width,o.height=.13*s.height,o.x=s.x+.5*(s.width-o.width),o.y=s.y+.89*(s.height-o.height),r=o.clone(),r.height=o.height,r.width=o.height,r.x=o.x+0*(o.width-r.width),r.y=o.y+.5*(o.height-r.height),this.clock.fitRect(r),r=o.clone(),r.height=.8*o.height,r.width=o.width-.5*this.clock.width,r.x=o.x+1*(o.width-r.width),r.y=o.y+.5*(o.height-r.height),this.clockBack.fitLayout(r),r=o.clone(),r.height=.6*o.height,r.width=o.width-1.3*this.clock.width,r.x=o.x+1*(o.width-r.width),r.y=o.y+.5*(o.height-r.height),this.timeNumbersField.fitLayout(r),r=n.clone(),r.height=.14*n.height,r.width=.6*n.width,r.x=.5*(n.width-r.width),r.y=n.y+.95*(n.height-r.height),this.buttonTake.fitLayout(r)}}var Li=i(2494);class Bi extends Li.Graphics{constructor(t=1){super(),this.n=Math.max(1,~~t),this.fitLayout(new Li.Rectangle(-5,0,10,50))}fitLayout(t){this.position.set(t.x+.5*t.width,t.y);let e=.01*Ko.app.viewport.width;this.clear().lineStyle({width:e,color:16777215,alpha:1,alignment:.5,cap:Li.LINE_CAP.ROUND});let i=t.width/this.n,n=i*(this.n-1);for(let e=0;e<this.n;e++){let r=.5*-n+i*e;this.moveTo(.3*r,0).lineTo(r,t.height)}}}class Fi extends qt.M{Awake(){super.Awake(),this.creatureId=0,this.title=this.addChild(new $t.g("",{fontFamily:"-apple-system,Roboto,Helvetica,Arial,sans-serif",fontWeight:"normal",dropShadow:!1,color:13421772})),this.picture=this.addChild(new qt.M("questionmark-ico-black-alpha")),this.splitter=this.addChild(new Bi)}Init(t,e=!0){this.creatureId=t,this.splitter.SetActive(e),this.Update()}Update(){let t=Ko.GameData.Creatures.Get(this.creatureId),e=t&&Ko.Player.CollectionCreatures.includes(t.id);this.title.SetActive(e),this.title.text=e?Ko.Localizator.Get(t.creatureName):"",this.picture.setImage(e?`creatures/${this.creatureId}`:"questionmark-ico-black-alpha")}fitLayout(t){t=t.clone(),this.position.copyFrom(t),t.x=t.y=0;let e=t.clone();e.height=.1*t.height,this.title.autoFitProps.autoFitPadding=.05*e.height,this.title.fitLayout(e);let i=t.clone();i.height=.7*t.height,i.y=e.bottom,this.picture.fitRect(i);let n=t.clone().pad(0,.45*-t.height);n.y=i.bottom,this.splitter.fitLayout(n)}}class Ui extends qt.M{Awake(){super.Awake(),this.epochId=0,this.title=this.addChild(new $t.g("")),this.creatures=[],this.nextEpochs=[]}Init(t){this.epochId=t;let e=Ko.GameData.Epochs.GetById(this.epochId);if(!e)return;let i=e.nextEpochs||[];this.title.SetActive(e.epochLevel>1),this.title.text=Ko.Localizator.Get(e.epochName);let n=Ko.GameData.Epochs.GetById(this.epochId).creatures;for(let t of n){let e=this.addChild(new Fi);e.Init(t,i.length>0),this.creatures.push(e)}for(let t of i){let e=this.addChild(new Ui);e.Init(t),this.nextEpochs.push(e)}i.length>1&&(this.circle=this.addChild(new qt.M("circle-white")),this.splitter=this.addChild(new Bi(i.length))),this.Update()}Update(){for(let t of this.creatures)t.Update();for(let t of this.nextEpochs)t.Update()}fitLayout(t){this.position.set(t.x+.5*t.width,t.y);let e=t.clone();e.x=.5*-t.width,e.y=0;let i=Math.min(e.width,Ko.app.viewport.width/6),n=new Li.Rectangle(.5*-i,0,i,0);if(this.title.Active){let t=new Li.Rectangle(n.left,n.top,n.width,.3*n.width);this.title.autoFitProps.autoFitPadding=.05*t.height,this.title.fitLayout(t),n.height+=t.height}let r=n.clone();r.height=2*r.width,r.y=n.height;for(let t of this.creatures)t.fitLayout(r),r.y+=r.height,n.height+=r.height;let s=.2*n.width,o=e.clone().pad(.2*-e.width,0);o.y=n.bottom+s,o.height=.3*n.width,this.circle&&(this.circle.fitRect(o),o.y+=o.height+s,n.height+=o.height+s),this.splitter&&(this.splitter.fitLayout(o),n.height+=o.height+s),n.height+=s,t.height+=n.bottom;let a=e.clone();a.y=n.bottom,a.width=e.width/Math.max(1,this.nextEpochs.length);let h=a.height=0;for(let t of this.nextEpochs)a.height=0,t.fitLayout(a),a.x+=a.width,h=Math.max(h,a.height);t.height+=h}}class Gi extends re{Awake(){super.Awake({title:Ko.Localizator.Get("collection"),closeButton:!0,masked:!0}),this.settingsBtn=this.addChild(new Kt("settings-ico")),Zt.T.SHOW_SETTINGS_ICON||(this.settingsBtn.visible=!1,this.settingsBtn.alpha=0),this.progressField=this.content.addChild(new $t.g),this.scrollbox=this.content.addChildAt(new ai({overflow:"hidden",interaction:Ko.app.renderer.plugins.interaction}),0),this.rootEpoch=this.scrollbox.content.addChild(new Ui),this.settingsBtn.on("pointertap",(()=>{this.Hide(),Ko.UI.settings.Show()}))}setAdditionalLayoutAndStyleConfig(){super.setAdditionalLayoutAndStyleConfig(),Zt.T.LANDSCAPE_MODE_NEEDED&&(this.closeBtnOffsetFactorX=.85,this.closeBtnOffsetFactorY=.6,this.closeBtnAdditionalScaleFactor=.85)}Init(){super.Init();let t=Ko.GameData.Epochs.epochsByLevel.get(1)[0];this.rootEpoch.Init(t.id)}fitLayout(t=Ko.app.viewport){this.setPopupRect(t),super.fitLayout(t);let e=this.getContentSize(),i=new Li.Rectangle(this.header.x,this.header.y,this.header.width,this.header.height);this.settingsBtn.scale.set(.8*i.height/this.settingsBtn.texture.height),this.settingsBtn.position.set(i.x+.05*i.width+.5*this.settingsBtn.width,i.y+.5*i.height);let n=e.clone();n.height=.05*e.width,n.y=i.height,this.progressField.fitLayout(n);let r=e.clone();r.y=n.bottom,r.height=0,this.rootEpoch.fitLayout(r),this.scrollbox.resize({boxWidth:e.width,boxHeight:e.height,scrollWidth:e.width,scrollHeight:r.bottom})}Show(){this.Update(),super.Show()}Update(){let t=Ko.Player.PlanetsSave.collection.length,e=Ko.GameData.Creatures.creatures.length;this.progressField.text=Ko.Localizator.Get("collection_progress",t,e),this.rootEpoch.Update()}}class ji extends qt.M{}var Hi=i(2494);class zi extends Yt.e{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){super.Awake(),this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,this._rect=new Hi.Rectangle(0,0,1,1),this.onAdsShown=this.onAdsShown.bind(this),this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.5,this.adsPurchases=0,this.nameField=this.addChild(new $t.g("")),this.softSpeedField=this.addChild(new $t.g("")),this.purchasesNumberField=this.addChild(new $t.g("")),this.iconImage=this.addChild(new ji),this.softBtn=this.addChild(new he("btn-orange",{label:"0",icon:"ico-gold",iconSize:.9})),this.hardBtn=this.addChild(new he("btn-blue",{label:"0",icon:"ico-diamond",iconSize:.9})),this.adsBtn=this.addChild(new ce("btn-green",{label:Ko.Localizator.Get("ads"),icon:"play-icon",iconAlign:"right",iconSize:.9})),this.buttonDisabler=null,this.buyTutorialHand=this.addChild(new Mi),this.creatureData=null,this.softBtn.on("pointertap",(()=>{let t=Ko.Player.PlanetsSave.CurrentPlanet.GetCreatureSoftPriceWithMultiplayer(this.creatureData.id);this.tryToBuy(t)})),this.hardBtn.on("pointertap",(()=>{let t=Ko.Player.PlanetsSave.CurrentPlanet.GetCreatureHardPriceWithMultiplayer(this.creatureData.id);this.tryToBuy(t)})),this._rewardedAdAllowed&&this.adsBtn.on("pointertap",(()=>{let t=this.creatureData.id,e=Ko.GameData.Epochs.GetByCreatureId(t);Ai.GameManager.gameController.epochById.get(e.id).EnoughSpaceForSpawn?Ko.Ads.TriggerRewarded(this.onAdsShown):Ko.UI.noSpace.Show(e.id)})),this.adsBtn.visible=this._rewardedAdAllowed,this.adsBtn.alpha=this._rewardedAdAllowed?1:0}Init(t){this.creatureData=Ko.GameData.Creatures.Get(t),this.nameField.text=Ko.Localizator.Get(this.creatureData.creatureName),this.iconImage.setImage(`creatures/${this.creatureData.id}`)}fitLayout(t=this._rect){this._rect=t.clone(),this.position.copyFrom(t),this.back.width=t.width,this.back.height=t.height;let e=t.clone();e.width=.23*t.width,e.height=.8*t.height,e.x=.03*(t.width-e.width),e.y=.5*(t.height-e.height),this.iconImage.fitRect(e);let i=new Hi.Rectangle(this.back.x,this.back.y,this.back.width,this.back.height);(t=i.clone()).width=.3*i.width,t.height=.27*i.height,t.x=.4*(i.width-t.width),t.y=.1*(i.height-t.height),this.nameField.anchor.set(0,.5),this.nameField.fitLayout(t),t.height=.2*i.height,t.y=.45*(i.height-t.height),this.softSpeedField.anchor.set(0,.5),this.softSpeedField.fitLayout(t),t.height=.2*i.height,t.width=.25*i.width,t.y=.78*(i.height-t.height),this.purchasesNumberField.anchor.set(0,.5),this.purchasesNumberField.fitLayout(t),(t=i.clone()).width=.2*i.width,t.height=.4*i.height,t.x=.95*(i.width-t.width),t.y=.15*(i.height-t.height),this.softBtn.fitLayout(t),t.y=.85*(i.height-t.height),this.hardBtn.fitLayout(t),t.x=.68*(i.width-t.width),t.y=.85*(i.height-t.height),this.adsBtn.fitLayout(t);let n=new Hi.Rectangle(0,0,t.width,t.height).pad(.1*-t.width,.2*-t.height);this.softBtn.content.fitLayout(n),this.hardBtn.content.fitLayout(n),this.adsBtn.button.content.fitLayout(n)}updateData(){if(!this.creatureData)return;let t=Ko.Player.PlanetsSave.CurrentPlanet.GetCreaturePurchasesSoft(this.creatureData.id)+Ko.Player.PlanetsSave.CurrentPlanet.GetCreaturePurchasesHard(this.creatureData.id);this.purchasesNumberField.text=Ko.Localizator.Get("monster_purchases_number",t),this.softSpeedField.text=Ko.Localizator.Get("monster_soft_speed",fe.c.FormatMoney(this.creatureData.GetSoftPerSecond()));let e=Ko.Player.PlanetsSave.CurrentPlanet.GetCreatureSoftPriceWithMultiplayer(this.creatureData.id),i=Ko.Player.PlanetsSave.CurrentPlanet.GetCreatureHardPriceWithMultiplayer(this.creatureData.id);this.softBtn.label=fe.c.FormatMoney(e.priceValue),this.hardBtn.label=fe.c.FormatMoney(i.priceValue)}OnEnable(){this.adsBtn.interactive=this._rewardedAdAllowed&&!0}onAdsShown(){console.log("ADS: creature rewarded",this.creatureData.id),this.adsBtn.interactive=this._rewardedAdAllowed&&!0,this.adsPurchases++,this.SetAdsButtonActive(!0),Ai.GameManager.gameController.AddCreatureRandomPosition(this.creatureData.id),Ko.Audio.Play("Upgrade"),this.fitLayout()}SetAdsButtonActive(t){this.adsBtn.SetActive(this._rewardedAdAllowed&&t&&this.adsPurchases<Ko.GameData.Gameplay.adsCreaturePurchasesPerSession)}tryToBuy(t){if(console.log("BUY CREATURE",this.creatureData.id,t),Ko.Player.PlanetsSave.TutorSave.creature=!0,Ko.UI.tutorial.HideObjectHand(this.softBtn),Ko.Player.EnoughMoney(t)){Ai.GameManager.gameController.AddCreatureRandomPosition(this.creatureData.id)?(Ko.Audio.Play("CreaturePurchase"),Ko.Player.SpendMoney(t,y.DE.monster,y.JD.monsters,this.creatureData.creatureName),Ko.Player.PlanetsSave.CurrentPlanet.AddCreaturePurchase(this.creatureData.id,t.priceType==MoneyType.Soft),this.updateData(),this.fitLayout(),Ko.Analytics.SendMonsterEvent(t.priceType,t.priceValue,this.creatureData.creatureName,Ko.Player.PlanetsSave.currentPlanetId.toString(),this.creatureData.creatureRank)):Ko.UI.noSpace.Show(Ko.GameData.Epochs.GetByCreatureId(this.creatureData.id).id)}else console.log("BUY CREATURE, NO MONEY",t),t.priceType==MoneyType.Hard?Ko.UI.notEnoughHardMoney.Show():t.priceType==MoneyType.Soft&&Ko.UI.SetState(UIState.BankSoft)}}var Wi=i(2494);class Vi extends re{Awake(){super.Awake({masked:!0,title:Ko.Localizator.Get("monsters"),closeButton:!0}),this.scrollbox=this.content.addChild(new ai({overflow:"hidden",interaction:Ko.app.renderer.plugins.interaction})),this.items=[],this.itemsByCreature=new Map}setAdditionalLayoutAndStyleConfig(){super.setAdditionalLayoutAndStyleConfig(),Zt.T.LANDSCAPE_MODE_NEEDED&&(this.closeBtnOffsetFactorX=.85,this.closeBtnOffsetFactorY=.6,this.closeBtnAdditionalScaleFactor=.85)}Init(){super.Init(),this.items=[],this.itemsByCreature=new Map;for(let t of Ko.GameData.Creatures.creatures){let e=this.scrollbox.content.addChild(new zi);e.Init(t.id),this.items.push(e),this.itemsByCreature.set(t.id,e)}}fitLayout(t=Ko.app.viewport){let e=Math.min(.85*t.width,.85*t.height/1.7),i=1.7*e;this.setPopupRect(new Wi.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=new Wi.Rectangle(this.header.x,this.header.y,this.header.width,this.header.height),s=.02*e,o=this.items.filter((t=>t.Active)),a=new Wi.Rectangle(0,s,n.width-2*s,.166*n.height);for(let t of o)t.fitLayout(a),a.y+=a.height+s;this.scrollbox.position.set(s,r.height),this.scrollbox.resize({boxWidth:a.width,boxHeight:n.height-r.height,scrollWidth:a.width,scrollHeight:a.height*o.length+s*(o.length+1)})}Show(){Ko.Player.PlanetsSave.TutorSave.creatures=!0,this.fitLayout(),this.UpdateButtons();for(let t of this.items)t.activeInHierarchy&&t.updateData();super.Show()}UpdateButtons(){if(null==Ko.Player.PlanetsSave.CurrentPlanet)return;let t=Ko.Player.PlanetsSave.CurrentPlanet.GetAvailableForPurchaseCreatures();for(let e of this.items){let i=t.includes(e.creatureData.id);e.SetActive(i),e.SetAdsButtonActive(!1)}for(let t=this.items.length-1;t>=0;t--)if(this.items[t].activeInHierarchy){this.items[t].SetAdsButtonActive(!0);break}5===Ko.Player.PlanetsSave.TutorSave.step&&this.items[0]&&this.items[0].Active&&Ko.UI.tutorial.ShowObjectHand(this.items[0].softBtn,this)}Hide(){this.Active&&Ko.Ads.TriggerInterstitial(),this.scrollbox.scrollTop=0,super.Hide()}}var Xi=i(2494);class Yi extends re{get RequestedCreatureId(){return b.g.GetInt("sjdhfn84ew7yfn7800000",0)}set RequestedCreatureId(t){b.g.SetInt("sjdhfn84ew7yfn7800000",t)}get epochId(){let t=this.RequestedCreatureId,e=Ko.GameData.Epochs.GetByCreatureId(t);return e?e.id:void 0}set epochId(t){let e=Ko.GameData.Epochs.GetById(t);this.RequestedCreatureId=e?e.creatures[0]:0}get planetId(){let t=this.epochId;for(let e of Ko.Player.PlanetsSave.planets)if(e.epochs.includes(t))return e.planetId;return 0}get available(){return Ko.Store.ProductAvailable("first_creature_offer_1")||Ko.Store.ProductAvailable("first_creature_offer_2")}get offerEndTime(){return this.available&&this.RequestedCreatureId&&Ko.Player.Timers.firstCreatureOfferTime?Ko.Player.Timers.firstCreatureOfferTime+36e5:0}get offerTimeLeft(){let t=this.offerEndTime;if(!t)return 0;let e=t?t-Ko.Time.serverTime:0;return Math.max(0,e)}Awake(){super.Awake({title:Ko.Localizator.Get("offer_firstcreature_title"),closeButton:!0,skin:"magenta"}),this.onProductPurchased=this.onProductPurchased.bind(this),this.timerField=this.content.addChild(new $t.g("",{fitTextTemplate:"00h 00m 00s"})),this.timerContainer=this.content.addChild(new Mi),this.creaturesImgs=[],this.purchaseBtn=this.content.addChild(new he("btn-orange",{label:""})),this.creatureNameFld=this.content.addChild(new $t.g),this.multiplierFld=this.content.addChild(new $t.g("X6"));for(let t=0;t<6;t++)this.creaturesImgs.push(this.content.addChild(new qt.M));this.lastUpdateTime=0,Ko.Store.on("Purchased",this.onProductPurchased)}Init(){if(!this.available)return;super.Init();let t=Ko.Store.ProductAvailable("first_creature_offer_1",!0)?"first_creature_offer_1":"first_creature_offer_2";this.purchaseBtn.label=Ko.Store.GetPrice(t),this.purchaseBtn.off("pointertap"),this.purchaseBtn.on("pointertap",(()=>{Ko.Store.BuyProductID(t)}))}_fitCreatures(t){if(!this.creaturesImgs.length)return;let e=.15*t.height,i=this.creaturesImgs[0].texture,n=(t.height-2*e)/i.height,r=new Xi.Rectangle(0,0,i.width*n,i.height*n),s=r.width-(r.width*this.creaturesImgs.length-t.width)/(this.creaturesImgs.length-1);r.x=t.x+3*s,r.y=t.y+2*e,this.creaturesImgs[5].fitRect(r),this.creaturesImgs[3].tint=16777215,r.x=t.x+2*s,r.y=t.y+2*e,this.creaturesImgs[4].fitRect(r),this.creaturesImgs[3].tint=16777215,r.x=t.x+4*s,r.y=t.y+1*e,this.creaturesImgs[3].fitRect(r),this.creaturesImgs[3].tint=10066329,r.x=t.x+1*s,r.y=t.y+1*e,this.creaturesImgs[2].fitRect(r),this.creaturesImgs[2].tint=10066329,r.x=t.x+0*s,r.y=t.y+0*e,this.creaturesImgs[1].fitRect(r),this.creaturesImgs[1].tint=6710886,r.x=t.x+5*s,r.y=t.y+0*e,this.creaturesImgs[0].fitRect(r),this.creaturesImgs[0].tint=6710886}fitLayout(t=Ko.app.viewport){let e=Math.min(.85*t.width,.85*t.height/1.6),i=1.6*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.width=.95*n.width,r.height=.3*n.height,r.x=.5*(n.width-r.width),r.y=.32*(n.height-r.height),this._fitCreatures(r),r=n.clone(),r.width=.5*n.width,r.height=.05*n.height,r.x=.5*(n.width-r.width),r.y=.17*(n.height-r.height),this.timerField.fitLayout(r),r=n.clone(),r.width=.7*n.width,r.height=.06*n.height,r.x=.5*(n.width-r.width),r.y=.65*(n.height-r.height),this.creatureNameFld.fitLayout(r),r=n.clone(),r.width=.5*n.width,r.height=.1*n.height,r.x=.5*(n.width-r.width),r.y=.75*(n.height-r.height),this.multiplierFld.fitLayout(r),r=n.clone(),r.width=.45*n.width,r.height=.14*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.purchaseBtn.fitLayout(r)}onProductPurchased(t){"first_creature_offer_1"!=t.id&&"first_creature_offer_2"!=t.id||this.Hide()}Show(t=this.RequestedCreatureId){if(!this.available)return;if(t&&(this.RequestedCreatureId=t),!Ko.Store.IsInitialized)return;if(!Ko.Player.Initialized)return;if(!Ko.Time.Initialized)return;if(!this.RequestedCreatureId)return;if(!Ko.Player.Timers.firstCreatureOfferTime)return;this.Init();let e=Ko.GameData.Creatures.Get(this.RequestedCreatureId);for(let t of this.creaturesImgs)t.setImage(`creatures/${e.id}`);this.creatureNameFld.text=Ko.Localizator.Get(e.creatureName),this.offerTimeLeft>0&&(super.Show(),this.updateTime())}Update(){this.available&&(this.lastUpdateTime+=St.g.deltaTime,this.lastUpdateTime>1&&(this.updateTime(),this.lastUpdateTime=0),Ko.Player.Timers.firstCreatureOfferTime||this.Hide())}updateTime(){let t=this.offerTimeLeft;this.timerField.text=fe.c.FormatSecondsToTime(t/1e3),t<=0&&this.Hide()}}var qi=i(2494);const $i="cr2tbct34bc72tbx32dx56v3r",Ki="wuyfn283rtycn83etfc3rt4c",Ji=[.8990384615384616,.8865248226950354,.20253164556962025,.1005586592178771],Zi=.2*Ji.length;class Qi extends qt.M{get value(){return this.items.find((t=>t.Active))}set value(t){t=~~t%this.items.length;for(let e=0;e<this.items.length;e++)this.items[e].SetActive(e===t)}Awake(){this.items=Ji.map(((t,e)=>{let i=this.addChild(new qt.M(`chest/${e}`));return i.anchor.set(1,t),i.SetActive(0===e),i})),this._animation=Jt.gsap.timeline({repeat:-1,repeatDelay:0,yoyo:!0});for(let t=0;t<this.items.length;t++)this._animation.add((()=>this.value=t),.2*t)}}class tn extends qt.M{get nextChestTime(){return b.g.GetInt($i,0)}set nextChestTime(t){b.g.SetInt($i,t)}get isChestReady(){return!(Ko.Player.PlanetsSave.collection.length<7)&&(Date.now()-this.timeOfEpochSelection>=5&&this.nextChestTime<=Date.now())}get skipsCounter(){return b.g.GetInt(Ki,0)}set skipsCounter(t){b.g.SetInt(Ki,t)}Awake(){super.Awake(),this.onEpochSelected=this.onEpochSelected.bind(this),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.leftWing=this.addChild(new Qi),this.rightWing=this.addChild(new Qi),this.rightWing.scale.x=-1,this.body=this.addChild(new Kt("chest/body")),this.leftWing.position.set(.5*-this.body.texture.width,0),this.rightWing.position.set(.5*this.body.texture.width,0),this._goAnimation=null,this.movementRect=new qi.Rectangle,this.timeOfEpochSelection=Date.now(),this.checkIndex=0,this.body.on("pointertap",(()=>{this.SetActive(!1),Ko.UI.chestOpen.Show(),this.ShowAfterNMinutes(60)})),Ai.GameManager.on("EpochSelected",this.onEpochSelected),Ko.Player.on("Changed",this.onPlayerChanged),this.body._animation=Jt.gsap.timeline({repeat:-1,repeatDelay:0,yoyo:!0}).to(this.body,{pixi:{scaleY:.8},duration:Zi*(6/8)}),this.SetActive(!1),this.fitLayout()}fitLayout(t=Ko.app.viewport){this.scale.set(.2*t.width/this.body.texture.width),this.movementRect.copyFrom(t.clone().pad(.5*t.width,.3*-t.height)),this.position.set(200,400)}SetActive(t){super.SetActive(t),this.Active?(this.body._animation.resume(),this.leftWing._animation.resume(),this.rightWing._animation.resume()):(this.body._animation.pause(),this.leftWing._animation.pause(),this.rightWing._animation.pause(),this._killGoAnimation())}onEpochSelected(t){this.timeOfEpochSelection=Date.now(),this.Active&&(this.skipsCounter++,this.SetActive(!1),this.skipsCounter>=3?this.ShowAfterNMinutes(60):this.ShowAfterNMinutes(5))}onPlayerChanged(){if(!this.Active){if(this.checkIndex++,this.checkIndex<=10||!this.isChestReady)return;if(Ko.Player.PlanetsSave.collection.length<Ko.GameData.Config.chestCreatureId)return;this.checkIndex=0,this.Go()}}_killGoAnimation(){this._goAnimation&&this._goAnimation.kill(),this._goAnimation=null}Go(){this._killGoAnimation();let{left:t,right:e,top:i,bottom:n}=this.movementRect;this.position.set(t,v.o.Range(i,n)),this._goAnimation=Jt.gsap.timeline().to(this,{x:e,duration:60}).eventCallback("onComplete",(()=>{this.skipsCounter>=3?this.ShowAfterNMinutes(60):this.ShowAfterNMinutes(5),this.SetActive(!1)})),this.SetActive(!0)}ShowAfterNMinutes(t){this.nextChestTime=Date.now()+60*t*1e3}}class en extends Kt{get IsActive(){return this.Active}Awake(){super.Awake(),this.planetImg=this.addChild(new qt.M),this.SetActive(!1),this.on("pointertap",(()=>Core.UI.skipEpochsOffer.Show())),this._initTapHighlight(this.planetImg)}Check(){this.Update()}Update(){Core.Player.PlanetsSave.CurrentPlanet&&(this.planetImg.setImage(`map/planet${Core.Player.PlanetsSave.currentPlanetId}`),this.SetActive(Core.UI.skipEpochsOffer.available&&1!=Core.Player.PlanetsSave.currentPlanetId&&1==Core.Player.PlanetsSave.CurrentPlanet.epochs.length))}fitLayout(t){t=t.clone(),this.position.copyFrom(t),t.x=t.y=0,this.planetImg.fitRect(t)}}var nn=i(2494);class rn extends Kt{get IsActive(){return this.Active}Awake(){super.Awake(),this.back=this.addChild(new qt.M("offers/vip-badge-bg")),this.creatureContainer=this.addChild(new qt.M),this.creatureImg=this.creatureContainer.addChild(new qt.M),this.creatureContainer.mask=this.creatureContainer.addChild(new nn.Graphics).beginFill(16777215,1).drawRect(0,0,1,1),this.bonusField=this.addChild(new $t.g("X6")),this.timerField=this.addChild(new oe.L({label:"",backgroundAlpha:.75,textProps:{fitTextTemplate:"00m 00s"}})),this.lastUpdateTime=0,this.onPlayerChanged=this.onPlayerChanged.bind(this),this.SetActive(!1),this.tryToInitialize(),Ko.Player.on("Changed",this.onPlayerChanged),this.on("pointertap",(()=>{Ko.UI.firstCreatureOffer.Show()})),this._initTapHighlight(this.back)}onPlayerChanged(){this.tryToInitialize()}tryToInitialize(){if(!Ko.Store.IsInitialized)return;if(!Ko.Time.Initialized)return;let t=!!Ko.UI.firstCreatureOffer.offerTimeLeft;t&=Ko.Player.PlanetsSave.currentPlanetId===Ko.UI.firstCreatureOffer.planetId,this.SetActive(t),this.Active&&this.Init()}Init(){Ko.Store.IsInitialized&&Ko.Time.Initialized&&(Ko.UI.firstCreatureOffer.offerTimeLeft?(Ko.UI.firstCreatureOffer.RequestedCreatureId&&this.creatureImg.setImage(`creatures/${Ko.UI.firstCreatureOffer.RequestedCreatureId}`),this.updateTime()):this.SetActive(!1))}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitRect(e),this.bonusField.fitLayout(e.clone().pad(.3*-e.width));let i=e.clone().pad(.1*e.width,.1*e.height);this.creatureContainer.position.copyFrom(i),this.creatureContainer.mask.width=i.width,this.creatureContainer.mask.height=e.height,i.x=i.y=0,this.creatureImg.anchor.set(.5,0),this.creatureImg.fitRect(i),this.creatureImg.y=0;let n=e.clone().pad(.05*e.width,.35*-e.height);n.y=e.height-n.height,this.timerField.fitLayout(n)}Update(){this.lastUpdateTime+=St.g.deltaTime,this.lastUpdateTime>1&&(Ko.UI.firstCreatureOffer.RequestedCreatureId&&this.creatureImg.setImage(`creatures/${Ko.UI.firstCreatureOffer.RequestedCreatureId}`),this.updateTime(),this.lastUpdateTime=0,this.SetActive(Ko.UI.firstCreatureOffer.offerTimeLeft>0&&Ko.Player.PlanetsSave.currentPlanetId===Ko.UI.firstCreatureOffer.planetId))}updateTime(){let t=Ko.UI.firstCreatureOffer.offerTimeLeft;this.timerField.label=NUtils.FormatSecondsToTime(t/1e3),t<=0&&this.SetActive(!1)}}class sn extends Kt{Awake(){super.Awake(),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.icon=this.addChild(new qt.M("x2")),this.counter=0,this.on("pointertap",(()=>Core.UI.coinsBooster.Show())),Core.Player.on("Changed",this.onPlayerChanged),this.updateButtonVisibility()}ForceCheck(){this.updateButtonVisibility()}onPlayerChanged(){this.counter++,this.counter>20&&(this.counter=0,this.updateButtonVisibility())}updateButtonVisibility(){const t=Zt.T.REWARDED_AD_ALLOWED;let e=Core.Player.Timers.GetTimerById(Core.Player.Timers.incomeBoosterTimerId),i=e&&!e.IsFinished,n=Core.Player.Timers.GetTimerById(Core.Player.Timers.incomeX4BoosterTimerId),r=n&&!n.IsFinished,s=(Core.Time.DayUniqId,Core.Player.Timers.l2b,!i&&!r),o=i&&!r;this.SetActive(t&&(s||o)&&Core.Player.PlanetsSave.collection.length>5),this.icon.setImage(o?"x4":"x2")}Update(){this.updateButtonVisibility()}fitLayout(t){this.position.copyFrom(t),this.icon.scale.set(t.width/this.icon.texture.width),this.icon.position.set(.5*t.width,.5*t.height)}}class on extends Kt{constructor(){super(),this.back=this.addChild(new qt.M("offers/vip-badge-bg")),this.icon=this.addChild(new qt.M("offers/crown")),this.label=this.addChild(new $t.g(Ko.Localizator.Get("vip"))),this.SetActive(!1),this.on("pointertap",(()=>Ko.UI.vip.Show())),this._initTapHighlight(this.back)}Update(){this.SetActive(!1)}fitLayout(t){t=t.clone(),this.position.copyFrom(t),t.x=t.y=0,this.back.scale.set(t.width/this.back.texture.width),this.back.position.set(.5*t.width,.5*t.height),this.icon.scale.set(.8*t.width/this.icon.texture.width),this.icon.position.set(.5*t.width,.1*t.height),this.label.fitLayout(t),this.label.position.set(.5*t.width,.6*t.height)}}class an extends qt.M{constructor(t=null){super("alert"),this.SetActive(!1),this.updateFn=t}Update(){this.Active||this.updateFn&&this.SetActive(this.updateFn())}fitRect(t,e=!1){let i=.04*Ko.app.viewport.width;this.scale.set(Math.min(i/this.texture.width,i/this.texture.height)),this.position.set(t.x+t.width*this.anchor.x,t.y+t.height*this.anchor.y)}fitLayout(t){return this.fitRect(t)}}var hn=i(2494);class ln extends qt.M{constructor(t){super(),this.epoch=t,this.btn=this.addChild(new Kt("button-small-passive")),this.btn.anchor.set(.5,.45),this.epochIconImage=this.btn.addChild(new ji(`epochs/icons/${t.id}`)),this.epochIconImage.scale.set(.5*this.btn.texture.width/this.epochIconImage.texture.width),this.attention=this.addChild(new an),this.arrowImage=this.addChild(new ji("arrow")),this.btn.on("pointertap",(()=>{Ai.GameManager.gameView.SelectEpoch(t.id,!0,0)}))}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.btn.fitRect(e);let i=.5*e.width;this.arrowImage.fitRect(new hn.Rectangle(-i,.5*(e.height-i),i,i)),this.attention.fitLayout(new hn.Rectangle(.1*e.width,.1*e.height,1,1))}Update(){if(this.SetActive(Ko.Player.PlanetsSave.CurrentPlanet&&Ko.Player.PlanetsSave.CurrentPlanet.epochs.includes(this.epoch.id)),this.attention.SetActive(Ai.GameManager.gameController&&Ai.GameManager.gameController.epochById&&!Ai.GameManager.gameController.epochById.get(this.epoch.id).EnoughSpaceForSpawn),Ai.GameManager.gameView){let t=Ai.GameManager.gameView.selectedEpochId==this.epoch.id;this.arrowImage.SetActive(t),this.btn.interactive=!t,this.btn.setImage(t?"button-small-active":"button-small-passive")}}}var cn=i(2494);class un extends Yt.e{Awake(){super.Awake(),this.back=this.addChild(new se.z("bg-rounding-60px")),this.back.tint=0,this.back.alpha=.3,this.items=[],this._rect=new cn.Rectangle}Init(){this.onPlayerChanged=this.onPlayerChanged.bind(this),this.onEpochSelected=this.onEpochSelected.bind(this),this.items=[];for(let t of Ko.GameData.Epochs.epochs)this.items.unshift(this.addChild(new ln(t)));Ko.Player.on("Changed",this.onPlayerChanged),Ko.Player.PlanetsSave.on("EpochUnlocked",(t=>{this.OpenEpoch(t)})),Ai.GameManager.on("EpochSelected",this.onEpochSelected)}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(t);let e=this.items.filter((t=>t.Active)),i=.9*t.width,n=.15*i,r=new cn.Rectangle(.5*(t.width-i),n,i,i);for(let t of e)t.fitLayout(r),r.y+=i+n;this.back.width=t.width,this.back.height=(i+n)*e.length+n}GetItem(t){for(let e of this.items)if(e.epoch.id==t)return e;return null}OpenEpoch(t){Ai.GameManager.gameView.SelectEpoch(t,!0,0)}onEpochSelected(t){this.Update()}OnEnable(){this.onPlayerChanged()}onPlayerChanged(){Ko.Player.Initialized&&(this.Update(),this.fitLayout())}Update(){for(let t of this.items)t.Update()}}var dn=i(2494);class pn extends qt.M{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;get activeButtons(){return this.buttons.filter((t=>t.Active))}Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake(),this._rect=new dn.Rectangle,this.vipButton=this.addChild(new on),this.coinsBoosterButton=this.addChild(new sn),this.firstCreatureOfferBtn=this.addChild(new rn),this.skipEpochsOfferBtn=this.addChild(new en),this.buttons=[this.vipButton,this.coinsBoosterButton,this.firstCreatureOfferBtn,this.skipEpochsOfferBtn],this.epochsList=this.addChild(new un);this.buttons.forEach((t=>{t.visible=this._rewardedAdAllowed,t.alpha=this._rewardedAdAllowed?1:0}))}Init(){this.epochsList.Init();for(let t of this.buttons)t.on("ActiveChanged",(()=>this.fitLayout()))}Update(){for(let t of this.buttons)t.Update();this.epochsList.SetActive(Ko.Player.PlanetsSave.CurrentPlanet.epochs.length>1)}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(t);let e=.1*t.width,i=t.clone();i.x=i.y=0,i.height=i.width;let n=this.activeButtons;for(let t of n)t.fitLayout(i),i.y+=i.height+e;for(let t=0;t<2-n.length;t++)i.y+=i.height+e;this.epochsList.fitLayout(i)}}class fn extends qt.M{Awake(){super.Awake(),this.icon=this.addChild(new qt.M("ico-clock")),this.label=this.addChild(new $t.g("",{fill:16750848,fontSize:16*Ko.app.renderer.resolution,fitTextTemplate:"000m 00s"})),this.SetActive(!1)}Update(t){let e=Ko.Player.Timers.GetTimerById(t);if(this.SetActive(e&&!e.IsFinished),this.Active){let t=~~(e.SecondsLeft/60),i=(e.SecondsLeft%60).toString().padStart(2,"0"),n=t?"{0}m {1}s":"{1}s";this.label.text=w.Format(n,t,i)}}fitLayout(t){let e=.05*Ko.app.viewport.width;this.position.copyFrom(t);let i=t.clone().pad(.5*-(t.width-e),.5*-(t.height-e));i.x=i.y=0,this.icon.fitRect(i);let n=i.clone().pad(2*i.width,.25*-i.height);n.y=i.bottom-.7*n.height,this.label.fitLayout(n)}}var mn=i(2494);class gn extends Kt{constructor(t,e="",i=""){super(),this.onClick=this.onClick.bind(this),this.timerProp=i,this.back=this.addChild(new qt.M("button-big")),this.icon=this.back.addChild(new qt.M(t)),this.label=this.addChild(new $t.g(e)),this.attention=this.addChild(new an),this.bonusTimer=this.addChild(new fn),this.on("pointertap",this.onClick),this._initTapHighlight(this.back)}onClick(){this.attention.SetActive(!1)}Update(){this.attention.Update(),this.timerProp?this.bonusTimer.Update(Ko.Player.Timers[this.timerProp]):this.bonusTimer.SetActive(!1)}fitLayout(t){t=t.clone(),this.position.copyFrom(t),this.back.scale.set(t.width/this.back.texture.width),this.back.position.set(.5*t.width,.5*this.back.height),this.label.fitLayout(new mn.Rectangle(0,.8*t.height,t.width,.2*t.height)),this.label.position.set(.5*t.width,.9*t.height);let e=new mn.Rectangle(.1*t.width,0,.1*t.width,.1*t.width);this.attention.fitRect(e),e.x=t.width-.3*t.width,this.bonusTimer.fitLayout(e)}}class _n extends gn{constructor(){super("monsters-ico",Ko.Localizator.Get("monsters"),"discountBoosterTimerId"),this.attentionInitialized=!1,this.attentionDic=new Map,this.attention.updateFn=()=>{if(!this.attentionInitialized){if(!Ko.Player.Initialized)return;this.attentionInitialized=!0;for(let t of Ko.GameData.Planets.planets)this.attentionDic.set(t.id,0),Ko.Player.PlanetsSave.HasPlanet(t.id)&&this.attentionDic.set(t.id,Ko.Player.PlanetsSave.GetPlanet(t.id).GetAvailableForPurchaseCreatures().length)}let t=Ko.Player.PlanetsSave.CurrentPlanet.GetAvailableForPurchaseCreatures().length;return this.attentionDic.get(Ko.Player.PlanetsSave.currentPlanetId)!=t&&(this.attentionDic.set(Ko.Player.PlanetsSave.currentPlanetId,t),!0)}}onClick(){super.onClick(),Ko.UI.creatures.Show(),Ko.Ads.TriggerInterstitial(),Ko.Player.PlanetsSave.TutorSave.creatures=!0,Ko.UI.tutorial.HideObjectHand(this)}Update(){Ko.Player.Initialized&&(super.Update(),this.SetActive(1!=Ko.Player.PlanetsSave.CurrentPlanet.planetId||Ko.Player.PlanetsSave.CurrentPlanet.GetAvailableForPurchaseCreatures().length>0),(4===Ko.Player.PlanetsSave.TutorSave.step||5===Ko.Player.PlanetsSave.TutorSave.step&&!Ko.UI.creatures.Active)&&this.Active&&Ko.UI.tutorial.ShowObjectHand(this))}}class yn extends gn{constructor(){super("upgrade-ico",Ko.Localizator.Get("upgrades")),this.attentionInitialized=!1,this.attentionDic=new Map,this.attention.updateFn=()=>{if(Ko.Player.Initialized&&Ko.UI.upgrades&&Ko.UI.upgrades.items.length){if(!this.attentionInitialized){this.attentionInitialized=!0;for(let t of Ko.GameData.Planets.planets)if(this.attentionDic.set(t.id,0),Ko.Player.PlanetsSave.HasPlanet(t.id)){let e=Ko.UI.upgrades.items.filter((({upgradeData:e})=>Ko.Player.PlanetsSave.GetPlanet(t.id).collection.includes(e.unlockCreatureId))).length;this.attentionDic.set(t.id,e)}}if(this.attentionInitialized){let t=Ko.UI.upgrades.items.filter((({upgradeData:t})=>Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(t.unlockCreatureId))).length;if(this.attentionDic.get(Ko.Player.PlanetsSave.currentPlanetId)!=t)return this.attentionDic.set(Ko.Player.PlanetsSave.currentPlanetId,t),!0}return!1}}}onClick(){super.onClick(),Ko.UI.upgrades.Show()}Update(){Ko.Player.Initialized&&(super.Update(),this.SetActive(1!=Ko.Player.PlanetsSave.CurrentPlanet.planetId||Ko.Player.PlanetsSave.CurrentPlanet.HasAnyUpgradesAvailable()))}}class vn extends gn{constructor(){super("boosters-icon",Ko.Localizator.Get("boosters")),this.attentionInitialized=!1,this.attentionDic=new Map,this.attention.updateFn=()=>{if(!this.attentionInitialized){if(!Ko.Player.Initialized)return;this.attentionInitialized=!0;for(let t of Ko.GameData.Planets.planets)this.attentionDic.set(t.id,!1),Ko.Player.PlanetsSave.HasPlanet(t.id)&&this.attentionDic.set(t.id,Ko.Player.PlanetsSave.GetPlanet(t.id).collection.includes(Ko.GameData.Gameplay.boostersCreatureLock))}if(this.attentionInitialized){let t=Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(Ko.GameData.Gameplay.boostersCreatureLock);if(this.attentionDic.get(Ko.Player.PlanetsSave.currentPlanetId)!=t)return this.attentionDic.set(Ko.Player.PlanetsSave.currentPlanetId,t),!0}return!1}}onClick(){Ko.UI.SetState(y.Su.Boosters),super.onClick()}Update(){Ko.Player.Initialized&&(super.Update(),this.SetActive(1!=Ko.Player.PlanetsSave.CurrentPlanet.planetId||Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(Ko.GameData.Gameplay.boostersCreatureLock)))}}class bn extends gn{constructor(){super("map-icon",Ko.Localizator.Get("map")),this.attentionInitialized=!1,this.attentionDic=new Map,this.attention.updateFn=()=>{if(!this.attentionInitialized){if(!Ko.Player.Initialized)return;this.attentionInitialized=!0;for(let t of Ko.GameData.Planets.planets)this.attentionDic.set(t.id,!1),Ko.Player.PlanetsSave.HasPlanet(t.id)&&this.attentionDic.set(t.id,Ko.Player.PlanetsSave.GetPlanet(t.id).collection.includes(Ko.GameData.Gameplay.mapCreatureLock))}let t=Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(Ko.GameData.Gameplay.mapCreatureLock);return this.attentionDic.get(Ko.Player.PlanetsSave.currentPlanetId)!=t?(this.attentionDic.set(Ko.Player.PlanetsSave.currentPlanetId,t),!0):!(!Ko.Player.Missions.HasActiveMission()||Ko.Player.Missions.IsInProgress())}}onClick(){super.onClick(),Ko.UI.SetState(y.Su.Map),Ko.Audio.Play("UIToMap"),Ko.Player.PlanetsSave.TutorSave.map=!0,Ko.UI.tutorial.HideObjectHand(this)}Update(){Ko.Player.Initialized&&(super.Update(),this.SetActive(1!=Ko.Player.PlanetsSave.CurrentPlanet.planetId||Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(Ko.GameData.Gameplay.mapCreatureLock)),Ko.Player.PlanetsSave.TutorSave.step>=8&&!Ko.UI.map.Active&&this.Active&&Ko.UI.tutorial.ShowObjectHand(this))}}class wn extends mn.Container{constructor(){super(),this.creatures=this.addChild(new _n),this.upgrades=this.addChild(new yn),this.boosters=this.addChild(new vn),this.map=this.addChild(new bn),this.buttons=[this.creatures,this.upgrades,this.boosters,this.map]}Update(){for(let t of this.buttons)t.Update()}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.y=0,e.width=.75*e.height;let i=e.clone();i.width*=.8,i.height*=.8,i.y=t.height-i.height;let n=Math.min(.05*t.width,20),r=e.width+(i.width+n)*(this.buttons.length-1);e.x=.5*(t.width-r),i.x=e.right+n;for(let t=0;t<this.buttons.length;t++)0===t?this.buttons[t].fitLayout(e):(this.buttons[t].fitLayout(i),i.x+=i.width+n)}}var Sn=i(2494);class Tn extends Kt{constructor(){super(),this.back=this.addChild(new qt.M("slots/slots-ico3")),this.label=this.addChild(new oe.L({backgroundAlpha:.5})),this.attention=this.addChild(new an((()=>!!Ko.Player.Initialized&&(Ko.Player.PlanetsSave.collection.length>=Ko.GameData.Slots.availableFromCollectionSize&&!Ko.Player.Timers.SlotsOpened)))),this.on("pointertap",(()=>{Ko.Player.PlanetsSave.TutorSave.spins=!0,Ko.UI.tutorial.HideObjectHand(this),Ko.Player.Timers.SlotsOpened=!0,Ko.UI.slots.Show(),this.attention.SetActive(!1)})),this._initTapHighlight(this.back)}Update(){this.SetActive(Ko.Player.PlanetsSave.collection.length>=Ko.GameData.Slots.availableFromCollectionSize),this.label.label=Ko.Player.SpinsNumber,this.attention.Update(),(6===Ko.Player.PlanetsSave.TutorSave.step||7===Ko.Player.PlanetsSave.TutorSave.step&&!Ko.UI.slots.Active)&&this.Active&&Ko.UI.tutorial.activeObject!==this&&(console.log("SLOTS TUTORIAL",Ko.UI.tutorial.activeObject),Ko.UI.tutorial.ShowObjectHand(this))}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitRect(e);let i=e.clone().pad(.1*-e.width,.35*-e.height);i.y=.8*e.height,this.label.fitLayout(i),this.attention.fitLayout(new Sn.Rectangle(.15*e.width,.15*e.height,1,1))}SetActive(t){super.SetActive(t)}}class xn extends Kt{Awake(){super.Awake(),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.back=this.addChild(new qt.M("slots/item-gems")),this.timerField=this.addChild(new oe.L({label:"",backgroundAlpha:.5,textProps:{fitTextTemplate:"00h 00m 00s",wordWrap:!1}})),this.endDateTime=0,this.lastUpdateTime=0,this.SetActive(!1),this.tryToInitialize(),Ko.Player.on("Changed",this.onPlayerChanged),this.on("pointertap",(()=>Ko.UI.starterPackPopup.Show())),this._initTapHighlight(this.back)}onPlayerChanged(){this.tryToInitialize()}tryToInitialize(){if(!Ko.Store.IsInitialized)return;if(!Ko.UI.starterPackPopup.available)return;if(!Ko.Time.Initialized)return;if(0==Ko.Player.Timers.starterPackTime)return;let t=new Date(Ko.Player.Timers.starterPackTime).getTime();this.endDateTime=t+864e5,this.endDateTime>Ko.Time.serverTime&&0==Ko.Player.StarterPack&&(this.SetActive(!0),this.updateTime())}Init(){if(!Ko.Store.IsInitialized)return;if(!Ko.UI.starterPackPopup.available)return;if(!Ko.Time.Initialized)return;if(0==Ko.Player.Timers.starterPackTime)return;let t=new Date(Ko.Player.Timers.starterPackTime);this.endDateTime=t+864e5,this.endDateTime>Ko.Time.serverTime&&1!=Ko.Player.StarterPack&&(this.SetActive(!0),this.updateTime())}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitRect(e);let i=e.clone().pad(0,.35*-e.height);i.y=.8*e.height,this.timerField.fitLayout(i)}Update(){Ko.UI.starterPackPopup.available?(this.lastUpdateTime+=St.g.deltaTime,this.lastUpdateTime>1&&(this.updateTime(),this.lastUpdateTime=0),1==Ko.Player.StarterPack&&this.SetActive(!1)):this.SetActive(!1)}updateTime(){let t=(this.endDateTime-Ko.Time.serverTime)/1e3;this.timerField.label=fe.c.FormatSecondsToTime(t),t<=0&&this.SetActive(!1)}}var En=i(2494);class An extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new qt.M("circle-simple")),this.back.anchor.set(0,0),this.back.tint=3027338,this.back.alpha=.3,this.front=this.addChild(new qt.M("circle-simple")),this.front.anchor.set(0,0),this.front.tint=4831160,this.front.mask=this.front.addChild((new En.Graphics).clear().beginFill(16777215,1).drawRect(0,0,this.front.texture.width,this.front.texture.height))}get value(){return(this.front.texture.height-this.front.mask.y)/this.front.texture.height}set value(t){t=Math.max(0,Math.min(1,t||0)),this.front.mask.y=this.front.texture.height*(1-t)}fitLayout(t){this.position.copyFrom(t),this.back.scale.set(Math.min(t.width/this.back.texture.width,t.height/this.back.texture.height)),this.front.scale.copyFrom(this.back.scale)}}class In extends qt.M{Awake(){super.Awake(),this.progressBar=this.addChild(new An),this.bubbleProgressField=this.addChild(new $t.g),this.fullField=this.addChild(new $t.g(Ko.Localizator.Get("bubble_full"),{fill:16711680})),this.bonusTimer=this.addChild(new fn)}Update(){Ko.Player.Initialized&&(this.SetActive(!GameManager.tutorialState||GameManager.tutorialState>Ai.$.BUBBLE3),this.updateBubbleProgressUI(),this.bonusTimer.Update(Ko.Player.Timers.bubbleBoosterTimerId))}updateBubbleProgressUI(){let t=Ko.Player.PlanetsSave.CurrentPlanet.StartEpoch,e=!GameManager.gameController.epochById.get(t).EnoughSpaceForSpawn,i=e?1:Math.max(0,Math.min(1,GameManager.timeFromLastBubbleSpawn/GameManager.bubbleSpawnPeriod));this.fullField.SetActive(e),this.bubbleProgressField.SetActive(!e),this.bubbleProgressField.text=Math.ceil((1-i)*GameManager.bubbleSpawnPeriod),this.progressBar.value=i}fitLayout(t){t=t.clone(),this.position.copyFrom(t),t.x=0,t.y=0;let e=t.clone();e.height=e.width,this.progressBar.fitLayout(e);let i=t.clone();i.height=.4*t.height,i.y=t.height-i.height;let n=new En.Rectangle(.8*t.width,0,.2*t.width,.2*t.height);this.bonusTimer.fitLayout(n),this.bubbleProgressField.fitLayout(i),this.fullField.fitLayout(i)}}var Cn=i(2494);class Pn extends qt.M{get activeButtons(){return this.buttons.filter((t=>t.Active))}Awake(){super.Awake(),this._rect=new Cn.Rectangle,this.slotsBtn=this.addChild(new Tn),this.starterPackButton=this.addChild(new xn),this.bubbleProgress=this.addChild(new In),this.buttons=[this.bubbleProgress,this.slotsBtn,this.starterPackButton]}Init(){for(let t of this.buttons)t.Init(),t.on("ActiveChanged",(()=>this.fitLayout()))}Update(){for(let t of this.buttons)t.Update()}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(t);let e=.1*t.width,i=t.clone();i.x=i.y=0,i.height=1.5*i.width;let n=this.activeButtons;for(let t of n)t.fitLayout(i),i.y+=i.height+e}}var Rn=i(2494);class On extends Yt.e{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake(),this.bottomButtons=this.addChild(new wn),this._rewardedAdAllowed&&(this.chestBtn=this.addChild(new tn)),this.leftPanel=this.addChild(new Pn),this.rightPanel=this.addChild(new pn)}Init(){super.Init(),this.fitLayout=this.fitLayout.bind(this),this.leftPanel.Init(),this.rightPanel.Init(),Ko.app.events.on("resize",this.fitLayout),this.fitLayout()}fitLayout(t=Ko.app.viewport){let e=t.clone();e.height=.2*t.width,e.y=.99*t.height-e.height,this.bottomButtons.fitLayout(e);let i=.01*t.width,n=new Rn.Rectangle(i,0,.1*t.width,.1*t.width),r=new Rn.Rectangle(i,.15*t.height,n.width,.8*t.height);this.leftPanel.fitLayout(r),r.x=t.width-n.width-i,this.rightPanel.fitLayout(r)}Show(){super.Show()}Update(){this.leftPanel.Update(),this.rightPanel.Update(),this.bottomButtons.Update()}}class kn extends re{get shown(){return 1==b.g.GetInt("gdpr",0)}set shown(t){b.g.SetInt("gdpr",~~!!t)}Awake(){super.Awake({title:Core.Localizator.Get("gdpr_title")});let t=12763842;this.infoBack=this.content.addChild(new se.z("particles/rect")),this.infoBack.tint=0,this.infoBack.alpha=.3,this.infoText=this.content.addChild(new $t.g(Core.Localizator.Get("gdpr_message"),{fill:t,wordWrap:!0})),this.infoPicture=this.content.addChild(new qt.M("creatures/1")),this.policyLabel=this.content.addChild(new $t.g(Core.Localizator.Get("privacy_policy"),{align:"right",fill:t})),this.policyLabel.anchor.set(1,.5),this.policyIcon=this.content.addChild(new qt.M("btn-circle-blue")),this.termsLabel=this.content.addChild(new $t.g(Core.Localizator.Get("terms_of_use"),{align:"right",fill:t})),this.termsLabel.anchor.set(1,.5),this.termsIcon=this.content.addChild(new qt.M("btn-circle-blue")),this.okBtn=this.content.addChild(new he("btn-green",{label:Core.Localizator.Get("accept")}))}Init(){super.Init(),this.okBtn.on("pointertap",(()=>{this.shown=!0,this.Hide()}))}fitLayout(t=Core.app.viewport){let e=Math.min(.8*t.width,.5*t.height/1),i=1*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.25*n.height,r.width=n.width,r.x=.5*(n.width-r.width),r.y=.3*(n.height-r.height),this.infoBack.fitLayout(r),r=n.clone(),r.height=.3*n.width,r.width=.3*n.width,r.x=-.1*(n.width-r.width),r.y=.26*(n.height-r.height),this.infoPicture.fitRect(r),r=n.clone(),r.height=.23*n.height,r.width=.65*n.width,r.x=.75*(n.width-r.width),r.y=.3*(n.height-r.height),this.infoText.fitLayout(r);let s=n.clone();s.height=.1*n.width,s.width=.45*n.width,s.x=.5*(n.width-s.width),s.y=.55*(n.height-s.height);let o=s.clone();o.width=.9*s.height,o.height=.9*s.height,o.x=s.x+1*(s.width-o.width),this.policyIcon.fitRect(o);let a=s.clone();a.width=s.width-s.height,a.height=s.height,a.x=s.x+0*(s.width-a.width),this.policyLabel.fitLayout(a),s.y=.7*(n.height-s.height),o.y=s.y,a.y=s.y,this.termsIcon.fitRect(o),this.termsLabel.fitLayout(a),r=n.clone(),r.height=.17*n.height,r.width=.45*n.width,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.okBtn.fitLayout(r)}Trigger(){return this.shown=!0}}var Mn=i(2494);class Dn extends qt.M{get selected(){return!!this.selectedImage.Active}set selected(t){this.selectedImage.SetActive(!!t)}Awake(){super.Awake(),this._rect=new Mn.Rectangle(0,0,1,1),this.reward=null,this.selectedImage=this.addChild(new se.z("bg-simple")),this.selectedImage.alpha=.3,this.icon=this.addChild(new qt.M),this.label=this.addChild(new $t.g),this.selected=!1}Init(t){switch(this.selected=!1,this.reward=t,t.type){case y.E.MoneyHard:this.icon.setImage("ico-diamond"),this.label.text=t.valueStr;break;case y.E.MoneySoftBySoftSpeed:let e=0n===~~GameManager.gameController.MoneySoftSpeed?1n:GameManager.gameController.MoneySoftSpeed;this.icon.setImage("ico-gold"),this.label.text=fe.c.FormatMoney(e*BigInt(t.valueStr));break;case y.E.BoosterIncomeX4:this.icon.setImage("x4"),this.label.text=fe.c.FormatSecondsToTime(t.valueInt);break;case y.E.Spins:this.icon.setImage("spin-icon"),this.label.text=t.valueInt;break;case y.E.CreatureFromCollectionWithOffset:let i=Ko.Player.PlanetsSave.CurrentPlanet.GetCollectionCreatureWithOffset(t.valueInt);this.icon.setImage(`creatures/${i}`),this.label.text=Ko.Localizator.Get("monster");break;case y.E.LastShopCreature:let n=Ko.Player.PlanetsSave.CurrentPlanet.GetAvailableForPurchaseCreatures().pop()||1;this.icon.setImage(`creatures/${n}`),this.label.text=Ko.Localizator.Get("monster");break;case y.E.BoosterIncomeX2:this.icon.setImage("x2"),this.label.text=fe.c.FormatSecondsToTime(t.valueInt);break;default:this.icon.setImage("questionmark-ico"),this.label.text=""}}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(t),(t=t.clone()).x=t.y=0;let e=Math.min(t.width,t.height);t.pad(-.5*(t.width-e),-.5*(t.height-e));let i=t.clone().pad(.05*-e,.05*-t.height);this.selectedImage.fitLayout(i);let n=i.clone().pad(.05*-e),r=n.clone();r.height*=.8,this.icon.fitRect(r);let s=n.clone();s.height*=.2,s.y=n.bottom-s.height,this.label.fitLayout(s)}_animation=null;_killAnimation(){this._animation&&this._animation.kill(),this._animation=null}blinkRandom(t=.2){this._killAnimation(),this._animation=Jt.gsap.timeline().set(this,{selected:!0},0).set(this,{selected:!1},t).eventCallback("onComplete",(()=>this._killAnimation()))}blinkSelect(t=.2,e=3){this._killAnimation(),this._animation=Jt.gsap.timeline();for(let i=0;i<e;i++)this._animation.set(this,{selected:!0},2*i*t*.5),this._animation.set(this,{selected:!1},(2*i+1)*t*.5);this._animation.set(this,{selected:!0},2*e*t*.5)}}class Nn extends qt.M{Awake(){super.Awake(),this.rewards=[],this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.3,this.rewardsContainer=this.addChild(new qt.M),this.items=[],this.target=null,this.spinAnimation=null}Init(t){for(this.rewards=[...t];this.items.length<t.length;)this.items.push(this.rewardsContainer.addChild(new Dn));for(;this.items.length>t.length;){let t=this.items.shift();t.parent&&t.parent.removeChild(t)}for(let e=0;e<this.items.length;e++)this.items[e].Init(t[e]);this.spinAnimation&&(this.spinAnimation.kill(),this.spinAnimation=null)}Spin(){if(this.spinAnimation)return;this.target=S.Choose(this.rewards);let t=this.rewards.indexOf(this.target),e=[...this.rewards.keys()],i=[];for(;i.length<15;)i.push(...e);i.sort(((t,e)=>Math.random()-.5)),i.splice(15),i.push(t),i=i.map((t=>this.items[t].blinkRandom.bind(this.items[t],.1)));let n=0;this.spinAnimation=Jt.gsap.timeline();for(let t of i)this.spinAnimation.add(t,n),n+=.1;this.spinAnimation.add(this.items[t].blinkSelect.bind(this.items[t],.2,3),1.6),this.spinAnimation.eventCallback("onComplete",(()=>{console.log("SPIN COMPLETE"),this.emit("Selected",this.target)}))}fitLayout(t){this.position.copyFrom(t),this.back.width=t.width,this.back.height=t.height;this.rewardsContainer.position.set(15,15);let e=t.clone();e.x=0,e.y=0,e.width-=30,e.height-=30;let i=Math.ceil(this.items.length/2);e.width/=i,e.height/=2;for(let t=0;t<this.items.length;t++){let n=~~(t/i),r=t%i;e.x=r*e.width*1,e.y=n*e.height*1.1,this.items[t].fitLayout(e)}}}class Ln extends re{Awake(){super.Awake({skin:"orange"}),this.titleImage=this.content.addChild(new qt.M("creatures/29")),this.title=this.content.addChild(new he("ribbon2",{label:Ko.Localizator.Get("interstitial_reward_title")})),this.spinBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("chest_open_spin")})),this.claimBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("collect")})),this.rewards=this.content.addChild(new Nn),this.chosenReward=null,this.spinBtn.on("pointertap",(()=>{this.spinBtn.interactive=!1,this.spinBtn.setImage("btn-gray"),this.rewards.Spin()})),this.claimBtn.on("pointertap",(()=>{this.chosenReward&&(this.chosenReward.Take("interstitial_bonus"),this.Hide())})),this.rewards.on("Selected",(t=>{console.log("SPIN RESULT",t),this.chosenReward=t,this.spinBtn.SetActive(!1),this.claimBtn.SetActive(!0)}))}Show(){this.chosenReward=null,this.spinBtn.SetActive(!0),this.spinBtn.interactive=!0,this.spinBtn.setImage("btn-green"),this.claimBtn.SetActive(!1),this.rewards.Init(Ko.Boosters.IsIncomeActive?Ko.GameData.InterstitialRewards.rewardsX2Active:Ko.GameData.InterstitialRewards.rewardsX2Unactive),this.fitLayout(),super.Show()}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.8*t.height/1.6),i=1.6*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.width=.7*n.width,r.height=.7*n.width,r.x=.5*(n.width-r.width),r.y=0*(n.height-r.height),this.titleImage.fitRect(r),r=n.clone(),r.width=1.2*n.width,r.height=.2*n.height,r.x=.5*(n.width-r.width),r.y=.35*(n.height-r.height),this.title.fitLayout(r),r=new Mn.Rectangle(0,0,this.title.width,this.title.height).pad(.15*-this.title.width,.15*-this.title.height),this.title.content.fitLayout(r),r=this.getPopupRect().clone(),r.height*=.65,r.y+=n.height-r.height,this.back.fitLayout(r),r=n.clone(),r.height=.65*n.height,r.x=.5*(n.width-r.width),r.y=1*(n.height-r.height),n=r.clone(),r=n.clone(),r.width=.8*n.width,r.height=.55*n.height,r.x=n.x+.5*(n.width-r.width),r.y=n.y+.5*(n.height-r.height),this.rewards.fitLayout(r),r=n.clone(),r.width=.35*n.width,r.height=.15*n.height,r.x=n.x+.5*(n.width-r.width),r.y=n.y+.95*(n.height-r.height),this.spinBtn.fitLayout(r),this.claimBtn.fitLayout(r)}}class Bn extends Yt.e{Awake(){super.Awake(),this.progress=null,this.progressVal=0,this.complete=!1}Show(){super.Show(),this.progressVal=0}SetComplete(){this.complete=!0,this.progressVal=1}Update(){}}var Fn=i(2494);class Un extends qt.M{Awake(){this.lastTimerUpdate=0,this.timeField=this.addChild(new oe.L({label:"",icon:"ico-clock",iconAlign:"absolute-left",iconSize:1.4,backgroundColor:0,backgroundAlpha:.5})),this.timeField._label.anchor.set(0,.5)}Update(){this.lastTimerUpdate+=St.g.deltaTime,this.lastTimerUpdate>1&&this.updateTimer()}updateTimer(){if(this.lastTimerUpdate=0,!Ko.Player.Missions.HasActiveMission())return;let t=Ko.Player.Missions.missionInProgress,e=Ko.Player.Timers.GetTimerById(t.timerId);if(!e)return;let i=e.SecondsLeft;this.Active&&e.SecondsLeft<=0?(this.SetActive(!1),this.emit("Finished")):(this.SetActive(!0),this.timeField.label=fe.c.FormatSecondsToTime(i))}fitLayout(t){let e=t.clone();e.width=.8*t.width,e.height=.3*t.height,e.x=.5*(t.width-e.width),e.y=.5*-e.height,this.timeField.fitLayout(e)}}class Gn extends he{constructor(){super("btn-blue",Ko.Localizator.Get("missions"))}Awake(){this.missionTimer=this.addChild(new Un),this.missionAttention=this.addChild(new an((()=>Ko.Player.Missions.HasActiveMission()&&!Ko.Player.Missions.IsInProgress()))),this.on("pointertap",(()=>{Ko.Player.Missions.HasActiveMission()?Ko.UI.missionActive.Show():Ko.UI.missionEmpty.Show(),this.missionAttention.SetActive(!1),Ko.Player.PlanetsSave.TutorSave.missions=!0,Ko.UI.tutorial.HideObjectHand(this)})),this.missionTimer.on("Finished",(()=>this.emit("MissionFinished")))}inactiveMissionAttention(){this.missionAttention.SetActive(!1)}Update(){this.missionTimer.Update(),this.missionAttention.Update(),this.missionTimer.SetActive(Ko.Player.Missions.IsInProgress()),Ko.Player.PlanetsSave.TutorSave.step>=9&&Ko.UI.map.Active&&!Ko.UI.missionEmpty.Active&&!Ko.UI.missionsList.Active&&Ko.UI.tutorial.ShowObjectHand(this)}fitLayout(t){super.fitLayout(t),this.missionTimer.fitLayout(t)}}class jn extends qt.M{Awake(){this.back=this.addChild(new se.z("bg-simple")),this.back.tint=16546564,this.back.alpha=.5,this.title=this.addChild(new $t.g(Ko.Localizator.Get("planet_tap_bonus"))),this.tapBonusField=this.addChild(new oe.L({label:"",icon:"ico-gold",iconAlign:"right",iconSize:.8,textProps:{fitTextTemplate:"00x"}})),this.planetId=0}Init(t){this.planetId=t.id;let e=Ko.Player.PlanetsSave.HasPlanet(this.planetId);this.tapBonusField.label=`x${t.tapIncomeMultiplayer}`,this.back.alpha=e?1:.3}UpdateUI(){let t=Ko.Player.PlanetsSave.HasPlanet(this.planetId);this.back.alpha=t?1:.3}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e),e.pad(.05*-e.width,.05*-e.height),e.pad(0,.3*-e.height),e.y=.05*t.height,this.title.fitLayout(e),e.y=e.height+.05*t.height,e.height=.9*t.height-e.height,this.tapBonusField.fitLayout(e)}}class Hn extends Kt{Awake(){super.Awake(),this.planetId=0,this.btn=this.addChild(new Kt("")),this.priceField=this.addChild(new oe.L({label:"",icon:"ico-gold",iconAlign:"right",iconSize:.8,textProps:{fitTextTemplate:"000.0xx"}})),this.youAreHere=this.addChild(new oe.L({label:Ko.Localizator.Get("you_are_here"),backgroundColor:16546564,backgroundAlpha:.9})),this.titleField=this.addChild(new $t.g("")),this.tapBonusField=this.addChild(new jn)}Init(t){this.planetId=t.id,this.btn.on("pointertap",(()=>this.emit("PlanetClick",this.planetId))),this.tapBonusField.Init(t),this.Update()}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.btn.fitRect(e);let i=e.clone().pad(.1*-e.width,.4*-e.height);this.priceField.fitLayout(i),i.y=-i.height,this.youAreHere.fitLayout(i),i.y=e.height-.5*i.height,this.titleField.fitLayout(i);let n=new Fn.Rectangle(.6*e.width,.1*e.width,.5*e.width,.2*e.width);this.tapBonusField.fitLayout(n)}Update(){let t=Ko.GameData.Planets.GetPlanet(this.planetId),e=Ko.Player.PlanetsSave.HasPlanet(this.planetId),i=Ko.Player.PlanetsSave.currentPlanetId==this.planetId;this.titleField.text=e?Ko.Localizator.Get(t.planetName):"???",this.priceField.label=fe.c.FormatMoney(t.GetPrice().priceValue),this.youAreHere.SetActive(i),this.priceField.SetActive(!e),this.btn.setImage(e?`map/planet${this.planetId}`:`map/planet${this.planetId}dark`),this.tapBonusField.UpdateUI()}}class zn extends Yt.e{Awake(){super.Awake(),this.onPlayerDataChanged=this.onPlayerDataChanged.bind(this),this.OnPlanetClick=this.OnPlanetClick.bind(this),this.space=this.addChild(new ai({overflow:"scroll",scrollbarSize:0,dragScroll:!1})),this.back=this.space.content.addChild(new qt.M("map/cosmos")),this.back.anchor.set(0),this.planets=this.addChild(new ai({overflow:"scroll",scrollbarSize:0,interaction:Ko.app.renderer.plugins.interaction}));const t=Zt.T.LANDSCAPE_MODE_NEEDED?"map-close-white":"map-close";this.missionsBtn=this.addChild(new Gn),this.closeBtn=this.addChild(new Kt(t)),this.planetItems=[],this.HideWithBackButton=!0,Ko.Player.on("Changed",this.onPlayerDataChanged)}Init(){super.Init(),this._createPlanetButtons(),this.closeBtn.on("pointertap",(()=>Ko.UI.SetState(y.Su.Game))),this.missionsBtn.on("MissionFinished",(()=>this.updateUI()))}_createPlanetButtons(){for(let t of Ko.GameData.Planets.planets){let e=this.planets.content.addChild(new Hn);e.Init(t),e.on("PlanetClick",this.OnPlanetClick),this.planetItems.push(e)}}_findPlanetItem(t){for(let e of this.planetItems)if(e.planetId===t)return e}scrollToPlanet(t){let e=this._findPlanetItem(t);if(!e)return;let{scrollWidth:i,scrollHeight:n,boxWidth:r,boxHeight:s}=this.planets,o=e.position.x-.5*r,a=e.position.y-.5*s;this.planets.scrollLeft=Math.max(0,Math.min(o,i-r)),this.planets.scrollTop=Math.max(0,Math.min(a,n-s))}fitLayout(t=Ko.app.viewport){const{width:e,height:i}=t;let n=e/i,r=1,s=new Fn.Rectangle(0,0,0,0);s.width=Math.min(.17*e,.1*i/r),s.height=s.width*r,s.x=.8*e,s.y=.2*i*n,this.closeBtn.fitRect(s),r=.5;let o=new Fn.Rectangle(0,0,0,0);o.width=Math.min(.4*e,.1*i/r),o.height=o.width*r,o.x=.1*(e-o.width),o.y=.95*(i-o.height),this.missionsBtn.fitLayout(o);let a=e+.8*e,h=i+.6*e;r=1;let l=new Fn.Rectangle(0,0,0,0);l.width=Math.min(.4*e,.25*i/r),l.height=l.width*r;let c={0:{x:.6,y:.9},1:{x:.37,y:.65},2:{x:.8,y:.55},3:{x:.27,y:.35},4:{x:.64,y:.2},5:{x:.1,y:.1}};this.planetItems.forEach(((t,e)=>{l.x=(a-l.width)*c[e].x,l.y=(h-l.height)*c[e].y,t.fitLayout(l)}));let u=Math.max(a,h);this.back.scale.set(Math.max(u/this.back.texture.width,u/this.back.texture.height)),this.space.resize({boxWidth:e,boxHeight:i,scrollWidth:a,scrollHeight:h}),this.planets.resize({boxWidth:e,boxHeight:i,scrollWidth:a,scrollHeight:h})}OnPlanetClick(t){let e=Ko.GameData.Planets.GetPlanet(t);if(Ko.Player.PlanetsSave.HasPlanet(t))console.log("PLANET CHANGE: ",t),Ko.Player.PlanetsSave.SetCurrentPlanet(t),Ko.UI.SetState(y.Su.Game),Ko.Audio.Play("UIToMap");else if(console.log("PLANET PURCHASE: ",t),Ko.Player.SpendMoney(e.GetPrice(),y.DE.planet,y.JD.map,e.planetName))console.log("PLANET PURCHASED: ",t),Ko.Player.PlanetsSave.AddPlanet(t),this.updateUI();else switch(console.log("PLANET NOT PURCHASED: not enough money",t,e.GetPrice()),e.GetPrice().priceType){case y.zc.Soft:Ko.UI.SetState(y.Su.BankSoft);break;case y.zc.Hard:Ko.UI.SetState(y.Su.BankHard)}}Show(){Ko.Player.PlanetsSave.TutorSave.map=!0,this.updateUI(),this.fitLayout(),this.scrollToPlanet(Ko.Player.PlanetsSave.currentPlanetId),this.updateScroll(),super.Show()}Hide(){this.Active&&Ko.Ads.TriggerInterstitial(),Ko.UI.tutorial.HideObjectHand(),super.Hide()}onPlayerDataChanged(){Ko.Player.Initialized&&this.updateUI()}Update(){this.missionsBtn.Update(),this.updateScroll()}updateScroll(){this.space.scrollLeft=.5*this.planets.scrollLeft,this.space.scrollTop=.5*this.planets.scrollTop}updateUI(){this.missionsBtn.Update();for(let t of this.planetItems)t.Update()}}class Wn extends oe.L{Init(t){super.Init(),this.reward=t,this.iconSize=1.1}UpdateUI(){switch(this.reward.type){case y.E.MaxCreature:this.label="",this.icon="box";break;case y.E.MoneySoftBySoftSpeed:this.label=fe.c.FormatMoney(this.reward.value*Ai.GameManager.gameController.MoneySoftSpeed),this.icon="ico-gold";break;case y.E.MoneyHard:this.label=fe.c.FormatMoney(this.reward.value),this.icon="ico-diamond";break;default:this.label="",this.icon=""}}}class Vn extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new se.z("bg-simple")),this.back.tint=0,this.back.alpha=.3,this.title=this.addChild(new $t.g(Ko.Localizator.Get("mission_rewards"))),this.items=[]}Init(t){for(;this.items.length>t.length;)this.removeChild(this.items.pop());for(let e=0;e<t.length;e++){let i=this.items[e]||this.addChild(new Wn);i.Init(t[e]),this.items.length<=e&&this.items.push(i)}}UpdateUI(){for(let t of this.items)t.UpdateUI()}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e),e=t.clone(),e.width=.22*t.width,e.height=.6*t.height,e.x=.05*t.width,e.y=.5*(t.height-e.height),this.title.fitLayout(e);let i=.2*t.width;e.x=.95*t.width;let n=this.items.reverse();for(let t of n)e.width=t.label?i:.75*i,e.x-=e.width,t.fitLayout(e)}}var Xn=i(2494);class Yn extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake({title:Ko.Localizator.Get("missions"),closeButton:!0}),this.iconImage=this.content.addChild(new qt.M("rocket")),this.missionItemBack=this.content.addChild(new se.z("bg-simple")),this.missionItemBack.tint=0,this.missionItemBack.alpha=.3,this.rocket=this.content.addChild(new qt.M("rocket-noflame")),this.nameField=this.content.addChild(new $t.g),this.timeField=this.content.addChild(new oe.L({label:"",icon:"ico-clock",iconAlign:"absolute-left",iconSize:1.2,textProps:{}})),this.timeField._label.anchor.set(0,.5),this.adsBtn=this.content.addChild(new ce("btn-green",{label:Ko.Localizator.Get("ads"),icon:"play-icon",iconAlign:"right"})),this.rewards=this.content.addChild(new Vn),this.collectBtn=this.content.addChild(new he("btn-green",Ko.Localizator.Get("collect"))),this.adsBtn.visible=this._rewardedAdAllowed,this.adsBtn.alpha=this._rewardedAdAllowed?1:0,this.lastTimerUpdate=0}Init(){super.Init(),this.updateRewards(),this.collectBtn.on("pointertap",(()=>{if(!Ko.Player.Missions.IsInProgress()){this.Hide();let t=Ko.Player.Missions.missionInProgress,e=Ko.GameData.Missions.GetMission(t.missionId);Ko.UI.missionRewards.Show(e.id,e.rewards),Ko.UI.map.missionsBtn.inactiveMissionAttention()}})),this.adsBtn.on("pointertap",(()=>{Ko.Ads.TriggerRewarded((()=>{Ko.Player.Missions.MinusTime(1800),this.updateUI(),this.updateTimer()}))}))}Show(){this.updateUI(),this.updateRewards(),this.updateTimer(),super.Show()}Update(){if(this.lastTimerUpdate+=St.g.deltaTime,this.lastTimerUpdate>1&&this.updateTimer(),Ko.Player.Initialized&&Ko.Player.Missions){let t=Ko.Player.Missions.IsInProgress();this.adsBtn.SetActive(this._rewardedAdAllowed&&t)}}updateTimer(){this.lastTimerUpdate=0;let t=Ko.Player.Missions.missionInProgress;if(!t)return;let e=Ko.Player.Timers.GetTimerById(t.timerId),i=e?e.SecondsLeft:0;i<=0?this.updateUI():this.timeField.text=fe.c.FormatSecondsToTime(i)}updateRewards(){let t=Ko.Player.Missions.missionInProgress;if(t){let e=Ko.GameData.Missions.GetMission(t.missionId);this.rewards.Init(e.rewards)}}updateUI(){let t=Ko.Player.Missions.missionInProgress,e=Ko.GameData.Missions.GetMission(t.missionId),i=Ko.Player.Missions.IsInProgress();this.collectBtn.interactive=!i,this.collectBtn.setImage(i?"btn-gray":"btn-green"),this.adsBtn.interactive=this._rewardedAdAllowed&&!0,this.adsBtn.SetActive(this._rewardedAdAllowed&&i),this.nameField.text=Ko.Localizator.Get(e.missionName),this.timeField.SetActive(i),this.rewards.UpdateUI()}fitLayout(t=Ko.app.viewport){let e=Math.min(.9*t.width,.8*t.height/1.5),i=1.5*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.width=.7*n.width,r.height=.4*n.height,r.x=.5*(n.width-r.width),r.y=.27*(n.height-r.height),this.iconImage.fitRect(r),r=n.clone(),r.width=.9*n.width,r.height=.4*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.missionItemBack.fitLayout(r);let s=new Xn.Rectangle(this.missionItemBack.x,this.missionItemBack.y,this.missionItemBack.width,this.missionItemBack.height);r=s.clone(),r.width=.22*s.width,r.height=.35*s.height,r.x=s.x+.02*s.width,r.y=s.y+.07*s.height,this.rocket.fitRect(r),r=s.clone(),r.width=.46*s.width,r.height=.13*s.height,r.x=s.x+.24*s.width,r.y=s.y+.1*s.height,this.nameField.fitLayout(r),r=s.clone(),r.width=.4*s.width,r.height=.1*s.height,r.x=s.x+.24*s.width,r.y=s.y+.27*s.height,this.timeField.fitLayout(r),r=s.clone(),r.width=.24*s.width,r.height=.25*s.height,r.x=s.x+.73*s.width,r.y=s.y+.1*s.height,this.adsBtn.fitLayout(r),r=s.clone(),r.width=.95*s.width,r.height=.17*s.height,r.x=s.x+.02*s.width,r.y=s.y+.46*s.height,this.rewards.fitLayout(r),r=s.clone(),r.width=.47*s.width,r.height=.23*s.height,r.x=s.x+.5*(s.width-r.width),r.y=s.y+.92*(s.height-r.height),this.collectBtn.fitLayout(r)}}class qn extends re{Awake(){super.Awake({title:Ko.Localizator.Get("missions"),closeButton:!0}),this.picture=this.content.addChild(new qt.M("rocket")),this.description=this.content.addChild(new $t.g(Ko.Localizator.Get("no_missions"))),this.chooseBtn=this.content.addChild(new he("btn-green",Ko.Localizator.Get("choose")))}Init(){super.Init(),this.chooseBtn.on("pointertap",(()=>{this.Hide(),Ko.UI.missionsList.Show()}))}fitLayout(t=Ko.app.viewport){let e=Math.min(.9*t.width,.8*t.height/1.5),i=1.5*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.width=.7*n.width,r.height=.4*n.height,r.x=.5*(n.width-r.width),r.y=.32*(n.height-r.height),this.picture.fitRect(r),r=n.clone(),r.width=.75*n.width,r.height=.11*n.height,r.x=.5*(n.width-r.width),r.y=.72*(n.height-r.height),this.description.fitLayout(r),r=n.clone(),r.width=.6*n.width,r.height=.15*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.chooseBtn.fitLayout(r)}Show(){Ko.Player.PlanetsSave.TutorSave.missions=!0,super.Show(),10===Ko.Player.PlanetsSave.TutorSave.step&&Ko.UI.tutorial.ShowObjectHand(this.chooseBtn)}Hide(){Ko.UI.tutorial.HideObjectHand(this.chooseBtn),super.Hide()}}class $n extends qt.M{constructor(t){super(),this.reward=t,this.label=null,this.icon=null,this.UpdateUI(),this.text=this.addChild(new $t.g(this.label)),this.image=this.addChild(new qt.M(this.icon))}UpdateUI(){switch(this.reward.type){case RewardType.MaxCreature:this.label="+1",this.icon="box";break;case RewardType.MoneySoftBySoftSpeed:this.label=NUtils.FormatMoney(this.reward.value*GameManager.gameController.MoneySoftSpeed),this.icon="bank/pack-gold-sack";break;case RewardType.MoneyHard:this.label=NUtils.FormatMoney(this.reward.value),this.icon="bank/pack-gems-handful";break;default:this.label="",this.icon=""}}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.width=t.width,e.height=.8*t.height,e.x=.5*(t.width-e.width),e.y=0*(t.height-e.height),this.image.fitRect(e),e=t.clone(),e.width=t.width,e.height=.2*t.height,e.x=.5*(t.width-e.width),e.y=1*(t.height-e.height),this.text.fitLayout(e)}}class Kn extends re{Awake(){super.Awake(),this.back.alpha=0,this.collectBtn=this.content.addChild(new he("btn-green",Core.Localizator.Get("collect"))),this.progressTitle=this.content.addChild(new $t.g(Core.Localizator.Get("mission_rewards_title"))),this.progressField=this.content.addChild(new $t.g("",{fill:"gray"})),this.rewards=[],this.items=[],this.currentRewardIndex=0,this.allItemsContainer=this.content.addChild(new qt.M("")),this.allItemsContainer.visible=!1}Init(){super.Init(),this.collectBtn.on("pointertap",(()=>{this.currentRewardIndex>this.rewards.length?(this.Hide(),Core.UI.missionEmpty.Show()):this.updateCurrentReward()}))}Show(t=null,e=null){for(this.rewards=e,this.currentRewardIndex=0,this.allItemsContainer.removeChildren(),this.allItemsContainer.visible=!1;this.items.length;)this.content.removeChild(this.items.shift());for(let t of e){t.Take("mission_reward");let e=this.content.addChild(new $n(t));this.items.push(e),e=this.allItemsContainer.addChild(new $n(t))}Core.Player.Missions.FinishMission(),this.updateCurrentReward();let i=Core.GameData.Missions.GetMission(t);Core.Analytics.SendMissionEvent(t,i.durationSeconds,""),super.Show()}updateCurrentReward(){for(let t=0;t<this.items.length;t++)this.items[t].SetActive(t===this.currentRewardIndex);this.currentRewardIndex<this.rewards.length?(this.progressField.SetActive(!0),this.progressField.text=w.Format("{0}/{1}",this.currentRewardIndex+1,this.rewards.length)):(this.allItemsContainer.visible=!0,this.progressField.SetActive(!1)),this.currentRewardIndex++}fitLayout(t=Core.app.viewport){super.fitLayout(t);let e=this.getContentSize(),i=e.clone();i.width=.6*e.width,i.height=.12*e.height,i.x=.5*(e.width-i.width),i.y=.92*(e.height-i.height),this.collectBtn.fitLayout(i),i=e.clone(),i.width=.9*e.width,i.height=.06*e.height,i.x=.5*(e.width-i.width),i.y=.1*(e.height-i.height),this.progressTitle.fitLayout(i),i=e.clone(),i.width=.3*e.width,i.height=.06*e.height,i.x=.5*(e.width-i.width),i.y=.18*(e.height-i.height),this.progressField.fitLayout(i),i=e.clone(),i.width=.6*e.width,i.height=.6*e.width,i.x=.5*(e.width-i.width),i.y=.5*(e.height-i.height);for(let t of this.items)t.fitLayout(i);let n=2===this.items.length?.5:.3,r=[{x:0,y:n},{x:1,y:n},{x:.5,y:.7}];this.allItemsContainer.children.forEach(((t,i)=>{let n=e.clone();n.width=.55*e.width,n.height=.55*e.width,n.x=(e.width-n.width)*r[i].x,n.y=(e.height-n.height)*r[i].y,t.fitLayout(n)}))}}class Jn extends Yt.e{Awake(){super.Awake(),this.missionId=0,this.back=this.addChild(new se.z("bg-simple")),this.back.tint=0,this.back.alpha=.3,this.startBtn=this.addChild(new he("btn-green",Ko.Localizator.Get("start"))),this.timeField=this.addChild(new oe.L({label:"",icon:"ico-clock",iconAlign:"absolute-left",iconSize:1.4,backgroundColor:0,backgroundAlpha:.3,textProps:{fitTextTemplate:"00h 00m 00s"}})),this.timeField._label.anchor.set(0,.5),this.rewards=this.addChild(new Vn),this.nameField=this.addChild(new $t.g),this.nameField.anchor.set(0,.5),this.iconImage=this.addChild(new qt.M("rocket-noflame")),this.startBtn.on("pointertap",(()=>{Ko.Player.PlanetsSave.TutorSave.mission=!0,Ko.UI.tutorial.HideObjectHand(this.startBtn),Ko.Player.Missions.CreateMission(this.missionId),Ko.UI.missionsList.Hide(),Ko.UI.missionActive.Show()}))}Init(t){this.missionId=t.id,this.rewards.Init(t.rewards)}UpdateUI(){this.SetActive(Ko.Player.Missions.IsTutorial()^1!=this.missionId);let t=Ko.GameData.Missions.GetMission(this.missionId);this.nameField.text=Ko.Localizator.Get(t.missionName),this.timeField.text=fe.c.FormatSecondsToTime(t.durationSeconds),this.rewards.UpdateUI(),this.Active&&10===Ko.Player.PlanetsSave.TutorSave.step&&Ko.UI.tutorial.ShowObjectHand(this.startBtn)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e),e=t.clone(),e.width=.2*t.width,e.height=.55*t.height,e.x=.02*t.width,e.y=.07*t.height,this.iconImage.fitRect(e),e=t.clone(),e.width=.46*t.width,e.height=.19*t.height,e.x=.23*t.width,e.y=.12*t.height,this.nameField.fitLayout(e),e=t.clone(),e.width=.48*t.width,e.height=.19*t.height,e.x=.23*t.width,e.y=.37*t.height,this.timeField.fitLayout(e),e=t.clone(),e.width=.26*t.width,e.height=.48*t.height,e.x=.72*t.width,e.y=.12*t.height,this.startBtn.fitLayout(e),e=t.clone(),e.width=.96*t.width,e.height=.25*t.height,e.x=.02*t.width,e.y=.67*t.height,this.rewards.fitLayout(e)}}class Zn extends re{Awake(){super.Awake({title:Ko.Localizator.Get("missions"),closeButton:!0}),this.items=[],this.subtitle=this.content.addChild(new $t.g(Ko.Localizator.Get("your_missions_simple"),{fill:13421772}))}Init(){super.Init();for(let t of Ko.GameData.Missions.missions){let e=this.content.addChild(new Jn);e.Init(t),this.items.push(e)}}Show(){this.subtitle.text=Ko.Localizator.Get(Ko.Player.Missions.IsTutorial()?"your_missions_tutorial":"your_missions_simple"),this.fitLayout();for(let t of this.items)t.UpdateUI();super.Show()}fitItems(t){let e=this.items.filter((t=>t.Active)),i=.05*t.width,n=t.clone();n.height=(n.height-2*i)/3,n.y=t.y;for(let t of e)t.fitLayout(n),n.y+=n.height+i}fitLayout(t=Ko.app.viewport){let e=Math.min(.9*t.width,.85*t.height/1.7),i=1.7*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.width=.4*n.width,r.height=.05*n.height,r.x=.5*(n.width-r.width),r.y=.125*(n.height-r.height),this.subtitle.fitLayout(r),r=n.clone().pad(.05*-n.width,.11*-n.height),r.y=.18*n.width+.15*r.width,this.fitItems(r)}}var Qn=i(2494);class tr extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;get moneyPerSecond(){return Ai.GameManager.gameController&&Ai.GameManager.gameController.MoneySoftSpeed||0}get storedSeconds(){let t=Ko.Player.PlanetsSave.GetUpgradeProgress(y.Tq.MoneyBox).upgradeIndex;return Ko.GameData.Upgrades.UpgradeByType(y.Tq.MoneyBox).TotalValue(t)}get seconds(){let t=~~((Ko.Time.serverTime-Ko.Player.Timers.lastActionTime)/1e3);return Math.max(0,Math.min(t,this.storedSeconds))}get totalMoney(){return BigInt(this.moneyPerSecond)*BigInt(this.seconds)*(this.seconds>=Ko.GameData.WelcomeBack.MinSecondsToFire?BigInt(Ko.GameData.WelcomeBack.MoneyBoxMultiplayer):1n)}Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake(),this.onClickTake=this.onClickTake.bind(this),this.onClickTakeX2=this.onClickTakeX2.bind(this),this.onShown=this.onShown.bind(this),this.iconImg=this.content.addChild(new qt.M("pig")),this.descriptionField=this.content.addChild(new $t.g(Ko.Localizator.Get("money_box_reward"))),this.totalRewardField=this.content.addChild(new oe.L({label:"",icon:"",iconAlign:"left",iconSize:.6,textProps:{fontSize:80}})),this.takeBtn=this.content.addChild(new he("btn-blue",{label:Ko.Localizator.Get("take")})),this.takeX2Btn=this.content.addChild(new ce("btn-green",{icon:"play-icon",iconAlign:"left",label:Ko.Localizator.Get("take_double")})),this.moneyType=y.zc.Soft,this.takeBtn.on("pointertap",this.onClickTake),this._rewardedAdAllowed&&this.takeX2Btn.on("pointertap",this.onClickTakeX2),this.takeX2Btn.visible=this._rewardedAdAllowed,this.takeX2Btn.alpha=this._rewardedAdAllowed?1:0}Init(){super.Init()}fitLayout(t=Ko.app.viewport){let e=Math.min(.6*t.width,.6*t.height/1.4),i=1.4*e;this.setPopupRect(new Qn.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.45*n.height,r.width=.7*n.width,r.x=.5*(n.width-r.width),r.y=0*(n.height-r.height),this.iconImg.fitRect(r),r=n.clone(),r.height=.15*n.height,r.width=.86*n.width,r.x=.5*(n.width-r.width),r.y=.51*(n.height-r.height),this.descriptionField.fitLayout(r),r=n.clone(),r.width=.8*n.width,r.height=.2*n.height,r.x=.5*(n.width-r.width),r.y=.72*(n.height-r.height),this.totalRewardField.fitLayout(r),r=n.clone(),r.width=.41*n.width,r.height=.16*n.height;const s=this._rewardedAdAllowed?.11:.5;r.x=(n.width-r.width)*s,r.y=.95*(n.height-r.height),this.takeBtn.fitLayout(r),r.x=.89*(n.width-r.width),this.takeX2Btn.fitLayout(r)}Show(){this.updateUI(),super.Show()}onClickTakeX2(){Ko.Ads.TriggerRewarded(this.onShown)}onShown(){this.Take(2n*this.totalMoney)}onClickTake(){this.Take(this.totalMoney)}Take(t=this.totalMoney){console.log("TAKE BOX",t,this.seconds),Ko.Player.Timers.lastActionTime=Ko.Time.serverTime,Ko.Player.AddMoney(this.moneyType,t),this.Hide()}updateUI(){switch(this.moneyType){case y.zc.Soft:this.totalRewardField.icon="ico-gold";break;case y.zc.Hard:this.totalRewardField.icon="ico-diamond";break;default:this.totalRewardField.icon=""}this.totalRewardField.label=fe.c.FormatMoney(this.totalMoney)}Check(){Ko.Time.Initialized&&Ko.Player.Initialized&&Ko.Player.PlanetsSave.GetUpgradeProgress(y.Tq.MoneyBox).upgradeIndex&&Ko.Player.Timers.lastActionTime>0&&this.totalMoney>0&&this.seconds>300&&this.Show()}}var er=i(2494);class ir extends Kt{Awake(){this.back=this.addChild(new se.z("button-square-orange")),this.icon=this.back.addChild(new qt.M("ico-collection"))}Init(){this.on("pointertap",(()=>Ko.UI.collection.Show())),this._initTapHighlight(this.back)}fitLayout(t){this.position.copyFrom(t),this.back.width=t.width,this.back.height=t.height,this.icon.scale.set(.7*t.height/this.icon.texture.height),this.icon.position.set(.5*t.width,.5*t.height)}}class nr extends Kt{Awake(){this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.5,this.icon=this.addChild(new qt.M("ico-gold")),this.balance=this.addChild(new $t.g("",{fitTextTemplate:"000.0X"})),this.button=this.addChild(new qt.M("btn-add"))}Init(){this.on("pointertap",(()=>Ko.UI.SetState(y.Su.BankSoft)))}updateUI(){this.balance.text=fe.c.FormatMoney(Ko.Player.MoneySoft)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e),e.pad(.2*-t.height,.15*-t.height);let i=e.clone();i.width=i.height,this.icon.fitRect(i);let n=i.clone().pad(.2*-e.height);n.x=e.right-n.width,this.button.fitRect(n);let r=i.clone();r.x=i.right+.05*e.width,r.width=n.left-i.right-.1*e.width,this.balance.fitLayout(r)}}class rr extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.5,this.icon=this.addChild(new qt.M("ico-gold")),this.speedValue=this.addChild(new $t.g("",{fitTextTemplate:"000.0X"})),this.speedValue.anchor.set(0,0),this.speedLabel=this.addChild(new $t.g(Ko.Localizator.Get("soft_per_second"),{fontSize:16*Ko.app.renderer.resolution})),this.speedLabel.anchor.set(0,0),this.bonusTimer=this.addChild(new fn)}updateUI(){if(!GameManager.gameController)return;let t=GameManager.gameController.MoneySoftSpeed;this.speedValue.text=fe.c.FormatMoney(t),this.bonusTimer.Update(Ko.Player.Timers.incomeX4BoosterTimerId),this.bonusTimer.Active||this.bonusTimer.Update(Ko.Player.Timers.incomeBoosterTimerId)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e),e.pad(.2*-t.height,.15*-t.height);let i=e.clone();i.width=i.height,this.icon.fitRect(i);let n=i.clone();n.x=i.right+.05*e.width,n.width=e.width-n.left,n.height=.6*e.height,this.speedValue.fitLayout(n),n.y+=n.height,n.height=.4*e.height,this.speedLabel.fitLayout(n);let r=new er.Rectangle(t.width-.4*t.height,t.height-.4*t.height,.5*t.height,.5*t.height);this.bonusTimer.fitLayout(r)}}class sr extends Kt{get diamondGlobalParams(){let{a:t,tx:e,ty:i}=this.icon.transform.worldTransform;return{scale:t*Ko.app.renderer.resolution,x:e*Ko.app.renderer.resolution,y:i*Ko.app.renderer.resolution}}Awake(){this.back=this.addChild(new se.z("button-shop")),this.icon=this.addChild(new qt.M("ico-diamond")),this.balance=this.addChild(new $t.g("")),this.button=this.addChild(new qt.M("btn-add"))}Init(){this.on("pointertap",(()=>Ko.UI.SetState(y.Su.BankHard)))}updateUI(){this.balance.text=fe.c.FormatMoney(Ko.Player.MoneyHard)}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.x=e.y=0,this.back.fitLayout(e),e.pad(.2*-t.height,.15*-t.height);let i=e.clone();i.width=i.height,this.icon.fitRect(i);let n=i.clone().pad(.2*-e.height);n.x=e.right-n.width,this.button.fitRect(n);let r=i.clone();r.x=i.right+.05*e.width,r.width=n.left-i.right-.1*e.width,this.balance.fitLayout(r)}}class or extends qt.M{get progress(){return this._progress}set progress(t){this._progress=Math.max(0,Math.min(1,t)),this.progressBar.width=this.progressBack.width*this._progress}Awake(){this._progress=0,this._progressAnimation=null,this.progressBack=this.addChild(new se.z("bg-bar")),this.progressBack.tint=0,this.progressBack.alpha=.5,this.progressBar=this.addChild(new se.z("bg-bar")),this.progressBar.tint=65280,this.icon=this.addChild(new qt.M("ico-diamond")),this.updateUI=this.updateUI.bind(this)}Init(){Ko.Player.on("Changed",this.updateUI),this.updateUI()}_targetProgress;_animateProgress(){if(this._targetProgress=Ko.Player.PlanetsSave.CurrentPlanet.mergeProgressPercentage||0,this._progressAnimation){if(1!==this._progressAnimation.progress())return;this._progressAnimation.kill(),this._progressAnimation=null}0!==this._targetProgress&&this._progress!==this._targetProgress?this._progressAnimation=Jt.gsap.timeline().delay(1).to(this,{progress:this._targetProgress,duration:.5}):this.progress=this._targetProgress}updateUI(){let t=Ko.Player.Initialized&&Ko.Player.PlanetsSave.CurrentPlanet.mergeProgressTarget>0;this.SetActive(t),this._animateProgress()}fitLayout(t){this.position.copyFrom(t),this.progressBack.height=this.progressBar.height=.3*t.height,this.progressBack.y=this.progressBar.y=.5*(t.height-this.progressBack.height),this.icon.scale.set(t.height/this.icon.texture.height),this.icon.position.set(t.width-.5*this.icon.width,.5*t.height),this.progressBack.width=t.width-.9*this.icon.width,this.updateUI()}}class ar extends Yt.e{Awake(){super.Awake(),this.softBtn=this.addChild(new nr),this.softSpeedBtn=this.addChild(new rr),this.hardBtn=this.addChild(new sr),this.collectionBtn=this.addChild(new ir),this.tapChallengeMergeProgress=this.addChild(new or),this.hardMoneyFromBonus=null,this.hardMoneyObject=this.hardBtn.icon}Init(){super.Init(),this.softBtn.Init(),this.softSpeedBtn.Init(),this.hardBtn.Init(),this.collectionBtn.Init(),this.onMergeBonus=this.onMergeBonus.bind(this),this.onPlayerDataChanged=this.onPlayerDataChanged.bind(this),this.onMoneySoftSpeedUpdated=this.onMoneySoftSpeedUpdated.bind(this),Ko.Player.on("MergeBonus",this.onMergeBonus),Ko.Player.on("Changed",this.onPlayerDataChanged),this.tapChallengeMergeProgress.Init()}fitLayout(t){let e=.01*t.width,i=new er.Rectangle(e,e,t.width-2*e,.1*t.width),n=i.clone();n.y+=i.height+e,n.height=.5*i.height;let r=i.clone();r.width=.75*i.height,r.x+=i.width-r.width,this.collectionBtn.fitLayout(r),i.width-=r.width+e;let s=i.clone();s.width=(i.width-2*e)/3,this.softBtn.fitLayout(s),s.x+=s.width+e,this.softSpeedBtn.fitLayout(s),s.x+=s.width+e,this.hardBtn.fitLayout(s),this.tapChallengeMergeProgress.fitLayout(n)}onMergeBonus(){Ko.GameData.TapChallenge.isActive&&Ko.UI.tapChallenge.Show()}Show(){super.Show(),this.onPlayerDataChanged(),GameManager.gameController.on("MoneySoftSpeedUpdated",this.onMoneySoftSpeedUpdated),this.onMoneySoftSpeedUpdated()}Hide(){GameManager.gameController.off("MoneySoftSpeedUpdated",this.onMoneySoftSpeedUpdated),super.Hide()}onMoneySoftSpeedUpdated(){this.softSpeedBtn.updateUI()}onPlayerDataChanged(){Ko.Player.Initialized&&(this.softBtn.updateUI(),this.softSpeedBtn.updateUI(),this.hardBtn.updateUI(),this.tapChallengeMergeProgress.updateUI())}Update(){this.tapChallengeMergeProgress.updateUI(),this.softSpeedBtn.updateUI()}}var hr=i(2494);class lr extends qt.M{Awake(){this.marker=this.addChild(new se.z("bg-bar")),this.icon=this.addChild(new qt.M(""))}Init(t,e){let i=Ko.GameData.Epochs.GetByCreatureId(t),n=Ko.GameData.Creatures.Get(t);this.icon.setImage("creatures/"+n.id);let r=i.creatures.indexOf(t);r>e?(this.icon.tint=0,this.marker.tint=0,this.marker.alpha=.5):(this.icon.tint=16777215,this.marker.tint=65280,this.marker.alpha=r===e?1:.3)}fitLayout(t){this.position.set(t.x,t.y);let e=t.clone();e.height=.2*t.height,e.width=.95*t.width,e.y=0,e.x=.5*(t.width-e.width),this.marker.fitLayout(e),e=t.clone(),e.height=.78*t.height,e.width=.9*t.width,e.y=1*(t.height-e.height),e.x=.5*(t.width-e.width),this.icon.position.set(e.x+.5*e.width,e.y+.5*e.height),this.icon.scale.set(Math.min(1*e.width/this.icon.texture.width,1*e.height/this.icon.texture.height))}}class cr extends qt.M{Awake(){this.markers=[]}Init(t){let e=Ko.GameData.Epochs.GetByCreatureId(t),i=e.creatures.indexOf(t);for(;this.markers.length<e.creatures.length;){let t=this.addChild(new lr);this.markers.push(t)}for(;this.markers.length>e.creatures.length;){let t=this.markers.pop();t.parent&&t.parent.removeChild(parent)}for(let t=0;t<this.markers.length;t++)this.markers[t].Init(e.creatures[t],i)}fitLayout(t){this.position.set(t.x,t.y);let e=t.clone();e.x=0,e.y=0,e.width=t.width/(this.markers.length||1);for(let t of this.markers)t.fitLayout(e),e.x+=e.width}}class ur extends re{get diamondGlobalParams(){let{a:t,tx:e,ty:i}=this.ribbonLabel._icon.transform.worldTransform;return{scale:t*Ko.app.renderer.resolution,x:e*Ko.app.renderer.resolution,y:i*Ko.app.renderer.resolution}}Awake(){super.Awake(),this.creatureShadow=this.content.addChild(new qt.M("shadow")),this.creatureShadow.alpha=.5,this.creatureIcon=this.content.addChild(new qt.M),this.ribbon=this.content.addChild(new qt.M("ribbon")),this.ribbonLabel=this.content.addChild(new oe.L({label:"+1",icon:"ico-diamond",iconAlign:"right"})),this.title=this.content.addChild(new $t.g(Ko.Localizator.Get("new_monster_title"),{fontSize:64,wordWrap:!0,wordWrapWidth:500,align:"center"})),this.creatureName=this.content.addChild(new $t.g("",{fontSize:40})),this.epochProgress=this.content.addChild(new cr),this.hardMoneyObject=this.content.addChild(new qt.M),this.okBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("ok"),textProps:{fontSize:64,autoFitPadding:8}})),this.shareBtn=this.content.addChild(new Kt),this.newEpochId=0,this.creatureId=0}fitLayout(t=Ko.app.viewport){super.fitLayout(t);let e=Math.min(.85*t.width,.85*t.height/1.6),i=1.6*e;this.setPopupRect(new hr.Rectangle(.5*(t.width-e),.62*(t.height-i),e,i));let n=this.getContentSize(),r=n.clone();r.height=.15*n.height,r.width=.8*n.width,r.x=.5*(n.width-r.width),r.y=.01*(n.height-r.height),this.title.wordWrapWidth=.8*n.width,this.title.fitLayout(r),r=n.clone(),r.height=.47*n.height,r.width=.7*n.width,r.x=.5*(n.width-r.width),r.y=.28*(n.height-r.height),this.creatureIcon.fitRect(r),r.y=r.bottom-.6*r.height,r.x=0,r.width=n.width,this.creatureShadow.fitRect(r),r=n.clone(),r.width=.25*n.width,r.x=n.right-.9*r.width,r.height=.77*r.width,r.y=.5*(n.height-r.height),this.ribbon.fitRect(r),r.height*=.9,r.x+=.25*r.width,r.width*=.6,this.ribbonLabel.fitLayout(r),r=n.clone(),r.height=.07*n.height,r.width=.45*n.width,r.x=.5*(n.width-r.width),r.y=.68*(n.height-r.height),this.creatureName.fitLayout(r),r=n.clone(),r.height=.12*n.height,r.width=.9*n.width,r.x=.5*(n.width-r.width),r.y=.81*(n.height-r.height),this.epochProgress.fitLayout(r),r=n.clone(),r.width=.45*n.width,r.height=.12*n.height,r.x=.5*(n.width-r.width),r.y=.97*(n.height-r.height),this.okBtn.fitLayout(r)}SetNewEpochId(t){this.newEpochId=t}Init(){super.Init(),this.okBtn.interactive=!0,this.okBtn.cursor="pointer",this.okBtn.on("pointertap",(()=>this.Hide())),Ko.Player.PlanetsSave.on("EpochUnlocked",(t=>this.newEpochId=t)),this.shareBtn.SetActive(!1)}Show(t=null){null!==t&&(this.creatureId=t,this.updateUI(t),Ko.Audio.Play("NewCreature")),super.Show(),this.shareBtn.interactive=!0}Hide(){Ko.UI&&(Ko.VFX.newCreatureDiamond(this.diamondGlobalParams),Ko.WaitBefore(1,(()=>{Ko.Player.AddMoney(y.zc.Hard,1,y.DE.empty,y.JD.game,"new_creature_"+this.creatureId)}))),0!=this.newEpochId&&Ko.WaitBefore(.25,(()=>{Ai.GameManager.gameView.SelectEpoch(this.newEpochId,!0,0),Ko.UI.newEpoch.Show(this.newEpochId),this.newEpochId=0})),Ko.Player.PlanetsSave.collection.length===Ko.GameData.Slots.availableFromCollectionSize&&(Ai.GameManager.tutorialState=2e3),super.Hide()}updateUI(t){let e=Ko.GameData.Creatures.Get(t);this.creatureIcon.setImage("creatures/"+t),this.creatureName.text=Ko.Localizator.Get(e.creatureName),this.epochProgress.SetActive(!e.IsFinalForm),this.epochProgress.Active&&this.epochProgress.Init(t),this.fitLayout()}}var dr=i(2494);class pr extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new qt.M),this.back.mask=this.back.addChild((new dr.Graphics).beginFill(16777215,1).drawRect(0,0,1,1)),this.creatures=[];for(let t=0;t<3;t++)this.creatures.push(this.back.addChild(new qt.M))}Init(t){super.Init(),this.back.setImage(`epochs/${t}`);let e=Ko.GameData.Epochs.GetById(t).creatures.slice(0,this.creatures.length);for(let t=0;t<this.creatures.length;t++)this.creatures[t].SetActive(t<e.length),this.creatures[t].Active&&this.creatures[t].setImage(`creatures/${e[t]}`)}fitLayout(t){this.back.fitRect(t,!0),this.back.mask.width=t.width/this.back.scale.x,this.back.mask.height=t.height/this.back.scale.y,this.back.mask.position.set(.5*-t.width/this.back.scale.x,.5*-t.height/this.back.scale.y);let e=this.creatures.filter((t=>t.Active)),i=(t,{w:e,h:i})=>Math.min(e/t.texture.width/this.back.scale.x,i/t.texture.height/this.back.scale.x);if(e.length>1){let n=.5*this.back.width/this.back.scale.x,r=.5*this.back.height/this.back.scale.x;e[0].position.set(.5*-n,.16*r),e[0].scale.set(i(e[0],{w:.35*t.width,h:.45*t.height})),e[1].position.set(.15*-n,.15*-r),e[1].scale.set(i(e[1],{w:.3*t.width,h:.4*t.height})),e[2].position.set(.45*n,.07*r),e[2].scale.set(i(e[2],{w:.5*t.width,h:.6*t.height}))}else e[0].position.set(0,0)}}class fr extends qt.M{Awake(){this.setImage("btn-circle-green"),this.icon=this.addChild(new qt.M)}Init(t,e=!1){this.setImage(e?"btn-circle-blue":"btn-circle-green"),this.icon.setImage(`epochs/icons/${t}`)}fitLayout(t){this.scale.set(Math.min(t.width/this.texture.width,t.height/this.texture.height)),this.position.set(t.x+.5*t.width,t.y+.5*t.height),this.icon.scale.set(.8*this.texture.width/this.icon.texture.width)}}class mr extends qt.M{Awake(){this.epochBadge=this.addChild(new fr),this.marker=this.addChild(new se.z("bg-bar")),this.creature=this.addChild(new qt.M(""))}Init(t,e){let i=Ko.GameData.Epochs.GetEpochsList(t),n=Ko.GameData.Epochs.GetById(t),r=t==i[e],s=e>=i.indexOf(t);this.epochBadge.SetActive(s),this.creature.SetActive(s),s?(this.epochBadge.Init(t,r),this.creature.setImage("creatures/"+n.creatures[0]),this.marker.tint=65280,this.marker.alpha=r?1:.3):(this.marker.tint=0,this.marker.alpha=.5)}fitLayout(t){this.position.set(t.x,t.y);let e=t.clone();e.width=.9*t.width,e.height=.42*t.height,e.y=0,e.x=.5*(t.width-e.width),this.epochBadge.fitLayout(e),e=t.clone(),e.height=.08*t.height,e.width=.95*t.width,e.y=.52*(t.height-e.height),e.x=.5*(t.width-e.width),this.marker.fitLayout(e),e=t.clone(),e.height=.4*t.height,e.width=.9*t.width,e.y=1*(t.height-e.height),e.x=.5*(t.width-e.width),this.creature.fitRect(e)}}class gr extends qt.M{Awake(){this.markers=[]}Init(t){let e=Ko.GameData.Epochs.GetById(t),i=Ko.GameData.Epochs.GetEpochsList(t),n=i.indexOf(e.id);for(;this.markers.length<i.length;){let t=this.addChild(new mr);this.markers.push(t)}for(;this.markers.length>i.length;){let t=this.markers.pop();t.parent&&t.parent.removeChild(parent)}for(let t=0;t<i.length;t++)this.markers[t].Init(i[t],n)}fitLayout(t){this.position.set(t.x,t.y);let e=t.clone();e.x=0,e.y=0,e.width=t.width/(this.markers.length||1);for(let t of this.markers)t.fitLayout(e),e.x+=e.width}}class _r extends re{Awake(){super.Awake(),this.epochImage=this.content.addChild(new pr),this.title=this.content.addChild(new $t.g(Ko.Localizator.Get("new_epoch"))),this.epochName=this.content.addChild(new $t.g("")),this.epochProgress=this.content.addChild(new gr),this.hardMoneyObject=this.content.addChild(new qt.M),this.okBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("ok")})),this.epochId=0}Init(){super.Init(),this.okBtn.on("pointertap",(()=>this.Hide()))}fitLayout(t=Ko.app.viewport){super.fitLayout(t);let e=Math.min(.85*t.width,.85*t.height/1.6),i=1.6*e;this.setPopupRect(new dr.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i));let n=this.getContentSize(),r=n.clone();r.height=.13*n.height,r.width=.7*n.width,r.x=.5*(n.width-r.width),r.y=.01*(n.height-r.height),this.title.fitLayout(r),r.height=.38*n.height,r.width=.8*n.width,r.x=.5*(n.width-r.width),r.y=.25*(n.height-r.height),this.epochImage.fitLayout(r),r=n.clone(),r.height=.07*n.height,r.width=.7*n.width,r.x=.5*(n.width-r.width),r.y=.59*(n.height-r.height),this.epochName.fitLayout(r),r=n.clone(),r.height=.2*n.height,r.width=.9*n.width,r.x=.5*(n.width-r.width),r.y=.79*(n.height-r.height),this.epochProgress.fitLayout(r),r=n.clone(),r.width=.45*n.width,r.height=.12*n.height,r.x=.5*(n.width-r.width),r.y=.97*(n.height-r.height),this.okBtn.fitLayout(r)}Show(t=null){this.updateUI(t),Ko.Audio.Play("NewEpoch"),super.Show()}Hide(){super.Hide(),Ko.WaitBefore(.5,(()=>{Ko.Player.PlanetsSave.CurrentPlanet.firstCreatureOffer(this.epochId)}))}updateUI(t=this.epochId){let e=Ko.GameData.Epochs.GetById(t);e&&(this.epochId=t,this.epochImage.Init(e.id),this.epochName.text=Ko.Localizator.Get(e.epochName),this.epochProgress.Init(e.id)),this.fitLayout()}}var yr=i(2494);class vr extends Kt{get selected(){return this.chosenImg.Active}set selected(t){return this.chosenImg.SetActive(!!t)}Awake(){super.Awake(),this.btn=this.addChild(new se.z("button-biomselect")),this.chosenImg=this.addChild(new se.z("button-biomselect")),this.img=this.addChild(new ji),this.nameField=this.addChild(new $t.g("",{fontSize:60})),this.chosenImg.tint=16750848}Init(t){this.nameField.text=Core.Localizator.Get(t.epochName),this.chosenImg.SetActive(!1),this.img.setImage(`creatures/${t.creatures[0]}`)}fitLayout(t){this.position.set(t.x,t.y),this.btn.scale.set(.1),this.btn.width=t.width/this.btn.scale.x,this.btn.height=t.height/this.btn.scale.y,this.chosenImg.scale.set(this.btn.scale.x),this.chosenImg.width=this.btn.width,this.chosenImg.height=this.btn.height;let e=t.clone();e.height=.8*t.height,e.width=.9*t.width,e.y=0,e.x=.5*(t.width-e.width),this.img.position.set(e.x+.5*e.width,e.y+.5*e.height),this.img.scale.set(Math.min(.8*e.width/this.img.texture.width,.8*e.height/this.img.texture.height)),e=t.clone(),e.height=.2*t.height,e.width=.9*t.width,e.y=.9*(t.height-e.height),e.x=.5*(t.width-e.width),this.nameField.fitLayout(e)}}class br extends re{Awake(){super.Awake(),this.buttons=[],this.okBtn=this.content.addChild(new he("btn-gray",{label:Core.Localizator.Get("ok")})),this.title=this.content.addChild(new $t.g(Core.Localizator.Get("next_epoch_title"))),this.selection=void 0,this.onClickOk=this.onClickOk.bind(this),this.okBtn.on("pointertap",this.onClickOk)}fitLayout(t=Core.app.viewport){let e=Math.min(.95*t.width,.95*t.height/1.2),i=1.2*e;this.setPopupRect(new yr.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.15*n.height,r.width=.7*n.width,r.x=.5*(n.width-r.width),r.y=.07*(n.height-r.height),this.title.fitLayout(r),r=n.clone(),r.width=n.width,r.height=.4*n.height,r.x=.5*(n.width-r.width),r.y=.5*(n.height-r.height);for(let t=0;t<this.buttons.length;t++){let e=r.clone();e.width=.9*r.width/Math.max(this.buttons.length||1,2),e.height=r.height,e.x=.5*r.width+.52*e.width*(1-this.buttons.length+2*t)-.5*e.width,e.y=r.y,this.buttons[t].fitLayout(e)}r=n.clone(),r.width=.43*n.width,r.height=.15*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.okBtn.fitLayout(r)}_handleSelection(t){this.selection=t;for(let e of this.buttons)e.selected=e===this.buttons[t];this.okBtn.interactive=!0,this.okBtn.setImage("btn-green")}_createButtons(t){this._clearButtons(),t=t.filter((t=>!Core.Player.IsEpochLocked(t.id)));for(let e=0;e<t.length;e++){let i=t[e],n=this.content.addChild(new vr);n.Init(i),n.on("pointertap",this._handleSelection.bind(this,e)),this.buttons.push(n)}}_clearButtons(){for(let t of this.buttons)t.off("click"),this.content.removeChild(t);this.buttons.splice(0)}onClickOk(){void 0!==this.selection&&(this.emit("EpochSelected",this.selection),this._clearButtons(),this.Hide())}Show(t,e){this.selection=void 0,this.on("EpochSelected",t),this._createButtons(e),this.okBtn.interactive=!1,this.okBtn.setImage("btn-gray"),this.fitLayout(),super.Show()}Hide(){super.Hide(),this.off("EpochSelected")}}var wr=i(2494);class Sr extends re{Awake(){super.Awake({skin:"orange"}),this.planet=this.addChildAt(new qt.M("map/planet1"),1),this.text1=this.content.addChild(new $t.g("16/16")),this.text2=this.content.addChild(new $t.g(Ko.Localizator.Get("not_enough_space"))),this.text3=this.content.addChild(new $t.g(Ko.Localizator.Get("not_enough_space_msg1"))),this.text4=this.content.addChild(new $t.g(Ko.Localizator.Get("not_enough_space_msg2"),{fill:16753920})),this.creature1=this.content.addChild(new qt.M("creatures/4")),this.creature3=this.content.addChild(new qt.M("creatures/6")),this.creature2=this.content.addChild(new qt.M("creatures/1")),this.okBtn=this.content.addChild(new he("btn-blue",{label:Ko.Localizator.Get("ok")})),this.epochId=0,this.okBtn.on("pointertap",(()=>{Ko.WaitBefore(.1,(()=>{Ko.UI.creatures.Hide(),this.Hide()})),Ko.WaitBefore(.12,(()=>{GameManager.gameView.SelectEpoch(this.epochId,!1,0)}))}))}Show(t){this.epochId=t,this.planet.setImage(`map/planet${Ko.Player.PlanetsSave.CurrentPlanet.planetId||1}`),this.fitLayout(),super.Show()}_fitDecorations(){let t=this._popupRect.clone();t.height=t.width,t.y-=.5*t.height,this.planet.fitRect(t);let e=t.clone();e.height*=.3,e.y=-e.height,e.x=0,this.creature2.anchor.set(.5,1);let i=e.clone().pad(-.5*(e.width-e.height),0);this.creature2.fitRect(i),this.creature1.anchor.set(1,1),this.creature1.rotation=.05*-Math.PI,this.creature1.scale.set(.6*this.creature2.scale.x),this.creature1.position.set(i.left+.1*i.width,i.bottom),this.creature3.anchor.set(0,1),this.creature3.rotation=.05*Math.PI,this.creature3.scale.set(.4*this.creature2.scale.x),this.creature3.position.set(i.right-.1*i.width,i.bottom)}fitLayout(t=Ko.app.viewport){let e=Math.min(.7*t.width,.7*t.height/1.3),i=1.3*e;this.setPopupRect(new wr.Rectangle(.5*(t.width-e),.5*(t.height-i)+.1*t.height,e,i)),super.fitLayout(t),this._fitDecorations();let n=this.getContentSize(),r=n.clone();r.height=.13*n.height,r.width=.55*n.width,r.x=.5*(n.width-r.width),r.y=.05*(n.height-r.height),this.text1.fitLayout(r),r=n.clone(),r.height=.15*n.height,r.width=.95*n.width,r.x=.5*(n.width-r.width),r.y=.24*(n.height-r.height),this.text2.fitLayout(r),r=n.clone(),r.height=.12*n.height,r.width=.95*n.width,r.x=.5*(n.width-r.width),r.y=.45*(n.height-r.height),this.text3.fitLayout(r),r=n.clone(),r.height=.06*n.height,r.width=.8*n.width,r.x=.5*(n.width-r.width),r.y=.63*(n.height-r.height),this.text4.fitLayout(r),r=n.clone(),r.width=.42*n.width,r.height=.15*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.okBtn.fitLayout(r)}}var Tr=i(2494);class xr extends se.z{constructor(){super("btn-blue"),this.interactive=!0,this.cursor="pointer"}Awake(){super.Awake(),this.rewardField=this.addChild(new oe.L({label:"",icon:"ico-diamond",iconAlign:"right",iconSize:.9})),this.picture=this.addChild(new qt.M("bank/pack-gems-handful")),this.btnBack=this.addChild(new se.z("bg-simple")),this.btnBack.alpha=.3,this.btn=this.addChild(new oe.L({label:Ko.Localizator.Get("free"),icon:"play-icon",iconAlign:"right",iconSize:.7}))}Init(){this.rewardField.label=w.Format("+{0}",Ko.GameData.AppStore.hardAdsBonusReward.value)}fitLayout(t){super.fitLayout(t);let e=t.clone();e.width=.7*t.width,e.height=.15*t.height,e.x=.5*(t.width-e.width),e.y=.08*(t.height-e.height),this.rewardField.fitLayout(e);let i=t.clone();i.width=.8*t.width,i.height=.45*t.height,i.x=.5*(t.width-i.width),i.y=.42*(t.height-i.height),this.picture.fitRect(i,!0);let n=t.clone();n.width=.65*t.width,n.height=.15*t.height,n.x=.5*(t.width-n.width),n.y=.85*(t.height-n.height),this.btnBack.fitLayout(n),n.pad(.1*-n.height),this.btn.fitLayout(n)}}se.z;class Er extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake({title:Ko.Localizator.Get("no_money",{fontSize:64,wordWrap:!0,wordWrapWidth:100,align:"center"}),closeButton:!0}),this.onClickAds=this.onClickAds.bind(this),this.onShown=this.onShown.bind(this),this.adsBtn=this.content.addChild(new xr),this.adsBtn.on("pointertap",this.onClickAds),void 0!==this.btnBuy||this._rewardedAdAllowed||(this.stubImg=this.content.addChild(new qt.M("particles/coin"))),this.adsBtn.visible=this._rewardedAdAllowed,this.adsBtn.alpha=this._rewardedAdAllowed?1:0}setAdditionalLayoutAndStyleConfig(){super.setAdditionalLayoutAndStyleConfig(),Zt.T.LANDSCAPE_MODE_NEEDED&&(this.closeBtnOffsetFactorX=.85,this.closeBtnOffsetFactorY=.6,this.closeBtnAdditionalScaleFactor=.85)}Init(){super.Init(),this.adsBtn.Init(),this.buyBtn&&this.buyBtn.Init()}Show(){this.Init(),super.Show()}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.8*t.height/.9),i=.9*e;this.setPopupRect(new Tr.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=.08*n.width,s=[this.adsBtn,this.buyBtn].filter((t=>t&&t.visible)),o=n.clone();o.y+=r+this.header.height,o.height=o.height-2*r-this.header.height,o.width=Math.min(.5*o.width,.9*o.width/s.length);let a=o.width*s.length,h=(n.width-a)/(s.length+1);o.x+=h;for(let t of s)t.fitLayout(o),o.x+=o.width+h;this.stubImg&&(this.stubImg.x=.5*n.width,this.stubImg.width=.35*n.width,this.stubImg.scale.y=this.stubImg.scale.x,this.stubImg.y=1.55*this.header.height+.65*this.stubImg.height)}onClickAds(){Ko.Ads.TriggerRewarded(this.onShown)}onClickBuy(){Ko.Store.BuyProductID("hard2")}onShown(){Ko.GameData.AppStore.hardAdsBonusReward.Take("hard_from_ads")}}class Ar extends re{Awake(){super.Awake({title:Ko.Localizator.Get("offer_onetime"),closeButton:!0}),this.descText=this.content.addChild(new $t.g(Ko.Localizator.Get("one_time_offer_message"))),this.confirmBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("ok")})),this.confirmBtn.on("pointertap",(()=>{Ko.UI.firstCreatureOffer.Hide(),Ko.UI.skipEpochsOffer.Hide(),Ko.UI.spinsOffer.Hide(),this.Hide()}))}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.8*t.height/.9),i=.9*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(!0),r=n.clone();r.width=.9*n.width,r.height=.65*n.height,r.x=.5*(n.width-r.width),r.y=n.y+.05*(n.height-r.height),this.descText.fitLayout(r),r.width=.4*n.width,r.height=.25*n.height,r.x=.5*(n.width-r.width),r.y=n.y+.95*(n.height-r.height),this.confirmBtn.fitLayout(r)}}class Ir extends re{Awake(){super.Awake(),this.prompt=this.content.addChild(new $t.g(Ko.Localizator.Get("quit_message"))),this.yesBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("yes")})),this.noBtn=this.content.addChild(new he("btn-blue",{label:Ko.Localizator.Get("no")})),this.yesBtn.on("pointertap",(()=>{console.log("QUIT!"),this.Hide()})),this.noBtn.on("pointertap",(()=>this.Hide()))}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.5*t.height/.9),i=.9*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.5*n.height,r.width=.9*n.width,r.x=.5*(n.width-r.width),r.y=.2*(n.height-r.height),this.prompt.fitLayout(r),r=n.clone(),r.height=.2*n.height,r.width=.4*n.width,r.x=.11*(n.width-r.width),r.y=.87*(n.height-r.height),this.yesBtn.fitLayout(r),r.x=.89*(n.width-r.width),this.noBtn.fitLayout(r)}}var Cr=i(2494);class Pr extends re{Awake(){super.Awake({closeButton:!1}),this.description=this.content.addChild(new $t.g(Ko.Localizator.Get("reset_confirm"),{wordWrap:!0})),this.yesBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("yes")})),this.noBtn=this.content.addChild(new he("btn-orange",{label:Ko.Localizator.Get("no")})),this.noBtn.on("pointertap",(()=>this.Hide())),this.yesBtn.on("pointertap",(()=>Ko.Reset()))}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.8*t.height/.9),i=.9*e;this.setPopupRect(new Cr.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.7*n.height,r.width=.85*n.width,r.x=.5*(n.width-r.width),r.y=.1*(n.height-r.height),this.description.fitLayout(r),r=n.clone(),r.width=.4*n.width,r.height=.2*n.height,r.x=.1*(n.width-r.width),r.y=.94*(n.height-r.height),this.yesBtn.fitLayout(r),r.x=.9*(n.width-r.width),this.noBtn.fitLayout(r)}}var Rr=i(2494);class Or extends he{constructor(t,...e){super("btn-orange",...e),this._value=!!t,this.updateUI(),this.on("pointertap",(()=>this.value^=!0))}get value(){return!!this._value}set value(t){t=!!t;let e=this._value^t;this._value=t,this.updateUI(),e&&this.emit("changed",t)}updateUI(){this.label=Ko.Localizator.Get(this._value?"on":"off"),this.setImage(this._value?"btn-blue":"btn-orange")}}class kr extends re{resetBtnShowDelay=6e5;Awake(){super.Awake({title:Ko.Localizator.Get("settings"),closeButton:!0}),this.musicText=this.content.addChild(new $t.g(Ko.Localizator.Get("music"))),this.soundText=this.content.addChild(new $t.g(Ko.Localizator.Get("sound"))),this.vibroText=this.content.addChild(new $t.g(Ko.Localizator.Get("vibro"))),this.soundBtn=this.content.addChild(new Or(Ko.LocalSettings.Sound)),this.musicBtn=this.content.addChild(new Or(Ko.LocalSettings.Music)),this.vibroBtn=this.content.addChild(new Or(Ko.LocalSettings.Vibro)),this.idContainer=this.content.addChild(new Mi),this.idField=this.content.addChild(new $t.g),this.resetBtn=this.addChild(new he("btn-orange",{label:Ko.Localizator.Get("reset_button")})),this.HideWithBackButton=!0,this.soundBtn.on("changed",(t=>Ko.LocalSettings.Sound=!!t)),this.musicBtn.on("changed",(t=>Ko.LocalSettings.Music=!!t)),this.vibroBtn.on("changed",(t=>{Ko.LocalSettings.Vibro=!!t,t&&Ko.Vibro.Vibrate(!0)})),this.resetBtn.on("pointertap",(()=>{Ko.UI.reset.Show(),this.Hide()}))}Init(){super.Init(),this.soundBtn.value=Ko.LocalSettings.Sound,this.musicBtn.value=Ko.LocalSettings.Music,this.vibroBtn.value=Ko.LocalSettings.Vibro,Date.now()-Ko.Player.Timers.registrationTime>this.resetBtnShowDelay&&(this.resetBtn.visible=!0);const t=mt();this.vibroBtn.visible=t,this.vibroText.visible=t}hideResetBtn(){this.resetBtn.visible=!1}updateUI(){}fitLayout(t=Ko.app.viewport){let e=Math.min(.8*t.width,.8*t.height/1),i=1*e;this.setPopupRect(new Rr.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.13*n.height,r.width=.42*n.width,r.x=.1*(n.width-r.width),r.y=.28*(n.height-r.height),this.musicText.fitLayout(r),r.x=.9*(n.width-r.width),this.soundText.fitLayout(r),r.width=.55*n.width,r.x=.5*(n.width-r.width),r.y=.72*(n.height-r.height),this.vibroText.fitLayout(r),r=n.clone(),r.height=.15*n.height,r.width=.36*n.width,r.x=this.musicText.x-.5*r.width,r.y=this.musicText.y+.5*this.musicText.height+.04*i,this.musicBtn.fitLayout(r),r.x=this.soundText.x-.5*r.width,this.soundBtn.fitLayout(r),r.x=this.vibroText.x-.5*r.width,r.y=this.vibroText.y+.5*this.vibroText.height+.02*i,this.vibroBtn.fitLayout(r),r=n.clone(),r.height=.2*n.height,r.width=.53*n.width,r.x=.5*(t.width-r.width),r.y=.97*(t.height-r.height),this.resetBtn.fitLayout(r)}Show(){this.Init(),super.Show()}}const Mr="sjdhfn84ew7yfn78134134",Dr="difygc34ne98rtycnerfcefcr",Nr="skip_epochs_offer";class Lr extends qt.M{constructor(){super(),this.planetImg=this.addChild(new ji),this.creatures=[],this.arrows=[this.addChild(new ji("arrow-green")),this.addChild(new ji("arrow-green"))]}_clearCreatures(){for(;this.creatures.length;)this.removeChild(this.creatures.shift())}Show(t,e){this.planetImg.setImage(`map/planet${t.id}`),this._clearCreatures();for(let t=0;t<3;t++)this.creatures.push(this.addChild(new ji(e[t]?`creatures/${e[t]}`:"questionmark-ico")))}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.width=.9*t.width,e.height=.8*t.height,e.x=.5*(t.width-e.width),e.y=1*(t.height-e.height),this.planetImg.fitRect(e),e=t.clone(),e.width=.2*t.height,e.height=.2*t.height,e.x=0*(t.width-e.width),e.y=.12*(t.height-e.height),this.creatures[0].fitRect(e),e.x=.5*(t.width-e.width),e.y=0*(t.height-e.height),this.creatures[1].fitRect(e),e.x=.95*(t.width-e.width),e.y=.12*(t.height-e.height),this.creatures[2].fitRect(e),e=t.clone(),e.width=.17*t.width,e.height=.12*t.height,e.x=.25*(t.width-e.width),e.y=.1*(t.height-e.height),this.arrows[0].fitRect(e),this.arrows[0].rotation=-Math.PI/9,e.x=.75*(t.width-e.width),this.arrows[1].fitRect(e),this.arrows[1].rotation=Math.PI/9}}class Br extends re{get RequestedPlanetId(){return b.g.GetInt(Mr,0)}set RequestedPlanetId(t){b.g.SetInt(Mr,t)}isOfferShownForPlanet(t){return b.g.HasKey(Dr+t)}onOfferShownForPlanet(t){b.g.SetInt(Dr+t,1)}get available(){return Ko.Store.ProductAvailable(Nr,!1)}Awake(){super.Awake({title:Ko.Localizator.Get("offer_skipepochs_title"),closeButton:!0,skin:"magenta"}),this.onProductPurchased=this.onProductPurchased.bind(this),this.epochOffer=this.content.addChild(new Lr),this.description=this.content.addChild(new $t.g(Ko.Localizator.Get("offer_skipepochs_desc"))),this.btnBuy=this.content.addChild(new he("btn-orange",{label:""})),this.btnBuy.on("pointertap",(()=>{Ko.Store.BuyProductID(Nr)})),Ko.Store.on("Purchased",this.onProductPurchased)}Init(){this.available?(super.Init(),this.btnBuy.label=Ko.Store.GetProduct(Nr).GetPrice()):this.SetActive(!1)}fitLayout(t=Ko.app.viewport){let e=Math.min(.85*t.width,.85*t.height/1.6),i=1.6*e;this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.width=.9*n.width,r.height=.55*n.height,r.x=.5*(n.width-r.width),r.y=.3*(n.height-r.height),this.epochOffer.fitLayout(r),r=n.clone(),r.width=.8*n.width,r.height=.05*n.height,r.x=.5*(n.width-r.width),r.y=.75*(n.height-r.height),this.description.fitLayout(r),r=n.clone(),r.width=.46*n.width,r.height=.14*n.height,r.x=.5*(n.width-r.width),r.y=.95*(n.height-r.height),this.btnBuy.fitLayout(r)}onProductPurchased(t){t.id==Nr&&(this.Hide(),Ko.Player.PlanetsSave.CurrentPlanet.epochs.includes(2)&&Ai.GameManager.gameView.SelectEpoch(2,!1,1),Ko.Player.PlanetsSave.CurrentPlanet.CheckTapChallengeStatus())}Show(t=this.RequestedPlanetId||Ko.Player.PlanetsSave.CurrentPlanet.planetId){if(t&&(this.RequestedPlanetId=t),!Ko.Store.IsInitialized)return;if(!this.available)return;if(!Ko.Player.Initialized)return;if(!this.RequestedPlanetId)return;let e=Ko.GameData.Planets.GetPlanet(this.RequestedPlanetId),i=[Ko.GameData.Epochs.GetById(1).creatures[0],Ko.GameData.Epochs.GetById(2).creatures[0]];e&&(this.Init(),this.epochOffer.Show(e,i),super.Show())}Check(){this.available&&1!=Ko.Player.PlanetsSave.currentPlanetId&&1==Ko.Player.PlanetsSave.CurrentPlanet.epochs.length&&(this.isOfferShownForPlanet(Ko.Player.PlanetsSave.currentPlanetId)||(this.onOfferShownForPlanet(Ko.Player.PlanetsSave.currentPlanetId),Ko.UI.ShowOrder((()=>{this.Show(Ko.Player.PlanetsSave.currentPlanetId)}))))}}class Fr extends qt.M{Awake(){super.Awake(),this.rightHand=this.addChild(new qt.M("slots/slotmanHand")),this.rightHand.anchor.set(0,.5),this.rightHand.position.set(150,0),this.leftHand=this.addChild(new qt.M("slots/slotmanHand2")),this.leftHand.anchor.set(1,.5),this.leftHand.position.set(0,50),this.body=this.addChild(new qt.M("slots/slotman")),this._animation=null}animate(){this._animation||(this.leftHand.rotation=.05*-Math.PI,this.rightHand.rotation=.05*Math.PI,this._animation=Jt.gsap.timeline({repeat:-1,repeatDelay:0,yoyo:!0}).to(this.leftHand,{rotation:.05*Math.PI,duration:1},0).to(this.rightHand,{rotation:-.05*Math.PI,duration:1},0))}stop(){this._animation&&(this._animation.kill(),this._animation=null)}}var Ur=i(2494);const Gr="idle",jr="spin",Hr="combo";class zr extends Kt{constructor(){super("slots/slotButton")}_pressed=!1;get pressed(){return!!this._pressed}set pressed(t){this._pressed=!!t,this.setImage(this._pressed?"slots/slotButtonPressed":"slots/slotButton"),this._pressed||this._removeTapHighlight()}Awake(){this.on("pointerdown",(()=>{this.pressed=!0})),this.on("pointerup",(()=>{this.pressed=!1})),this.on("pointerout",(()=>{this.pressed=!1})),this.on("pointerupoutside",(()=>{this.pressed=!1})),this.on("pointercancel",(()=>{this.pressed=!1}))}}class Wr extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new qt.M("slots/slotscreen")),this.label=this.addChild(new oe.L({label:"",icon:"",iconAlign:"right",iconSize:.5,textProps:{fill:0,dropShadow:!1}}))}showReward(t=null,e=0){let i="",n="";switch(t?t.itemType:null){case y.Wn.Creature1:case y.Wn.Creature2:n=Ko.Localizator.Get("creature_reward");break;case y.Wn.MoneyHard:i="ico-diamond",n=t.reward.value;break;case y.Wn.MoneySoft1:case y.Wn.MoneySoft2:i="ico-gold",n=fe.c.FormatMoney(t.reward.value*Ai.GameManager.gameController.MoneySoftSpeed);break;case y.Wn.Spin:i="spin-icon",n=t.reward.valueInt}this.label.icon=i,this.label.text=n,this.label.SetActive(i||n),this.fitLayout(),this.label.Active&&e&&Ko.WaitBefore(e,(()=>this.showReward(null)))}fitLayout(){let{width:t,height:e}=this.back.texture,i=new Ur.Rectangle(.5*-t,.5*-e,t,e);this.back.fitRect(i),this.label.fitLayout(i.clone().pad(.2*-t,.2*-e))}}class Vr extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new qt.M("slots/slotscaleRed")),this.fill=this.addChild(new qt.M("slots/slotscaleGreen")),this.fill.anchor.set(0,0),this.label=this.addChild(new oe.L({label:"0/0",textProps:{fitTextTemplate:"00/00"}})),this.fill.mask=this.fill.addChild(new Ur.Graphics).beginFill(16777215,1).drawRect(0,0,this.fill.texture.width,this.fill.texture.height)}fitLayout(){this.Update();let{width:t,height:e}=this.back.texture,i=new Ur.Rectangle(.5*-t,.5*-e,t,e);this.back.fitRect(i),this.fill.fitRect(i),this.label.fitLayout(i)}Update(){let t=Ko.Player.SpinsNumber,e=Ko.Player.MaxSpinsNumber,i=Math.max(0,Math.min(1,t/e));this.label.text=w.Format("{0}/{1}",t,e),this.fill.mask.scale.x=i}}class Xr extends qt.M{Awake(){super.Awake(),this.picture=this.addChild(new qt.M),this.blur=this.addChild(new qt.M),this.blur.alpha=.5,this.itemType=void 0,this._rect=new Ur.Rectangle(0,0,1,1),this.setSlotItem(null)}setImage(t){this.picture.setImage(t),this.blur.setImage(t)}setSlotItem(t){if(this.itemType===t)return;this.itemType=t;let e=Ko.GameData.Slots.GetComboRewardForItem(t);switch(t){case y.Wn.Creature1:case y.Wn.Creature2:this.setImage(`creatures/${Ko.Player.PlanetsSave.CurrentPlanet.GetCollectionCreatureWithOffset(e.reward.valueInt)}`);break;case y.Wn.MoneyHard:this.setImage("slots/item-gems");break;case y.Wn.MoneySoft1:this.setImage("slots/item-coin");break;case y.Wn.MoneySoft2:this.setImage("slots/item-bag");break;case y.Wn.Spin:this.setImage("slots/item-spin");break;default:return this.setSlotItem(~~[...Ko.GameData.Slots.helpComboRewards.keys()][~~v.o.Range(0,Ko.GameData.Slots.helpComboRewards.size-1)])}this.fitLayout()}setSpeedBlur(t){t=Math.max(-1,Math.min(1,t)),this.blur.pivot.y=.2*this._rect.height*(t*t)}fitLayout(t=this._rect){this._rect=t.clone(),this.position.copyFrom(this._rect),(t=this._rect.clone()).x=t.y=0,this.picture.fitRect(t),this.blur.fitRect(t)}}class Yr extends qt.M{constructor(t){super(),this.index=t,this.spinning=null,this.teasering=!1}get traveledDistance(){return this._traveledDistance}set traveledDistance(t){let e=t-this._traveledDistance;this._traveledDistance=t,this._renderTraveledDistance(),this.spinning&&this.setSpeedBlur(10*e)}Awake(){super.Awake(),this._rect=new Ur.Rectangle(0,0,1,1),this._traveledDistance=0,this.sequence=[],this.items=[];for(let t=0;t<9;t++){let t=this.addChild(new Xr);this.items.push(t)}this.reset()}reset(){this.teasering=!1,this.spinning&&(this.spinning.kill(),this.spinning=null),this.sequence.splice(0),this._generateSequence()}_renderTraveledDistance(){let t=Math.round(this._traveledDistance),e=Math.floor(this.items.length/2),i=t-e;i<0&&(i+=this.sequence.length);let n=this.sequence.slice(i,i+this.items.length);n.length<this.items.length&&n.push(...this.sequence.slice(0,this.items.length-n.length));let r=this._rect.width,s=.1*r,o=new Ur.Rectangle(0,-r*(.5*this.items.length)+r,r,r),a=Math.round(this._traveledDistance)-this._traveledDistance,h=.05*(1-this.index),l=o.height*this.items.length,c=o.y+.5*l-.5*r;for(let t=0;t<this.items.length;t++){let i=o.clone().pad(-s);this.items[t].setSlotItem(n[n.length-t-1]),this.items[t].fitLayout(i),this.items[t].pivot.y=a*r;let l=Math.abs(c-o.y+this.items[t].pivot.y)/r;this.items[t].pivot.x=l*l*r*-h;let u=(e-l)/e;this.items[t].alpha=u,u=.5+.5*u,this.items[t].picture.scale.x*=u,this.items[t].picture.scale.y*=u,this.items[t].blur.scale.x*=u,this.items[t].blur.scale.y*=u,o.y+=r}}_generateSequence(t=null,e=null){for(this.sequence=this.sequence||[];this.sequence.length<30;){let t=~~[...Ko.GameData.Slots.helpComboRewards.keys()][~~v.o.Range(0,Ko.GameData.Slots.helpComboRewards.size-1)];this.sequence.push(t)}this._truncateTraveledDistance(),null!==t&&(this.sequence[26]=t),null!==e&&(this.sequence[25]=e),this._renderTraveledDistance()}_truncateTraveledDistance(){if(this._traveledDistance=Math.round(this._traveledDistance),0!==this._traveledDistance){for(;this._traveledDistance<0;)this._traveledDistance+=this.sequence.length;for(;this._traveledDistance>this.sequence.length;)this._traveledDistance-=this.sequence.length;for(;this._traveledDistance>0;)this.sequence.push(this.sequence.shift()),this._traveledDistance--}}setSpeedBlur(t){for(let e of this.items)e.setSpeedBlur(t)}Spin(t,e=null){this._generateSequence(t,e);let i=2+1*this.index,n=null===e?.1*Math.random():.3+.4*Math.random(),r=this.sequence.length-4,s=this.traveledDistance;this.spinning=Jt.gsap.timeline({delay:.3*this.index}).to(this,{traveledDistance:r-n,duration:i,ease:"circ.out"}).to(this,{traveledDistance:r,duration:.5,ease:"back.out"}).eventCallback("onUpdate",(()=>{let t=Math.ceil(this.traveledDistance);s!==t&&(s=t,Ko.Audio.Play("SpinTic"))})).eventCallback("onComplete",(()=>{this.spinning=null,this.setSpeedBlur(0),Ko.Audio.Play("SpinStop"),this.emit("Finished")}))}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(t),(t=t.clone()).x=t.y=0,this._renderTraveledDistance()}}class qr extends qt.M{Awake(){super.Awake(),this.lanes=[];for(let t=0;t<3;t++)this.lanes.push(this.addChild(new Yr(t)));this.lanes[this.lanes.length-1].on("Finished",(()=>{this.emit("Finished")})),this.mask=this.addChild(new qt.M("slots/mask"))}fitLayout(t){if(this.position.copyFrom(t),(t=t.clone()).x=t.y=0,this.mask){let e=t.clone();this.mask.fitRect(e)}t.width*=1/this.lanes.length,t.y+=100;for(let e of this.lanes)e.fitLayout(t),t.x+=t.width}reset(){for(let t of this.lanes)t.reset()}Spin(t,e=null){for(let i=0;i<t.length;i++)this.lanes[i].Spin(t[i],i===this.lanes.length-1?e:null);Ko.Audio.Play("SpinStart")}}class $r extends qt.M{Awake(){super.Awake(),this.slotman=this.addChild(new Fr),this.body=this.addChild(new qt.M("slots/slotmain")),this.lampLeft=this.body.addChild(new qt.M("slots/slotLampLeft")),this.lampRight=this.body.addChild(new qt.M("slots/slotLampRight")),this.eyeLeft=this.body.addChild(new qt.M("slots/slotEyeLeft")),this.eyeRight=this.body.addChild(new qt.M("slots/slotEyeRight")),this.slotScreen=this.body.addChild(new Wr),this.spinsScale=this.body.addChild(new Vr),this.timerField=this.body.addChild(new oe.L({label:"0/0",textProps:{fill:0,dropShadow:!1}})),this.lanes=this.body.addChild(new qr),this.lanes.on("Finished",(()=>this.emit("Finished"))),this.spinBtn=this.body.addChild(new zr),this.spinBtn.anchor.set(.5,1),this.restoreSpinsPrice=this.addChild(new oe.L({label:"1",icon:"ico-diamond",iconAlign:"right",iconSize:.8})),this._animations={},this._createAnimations()}_createAnimations(){let t=[this.lampLeft,this.lampRight,this.eyeLeft,this.eyeRight,this.slotScreen.back];this._animations[Gr]=Jt.gsap.timeline({repeat:-1,repeatDelay:1}).set(t,{alpha:0},0).to([this.lampLeft,this.lampRight],{alpha:1,duration:.1}).to([this.lampLeft,this.lampRight],{alpha:0,duration:.3}).pause(0),this._animations[jr]=Jt.gsap.timeline({repeat:-1,repeatDelay:0}).set(t,{alpha:0},0).to(this.lampRight,{alpha:1,duration:.1}).to(this.lampRight,{alpha:0,duration:.1}).to(this.lampLeft,{alpha:1,duration:.1}).to(this.lampLeft,{alpha:0,duration:.1}).to(this.eyeLeft,{alpha:1,duration:.1}).to(this.eyeLeft,{alpha:0,duration:.1}).to(this.eyeRight,{alpha:1,duration:.1}).to(this.eyeRight,{alpha:0,duration:.1}).pause(0),this._animations[Hr]=Jt.gsap.timeline({repeat:2,repeatDelay:0}).set(t,{alpha:0},0).to(t,{alpha:1,duration:.1}).to(t,{alpha:0,duration:.2}).eventCallback("onComplete",(()=>this.runAnimation(Gr))).pause(0)}runAnimation(t){this.stopAnimations(),this._animations[t]?this._animations[t].play():console.log("UNKNOWN SLOT ANIMATION",t)}stopAnimations(){for(let t in this._animations)this._animations[t].pause(0)}fitLayout(t){(t=t.clone().pad(.15*-t.width,.15*-t.height)).y+=.05*t.height,this.position.set(t.x+.5*t.width,t.y+.5*t.height),this.body.fitRect(t);let e=this.body.getLocalBounds();e.pad(.251*-e.width,.311*-e.height),e.x-=.014*e.width,e.y-=.145*e.height,this.lanes.fitLayout(e),this.slotman.scale.copyFrom(this.body.scale),this.slotman.position.set(-50,-860),this.slotman.fitLayout(),this.eyeLeft.scale.set(4.5),this.eyeLeft.position.set(-190,-760),this.eyeRight.scale.set(4.5),this.eyeRight.position.set(150,-760),this.lampLeft.scale.set(4.5),this.lampLeft.position.set(-395,380),this.lampRight.scale.set(4.5),this.lampRight.position.set(395,380),this.slotScreen.fitLayout(),this.slotScreen.position.set(-20,-550),this.spinsScale.fitLayout(),this.spinsScale.position.set(-8,328);let i=new Ur.Rectangle(-200,400,400,60);this.timerField.fitLayout(i),this.spinBtn.position.set(0,900);let n=new Ur.Rectangle(-200,750,400,100);this.restoreSpinsPrice.fitLayout(n)}Show(){this.lanes.reset(),this.slotman.animate(),this.restoreSpinsPrice.text=Ko.GameData.Slots.purchaseSpinsPrice.priceValue.toString(),this.runAnimation(Gr),this.slotScreen.showReward(null),this.Update(),super.Show()}Hide(){this.slotman.stop(),this.stopAnimations(),super.Hide()}Update(){this.spinsScale.Update(),this.restoreSpinsPrice.SetActive(0==Ko.Player.SpinsNumber),this.updateTimer()}updateTimer(){if(this.timerField.SetActive(Ko.Time.Initialized&&Ko.Player.SpinsNumber<Ko.Player.MaxSpinsNumber),!this.timerField.Active)return;let t=Ko.Player.Timers.TicksFromLastSpinsRestore/1e3,e=Ko.GameData.Config.spinsRestorePeriod-t;this.timerField.SetActive(!0),this.timerField.text=Ko.Localizator.Get("slot_spins",Ko.GameData.Slots.restoreSpinsNumberByTime,fe.c.FormatSecondsToTime(e))}showResult(t,e=!1,i=0){this.slotScreen.showReward(t,i),t&&e?this.runAnimation(Hr):this.runAnimation(Gr)}Spin(t,e=!1){"number"==typeof t&&(t=[t,t,t]);let i=e?t[0]:null;this.runAnimation(jr),this.lanes.Spin(t,i),this.emit("Started")}}class Kr extends Kt{Awake(){super.Awake(),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.back=this.addChild(new qt.M("offers/vip-badge-bg")),this.icon=this.addChild(new qt.M("spin-icon")),this.timerField=this.addChild(new oe.L({label:"",backgroundAlpha:.75,textProps:{fitTextTemplate:"00h 00m 00s"}})),this.SetActive(!1),this.tryToInitialize(),Ko.Player.on("Changed",this.onPlayerChanged),this.on("pointertap",(()=>Ko.UI.spinsOffer.Show())),this._initTapHighlight(this.back)}onPlayerChanged(){this.tryToInitialize()}tryToInitialize(){Ko.Store.IsInitialized&&Ko.Time.Initialized&&Ko.UI.spinsOffer.available&&(Ko.UI.spinsOffer.Check()?this.Init():this.SetActive(!1))}Init(){if(!Ko.Store.IsInitialized)return;if(!Ko.Time.Initialized)return;if(!Ko.UI.spinsOffer.available)return;Ko.Player.Timers.spinsOfferTime+60*Ko.GameData.Gameplay.spinsOfferTimeMinutes*1e3>Ko.Time.serverTime&&(this.updateTime(),this.SetActive(!0))}fitLayout(t){t=t.clone(),this.position.copyFrom(t),t.x=t.y=0,this.back.fitRect(t),this.icon.fitRect(t.clone().pad(.1*t.width));let e=t.clone().pad(.05*t.width,.35*-t.height);e.y=t.height-e.height,this.timerField.fitLayout(e)}Update(){this._lastUpdateTime=(this._lastUpdateTime||0)+St.g.deltaTime,this._lastUpdateTime>=1&&(this._lastUpdateTime=0,this.updateTime())}updateTime(){let t=Ko.Player.Timers.spinsOfferTime+60*Ko.GameData.Gameplay.spinsOfferTimeMinutes*1e3-Ko.Time.serverTime;this.timerField.text=NUtils.FormatSecondsToTime(~~(t/1e3)),t<=0&&this.SetActive(!1)}}var Jr=i(2494);const Zr="eruicty8n574t6yvn34yxt23";class Qr extends qt.M{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;_showTipText=Zt.T.SHOW_SLOTS_TIP_TEXT;get isPlayerPlayedSlots(){return b.g.HasKey(Zr)}set isPlayerPlayedSlots(t){b.g.SetInt(Zr,~~!!t)}get spinBtnIn(){return this.machine.spinBtn.pressed}set spinBtnIn(t){this.machine.spinBtn.pressed=!!t}Awake(){this._showTipText=Zt.T.SHOW_SLOTS_TIP_TEXT,super.Awake(),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.onStarted=this.onStarted.bind(this),this.onFinished=this.onFinished.bind(this),this.back=this.addChild(new qt.M("slots/slotBG")),this.back.interactive=!0,this.shine=this.back.addChild(new qt.M("slots/shine")),this.machine=this.back.addChild(new $r),this.tip=this.addChild(new $t.g(Ko.Localizator.Get("autospin_tip",{fill:0,dropShadow:!1}))),this.adsBtn=this.addChild(new ce("btn-green",{label:Ko.Localizator.Get("ads_spins_number",Ko.GameData.Slots.restoreSpinsNumberByAds),icon:"video"})),this.closeBtn=this.addChild(new Kt("button-close")),this.offerBtn=this.addChild(new Kr),this.spinAttention=this.addChild(new Mi),this.vfxLayer=this.addChild(new Jr.Container),this.isCombo=!1,this.comboItem=null,this.noComboItems=[],this.finished=!1,this.finishTime=0,this.finishTimeout=2,this._shineAnimation=null,this.machine.on("Started",this.onStarted),this.machine.on("Finished",this.onFinished),this.closeBtn.on("pointertap",(()=>this.onClickClose())),this._rewardedAdAllowed&&this.adsBtn.on("pointertap",(()=>{Ko.Ads.TriggerRewarded((()=>{Ko.Player.AddMoney(y.zc.Spins,Ko.GameData.Slots.restoreSpinsNumberByAds),Ko.Player.Timers.RestoreSpinsByAdsDay=Ko.Time.DayUniqId}))})),this.adsBtn.visible=this._rewardedAdAllowed,this.adsBtn.alpha=this._rewardedAdAllowed?1:0,this.tip.visible=this._showTipText,this.tip.alpha=this._showTipText?1:0,Ko.Player.on("Changed",this.onPlayerChanged),this.SetActive(!1)}onClickClose(){this.Hide(),this.finished&&St.g.time-this.finishTime>this.finishTimeout&&this.Hide()}animateShine(){this._shineAnimation||(this._shineAnimation=Jt.gsap.timeline({repeat:-1,repeatDelay:0,yoyo:!0}).set(this.shine,{alpha:0}).to(this.shine,{alpha:1,duration:2})),this._shineAnimation.play(0)}stopShine(){this._shineAnimation&&this._shineAnimation.pause(0)}Show(){Ko.Player.PlanetsSave.TutorSave.spins=!0,this.finished=!0,this.onPlayerChanged(),this.adsBtn.label=Ko.Localizator.Get("ads_spins_number",Ko.GameData.Slots.restoreSpinsNumberByAds),this.spinAttention.SetActive(!this.isPlayerPlayedSlots),this.fitLayout(),this.machine.Show(),this.animateShine(),super.Show(),this._checkTutorial()}Hide(){this.Active&&Ko.Ads.TriggerInterstitial(),this.machine.Hide(),this.stopShine(),super.Hide()}fitLayout(t=Ko.app.viewport){let e=t.clone(),i=e.height/this.back.texture.height;e.width=this.back.texture.width*i,e.x=.5*(t.width-e.width),e.y=.5*(t.height-e.height),this.back.fitRect(t,!0);let n=this.back.getLocalBounds();this.shine.fitRect(n),this.machine.fitLayout(n),this.closeBtn.fitRect(new Jr.Rectangle(.85*t.width,.2*t.width,.1*t.width,.1*t.width)),this.offerBtn.fitLayout(new Jr.Rectangle(.85*t.width,.35*t.width,.1*t.width,.1*t.width)),this.adsBtn.fitLayout(new Jr.Rectangle(.84*t.width,t.height-.11*t.width,.15*t.width,.1*t.width)),this.tip.fitLayout(new Jr.Rectangle(.35*t.width,t.height-.15*t.width,.3*t.width,.05*t.width)),this._checkTutorial()}_checkTutorial(){7===Ko.Player.PlanetsSave.TutorSave.step&&this.Active&&Ko.UI.tutorial.ShowObjectHand(this.machine.spinBtn)}onStarted(){this.closeBtn.interactive=!1,this.closeBtn.alpha=.5}onFinished(){this.finishTime=St.g.time,this.finished=!0;let t=this.isCombo?Ko.GameData.Slots.GetComboRewardForItem(this.comboItem):Ko.GameData.Slots.GetNoComboRewardForItems(this.noComboItems);this.machine.showResult(t,this.isCombo,4),t?(this.finishTimeout=2,t.reward.Take(this.isCombo?"slots_combo":"slots_nocombo"),this.showRewardVFX(t)):this.finishTimeout=0,this.closeBtn.interactive=!0,this.closeBtn.alpha=1}showRewardVFX(t){switch(t.itemType){case y.Wn.MoneySoft1:return Ko.VFX.slotCoins(this.isCombo?50:20);case y.Wn.MoneySoft2:return Ko.VFX.slotCoins(this.isCombo?100:40);case y.Wn.Creature1:case y.Wn.Creature2:let e=Ko.Player.PlanetsSave.CurrentPlanet.GetCollectionCreatureWithOffset(t.reward.valueInt);return Ko.VFX.slotCreature(e);case y.Wn.MoneyHard:return Ko.VFX.slotDiamonds();case y.Wn.Spin:return Ko.VFX.slotSpins(this.machine)}}onPlayerChanged(){this.adsBtn.SetActive(this._rewardedAdAllowed&&0==Ko.Player.SpinsNumber)}_checkEnoughMoneyForSpin(){return!!Ko.Player.EnoughMoney(y.zc.Spins,1)||!!Ko.Player.EnoughMoney(Ko.GameData.Slots.purchaseSpinsPrice)}Update(){this.offerBtn.Update(),this.machine.Update(),this.spinBtnIn&&this.finished&&(this._checkEnoughMoneyForSpin()?St.g.time-this.finishTime>.75&&this.spin():(this.spinBtnIn=!1,Ko.UI.notEnoughHardMoney.Show()))}spin(){if(Ko.Player.PlanetsSave.TutorSave.spin=!0,Ko.UI.tutorial.HideObjectHand(this.machine.spinBtn),!Ko.Player.SpendMoney(y.zc.Spins,1,y.DE.slots,y.JD.slots,"spin")&&!Ko.Player.SpendMoney(Ko.GameData.Slots.purchaseSpinsPrice,y.DE.empty,y.JD.empty,"slots"))return Ko.UI.notEnoughHardMoney.Show();Ko.Player.PlanetsSave.TutorSave.spin=!0,Ko.Player.SpinsUsed++,this.isPlayerPlayedSlots=!0,this.spinAttention.SetActive(!1),this.finished=!1;let t=Ko.GameData.Slots.GetMainRandom(Ko.Player.SpinsNumber);if(this.isCombo=!!t.HasCombo,this.comboItem=this.isCombo?t.itemType:null,this.noComboItems=[0,0,0],!this.isCombo)if(t.Teasering)this.noComboItems[0]=this.noComboItems[1]=Ko.GameData.Slots.GetTeaseringItem(Ko.Player.SpinsNumber).itemType,this.noComboItems[2]=Ko.GameData.Slots.GetNoComboRandomExcept(Ko.Player.SpinsNumber,this.noComboItems[0]).itemType;else{for(let t=0;t<this.noComboItems.length;t++)this.noComboItems[t]=Ko.GameData.Slots.GetNoComboRandom(Ko.Player.SpinsNumber).itemType;if(this.noComboItems[0]==this.noComboItems[1]&&this.noComboItems[0]==this.noComboItems[2]){let t=[y.Wn.Creature1,y.Wn.Creature2,y.Wn.MoneyHard,y.Wn.Spin].filter((t=>t!==this.noComboItems[0]));this.noComboItems[2]=t[v.o.Range(0,t.length)]}}let e=!this.isCombo&&t.Teasering,i=this.isCombo?new Array(3).fill(this.comboItem):this.noComboItems;this.machine.Spin(i,e)}}class ts extends re{get available(){return Ko.Store.ProductAvailable("spins_offer_1")||Ko.Store.ProductAvailable("spins_offer_2")}Awake(){super.Awake({title:Ko.Localizator.Get("offer_spins_title"),closeButton:!0,skin:"magenta"}),this.onProductPurchased=this.onProductPurchased.bind(this),this.timerField=this.content.addChild(new oe.L({label:"",icon:"ico-clock",iconAlign:"absolute-left",iconSize:1.2,backgroundColor:0,backgroundAlpha:.3,textProps:{fitTextTemplate:"00h 00m 00s"}})),this.spinsPicture=this.content.addChild(new qt.M("spin-icon")),this.description=this.content.addChild(new oe.L({label:Ko.Localizator.Get("offer_spins_fullrestore"),icon:"spin-icon",iconSize:1})),this.spinsNumberFld=this.content.addChild(new $t.g),this.offerBtn=this.content.addChild(new he("btn-orange")),this.endDateTime=0,this.product=null}Init(){super.Init(),Ko.Store.on("Purchased",this.onProductPurchased),this.offerBtn.on("pointertap",(()=>{Ko.Store.BuyProductID(this.product.id)}))}onProductPurchased(t){"spins_offer_1"!=t.id&&"spins_offer_2"!=t.id||this.Hide()}Check(){if(!Ko.Store.IsInitialized)return!1;if(!this.available)return!1;if(!Ko.Time.Initialized)return!1;if(!Ko.Player.Initialized)return!1;let t=!1,e=!1;if(0!=Ko.Player.Timers.spinsOfferTime){let i=Ko.Player.Timers.spinsOfferTime;this.endDateTime=i+60*Ko.GameData.Gameplay.spinsOfferTimeMinutes*1e3,this.endDateTime<Ko.Time.serverTime?Ko.Player.SpinsOfferType==SpinOfferType.FirstLevel1?(Ko.Player.SpinsOfferType=SpinOfferType.FirstLevel2,Ko.Player.SpinsUsed=0):e=!0:t=!0}if(!t&&(0!=Ko.Player.SpinsNumber||Ko.UI.slots.comboItem===y.Wn.Spin||e))return!1;if(Ko.Player.SpinsUsed>=Ko.GameData.Gameplay.spinsOfferThreshold3&&Ko.Player.MaxSpinsBonus==Ko.GameData.Gameplay.spinsOfferBonus1&&Ko.Player.SpinsOfferType==SpinOfferType.Second)this.ShowSecondOffer();else if(Ko.Player.SpinsUsed>=Ko.GameData.Gameplay.spinsOfferThreshold1&&0==Ko.Player.MaxSpinsBonus&&Ko.Player.SpinsOfferType==SpinOfferType.FirstLevel1)this.ShowFirstOffer();else{if(!(Ko.Player.SpinsUsed>=Ko.GameData.Gameplay.spinsOfferThreshold2&&0==Ko.Player.MaxSpinsBonus&&Ko.Player.SpinsOfferType==SpinOfferType.FirstLevel2))return!1;this.ShowFirstOffer()}return!0}ShowFirstOffer(){0==Ko.Player.Timers.spinsOfferTime&&(Ko.Player.Timers.spinsOfferTime=Ko.Time.serverTime,Ko.WaitBefore(2,(()=>{this.Show()})))}ShowSecondOffer(){0==Ko.Player.Timers.spinsOfferTime&&(Ko.Player.Timers.spinsOfferTime=Ko.Time.serverTime,Ko.WaitBefore(2,(()=>{this.Show()})))}_updateProductData(){Ko.Player.SpinsOfferType==SpinOfferType.Second?(this.product=Ko.Store.GetProduct("spins_offer_2"),this.spinsNumberFld.text=Ko.Localizator.Get("offer_spins_restorenumber",Ko.GameData.Gameplay.spinsOfferBonus2)):(this.product=Ko.Store.GetProduct("spins_offer_1"),this.spinsNumberFld.text=Ko.Localizator.Get("offer_spins_restorenumber",Ko.GameData.Gameplay.spinsOfferBonus1)),this.offerBtn.label=this.product.GetPrice()}Show(){Ko.Store.IsInitialized&&this.available&&Ko.Time.Initialized&&Ko.Player.Initialized&&0!=Ko.Player.Timers.spinsOfferTime&&(this.endDateTime=Ko.Player.Timers.spinsOfferTime+60*Ko.GameData.Gameplay.spinsOfferTimeMinutes*1e3,this.endDateTime>Ko.Time.serverTime&&(this._updateProductData(),this.Update(),super.Show()))}fitLayout(t=Ko.app.viewport){this.setPopupSize(.8*t.width,.6*t.height),super.fitLayout(t);let e=this.getContentSize(),i=e.clone().pad(.3*-e.width,.475*-e.height);i.y=.2*e.height,this.timerField.fitLayout(i);let n=e.clone().pad(0,.3*-e.height);n.y=.2*e.height,this.spinsPicture.fitRect(n);let r=e.clone().pad(.05*-e.width,.45*-e.height);r.y=.6*e.height,this.description.fitLayout(r);let s=e.clone().pad(.05*-e.width,.45*-e.height);s.y=.7*e.height,this.spinsNumberFld.fitLayout(s);let o=e.clone().pad(.3*-e.width,.45*-e.height);o.y=e.bottom-.15*e.height,this.offerBtn.fitLayout(o)}Update(){this.updateTime()}updateTime(){let t=this.endDateTime-Ko.Time.serverTime;this.timerField.text=NUtils.FormatSecondsToTime(~~(t/1e3)),t<=0&&this.Hide()}}var es=i(2494);const is="starter_pack";class ns extends qt.M{Awake(){super.Awake(),this.back=this.addChild(new qt.M("ribbon")),this.back.anchor.set(1,0),this.label=this.addChild(new oe.L({label:"+60",icon:"ico-diamond",iconAlign:"right"}))}fitLayout(t){t=t.clone(),this.position.copyFrom(t),t.x=t.y=0;let e=t.clone();this.back.scale.set(e.height/this.back.texture.height),this.back.position.set(e.right+.1*this.back.width,0),(t=new es.Rectangle(this.back.x-this.back.width,0,this.back.width,this.back.height)).pad(.15*-t.width,.2*-t.height),t.x=e.right-t.width,t.y-=.05*this.back.height,this.label.fitLayout(t)}}class rs extends re{Awake(){super.Awake({title:Core.Localizator.Get("starter_pack"),closeButton:!0,skin:"magenta"}),this.OnProductPurchased=this.OnProductPurchased.bind(this),this.timerField=this.content.addChild(new oe.L({label:"",icon:"ico-clock",iconAlign:"absolute-left",iconSize:1.4,backgroundColor:0,backgroundAlpha:.3,textProps:{fitTextTemplate:"00h 00m 00s"}})),this.decorChest=this.content.addChild(new qt.M("bank/pack-gems-case")),this.decorNoAds=this.content.addChild(new qt.M("offers/noads")),this.description=this.content.addChild(new $t.g(Core.Localizator.Get("no_ads_description"))),this.btnBuy=this.content.addChild(new he("btn-orange")),this.badge=this.content.addChild(new ns),this.endDateTime=0,this.lastUpdateTime=0,Core.Store.on("Purchased",this.OnProductPurchased),this.btnBuy.on("pointertap",(()=>{Core.Store.BuyProductID(is)}))}get available(){return Core.Store.ProductAvailable(is,!0)}Init(){if(!this.available)return;let t=Core.Store.GetProduct(is);this.btnBuy.label=t.GetPrice();let e=t.rewards.find((t=>t.type===y.E.MoneyHard));e=e&&e.value||0,this.badge.SetActive(e>0),this.badge.label.text="+"+e}OnProductPurchased(t){t.id===is&&this.Hide()}fitLayout(t=Core.app.viewport){let e=.9*t.width,i=1.5*e;i>.9*t.height&&(i=.9*t.height,e*=i/(1.5*e)),this.setPopupSize(e,i),super.fitLayout(t);let n=this.getContentSize(),r=n.clone().pad(.3*-n.width);r.y=.15*n.height,r.height=.05*n.width,this.timerField.fitLayout(r);let s=n.clone().pad(.1*-n.width,.25*-n.height);s.y=.2*n.height,this.decorChest.fitRect(s),s.pad(0,.3*-s.height),this.decorNoAds.fitRect(s);let o=n.clone().pad(.1*-n.width,0);o.y=.65*n.height,o.height=.1*n.height,this.description.fitLayout(o);let a=n.clone().pad(.3*-n.width,0);a.height=a.width/2,a.y=.95*n.height-a.height,this.btnBuy.fitLayout(a);let h=a.clone();h.width=.4*n.width,h.height*=.75,h.x=n.right-h.width,h.y=a.top-.9*h.height,this.badge.fitLayout(h)}Show(){if(!Core.Store.IsInitialized)return;if(!Core.Time.Initialized)return;if(!Core.Player.Initialized)return;if(0==Core.Player.Timers.starterPackTime)return;this.Init();let t=new Date(Core.Player.Timers.starterPackTime).getTime();this.endDateTime=t+864e5,this.endDateTime>Core.Time.serverTime&&1!=Core.Player.StarterPack&&(super.Show(),this.SendAnalyticEvent("show"),this.updateTime())}SendAnalyticEvent(){Core.Analytics.SendOfferEvent("starter_pack")}Update(){this.lastUpdateTime+=St.g.deltaTime,this.lastUpdateTime>1&&(this.updateTime(),this.lastUpdateTime=0),1==Core.Player.StarterPack&&this.Hide()}updateTime(){let t=(this.endDateTime-Core.Time.serverTime)/1e3;this.timerField.text=fe.c.FormatSecondsToTime(t),t<=0&&this.SetActive(!1)}}var ss=i(2494);class os extends qt.M{constructor(){super(),this._progress=0,this._time=0,this._padding=2,this.anchor.set(0),this.back=this.addChild(new qt.M("particles/rect")),this.back.anchor.set(0),this.back.tint=0,this.progressBar=this.addChild(new qt.M("particles/rect")),this.progressBar.anchor.set(0),this.progressBar.tint=16776960,this.timeBar=this.addChild(new qt.M("particles/rect")),this.timeBar.anchor.set(0),this.timeBar.tint=16711680,this._updateProgress()}get progress(){return this._progress}set progress(t){this._progress=Math.max(0,Math.min(1,parseFloat(t)||0)),this._updateProgress()}get time(){return this._time}set time(t){this._time=Math.max(0,Math.min(1,parseFloat(t)||0)),this._updateProgress()}_updateProgress(){let t=this.back.width-2*this._padding;this.progressBar.width=t*this._progress,this.timeBar.width=t*this._time}fitLayout(t){this._padding=.1*t.height,this.position.copyFrom(t),this.back.width=t.width,this.back.height=t.height;let e=t.height-2*this._padding;this.progressBar.position.set(this._padding,this._padding),this.progressBar.height=.7*e,this.timeBar.position.set(this._padding,this._padding+this.progressBar.height),this.timeBar.height=e-this.progressBar.height,this._updateProgress()}}class as extends Yt.e{Awake(){super.Awake(),this._scoreField=this.addChild(new $t.g("")),this._timerField=this.addChild(new $t.g("",{fitTextTemplate:"00h 00m 00s"})),this._progressBar=this.addChild(new os),this._tapChallengeMode=null}Init(){super.Init(),this.SetActive(!1),this.UpdateScore=this.UpdateScore.bind(this),this.HandleChallengeFinish=this.HandleChallengeFinish.bind(this),this.HandleChallengeActivation=this.HandleChallengeActivation.bind(this),this.HandleChallengeStart=this.HandleChallengeStart.bind(this)}fitLayout(t=Ko.app.viewport){let e=new ss.Rectangle(.1*t.width,.1*t.height,.8*t.width,.05*t.height);this._progressBar.fitLayout(e),this._scoreField.anchor.set(.5,1),this._scoreField.position.set(.5*t.width,e.top),this._timerField.anchor.set(.5,0),this._timerField.position.set(.5*t.width,e.bottom)}UpdateScore(t){this._scoreField.text=fe.c.FormatMoney(t),this._progressBar.progress=this._tapChallengeMode.GetScoreProgress()}Show(t){super.Show(),Ko.WaitBefore(.5,(()=>Ko.VFX.hideEffect("merge-progress"))),this._tapChallengeMode||(this._tapChallengeMode=Ai.GameManager.TapChallengeMode,this._tapChallengeMode.on("ScoreUpdated",this.UpdateScore),this._tapChallengeMode.on("Finished",this.HandleChallengeFinish),this._tapChallengeMode.on("Activated",this.HandleChallengeActivation),this._tapChallengeMode.on("Started",this.HandleChallengeStart)),this._tapChallengeMode.ActivateChallenge(),t?(this._tapChallengeMode.StartChallenge(t,!0),console.log("RESTART",t,this._tapChallengeMode)):(this._tapChallengeMode.StartChallenge(Ko.Player.TapChallengeSave),this._scoreField.text=fe.c.FormatMoney(this._tapChallengeMode.CurrentScore),this._timerField.SetActive(!0),this._progressBar.SetActive(!0),Ko.VFX.tapChallengeStartBanner()),this.fitLayout()}Hide(){super.Hide()}HandleChallengeStart(){Ko.Player.TapChallengeSave.ChallengeStart()}HandleChallengeActivation(t){}HandleChallengeFinish(t){this.Hide(),this._tapChallengeMode.DisableChallenge(),console.log("TAP CHALLENGE FINISHED",t),t.IsWin?(t.IsReplay||Ko.Player.TapChallengeSave.ChallengeWin(),Ko.UI.tapChallengeVictory.Show(Ko.GameData.TapChallenge.reward)):(t.IsReplay||Ko.Player.TapChallengeSave.ChallengeLost(),Ko.UI.tapChallengeLost.Show(t))}Update(){this.UpdateTimer()}UpdateTimer(){let t=this._tapChallengeMode.TimeRemains;this._timerField.text=fe.c.FormatSecondsToTime(t),this._progressBar.time=1-this._tapChallengeMode.GetTimeProgress()}RunTapParticles(t){Ko.VFX.tapChallengeTap(t.x,t.y)}}var hs=i(2494);class ls extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake(),this.onClickTake=this.onClickTake.bind(this),this.onClickTakeMore=this.onClickTakeMore.bind(this),this.onShown=this.onShown.bind(this);const t=this._rewardedAdAllowed?"tap_challenge_defeat_continue":"ok",e=this._rewardedAdAllowed?"tap_challenge_defeat":"tap_challenge_title_timeisup";this.takeMoreText=this.content.addChild(new $t.g(Ko.Localizator.Get(e),{wordWrap:!0})),this.takeBtn=this.content.addChild(new he("btn-blue",{label:Ko.Localizator.Get(t)})),this.takeMoreBtn=this.content.addChild(new ce("btn-green",{label:Ko.Localizator.Get("tap_challenge_defeat_second_chance",Ko.GameData.TapChallenge.additionalTime),icon:"play-icon",iconAlign:"left"})),this.takeMoreBtn.visible=this._rewardedAdAllowed,this.takeMoreBtn.alpha=this._rewardedAdAllowed?1:0,this._results=null,this._reward=null}Init(){super.Init(),this.takeBtn.on("pointertap",this.onClickTake),this.takeMoreBtn.on("pointertap",this.onClickTakeMore)}onClickTakeMore(){Ko.Ads.TriggerRewarded(this.onShown)}onShown(){Ko.UI.tapChallenge.Show(this._results),this.Hide()}onClickTake(){Ko.Ads.TriggerInterstitial(),this.Hide()}Show(t){console.log("TAP CHALLENGE LOST"),this._results=t,this.takeMoreBtn.label=Ko.Localizator.Get("tap_challenge_defeat_second_chance",Ko.GameData.TapChallenge.additionalTime),this.fitLayout(),super.Show()}fitLayout(t=Ko.app.viewport){let e=Math.min(.6*t.width,.6*t.height/.9),i=.9*e;this.setPopupRect(new hs.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.3*n.height,r.width=.9*n.width,r.x=.5*(n.width-r.width),r.y=.2*n.height,this.takeMoreText.fitLayout(r);const s=this._rewardedAdAllowed?.11:.5;r=n.clone(),r.width=.41*n.width,r.height=.25*n.height,r.x=(n.width-r.width)*s,r.y=.87*(n.height-r.height),this.takeBtn.fitLayout(r),r.x=.89*(n.width-r.width),this.takeMoreBtn.fitLayout(r)}}var cs=i(2494);class us extends Yt.e{get IsUnlocked(){return Ko.Player.PlanetsSave.CurrentPlanet.collection.includes(this.upgradeData.unlockCreatureId)||Ko.Player.PlanetsSave.currentPlanetId>1&&this.upgradeData.upgradeType==UpgradeType.BubbleTime}Awake(){super.Awake(),this.onClickPurchase=this.onClickPurchase.bind(this),this.back=this.addChild(new se.z("bg-rounding-28px")),this.back.tint=0,this.back.alpha=.5,this.iconImage=this.addChild(new qt.M),this.softBtn=this.addChild(new he("btn-orange",{label:"0",icon:"ico-gold",iconSize:1})),this.hardBtn=this.addChild(new he("btn-blue",{label:"0",icon:"ico-diamond",iconSize:1})),this.upgradeType=null,this.attention=this.addChild(new an),this.buttonDisabler=null,this.nameField=this.addChild(new $t.g("")),this.progressField=this.addChild(new $t.g("",{fill:65280,fontSize:32})),this.descriptionField=this.addChild(new $t.g("",{fill:8569808,align:"left",fontSize:32,wordWrap:!0})),this.upgradeData=null}Init(t){switch(this.upgradeType=t,this.upgradeData=Ko.GameData.Upgrades.UpgradeByType(this.upgradeType),this.upgradeType){case UpgradeType.BubbleTime:this.iconImage.setImage("upgrades/bubletime-ico"),this.nameField.text=Ko.Localizator.Get("upgrade_bubletime_title"),this.descriptionField.text=Ko.Localizator.Get("upgrade_bubletime_description");break;case UpgradeType.MoneyBox:this.iconImage.setImage("upgrades/kopilka-ico"),this.nameField.text=Ko.Localizator.Get("upgrade_moneybox_title"),this.descriptionField.text=Ko.Localizator.Get("upgrade_moneybox_description");break;case UpgradeType.BubbleCreature:this.iconImage.setImage("upgrades/monsterinbubble-ico"),this.nameField.text=Ko.Localizator.Get("upgrade_bubblemonster_title"),this.descriptionField.text=Ko.Localizator.Get("upgrade_bubblemonster_description");break;default:this.SetActive(!1)}this.softBtn.on("pointertap",this.onClickPurchase),this.hardBtn.on("pointertap",this.onClickPurchase)}fitLayout(t){this.position.copyFrom(t),this.back.width=t.width,this.back.height=t.height;let e=new cs.Rectangle(this.back.x,this.back.y,this.back.width,this.back.height);(t=e.clone()).width=.23*e.width,t.height=.8*e.height,t.x=0*(e.width-t.width),t.y=.5*(e.height-t.height),this.iconImage.fitRect(t),(t=e.clone()).width=.46*e.width,t.height=.27*e.height,t.x=.45*(e.width-t.width),t.y=.13*(e.height-t.height),this.nameField.anchor.set(0,.5),this.nameField.fitLayout(t),t.height=.22*e.height,t.y=.43*(e.height-t.height),this.progressField.anchor.set(0,.5),this.progressField.fitLayout(t),t.height=.37*e.height,t.y=.84*(e.height-t.height),this.descriptionField.anchor.set(0,.5),this.descriptionField.fitLayout(t),(t=e.clone()).width=.25*e.width,t.height=.5*e.height,t.x=.95*(e.width-t.width),t.y=.5*(e.height-t.height),this.softBtn.fitLayout(t),this.hardBtn.fitLayout(t);let i=new cs.Rectangle(0,0,t.width,t.height).pad(.1*-t.width,.25*-t.height);this.softBtn.content.fitLayout(i),this.hardBtn.content.fitLayout(i)}onClickPurchase(){let t=Ko.Player.PlanetsSave.GetUpgradeProgress(this.upgradeType),e=this.upgradeData.steps.length>t.upgradeIndex+1?this.upgradeData.steps[t.upgradeIndex+1]:null;if(e)if(Ko.Player.SpendMoney(e.GetPrice(),y.DE.upgrade,y.JD.upgrades,this.upgradeData.upgradeType))Ko.Player.PlanetsSave.Upgrade(this.upgradeType),this.UpdateUI(),Ko.Audio.Play("Upgrade");else switch(e.GetPrice().priceType){case MoneyType.Soft:Ko.UI.SetState(UIState.BankSoft);break;case MoneyType.Hard:Ko.UI.SetState(UIState.BankHard)}}UpdateUI(){if(this.SetActive(this.IsUnlocked),!this.Active)return;let t=Ko.Player.PlanetsSave.GetUpgradeProgress(this.upgradeType),e=this.upgradeData.steps.length>t.upgradeIndex+1,i=e?this.upgradeData.steps[t.upgradeIndex+1]:null,n=null==i?null:i.GetPrice(),r=e&&n.priceType==MoneyType.Soft,s=e&&n.priceType==MoneyType.Hard;console.log("UPGRADE",this.upgradeType,n),this.softBtn.SetActive(r),this.hardBtn.SetActive(s),this.softBtn.label=r?fe.c.FormatMoney(n.priceValue):"",this.hardBtn.label=s?fe.c.FormatMoney(n.priceValue):"";let o=this.upgradeData.TotalValue(t.upgradeIndex),a=e?this.upgradeData.TotalValue(t.upgradeIndex+1):0;if(this.upgradeType==UpgradeType.MoneyBox&&0==t.upgradeIndex)this.progressField.text=Ko.Localizator.Get("not_purchased");else if(this.upgradeType==UpgradeType.MoneyBox){let t=~~(o/60/60),i=~~(a/60/60);this.progressField.text=e?w.Format("{0}h => {1}h",t,i):w.Format("{0}h",t)}else this.progressField.text=e?w.Format("{0} => {1}",o,a):o}}var ds=i(2494);class ps extends re{Awake(){super.Awake({masked:!0,title:Ko.Localizator.Get("upgrades"),closeButton:!0}),this.items=[],this.attentionInitialized=!1,this.attentionDic=new Map,this.hasAttentions=!1}setAdditionalLayoutAndStyleConfig(){super.setAdditionalLayoutAndStyleConfig(),Zt.T.LANDSCAPE_MODE_NEEDED&&(this.closeBtnOffsetFactorX=.85,this.closeBtnOffsetFactorY=.6,this.closeBtnAdditionalScaleFactor=.85)}Init(){super.Init(),this.onChangedPlayer=this.onChangedPlayer.bind(this);let t=[y.Tq.BubbleTime,y.Tq.MoneyBox,y.Tq.BubbleCreature];for(let e of t){let t=this.content.addChild(new us);t.Init(e),this.items.push(t)}Ko.Player.on("Changed",this.onChangedPlayer)}fitLayout(t=Ko.app.viewport){let e=Math.min(.85*t.width,.85*t.height/1.7),i=1.7*e;this.setPopupRect(new ds.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=new ds.Rectangle(this.header.x,this.header.y,this.header.width,this.header.height),s=.02*e,o=new ds.Rectangle(s,r.height+s,n.width-2*s,.166*n.height);for(let t of this.items)t.fitLayout(o),o.y+=o.height+s,t.Active&&0}onChangedPlayer(){}Show(){for(let t of this.items)t.UpdateUI();super.Show()}Hide(){this.Active&&Ko.Ads.TriggerInterstitial(),super.Hide()}}class fs extends qt.M{Awake(){super.Awake(),this.circle=this.addChild(new qt.M("offers/vip-badge-bg")),this.crown=this.addChild(new qt.M("offers/crown")),this.vipText=this.addChild(new $t.g(Ko.Localizator.Get("vip"))),this.ribbon=this.addChild(new qt.M("offers/ribbon")),this.ribbonText=this.addChild(new $t.g(Ko.Localizator.Get("gold_membership")))}fitLayout(t){this.position.copyFrom(t);let e=t.clone();e.width=.5*t.width,e.height=.77*t.height,e.x=.5*(t.width-e.width),e.y=0*(t.height-e.height),this.circle.fitRect(e),e=t.clone(),e.width=.4*t.width,e.height=.3*t.height,e.x=.5*(t.width-e.width),e.y=.2*(t.height-e.height),this.crown.fitRect(e),e.width=.6*this.circle.width,e.height=.3*this.circle.height,e.x=.5*(t.width-e.width),e.y=this.crown.y+.45*this.crown.height,this.vipText.fitLayout(e);let i=t.clone();i.width=t.width,i.height=.35*t.height,i.x=0,i.y=1*(t.height-i.height),this.ribbon.fitRect(i),i.height=.8*this.ribbon.height,i.width=.75*this.ribbon.width,i.x=.5*(t.width-i.width),i.y=this.ribbon.y-.5*this.ribbon.height,this.ribbonText.fitLayout(i)}}class ms extends qt.M{constructor(){super(),this.firstBonusField=this.createField(),this.secondBonusField=this.createField({icon:"ico-gold",iconAlign:"right",iconSize:1.1}),this.thirdBonusField=this.createField({icon:"ico-diamond",iconAlign:"right",iconSize:1.1}),this.fourthBonusField=this.createField({icon:"ico-diamond",iconAlign:"right",iconSize:1.1})}createField(t){let e=this.addChild(new qt.M);return e.box=e.addChild(new qt.M("box")),e.text=e.addChild(new oe.L(t)),e}Init(){super.Init();let t=~~(100*Ko.GameData.AppStore.vip.hardMoneyBonus-100);this.firstBonusField.text.label=Ko.Localizator.Get("vip_bonus_ads"),this.secondBonusField.text.label="x2",this.thirdBonusField.text.label=Ko.Localizator.Get("vip_hard_bonus",t),this.fourthBonusField.text.label=Ko.Localizator.Get("every_day")+" "+w.Format("+{0}",Ko.GameData.AppStore.vip.hardMoneyDailyBonus)}fitChild(t,e){t.position.copyFrom(e);let i=e.clone();i.width=.1*e.width,i.height=e.height,i.x=0,i.y=0,t.box.fitRect(i);let n=e.clone();n.width=.88*e.width,n.height=e.height,n.x=.12*e.width,n.y=0,t.text.fitLayout(n)}fitLayout(t){let e=t.clone();e.width=t.width,e.height=.2*t.height,e.x=t.x+0*(t.width-e.width),e.y=t.y,this.fitChild(this.firstBonusField,e),e.y+=.265*t.height,this.fitChild(this.secondBonusField,e),e.y+=.265*t.height,this.fitChild(this.thirdBonusField,e),e.y+=.265*t.height,this.fitChild(this.fourthBonusField,e)}}class gs extends qt.M{Awake(){super.Awake(),this.leftCreature=this.addChild(new qt.M("creatures/1")),this.centerCreature=this.addChild(new qt.M("creatures/4")),this.rightCreature=this.addChild(new qt.M("creatures/12")),this.crown=this.addChild(new qt.M("offers/crown")),this.leftCreature.anchor.y=1,this.leftCreature.rotation=-.2,this.centerCreature.anchor.y=1,this.rightCreature.anchor.y=1,this.rightCreature.rotation=.2}fitLayout(t){let e=t.clone();e.width=.33*t.width,e.height=.6*t.height,e.x=t.x+0*(t.width-e.width),e.y=t.y+1*(t.height-e.height),this.leftCreature.fitRect(e),e=t.clone(),e.width=.4*t.width,e.height=.75*t.height,e.x=t.x+.5*(t.width-e.width),e.y=t.y+.9*(t.height-e.height),this.centerCreature.fitRect(e),e.width=.25*t.width,e.height=.25*t.width,e.x=this.centerCreature.x-.5*e.width,e.y=this.centerCreature.y-this.centerCreature.height-.7*e.height,this.crown.fitRect(e),e=t.clone(),e.width=.33*t.width,e.height=.6*t.height,e.x=t.x+1*(t.width-e.width),e.y=t.y+1*(t.height-e.height),this.rightCreature.fitRect(e)}}class _s extends re{get lastShowPopupTime(){return b.g.GetInt("vippopup",0)}set lastShowPopupTime(t){b.g.SetInt("vippopup",t)}Awake(){super.Awake({skin:"magenta",closeButton:!0}),this.badge=this.content.addChild(new fs),this.bonusField=this.content.addChild(new ms),this.creatures=this.content.addChild(new gs),this.btn=this.content.addChild(new he("offers/btn-orange-big")),this.bottomTextField=this.content.addChild(new $t.g),this.termsLinkBtn=this.content.addChild(new Kt),this.btn.on("pointertap",(()=>Ko.Store.BuyProductID("vip")))}Init(){super.Init(),this.onProductPurchased=this.onProductPurchased.bind(this),Ko.Store.on("Purchased",this.onProductPurchased),this.bonusField.Init(),this.termsLinkBtn.on("pointertap",(()=>{}))}fitLayout(t=Ko.app.viewport){this.setPopupSize(t.width,t.height),super.fitLayout(t);let e=this.getContentSize(),i=e.clone();i.width=.75*e.width,i.height=.18*e.height,i.x=.5*(e.width-i.width),i.y=.05*(e.height-i.height),this.badge.fitLayout(i);const n=this.badge.ribbon.width;i=e.clone(),i.width=.8*n,i.height=.14*e.height,i.x=.5*(e.width-i.width),i.y=.3*(e.height-i.height),this.bonusField.fitLayout(i),i=e.clone(),i.width=n,i.height=.2*e.height,i.x=.5*(e.width-i.width),i.y=.52*(e.height-i.height),this.creatures.fitLayout(i),i=e.clone(),i.width=1.2*n,i.height=.11*e.height,i.x=.5*(e.width-i.width),i.y=.69*(e.height-i.height),this.btn.fitLayout(i),i=e.clone(),i.width=1.2*n,i.height=.21*e.height,i.x=.5*(e.width-i.width),i.y=.95*(e.height-i.height),this.bottomTextField.fitLayout(i)}ShowAgressive(){if(!Ko.Store.IsInitialized)return;if(Ko.Store.VipActive)return;if(0!=Ai.GameManager.tutorialState)return;(Date.now()-this.lastShowPopupTime)/1e3>=86400&&this.Show()}Show(){}onProductPurchased(t){"vip"==t.id&&this.Hide()}}class ys extends re{Awake(){super.Awake({skin:"orange",title:Ko.Localizator.Get("vip_daily_reward"),closeButton:!0}),this.onSomethingPurchased=this.onSomethingPurchased.bind(this),this.rewardValueField=this.content.addChild(new oe.L({icon:"ico-diamond",label:""})),Ko.Store.on("Purchased",this.onSomethingPurchased)}onSomethingPurchased(t){"vip"==t.id&&Ko.WaitBefore(.2,(()=>this.Check()))}fitLayout(t=Ko.app.viewport){this.setPopupSize(.8*t.width,.4*t.width),super.fitLayout(t);let e=this.getContentSize(),i=e.clone().pad(.1*-e.width,.2*-e.height);i.y+=.2*e.height,this.rewardValueField.fitLayout(i)}Show(){this.rewardValueField.label=w.Format("+{0}",Ko.GameData.AppStore.vip.hardMoneyDailyBonus),super.Show()}Check(){Ko.Store.VipActive&&Ko.Time.Initialized&&Ko.Player&&Ko.Player.Initialized&&(Ko.Player.Timers.IsVipTakenToday()||(Ko.Player.AddMoney(y.zc.Hard,Ko.GameData.AppStore.vip.hardMoneyDailyBonus,y.DE.empty,y.JD.vip,"vip_daily"),Ko.Player.Timers.OnVipTaken(),Ko.UI.bank.Hide(),this.Show()))}}class vs extends Yt.e{Awake(){super.Awake(),this.moveObject=null,this.monsterImage=this.addChild(new ji),this.CanvasRect=null,this.scaleCurve=null,this.to=null,this.from=null,this.move=!1,this.moveT=0}Show(t,e){}Update(){}}var bs=i(2494);class ws extends qt.M{constructor(){super(),this.dragHelper=this.addChild(new qt.M("creatures/1")),this.dragHelper.scale.set(.3),this.dragHelper.alpha=.5,this.dragHelper.visible=!1,this.img=this.addChild(new qt.M("hand2")),this.img.anchor.set(0,0),this.animation=null,this.on("added",(()=>this.fitLayout()))}fitLayout(t=Ko.app.viewport){requestAnimationFrame((()=>{let e=Ko.app.renderer.resolution;this.parent&&(e=1/this.parent.worldTransform.a),this.scale.set(.05*t.width*e/this.img.texture.width)}))}ClearAnimation(){this.animation&&this.animation.kill(),this.animation=null,this.dragHelper.visible=!1}Pulse(){this.animation&&"pulse"===this.animation.vars.name||(this.ClearAnimation(),this.animation=Jt.gsap.timeline({name:"pulse",repeat:-1,repeatDelay:.2}).set(this.img,{pixi:{scale:1}}).to(this.img,{pixi:{scale:1.2},duration:1}).to(this.img,{pixi:{scale:1},duration:1}))}FromTo(t,e){if(!this.animation||"from-to"!==this.animation.vars.name)return new Promise((i=>{this.ClearAnimation(),this.position.copyFrom(t),this.dragHelper.visible=!0,this.animation=Jt.gsap.timeline({name:"from-to"}).set(this.dragHelper,{alpha:0,pixi:{scale:0}},0).set(this,{x:t.x,y:t.y},0).to(this.dragHelper,{alpha:.7,pixi:{scale:2},duration:.3},0).to(this.dragHelper,{alpha:.7,pixi:{scale:3},duration:.5},.3).to(this,{x:e.x,y:e.y,duration:1}).to(this.dragHelper,{alpha:0,pixi:{scale:0},duration:.3}).eventCallback("onComplete",(()=>{this.ClearAnimation(),i()}))}))}SetActive(t){let e=this.Active^t;super.SetActive(t),t?Jt.gsap.to(this,{alpha:1,duration:1}):(e&&this.ClearAnimation(),this.alpha=0,this.dragHelper.visible=!1),this.fitLayout()}}class Ss extends qt.M{isShowingSomething=!1;activeObject=null;Awake(){super.Awake(),this.hand=this.addChild(new ws),this.SetHandActive(!1)}fitLayout(t=Ko.app.viewport){this.hand.fitLayout(t)}HandToPointPulse(t,e=this.activeObject||this){this.isShowingSomething||(this.isShowingSomething=!0,this.SetHandActive(!0,e),this.hand.position.copyFrom(t),this.hand.Pulse())}async HandPointToFrom(t,e,i=this){this.isShowingSomething||(this.isShowingSomething=!0,this.SetHandActive(!0,i),this.hand.position.copyFrom(t),await this.hand.FromTo(t,e),this.SetHandActive(!1))}SetHandActive(t,e=this.activeObject||this){this.hand.parent&&this.hand.parent.removeChild(this.hand),t?e.addChild(this.hand):(this.activeObject=null,this.isShowingSomething=!1),this.hand.SetActive(t),this.fitLayout()}UpdateObjectHand(){if(!this.activeObject||!this.activeObject.parent||!this.hand.parent)return;let t=this.activeObject.getLocalBounds(),e=this.hand.parent.toLocal(new bs.Point(t.x+.5*t.width,t.y+.5*t.height),this.activeObject);this.hand.position.copyFrom(e)}ShowObjectHand(t,e=t&&t.parent||t){if(this.activeObject===t)return this.fitLayout();if(this.SetHandActive(!1),this.activeObject=t,this.activeObject){let i=t.getLocalBounds(),n=e.toLocal(new bs.Point(i.x+.5*i.width,i.y+.5*i.height),t);this.HandToPointPulse(n,e)}}HideObjectHand(t=null){t&&this.activeObject!==t||(this.activeObject=null,this.SetHandActive(!1))}}class Ts extends Array{Clear(){this.splice(0)}Clone(){let t=new Ts;return t.push(...this),t}Contains(t){return this.includes(t)}Enqueue(...t){return this.push(...t)}Dequeue(){return this.shift()}Peek(){return this.length>0?this[0]:void 0}Equals(t){return this.Peek()===t}ToArray(){return[...this]}CopyTo(t,e=0){t.splice(e,0,...this)}}var xs=i(2494);class Es extends re{_rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED;Awake(){this._rewardedAdAllowed=Zt.T.REWARDED_AD_ALLOWED,super.Awake(),this.onClickTake=this.onClickTake.bind(this),this.onClickTakeMore=this.onClickTakeMore.bind(this),this.onShown=this.onShown.bind(this),this.icon=this.content.addChild(new qt.M("bank/pack-gold-safe")),this.totalRewardTitle=this.content.addChild(new $t.g(Ko.Localizator.Get("tap_challenge_your_reward"))),this.totalRewardField=this.content.addChild(new oe.L({label:"",icon:"ico-gold",iconAlign:"left",iconSize:.6,textProps:{fontSize:80}})),this.takeBtn=this.content.addChild(new he("btn-green",{label:Ko.Localizator.Get("take")})),this.takeMoreBtn=this.content.addChild(new ce("btn-blue",{icon:"play-icon",iconAlign:"left",label:Ko.Localizator.Get("take")})),this.takeMoreBtn.visible=this._rewardedAdAllowed,this.takeMoreBtn.alpha=this._rewardedAdAllowed?1:0,this._reward=null}Init(){super.Init(),this.takeBtn.on("pointertap",this.onClickTake),this.takeMoreBtn.on("pointertap",this.onClickTakeMore)}onClickTakeMore(){Ko.Ads.TriggerRewarded(this.onShown)}onShown(){this._reward.value*=BigInt(Ko.GameData.TapChallenge.rewardMultiplyRate),this._reward.Take("TapChallengeMultiplyReward"),this.Hide()}onClickTake(){this._reward.Take("TapChallenge1x"),Ko.Ads.TriggerInterstitial(),this.Hide()}Show(t){console.log("TAP CHALLENGE WIN",t.value),this.fitLayout(),super.Show(),this.takeMoreBtn.label=Ko.Localizator.Get("take_x",Ko.GameData.TapChallenge.rewardMultiplyRate),this._reward=new j,this._reward.value=BigInt(~~t.value||0)*BigInt(~~GameManager.gameController.MoneySoftSpeed)*BigInt(~~Ko.GameData.Planets.GetPlanet(Ko.Player.PlanetsSave.CurrentPlanet.planetId).tapIncomeMultiplayer),this._reward.type=t.type,this.totalRewardField.label=fe.c.FormatMoney(this._reward.value)}fitLayout(t=Ko.app.viewport){let e=Math.min(.6*t.width,.6*t.height/1.4),i=1.4*e;this.setPopupRect(new xs.Rectangle(.5*(t.width-e),.5*(t.height-i),e,i)),super.fitLayout(t);let n=this.getContentSize(),r=n.clone();r.height=.35*n.height,r.width=.7*n.width,r.x=.5*(n.width-r.width),r.y=0*(n.height-r.height),this.icon.fitRect(r,!0),r=n.clone(),r.height=.16*n.height,r.width=.75*n.width,r.x=.5*(n.width-r.width),r.y=.48*(n.height-r.height),this.totalRewardTitle.fitLayout(r),r=n.clone(),r.width=.8*n.width,r.height=.2*n.height,r.x=.5*(n.width-r.width),r.y=.72*(n.height-r.height),this.totalRewardField.fitLayout(r);const s=this._rewardedAdAllowed?.11:.5;r=n.clone(),r.width=.41*n.width,r.height=.16*n.height,r.x=(n.width-r.width)*s,r.y=.95*(n.height-r.height),this.takeBtn.fitLayout(r),r.x=.89*(n.width-r.width),this.takeMoreBtn.fitLayout(r)}}class As extends re{Awake(){super.Awake({}),this.back.visible=!1;const{PAUSE_MANAGAMENT_DIRECTLY_ALLOWED:t}=Zt.T;this.btn=this.content.addChild(new qt.M("ring-glow")),this.btn.interactive=!0,this.btn.cursor="pointer",this.btn.alpha=.5,this.icon=this.btn.addChild(new qt.M("play-icon")),t||(this.btn.visible=!1,this.btn.alpha=!0),this.btn.on("pointertap",(()=>{t&&Ko.SetPause(!1)}))}fitLayout(t=Ko.app.viewport){let e=.4*t.width;this.setPopupSize(e,e),super.fitLayout(t);let i=this.getContentSize().clone();this.btn.fitRect(i),this.icon.scale.set(1.2),this.icon.x=5}Show(){this.visible=!0,this.Active=!0,this.fitLayout()}Hide(){this.visible=!1,this.Active=!1}}var Is=i(2494);class Cs extends Yt.e{get IsSomethingFullScreenOpened(){return this.slots.Active||this.map.Active}Awake(){this.Initialized=!1,this.loader=new Bn,this.game=new On,this.bank=new bi,this.settings=new kr,this.moneyButtons=new ar,this.tapChallenge=new as,this.tapChallengeVictory=new Es,this.tapChallengeLost=new ls,this.moneyBox=new tr,this.creatures=new Vi,this.upgrades=new ps,this.map=new zn,this.collection=new Gi,this.nextEpochSelection=new br,this.notEnoughHardMoney=new Er,this.starterPackPopup=new rs,this.newCreature=new ur,this.missionEmpty=new qn,this.missionActive=new Yn,this.missionRewards=new Kn,this.missionsList=new Zn,this.newEpoch=new _r,this.tutorial=new Ss,this.noSpace=new Sr,this.vip=new _s,this.vipDailyReward=new ys,this.lastMonsterAnimation=new vs,this.coinsBooster=new Ni,this.gdpr=new kn,this.adsEvolve=new pe,this.chestOpen=new Ei,this.chestReward=new ki,this.quit=new Ir,this.reset=new Pr,this.slots=new Qr,this.interstitialRewardRandom=new Ln,this.skipEpochsOffer=new Br,this.firstCreatureOffer=new Yi,this.spinsOffer=new ts,this.confirmOneTimeOffer=new Ar,this.pausePopup=new As,this.allUI=[],this.backUIs=[],this.showOrder=new Ts,this.state=y.Su[0],this.timeWithoutPopups=0,this.vfxLayer=new Is.Container,window.addEventListener("keydown",(t=>{if("Escape"===t.key)return this.backAction()})),this.__testText=this.addChild(new $t.g("",{fill:16711680,stroke:16776960,strokeWidth:2,fontSize:26}))}__debug(t=""){this.__testText.text=t||""}Init(){this.allUI=[this.loader,this.lastMonsterAnimation,this.map,this.game,this.slots,this.moneyButtons,this.tapChallenge,this.creatures,this.upgrades,this.bank,this.tapChallengeVictory,this.tapChallengeLost,this.collection,this.settings,this.reset,this.nextEpochSelection,this.moneyBox,this.notEnoughHardMoney,this.starterPackPopup,this.newCreature,this.missionEmpty,this.missionActive,this.missionRewards,this.missionsList,this.newEpoch,this.tutorial,this.noSpace,this.vip,this.vipDailyReward,this.gdpr,this.coinsBooster,this.adsEvolve,this.chestOpen,this.chestReward,this.quit,this.interstitialRewardRandom,this.firstCreatureOffer,this.skipEpochsOffer,this.spinsOffer,this.confirmOneTimeOffer,this.pausePopup];for(let t of this.allUI)t.Active=!1,t.Init&&t.Init(),this.addChild(t);let t=this.children.indexOf(this.tapChallenge)+1;this.addChildAt(this.vfxLayer,t),this.backUIs=[];for(let t of this.allUI)t.HideWithBackButton&&this.backUIs.push(t);this.Initialized=!0}fitLayout(t){const e=[this.moneyButtons,this.map,this.newCreature,this.nextEpochSelection,this.game,this.tutorial];if(e.forEach((e=>e.fitLayout(t))),Zt.T.LANDSCAPE_MODE_NEEDED){this.allUI.filter((t=>t.visible&&t.Active&&!e.includes(t)&&void 0!==t.fitLayout)).forEach((e=>e.fitLayout(t)))}this.__testText.position.set(.5*t.width,.5*t.height)}GetGameScreen(){switch(this.state){case y.Su.BankHard:case y.Su.BankSoft:case y.Su.Boosters:return y.JD.boosters;case y.Su.Map:return y.JD.map}return this.creatures.Active?y.JD.monsters:this.collection.Active?y.JD.collection:this.missionActive.Active||this.missionsList.Active||this.missionRewards.Active?y.JD.missions:y.JD.empty}IsSomethingShowing(){return this.slots.Active||this.noSpace.Active||this.newCreature.Active||this.newEpoch.Active||this.bank.Active||this.creatures.Active||this.upgrades.Active||this.map.Active||this.collection.Active||this.settings.Active||this.moneyBox.Active||this.gdpr.Active||this.vip.Active||this.vipDailyReward.Active||this.loader.Active||this.coinsBooster.Active||this.nextEpochSelection.Active||this.adsEvolve.Active||this.chestOpen.Active||this.chestReward.Active||this.quit.Active||this.interstitialRewardRandom.Active||this.firstCreatureOffer.Active||this.skipEpochsOffer.Active||this.tapChallengeLost.Active||this.tapChallengeVictory.Active||this.spinsOffer.Active||this.pausePopup.Active||Ko.Ads.showing}SetState(t){this.state=t,this.updateUI(),this.emit("StateChanged",this.state)}updateUI(){this.loader.SetActive(this.state==y.Su.Loading);let t=this.state==y.Su.BankHard||this.state==y.Su.BankSoft||this.state==y.Su.Boosters;this.game.SetActive(this.state==y.Su.Game||t),this.moneyButtons.SetActive(this.state==y.Su.Game||t||this.state==y.Su.Map),this.reorderComponentsOnUpdate({isBank:t}),this.bank.SetActive(t),this.map.SetActive(this.state==y.Su.Map)}reorderComponentsOnUpdate({isBank:t=!1}){if(Zt.T.LANDSCAPE_MODE_NEEDED)if(t){this.isPrevStateBank=!0;const t=this.getChildIndex(this.bank);this.setChildIndex(this.moneyButtons,t+1)}else if(this.isPrevStateBank){const t=this.getChildIndex(this.slots);this.setChildIndex(this.moneyButtons,t+1),this.isPrevStateBank=!1}}Update(){if(this.Initialized){for(let t of this.allUI)t.Active&&t.Update();if(this.showOrder.length>0&&(this.IsSomethingShowing()?this.timeWithoutPopups=0:this.timeWithoutPopups+=St.g.deltaTime,this.timeWithoutPopups>=.75)){let t=this.showOrder.Dequeue();t&&t()}}}backAction(){if(this.backUIs&&Ko.UI){for(let t of this.backUIs)if(t&&t.Active)return void(t instanceof zn||t instanceof bi?Ko.UI.SetState(y.Su.Game):t instanceof tr?Ko.UI.moneyBox.onClickTake():t instanceof Qr?Ko.UI.slots.onClickClose():t.Hide());Ko.UI.quit.Show()}}ShowOrder(t){this.timeWithoutPopups=0,this.showOrder.Enqueue(t)}}var Ps=i(997),Rs=i(8351),Os=i(8857);class ks{constructor(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:js(i):null}static createList(t){if("list"in t){const e=t.list;let i;const{value:n,time:r}=e[0],s=i=new ks("string"==typeof n?Gs(n):n,r,t.ease);if(e.length>2||2===e.length&&e[1].value!==n)for(let t=1;t<e.length;++t){const{value:n,time:r}=e[t];i.next=new ks("string"==typeof n?Gs(n):n,r),i=i.next}return s.isStepped=!!t.isStepped,s}const e=new ks("string"==typeof t.start?Gs(t.start):t.start,0);return t.end!==t.start&&(e.next=new ks("string"==typeof t.end?Gs(t.end):t.end,1)),e}}let Ms=Ps.gP.from;const Ds=Math.PI/180;function Ns(t,e){if(!t)return;const i=Math.sin(t),n=Math.cos(t),r=e.x*n-e.y*i,s=e.x*i+e.y*n;e.x=r,e.y=s}function Ls(t,e,i){return t<<16|e<<8|i}function Bs(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Fs(t){const e=1/Bs(t);t.x*=e,t.y*=e}function Us(t,e){t.x*=e,t.y*=e}function Gs(t,e){let i;return e||(e={}),"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8===t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e}function js(t){const e=t.length,i=1/e;return function(n){const r=e*n|0,s=(n-r*i)*e,o=t[r]||t[e-1];return o.s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}}function Hs(t){return t?(t=t.toUpperCase().replace(/ /g,"_"),Rs.B9[t]||Rs.B9.NORMAL):Rs.B9.NORMAL}var zs,Ws={__proto__:null,GetTextureFromString:Ms,verbose:!1,DEG_TO_RADS:Ds,rotatePoint:Ns,combineRGBComponents:Ls,length:Bs,normalize:Fs,scaleBy:Us,hexToRGB:Gs,generateEase:js,getBlendMode:Hs,createSteppedGradient:function(t,e=10){("number"!=typeof e||e<=0)&&(e=10);const i=new ks(Gs(t[0].value),t[0].time);i.isStepped=!0;let n=i,r=t[0],s=1,o=t[s];for(let i=1;i<e;++i){let a=i/e;for(;a>o.time;)r=o,o=t[++s];a=(a-r.time)/(o.time-r.time);const h=Gs(r.value),l=Gs(o.value),c={r:(l.r-h.r)*a+h.r,g:(l.g-h.g)*a+h.g,b:(l.b-h.b)*a+h.b};n.next=new ks(c,i/e),n=n.next}return i}};class Vs extends Os.k{constructor(t){super(),this.prevChild=this.nextChild=null,this.emitter=t,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(t){this.maxLife=t,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}!function(t){t[t.Spawn=0]="Spawn",t[t.Normal=2]="Normal",t[t.Late=5]="Late"}(zs||(zs={}));const Xs=ye.Rv.shared,Ys=Symbol("Position particle per emitter position");class qs{constructor(t,e){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new ge.bR,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new ge.bR,this._prevEmitterPos=new ge.bR,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&this.init(e),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(t){qs.knownBehaviors[t.type]=t}get frequency(){return this._frequency}set frequency(t){this._frequency="number"==typeof t&&t>0?t:1}get parent(){return this._parent}set parent(t){this.cleanup(),this._parent=t}init(t){if(!t)return;this.cleanup(),this._origConfig=t,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,t.ease?this.customEase="function"==typeof t.ease?t.ease:js(t.ease):this.customEase=null,this.particlesPerWave=1,t.particlesPerWave&&t.particlesPerWave>1&&(this.particlesPerWave=t.particlesPerWave),this.frequency=t.frequency,this.spawnChance="number"==typeof t.spawnChance&&t.spawnChance>0?t.spawnChance:1,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos.set(0),t.pos?this.spawnPos.copyFrom(t.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===t.emit||!!t.emit,this.autoUpdate=!!t.autoUpdate;const e=t.behaviors.map((t=>{const e=qs.knownBehaviors[t.type];return e?new e(t.config):(console.error(`Unknown behavior: ${t.type}`),null)})).filter((t=>!!t));e.push(Ys),e.sort(((t,e)=>t===Ys?e.order===zs.Spawn?1:-1:e===Ys?t.order===zs.Spawn?-1:1:t.order-e.order)),this.initBehaviors=e.slice(),this.updateBehaviors=e.filter((t=>t!==Ys&&t.updateParticle)),this.recycleBehaviors=e.filter((t=>t!==Ys&&t.recycleParticle))}getBehavior(t){return qs.knownBehaviors[t]&&this.initBehaviors.find((e=>e instanceof qs.knownBehaviors[t]))||null}fillPool(t){for(;t>0;--t){const t=new Vs(this);t.next=this._poolFirst,this._poolFirst=t}}recycle(t,e=!1){for(let i=0;i<this.recycleBehaviors.length;++i)this.recycleBehaviors[i].recycleParticle(t,!e);t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount}rotate(t){if(this.rotation===t)return;const e=t-this.rotation;this.rotation=t,Ns(e,this.spawnPos),this._posChanged=!0}updateSpawnPos(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e}updateOwnerPos(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){this._autoUpdate&&!t?Xs.remove(this.update,this):!this._autoUpdate&&t&&Xs.add(this.update,this),this._autoUpdate=!!t}playOnceAndDestroy(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t}playOnce(t){this.emit=!0,this._completeCallback=t}update(t){if(this._autoUpdate&&(t=.001*Xs.elapsedMS),!this._parent)return;for(let e,i=this._activeParticlesFirst;i;i=e)if(e=i.next,i.age+=t,i.age>i.maxLife||i.age<0)this.recycle(i);else{let e=i.age*i.oneOverLife;this.customEase&&(e=4===this.customEase.length?this.customEase(e,0,1,1):this.customEase(e)),i.agePercent=e;for(let e=0;e<this.updateBehaviors.length;++e)if(this.updateBehaviors[e].updateParticle(i,t)){this.recycle(i);break}}let e,i;this._prevPosIsValid&&(e=this._prevEmitterPos.x,i=this._prevEmitterPos.y);const n=this.ownerPos.x+this.spawnPos.x,r=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let s,o;if(this._prevPosIsValid&&this._posChanged){const a=1+this._spawnTimer/t;s=(n-e)*a+e,o=(r-i)*a+i}else s=n,o=r;let a=null,h=null;for(let t=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),e=0;e<t;++e){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let t,e;(t=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=t)||(this._poolFirst?(e=this._poolFirst,this._poolFirst=this._poolFirst.next,e.next=null):e=new Vs(this),e.init(t),this.addAtBack?this._parent.addChildAt(e,0):this._parent.addChild(e),a?(h.next=e,e.prev=h,h=e):h=a=e,++this.particleCount)}if(a){this._activeParticlesLast?(this._activeParticlesLast.next=a,a.prev=this._activeParticlesLast,this._activeParticlesLast=h):(this._activeParticlesFirst=a,this._activeParticlesLast=h);for(let t=0;t<this.initBehaviors.length;++t){const e=this.initBehaviors[t];if(e===Ys)for(let t,e=a;e;e=t){t=e.next,0!==this.rotation&&(Ns(this.rotation,e.position),e.rotation+=this.rotation),e.position.x+=s,e.position.y+=o,e.age+=-this._spawnTimer;let i=e.age*e.oneOverLife;this.customEase&&(i=4===this.customEase.length?this.customEase(i,0,1,1):this.customEase(i)),e.agePercent=i}else e.initParticles(a)}for(let t,e=a;e;e=t){t=e.next;for(let t=0;t<this.updateBehaviors.length;++t)if(this.updateBehaviors[t].updateParticle(e,-this._spawnTimer)){this.recycle(e);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=n,this._prevEmitterPos.y=r,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const t=this._completeCallback;this._completeCallback=null,t()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const t=this.ownerPos.x+this.spawnPos.x,e=this.ownerPos.y+this.spawnPos.y;let i=null,n=null;for(let t=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),e=0;e<t;++e){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let t,e;this._poolFirst?(t=this._poolFirst,this._poolFirst=this._poolFirst.next,t.next=null):t=new Vs(this),e=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,t.init(e),this.addAtBack?this._parent.addChildAt(t,0):this._parent.addChild(t),i?(n.next=t,t.prev=n,n=t):n=i=t,++this.particleCount}if(i){this._activeParticlesLast?(this._activeParticlesLast.next=i,i.prev=this._activeParticlesLast,this._activeParticlesLast=n):(this._activeParticlesFirst=i,this._activeParticlesLast=n);for(let n=0;n<this.initBehaviors.length;++n){const r=this.initBehaviors[n];if(r===Ys)for(let n,r=i;r;r=n)n=r.next,0!==this.rotation&&(Ns(this.rotation,r.position),r.rotation+=this.rotation),r.position.x+=t,r.position.y+=e;else r.initParticles(i)}}}cleanup(){let t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){let t;this.autoUpdate=!1,this.cleanup();for(let e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}qs.knownBehaviors={};class $s{constructor(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h}getRandPos(t){t.x=Math.random()*this.w+this.x,t.y=Math.random()*this.h+this.y}}$s.type="rect",$s.editorConfig=null;class Ks{constructor(t){this.x=t.x||0,this.y=t.y||0,this.radius=t.radius,this.innerRadius=t.innerRadius||0,this.rotation=!!t.affectRotation}getRandPos(t){this.innerRadius!==this.radius?t.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:t.x=this.radius,t.y=0;const e=Math.random()*Math.PI*2;this.rotation&&(t.rotation+=e),Ns(e,t.position),t.position.x+=this.x,t.position.y+=this.y}}Ks.type="torus",Ks.editorConfig=null;class Js{constructor(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}init(t){if(t&&t.length)if(Array.isArray(t[0]))for(let e=0;e<t.length;++e){const i=t[e];let n=i[0];for(let t=1;t<i.length;++t){const e=i[t];this.segments.push({p1:n,p2:e,l:0}),n=e}}else{let e=t[0];for(let i=1;i<t.length;++i){const n=t[i];this.segments.push({p1:e,p2:n,l:0}),e=n}}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(let t=0;t<this.segments.length;++t){const{p1:e,p2:i}=this.segments[t],n=Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y));this.segments[t].l=n,this.totalLength+=n,this.countingLengths.push(this.totalLength)}}getRandPos(t){const e=Math.random()*this.totalLength;let i,n;if(1===this.segments.length)i=this.segments[0],n=e;else for(let t=0;t<this.countingLengths.length;++t)if(e<this.countingLengths[t]){i=this.segments[t],n=0===t?e:e-this.countingLengths[t-1];break}n/=i.l||1;const{p1:r,p2:s}=i;t.x=r.x+n*(s.x-r.x),t.y=r.y+n*(s.y-r.y)}}Js.type="polygonalChain",Js.editorConfig=null;var Zs={__proto__:null,Rectangle:$s,Torus:Ks,PolygonalChain:Js};class Qs{constructor(t){var e;this.order=zs.Late,this.minStart=t.minStart,this.maxStart=t.maxStart,this.accel=t.accel,this.rotate=!!t.rotate,this.maxSpeed=null!==(e=t.maxSpeed)&&void 0!==e?e:0}initParticles(t){let e=t;for(;e;){const t=Math.random()*(this.maxStart-this.minStart)+this.minStart;e.config.velocity?e.config.velocity.set(t,0):e.config.velocity=new ge.bR(t,0),Ns(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=t.config.velocity,n=i.x,r=i.y;if(i.x+=this.accel.x*e,i.y+=this.accel.y*e,this.maxSpeed){const t=Bs(i);t>this.maxSpeed&&Us(i,this.maxSpeed/t)}t.x+=(n+i.x)/2*e,t.y+=(r+i.y)/2*e,this.rotate&&(t.rotation=Math.atan2(i.y,i.x))}}function to(t){return this.ease&&(t=this.ease(t)),(this.first.next.value-this.first.value)*t+this.first.value}function eo(t){this.ease&&(t=this.ease(t));const e=this.first.value,i=this.first.next.value;return Ls((i.r-e.r)*t+e.r,(i.g-e.g)*t+e.g,(i.b-e.b)*t+e.b)}function io(t){this.ease&&(t=this.ease(t));let e=this.first,i=e.next;for(;t>i.time;)e=i,i=i.next;return t=(t-e.time)/(i.time-e.time),(i.value-e.value)*t+e.value}function no(t){this.ease&&(t=this.ease(t));let e=this.first,i=e.next;for(;t>i.time;)e=i,i=i.next;t=(t-e.time)/(i.time-e.time);const n=e.value,r=i.value;return Ls((r.r-n.r)*t+n.r,(r.g-n.g)*t+n.g,(r.b-n.b)*t+n.b)}function ro(t){this.ease&&(t=this.ease(t));let e=this.first;for(;e.next&&t>e.next.time;)e=e.next;return e.value}function so(t){this.ease&&(t=this.ease(t));let e=this.first;for(;e.next&&t>e.next.time;)e=e.next;const i=e.value;return Ls(i.r,i.g,i.b)}Qs.type="moveAcceleration",Qs.editorConfig=null;class oo{constructor(t=!1){this.first=null,this.isColor=!!t,this.interpolate=null,this.ease=null}reset(t){this.first=t;t.next&&t.next.time>=1?this.interpolate=this.isColor?eo:to:t.isStepped?this.interpolate=this.isColor?so:ro:this.interpolate=this.isColor?no:io,this.ease=this.first.ease}}class ao{constructor(t){this.order=zs.Normal,this.list=new oo(!1),this.list.reset(ks.createList(t.alpha))}initParticles(t){let e=t;for(;e;)e.alpha=this.list.first.value,e=e.next}updateParticle(t){t.alpha=this.list.interpolate(t.agePercent)}}ao.type="alpha",ao.editorConfig=null;class ho{constructor(t){this.order=zs.Normal,this.value=t.alpha}initParticles(t){let e=t;for(;e;)e.alpha=this.value,e=e.next}}function lo(t){const e=[];for(let i=0;i<t.length;++i){let n=t[i];if("string"==typeof n)e.push(Ms(n));else if(n instanceof Ps.gP)e.push(n);else{let t=n.count||1;for(n="string"==typeof n.texture?Ms(n.texture):n.texture;t>0;--t)e.push(n)}}return e}ho.type="alphaStatic",ho.editorConfig=null;class co{constructor(t){this.order=zs.Normal,this.anims=[];for(let e=0;e<t.anims.length;++e){const i=t.anims[e],n=lo(i.textures),r=i.framerate<0?-1:i.framerate>0?i.framerate:60,s={textures:n,duration:r>0?n.length/r:0,framerate:r,loop:r>0&&!!i.loop};this.anims.push(s)}}initParticles(t){let e=t;for(;e;){const t=Math.floor(Math.random()*this.anims.length),i=e.config.anim=this.anims[t];e.texture=i.textures[0],e.config.animElapsed=0,-1===i.framerate?(e.config.animDuration=e.maxLife,e.config.animFramerate=i.textures.length/e.maxLife):(e.config.animDuration=i.duration,e.config.animFramerate=i.framerate),e=e.next}}updateParticle(t,e){const i=t.config,n=i.anim;i.animElapsed+=e,i.animElapsed>=i.animDuration&&(i.anim.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const r=i.animElapsed*i.animFramerate+1e-7|0;t.texture=n.textures[r]||n.textures[n.textures.length-1]||Ps.gP.EMPTY}}co.type="animatedRandom",co.editorConfig=null;class uo{constructor(t){this.order=zs.Normal;const e=t.anim,i=lo(e.textures),n=e.framerate<0?-1:e.framerate>0?e.framerate:60;this.anim={textures:i,duration:n>0?i.length/n:0,framerate:n,loop:n>0&&!!e.loop}}initParticles(t){let e=t;const i=this.anim;for(;e;)e.texture=i.textures[0],e.config.animElapsed=0,-1===i.framerate?(e.config.animDuration=e.maxLife,e.config.animFramerate=i.textures.length/e.maxLife):(e.config.animDuration=i.duration,e.config.animFramerate=i.framerate),e=e.next}updateParticle(t,e){const i=this.anim,n=t.config;n.animElapsed+=e,n.animElapsed>=n.animDuration&&(i.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const r=n.animElapsed*n.animFramerate+1e-7|0;t.texture=i.textures[r]||i.textures[i.textures.length-1]||Ps.gP.EMPTY}}uo.type="animatedSingle",uo.editorConfig=null;class po{constructor(t){this.order=zs.Normal,this.value=t.blendMode}initParticles(t){let e=t;for(;e;)e.blendMode=Hs(this.value),e=e.next}}po.type="blendMode",po.editorConfig=null;class fo{constructor(t){this.order=zs.Spawn,this.spacing=t.spacing*Ds,this.start=t.start*Ds,this.distance=t.distance}initParticles(t){let e=0,i=t;for(;i;){let t;t=this.spacing?this.start+this.spacing*e:Math.random()*Math.PI*2,i.rotation=t,this.distance&&(i.position.x=this.distance,Ns(t,i.position)),i=i.next,++e}}}fo.type="spawnBurst",fo.editorConfig=null;class mo{constructor(t){this.order=zs.Normal,this.list=new oo(!0),this.list.reset(ks.createList(t.color))}initParticles(t){let e=t;const i=this.list.first.value,n=Ls(i.r,i.g,i.b);for(;e;)e.tint=n,e=e.next}updateParticle(t){t.tint=this.list.interpolate(t.agePercent)}}mo.type="color",mo.editorConfig=null;class go{constructor(t){this.order=zs.Normal;let e=t.color;"#"===e.charAt(0)?e=e.substr(1):0===e.indexOf("0x")&&(e=e.substr(2)),this.value=parseInt(e,16)}initParticles(t){let e=t;for(;e;)e.tint=this.value,e=e.next}}go.type="colorStatic",go.editorConfig=null;class _o{constructor(t){this.order=zs.Normal,this.index=0,this.textures=t.textures.map((t=>"string"==typeof t?Ms(t):t))}initParticles(t){let e=t;for(;e;)e.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),e=e.next}}_o.type="textureOrdered",_o.editorConfig=null;const yo=new ge.bR,vo=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],bo=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(vo).join("|"),"g");class wo{constructor(t){var e;if(this.order=zs.Late,t.path)if("function"==typeof t.path)this.path=t.path;else try{this.path=function(t){const e=t.match(bo);for(let t=e.length-1;t>=0;--t)vo.indexOf(e[t])>=0&&(e[t]=`Math.${e[t]}`);return t=e.join(""),new Function("x",`return ${t};`)}(t.path)}catch(t){this.path=null}else this.path=t=>t;this.list=new oo(!1),this.list.reset(ks.createList(t.speed)),this.minMult=null!==(e=t.minMult)&&void 0!==e?e:1}initParticles(t){let e=t;for(;e;){e.config.initRotation=e.rotation,e.config.initPosition?e.config.initPosition.copyFrom(e.position):e.config.initPosition=new ge.bR(e.x,e.y),e.config.movement=0;const t=Math.random()*(1-this.minMult)+this.minMult;e.config.speedMult=t,e=e.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult;t.config.movement+=i*e,yo.x=t.config.movement,yo.y=this.path(yo.x),Ns(t.config.initRotation,yo),t.position.x=t.config.initPosition.x+yo.x,t.position.y=t.config.initPosition.y+yo.y}}wo.type="movePath",wo.editorConfig=null;class So{constructor(){this.order=zs.Spawn}initParticles(t){}}So.type="spawnPoint",So.editorConfig=null;class To{constructor(t){this.order=zs.Normal,this.textures=t.textures.map((t=>"string"==typeof t?Ms(t):t))}initParticles(t){let e=t;for(;e;){const t=Math.floor(Math.random()*this.textures.length);e.texture=this.textures[t],e=e.next}}}To.type="textureRandom",To.editorConfig=null;class xo{constructor(t){this.order=zs.Normal,this.minStart=t.minStart*Ds,this.maxStart=t.maxStart*Ds,this.minSpeed=t.minSpeed*Ds,this.maxSpeed=t.maxSpeed*Ds,this.accel=t.accel*Ds}initParticles(t){let e=t;for(;e;)this.minStart===this.maxStart?e.rotation+=this.maxStart:e.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,e.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,e=e.next}updateParticle(t,e){if(this.accel){const i=t.config.rotSpeed;t.config.rotSpeed+=this.accel*e,t.rotation+=(t.config.rotSpeed+i)/2*e}else t.rotation+=t.config.rotSpeed*e}}xo.type="rotation",xo.editorConfig=null;class Eo{constructor(t){this.order=zs.Normal,this.min=t.min*Ds,this.max=t.max*Ds}initParticles(t){let e=t;for(;e;)this.min===this.max?e.rotation+=this.max:e.rotation+=Math.random()*(this.max-this.min)+this.min,e=e.next}}Eo.type="rotationStatic",Eo.editorConfig=null;class Ao{constructor(t){this.order=zs.Late+1,this.rotation=(t.rotation||0)*Ds}initParticles(t){let e=t;for(;e;)e.rotation=this.rotation,e=e.next}}Ao.type="noRotation",Ao.editorConfig=null;class Io{constructor(t){var e;this.order=zs.Normal,this.list=new oo(!1),this.list.reset(ks.createList(t.scale)),this.minMult=null!==(e=t.minMult)&&void 0!==e?e:1}initParticles(t){let e=t;for(;e;){const t=Math.random()*(1-this.minMult)+this.minMult;e.config.scaleMult=t,e.scale.x=e.scale.y=this.list.first.value*t,e=e.next}}updateParticle(t){t.scale.x=t.scale.y=this.list.interpolate(t.agePercent)*t.config.scaleMult}}Io.type="scale",Io.editorConfig=null;class Co{constructor(t){this.order=zs.Normal,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const t=Math.random()*(this.max-this.min)+this.min;e.scale.x=e.scale.y=t,e=e.next}}}Co.type="scaleStatic",Co.editorConfig=null;class Po{constructor(t){this.order=zs.Spawn;const e=Po.shapes[t.type];if(!e)throw new Error(`No shape found with type '${t.type}'`);this.shape=new e(t.data)}static registerShape(t,e){Po.shapes[e||t.type]=t}initParticles(t){let e=t;for(;e;)this.shape.getRandPos(e),e=e.next}}Po.type="spawnShape",Po.editorConfig=null,Po.shapes={},Po.registerShape(Js),Po.registerShape($s),Po.registerShape(Ks),Po.registerShape(Ks,"circle");class Ro{constructor(t){this.order=zs.Normal,this.texture="string"==typeof t.texture?Ms(t.texture):t.texture}initParticles(t){let e=t;for(;e;)e.texture=this.texture,e=e.next}}Ro.type="textureSingle",Ro.editorConfig=null;class Oo{constructor(t){var e;this.order=zs.Late,this.list=new oo(!1),this.list.reset(ks.createList(t.speed)),this.minMult=null!==(e=t.minMult)&&void 0!==e?e:1}initParticles(t){let e=t;for(;e;){const t=Math.random()*(1-this.minMult)+this.minMult;e.config.speedMult=t,e.config.velocity?e.config.velocity.set(this.list.first.value*t,0):e.config.velocity=new ge.bR(this.list.first.value*t,0),Ns(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=this.list.interpolate(t.agePercent)*t.config.speedMult,n=t.config.velocity;Fs(n),Us(n,i),t.x+=n.x*e,t.y+=n.y*e}}Oo.type="moveSpeed",Oo.editorConfig=null;class ko{constructor(t){this.order=zs.Late,this.min=t.min,this.max=t.max}initParticles(t){let e=t;for(;e;){const t=Math.random()*(this.max-this.min)+this.min;e.config.velocity?e.config.velocity.set(t,0):e.config.velocity=new ge.bR(t,0),Ns(e.rotation,e.config.velocity),e=e.next}}updateParticle(t,e){const i=t.config.velocity;t.x+=i.x*e,t.y+=i.y*e}}ko.type="moveSpeedStatic",ko.editorConfig=null;var Mo={__proto__:null,spawnShapes:Zs,editor:{__proto__:null},get BehaviorOrder(){return zs},AccelerationBehavior:Qs,AlphaBehavior:ao,StaticAlphaBehavior:ho,RandomAnimatedTextureBehavior:co,SingleAnimatedTextureBehavior:uo,BlendModeBehavior:po,BurstSpawnBehavior:fo,ColorBehavior:mo,StaticColorBehavior:go,OrderedTextureBehavior:_o,PathBehavior:wo,PointSpawnBehavior:So,RandomTextureBehavior:To,RotationBehavior:xo,StaticRotationBehavior:Eo,NoRotationBehavior:Ao,ScaleBehavior:Io,StaticScaleBehavior:Co,ShapeSpawnBehavior:Po,SingleTextureBehavior:Ro,SpeedBehavior:Oo,StaticSpeedBehavior:ko};function Do(t,e){var i,n,r,s,o,a,h,l,c,u,d,p,f,m,g,_,y,v,b,w,S;if("behaviors"in t)return t;const T={lifetime:t.lifetime,ease:t.ease,particlesPerWave:t.particlesPerWave,frequency:t.frequency,spawnChance:t.spawnChance,emitterLifetime:t.emitterLifetime,maxParticles:t.maxParticles,addAtBack:t.addAtBack,pos:t.pos,emit:t.emit,autoUpdate:t.autoUpdate,behaviors:[]};if(t.alpha)if("start"in t.alpha)if(t.alpha.start===t.alpha.end)1!==t.alpha.start&&T.behaviors.push({type:"alphaStatic",config:{alpha:t.alpha.start}});else{const e={list:[{time:0,value:t.alpha.start},{time:1,value:t.alpha.end}]};T.behaviors.push({type:"alpha",config:{alpha:e}})}else 1===t.alpha.list.length?1!==t.alpha.list[0].value&&T.behaviors.push({type:"alphaStatic",config:{alpha:t.alpha.list[0].value}}):T.behaviors.push({type:"alpha",config:{alpha:t.alpha}});if(t.acceleration&&(t.acceleration.x||t.acceleration.y)){let e,r;"start"in t.speed?(e=t.speed.start*(null!==(i=t.speed.minimumSpeedMultiplier)&&void 0!==i?i:1),r=t.speed.start):(e=t.speed.list[0].value*(null!==(n=t.minimumSpeedMultiplier)&&void 0!==n?n:1),r=t.speed.list[0].value),T.behaviors.push({type:"moveAcceleration",config:{accel:t.acceleration,minStart:e,maxStart:r,rotate:!t.noRotation,maxSpeed:t.maxSpeed}})}else if(null===(r=t.extraData)||void 0===r?void 0:r.path){let e,i;"start"in t.speed?(i=null!==(s=t.speed.minimumSpeedMultiplier)&&void 0!==s?s:1,e=t.speed.start===t.speed.end?{list:[{time:0,value:t.speed.start}]}:{list:[{time:0,value:t.speed.start},{time:1,value:t.speed.end}]}):(e=t.speed,i=null!==(o=t.minimumSpeedMultiplier)&&void 0!==o?o:1),T.behaviors.push({type:"movePath",config:{path:t.extraData.path,speed:e,minMult:i}})}else if(t.speed)if("start"in t.speed)if(t.speed.start===t.speed.end)T.behaviors.push({type:"moveSpeedStatic",config:{min:t.speed.start*(null!==(a=t.speed.minimumSpeedMultiplier)&&void 0!==a?a:1),max:t.speed.start}});else{const e={list:[{time:0,value:t.speed.start},{time:1,value:t.speed.end}]};T.behaviors.push({type:"moveSpeed",config:{speed:e,minMult:t.speed.minimumSpeedMultiplier}})}else 1===t.speed.list.length?T.behaviors.push({type:"moveSpeedStatic",config:{min:t.speed.list[0].value*(null!==(h=t.minimumSpeedMultiplier)&&void 0!==h?h:1),max:t.speed.list[0].value}}):T.behaviors.push({type:"moveSpeed",config:{speed:t.speed,minMult:null!==(l=t.minimumSpeedMultiplier)&&void 0!==l?l:1}});if(t.scale)if("start"in t.scale){const e=null!==(c=t.scale.minimumScaleMultiplier)&&void 0!==c?c:1;if(t.scale.start===t.scale.end)T.behaviors.push({type:"scaleStatic",config:{min:t.scale.start*e,max:t.scale.start}});else{const i={list:[{time:0,value:t.scale.start},{time:1,value:t.scale.end}]};T.behaviors.push({type:"scale",config:{scale:i,minMult:e}})}}else if(1===t.scale.list.length){const e=null!==(u=t.minimumScaleMultiplier)&&void 0!==u?u:1,i=t.scale.list[0].value;T.behaviors.push({type:"scaleStatic",config:{min:i*e,max:i}})}else T.behaviors.push({type:"scale",config:{scale:t.scale,minMult:null!==(d=t.minimumScaleMultiplier)&&void 0!==d?d:1}});if(t.color)if("start"in t.color)if(t.color.start===t.color.end)"ffffff"!==t.color.start&&T.behaviors.push({type:"colorStatic",config:{color:t.color.start}});else{const e={list:[{time:0,value:t.color.start},{time:1,value:t.color.end}]};T.behaviors.push({type:"color",config:{color:e}})}else 1===t.color.list.length?"ffffff"!==t.color.list[0].value&&T.behaviors.push({type:"colorStatic",config:{color:t.color.list[0].value}}):T.behaviors.push({type:"color",config:{color:t.color}});if(t.rotationAcceleration||(null===(p=t.rotationSpeed)||void 0===p?void 0:p.min)||(null===(f=t.rotationSpeed)||void 0===f?void 0:f.max)?T.behaviors.push({type:"rotation",config:{accel:t.rotationAcceleration||0,minSpeed:(null===(m=t.rotationSpeed)||void 0===m?void 0:m.min)||0,maxSpeed:(null===(g=t.rotationSpeed)||void 0===g?void 0:g.max)||0,minStart:(null===(_=t.startRotation)||void 0===_?void 0:_.min)||0,maxStart:(null===(y=t.startRotation)||void 0===y?void 0:y.max)||0}}):((null===(v=t.startRotation)||void 0===v?void 0:v.min)||(null===(b=t.startRotation)||void 0===b?void 0:b.max))&&T.behaviors.push({type:"rotationStatic",config:{min:(null===(w=t.startRotation)||void 0===w?void 0:w.min)||0,max:(null===(S=t.startRotation)||void 0===S?void 0:S.max)||0}}),t.noRotation&&T.behaviors.push({type:"noRotation",config:{}}),t.blendMode&&"normal"!==t.blendMode&&T.behaviors.push({type:"blendMode",config:{blendMode:t.blendMode}}),Array.isArray(e)&&"string"!=typeof e[0]&&"framerate"in e[0]){for(let t=0;t<e.length;++t)"matchLife"===e[t].framerate&&(e[t].framerate=-1);T.behaviors.push({type:"animatedRandom",config:{anims:e}})}else"string"!=typeof e&&"framerate"in e?("matchLife"===e.framerate&&(e.framerate=-1),T.behaviors.push({type:"animatedSingle",config:{anim:e}})):t.orderedArt&&Array.isArray(e)?T.behaviors.push({type:"textureOrdered",config:{textures:e}}):Array.isArray(e)?T.behaviors.push({type:"textureRandom",config:{textures:e}}):T.behaviors.push({type:"textureSingle",config:{texture:e}});if("burst"===t.spawnType)T.behaviors.push({type:"spawnBurst",config:{start:t.angleStart||0,spacing:t.particleSpacing,distance:0}});else if("point"===t.spawnType)T.behaviors.push({type:"spawnPoint",config:{}});else{let e;"ring"===t.spawnType?e={type:"torus",data:{x:t.spawnCircle.x,y:t.spawnCircle.y,radius:t.spawnCircle.r,innerRadius:t.spawnCircle.minR,affectRotation:!0}}:"circle"===t.spawnType?e={type:"torus",data:{x:t.spawnCircle.x,y:t.spawnCircle.y,radius:t.spawnCircle.r,innerRadius:0,affectRotation:!1}}:"rect"===t.spawnType?e={type:"rect",data:t.spawnRect}:"polygonalChain"===t.spawnType&&(e={type:"polygonalChain",data:t.spawnPolygon}),e&&T.behaviors.push({type:"spawnShape",config:e})}return T}class No extends _e.mc{constructor(){super(...arguments),this._firstChild=null,this._lastChild=null,this._childCount=0}get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}get childCount(){return this._childCount}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this._lastChild?(this._lastChild.nextChild=e,e.prevChild=this._lastChild,this._lastChild=e):this._firstChild=this._lastChild=e,++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",e,this,this._childCount),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this._childCount)throw new Error(`addChildAt: The index ${e} supplied is out of bounds ${this._childCount}`);t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1;const i=t;if(this._firstChild)if(0===e)this._firstChild.prevChild=i,i.nextChild=this._firstChild,this._firstChild=i;else if(e===this._childCount)this._lastChild.nextChild=i,i.prevChild=this._lastChild,this._lastChild=i;else{let t=0,n=this._firstChild;for(;t<e;)n=n.nextChild,++t;n.prevChild.nextChild=i,i.prevChild=n.prevChild,i.nextChild=n,n.prevChild=i}else this._firstChild=this._lastChild=i;return++this._childCount,this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}addChildBelow(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.prevChild.nextChild=t,t.prevChild=e.prevChild,t.nextChild=e,e.prevChild=t,this._firstChild===e&&(this._firstChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t}addChildAbove(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.nextChild.prevChild=t,t.nextChild=e.nextChild,t.prevChild=e,e.nextChild=t,this._lastChild===e&&(this._lastChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t}swapChildren(t,e){if(t===e||t.parent!==this||e.parent!==this)return;const{prevChild:i,nextChild:n}=t;t.prevChild=e.prevChild,t.nextChild=e.nextChild,e.prevChild=i,e.nextChild=n,this._firstChild===t?this._firstChild=e:this._firstChild===e&&(this._firstChild=t),this._lastChild===t?this._lastChild=e:this._lastChild===e&&(this._lastChild=t),this.onChildrenChange()}getChildIndex(t){let e=0,i=this._firstChild;for(;i&&i!==t;)i=i.nextChild,++e;if(!i)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this._childCount)throw new Error(`The index ${e} supplied is out of bounds ${this._childCount}`);if(t.parent!==this)throw new Error("The supplied DisplayObject must be a child of the caller");if(t.nextChild&&(t.nextChild.prevChild=t.prevChild),t.prevChild&&(t.prevChild.nextChild=t.nextChild),this._firstChild===t&&(this._firstChild=t.nextChild),this._lastChild===t&&(this._lastChild=t.prevChild),t.nextChild=null,t.prevChild=null,this._firstChild)if(0===e)this._firstChild.prevChild=t,t.nextChild=this._firstChild,this._firstChild=t;else if(e===this._childCount)this._lastChild.nextChild=t,t.prevChild=this._lastChild,this._lastChild=t;else{let i=0,n=this._firstChild;for(;i<e;)n=n.nextChild,++i;n.prevChild.nextChild=t,t.prevChild=n.prevChild,t.nextChild=n,n.prevChild=t}else this._firstChild=this._lastChild=t;this.onChildrenChange(e)}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0];if(e.parent!==this)return null;e.parent=null,e.transform._parentID=-1,e.nextChild&&(e.nextChild.prevChild=e.prevChild),e.prevChild&&(e.prevChild.nextChild=e.nextChild),this._firstChild===e&&(this._firstChild=e.nextChild),this._lastChild===e&&(this._lastChild=e.prevChild),e.nextChild=null,e.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(),e.emit("removed",this),this.emit("childRemoved",e,this)}return t[0]}getChildAt(t){if(t<0||t>=this._childCount)throw new Error(`getChildAt: Index (${t}) does not exist.`);if(0===t)return this._firstChild;if(t===this._childCount)return this._lastChild;let e=0,i=this._firstChild;for(;e<t;)i=i.nextChild,++e;return i}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,e.nextChild&&(e.nextChild.prevChild=e.prevChild),e.prevChild&&(e.prevChild.nextChild=e.nextChild),this._firstChild===e&&(this._firstChild=e.nextChild),this._lastChild===e&&(this._lastChild=e.prevChild),e.nextChild=null,e.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this._childCount){const i=t;0===e&&this._childCount>0&&(e=this._childCount);const n=e,r=n-i;if(r>0&&r<=n){const e=[];let r=this._firstChild;for(let t=0;t<=n&&r;++t,r=r.nextChild)t>=i&&e.push(r);const s=e[0].prevChild,o=e[e.length-1].nextChild;o?o.prevChild=s:this._lastChild=s,s?s.nextChild=o:this._firstChild=o;for(let t=0;t<e.length;++t)e[t].parent=null,e[t].transform&&(e[t].transform._parentID=-1),e[t].nextChild=null,e[t].prevChild=null;this._boundsID++,this.onChildrenChange(t);for(let t=0;t<e.length;++t)e[t].emit("removed",this),this.emit("childRemoved",e[t],this,t);return e}if(0===r&&0===this._childCount)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}updateTransform(){let t,e;for(this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,t=this._firstChild;t;t=e)e=t.nextChild,t.visible&&t.updateTransform()}calculateBounds(){let t,e;for(this._bounds.clear(),this._calculateBounds(),t=this._firstChild;t;t=e)if(e=t.nextChild,t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.maskObject||t._mask;e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds);this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=_e.q9.prototype.getLocalBounds.call(this,t);if(!e){let t,e;for(t=this._firstChild;t;t=e)e=t.nextChild,t.visible&&t.updateTransform()}return i}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{let e,i;for(this._render(t),e=this._firstChild;e;e=i)i=e.nextChild,e.render(t)}}renderAdvanced(t){t.batch.flush();const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}let n,r;for(i&&t.mask.push(this,this._mask),this._render(t),n=this._firstChild;n;n=r)r=n.nextChild,n.render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()}renderCanvas(t){if(!this.visible||this.worldAlpha<=0||!this.renderable)return;let e,i;for(this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}qs.registerBehavior(Qs),qs.registerBehavior(ao),qs.registerBehavior(ho),qs.registerBehavior(co),qs.registerBehavior(uo),qs.registerBehavior(po),qs.registerBehavior(fo),qs.registerBehavior(mo),qs.registerBehavior(go),qs.registerBehavior(_o),qs.registerBehavior(wo),qs.registerBehavior(So),qs.registerBehavior(To),qs.registerBehavior(xo),qs.registerBehavior(Eo),qs.registerBehavior(Ao),qs.registerBehavior(Io),qs.registerBehavior(Co),qs.registerBehavior(Po),qs.registerBehavior(Ro),qs.registerBehavior(Oo),qs.registerBehavior(ko);class Lo{static type="trail";static editorConfig=null;order=Mo.BehaviorOrder.Late;_trailConfig={};constructor(t){this._trailConfig={...t}}initParticles(t){let e=t;for(;e;)e.trail=new qs(e.parent,this._trailConfig),e=e.next}updateParticle(t,e){t.trail.updateOwnerPos(t.position.x,t.position.y),t.trail.emitNow()}}qs.registerBehavior(Lo);const Bo={addAtBack:!0,autoUpdate:!0,emit:!1,frequency:.01,emitterLifetime:.1,spawnChance:1,particlesPerWave:10,maxParticles:20,lifetime:{min:.5,max:.7},pos:{x:0,y:0},behaviors:[{type:"textureSingle",config:{texture:"particles/star"}},{type:"colorStatic",config:{color:"#FFFF00"}},{type:"scaleStatic",config:{min:.1,max:.1}},{type:"moveSpeed",config:{speed:{list:[{value:150,time:0},{value:30,time:1}]}}},{type:"alpha",config:{alpha:{list:[{value:1,time:0},{value:.5,time:1}]}}},{type:"rotation",config:{minStart:0,maxStart:360,minSpeed:30,maxSpeed:45,accel:20}},{type:"moveAcceleration",config:{accel:{x:0,y:100},minStart:10,maxStart:10,rotate:!1}},{type:"trail",config:{addAtBack:!0,autoUpdate:!0,emit:!1,frequency:.1,emitterLifetime:.1,spawnChance:1,particlesPerWave:1,maxParticles:100,lifetime:{min:.4,max:.4},pos:{x:0,y:0},behaviors:[{type:"textureSingle",config:{texture:"particles/smoke"}},{type:"colorStatic",config:{color:"#FFFF99"}},{type:"scale",config:{scale:{list:[{value:.07,time:0},{value:0,time:1}]}}},{type:"alpha",config:{alpha:{list:[{value:.5,time:0},{value:0,time:1}]}}}]}}]},Fo={addAtBack:!0,autoUpdate:!0,emit:!1,frequency:.01,emitterLifetime:.1,spawnChance:1,particlesPerWave:50,maxParticles:50,lifetime:{min:3,max:3},pos:{x:0,y:0},behaviors:[{type:"textureSingle",config:{texture:"ico-gold"}},{type:"alpha",config:{alpha:{list:[{value:1,time:0},{value:.5,time:1}]},minMult:.8}},{type:"scale",config:{scale:{list:[{value:.1,time:0},{value:2,time:1}]},minMult:.5}},{type:"rotation",config:{minStart:-60,maxStart:-120,minSpeed:90,maxSpeed:180,accel:90}},{type:"moveAcceleration",config:{accel:{x:0,y:500},minStart:0,maxStart:100}},{type:"moveSpeedStatic",config:{min:100,max:500}}]},Uo={addAtBack:!0,autoUpdate:!0,emit:!1,frequency:.008,emitterLifetime:.1,spawnChance:1,particlesPerWave:20,maxParticles:1e3,lifetime:{min:.3,max:1},pos:{x:0,y:0},behaviors:[{type:"textureSingle",config:{texture:"particles/star"}},{type:"alpha",config:{alpha:{list:[{value:1,time:0},{value:.1,time:1}]}}},{type:"scale",config:{scale:{list:[{value:.1,time:0},{value:.5,time:.3},{value:0,time:1}]},minMult:.7}},{type:"color",config:{color:{list:[{value:"#FFFF00",time:0},{value:"#FFFFFE",time:.7},{value:"#FFFFFF",time:1}]}}},{type:"moveSpeed",config:{speed:{list:[{value:500,time:0},{value:100,time:1}]},minMult:.3}},{type:"rotation",config:{minStart:-180,maxStart:180,minSpeed:30,maxSpeed:45,accel:20}}]},Go={addAtBack:!0,autoUpdate:!0,emit:!1,frequency:.01,emitterLifetime:.1,spawnChance:1,particlesPerWave:50,maxParticles:50,lifetime:{min:3,max:3},pos:{x:0,y:0},behaviors:[{type:"textureSingle",config:{texture:"ico-diamond"}},{type:"alpha",config:{alpha:{list:[{value:1,time:0},{value:.5,time:1}]},minMult:.8}},{type:"scale",config:{scale:{list:[{value:.1,time:0},{value:2,time:1}]},minMult:.5}},{type:"rotation",config:{minStart:-60,maxStart:-120,minSpeed:90,maxSpeed:180,accel:90}},{type:"moveAcceleration",config:{accel:{x:0,y:500},minStart:0,maxStart:100}},{type:"moveSpeedStatic",config:{min:100,max:500}}]},jo={addAtBack:!0,autoUpdate:!0,emit:!1,frequency:.008,emitterLifetime:.1,spawnChance:1,particlesPerWave:20,maxParticles:1e3,lifetime:{min:.3,max:1},pos:{x:0,y:0},behaviors:[{type:"textureSingle",config:{texture:"particles/star"}},{type:"alpha",config:{alpha:{list:[{value:1,time:0},{value:.1,time:1}]}}},{type:"scale",config:{scale:{list:[{value:.1,time:0},{value:.5,time:.3},{value:0,time:1}]},minMult:.7}},{type:"color",config:{color:{list:[{value:"#FFFFFF",time:0},{value:"#00FF42",time:.5},{value:"#00FF42",time:1}]}}},{type:"moveSpeed",config:{speed:{list:[{value:500,time:0},{value:100,time:1}]},minMult:.3}},{type:"rotation",config:{minStart:-180,maxStart:180,minSpeed:30,maxSpeed:45,accel:20}}]},Ho={alpha:{start:.8,end:0},scale:{start:2,end:0,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#c1c1c1"},speed:{start:200,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:50,max:100},lifetime:{min:.4,max:.6},blendMode:"normal",frequency:.001,emitterLifetime:.3,maxParticles:4,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},zo={alpha:{start:1,end:1},scale:{start:.7,end:0,minimumScaleMultiplier:1},color:{start:"#db7f7f",end:"#e39494"},speed:{start:200,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:50,max:100},lifetime:{min:.4,max:.6},blendMode:"normal",frequency:.001,emitterLifetime:.3,maxParticles:4,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},Wo={alpha:{start:1,end:0},scale:{start:1,end:1,minimumScaleMultiplier:1},color:{start:"#ccebed",end:"#85e6f5"},speed:{start:0,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.008,emitterLifetime:.31,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-100,y:-100,w:200,h:200}};var Vo=i(2494);async function Xo(t){return new Promise((e=>t.playOnceAndDestroy(e)))}window.particles=n,qs.registerBehavior(Lo);class Yo{Init(t){this.container=t}hideEffect(t,e=.3){let i=this.container.children.filter((e=>e.type===t));if(e)Jt.gsap.timeline().to(i,{alpha:0,duration:e});else for(let t of i)t.visible=!1}async creatureMerge(t,e){let i=GameManager.gameView.vfxContainer;if(!this.container)return;let n=i.addChild(new Vo.Container);n.type="merge",n.scale.set(Ko.app.renderer.resolution),n.position.set(t,e);let r=[Xo(new qs(n,Bo))];this.creatureMergeTapChallengeProgress(t,e),await Promise.all(r),i.removeChild(n)}async creatureMergeTapChallengeProgress(t,e){if(!Ko.UI.moneyButtons.tapChallengeMergeProgress.Active)return;let i=Ko.app.renderer.resolution,n=Ko.UI.moneyButtons.tapChallengeMergeProgress.getBounds();n.x*=i,n.y*=i,n.width*=i,n.height*=i;const r=async t=>new Promise((e=>{let i=.05*n.width,r=n.left+n.width*Ko.UI.moneyButtons.tapChallengeMergeProgress.progress-i;r=Math.max(0,Math.min(n.width-2*i,r))+Math.random()*i*2,Jt.gsap.timeline().delay(.3*Math.random()).timeScale(.8+.4*Math.random()).to(t,{x:r,rotation:2*Math.PI,duration:1},0).to(t,{y:1.1*t.y,duration:.2},0).to(t,{y:n.bottom,duration:.8},.2).to(t,{pixi:{scale:.5},duration:.2}).to(t,{pixi:{scale:0},duration:.2}).eventCallback("onComplete",e)}));let s=this.container.addChild(new Vo.Container),o=[];s.type="merge-progress";for(let i=0;i<8;i++){let i=s.addChild(new qt.M("particles/shiny-star"));i.tint=13434777,i.scale.set(.2),i.position.set(t,e),o.push(r(i))}await Promise.all(o),this.container.removeChild(s)}async tapChallengeTap(t,e){if(!this.container)return;let i=this.container.addChild(new Vo.Container);i.type="tap-challenge",i.scale.set(Ko.app.renderer.resolution),i.position.set(t,e);let n=[Xo(new qs(i,Bo))];this.tapChallengeTapProgress(t,e),await Promise.all(n),this.container.removeChild(i)}async tapChallengeTapProgress(t,e){if(!Ko.UI.moneyButtons.tapChallengeMergeProgress.Active)return;let i=Ko.app.renderer.resolution,n=Ko.UI.tapChallenge._progressBar.getBounds();n.x*=i,n.y*=i,n.width*=i,n.height*=i;let r=this.container.addChild(new Vo.Container);r.type="tap-progress";let s=r.addChild(new qt.M("particles/shiny-star"));s.tint=16776960,s.scale.set(.2),s.position.set(t,e);let o=.05*n.width;t=n.left+.1*n.width+n.width*Ko.UI.tapChallenge._progressBar.progress-o,t=Math.max(0,Math.min(n.width-2*o,t))+Math.random()*o*2,Jt.gsap.timeline().delay(.3*Math.random()).timeScale(.8+.4*Math.random()).to(s,{x:t,rotation:2*Math.PI,duration:1},0).to(s,{y:1.1*s.y,duration:.2},0).to(s,{y:n.bottom,duration:.8},.2).to(s,{pixi:{scale:.5},duration:.2}).to(s,{pixi:{scale:0},duration:.2}).eventCallback("onComplete",(()=>this.container.removeChild(r)))}async slotCoins(t=50){let e=Ko.UI.slots.vfxLayer.addChild(new Vo.Container);e.scale.set(Ko.app.renderer.resolution),e.position.set(.5*Ko.app.viewport.width,.5*Ko.app.viewport.height),e.type="slot-coins";let i=[Xo(new qs(e,{...Uo,particlesPerWave:Math.max(1,Math.min(100,~~(t/2)))})),Xo(new qs(e,{...Fo,particlesPerWave:Math.max(1,Math.min(100,~~t))}))];await Promise.all(i),Ko.UI.slots.vfxLayer.removeChild(e)}async slotDiamonds(t=2){let e=Ko.UI.slots.vfxLayer.addChild(new Vo.Container);e.scale.set(Ko.app.renderer.resolution),e.position.set(.5*Ko.app.viewport.width,.5*Ko.app.viewport.height),e.type="slot-diamonds";let i=[Xo(new qs(e,{...jo,particlesPerWave:Math.max(1,Math.min(100,~~(t/2)))})),Xo(new qs(e,{...Go,particlesPerWave:Math.max(1,Math.min(100,~~t))}))];await Promise.all(i),Ko.UI.slots.vfxLayer.removeChild(e)}async slotSpins(t){let e=Ko.UI.slots.vfxLayer.addChild(new Vo.Container);e.scale.set(Ko.app.renderer.resolution),e.position.set(.5*Ko.app.viewport.width,.5*Ko.app.viewport.height),e.type="slot-spins";let i=e.addChild(new qt.M("particles/sparks-hit")),n=e.addChild(new qt.M("slots/item-spin"));[i,n].forEach((t=>{t.scale.set(0),t.alpha=0}));const r=220;let s=new Vo.Rectangle(0,0,r,r),o=s.clone().pad(-44),a=Math.min(s.width/i.texture.width,s.height/i.texture.height),h=Math.min(o.width/n.texture.width,o.height/n.texture.height),l=e.toLocal(t.spinsScale.getGlobalPosition());Jt.gsap.timeline().to(i,{rotation:2*Math.PI,duration:2},0).to(i,{pixi:{scale:a},alpha:1,duration:1},0).to(n,{pixi:{scale:h},alpha:1,duration:1},0).to(n,{y:l.y,pixi:{scale:.3*h},alpha:0,duration:.5,onStart:()=>i.visible=!1,onComplete:()=>(async()=>{let t=e.addChild(new qt.M(""));t.y=l.y,t.scale.set(Math.min(r/Wo.spawnRect.w,r/Wo.spawnRect.h));let i={...Wo,scale:{start:.1,end:.1,minimumScaleMultiplier:1}},n={...Wo,scale:{start:1,end:0,minimumScaleMultiplier:1},maxParticles:1,spawnType:"point",startRotation:{min:10,max:10}};await Promise.all([Xo(new qs(t,Do(i,"particles/shiny-star"))),Xo(new qs(t,Do(n,"particles/shiny-star")))]),Ko.UI.slots.vfxLayer.removeChild(e)})()},1.5)}async slotCreature(t){Ko.Audio.Play("SpinWinComboCreature");let e=Ko.UI.slots.vfxLayer.addChild(new Vo.Container);e.scale.set(Ko.app.renderer.resolution),e.position.set(.5*Ko.app.viewport.width,.5*Ko.app.viewport.height),e.type="slot-creature";let i=e.addChild(new qt.M("particles/sparks-hit")),n=e.addChild(new qt.M(`creatures/${t}`)),r=e.addChild(new qt.M("box"));[i,n,r].forEach((t=>{t.scale.set(0),t.alpha=0}));const s=220;let o=new Vo.Rectangle(0,0,s,s),a=o.clone().pad(-44),h=o.clone().pad(-44),l=Math.min(o.width/i.texture.width,o.height/i.texture.height),c=Math.min(a.width/n.texture.width,a.height/n.texture.height),u=Math.min(h.width/r.texture.width,h.height/r.texture.height);Jt.gsap.timeline().to(i,{rotation:Math.PI,pixi:{scale:l},alpha:1,duration:1},0).to(n,{pixi:{scale:c},alpha:1,duration:1,onComplete:()=>(()=>{i.visible=!1,n.visible=!1,r.scale.set(u),r.alpha=1;let t=Do(Ho,"particles/smoke");Xo(new qs(e,t)),t=Do(zo,"particles/star"),Xo(new qs(e,t))})()},0).to(r,{x:Ko.app.viewport.width,y:.2*-Ko.app.viewport.height,duration:1},1.8).eventCallback("onComplete",(()=>Ko.UI.slots.vfxLayer.removeChild(e)))}async newCreatureDiamond({x:t,y:e,scale:i}=Ko.UI.newCreature.diamondGlobalParams){let n=Ko.UI.moneyButtons.hardBtn.diamondGlobalParams,r=this.container.addChild(new qt.M("ico-diamond"));r.type="creature-diamond",r.scale.set(i),r.position.set(t,e),Jt.gsap.timeline().set(r,{x:t,y:e,pixi:{scale:i}}).to(r,{x:n.x,y:n.y,pixi:{scale:1.2*n.scale},duration:.8}).to(r,{pixi:{scale:n.scale},duration:.2}).eventCallback("onComplete",(()=>this.container.removeChild(r)))}async newCreatureNextEpoch(t,e){if(!e.nextEpochs||!e.nextEpochs.length)return;let i=Ko.UI.game.rightPanel.epochsList.items.find((t=>t.epoch.id===e.id));if(!i||!i.activeInHierarchy)return;let n=this.container.addChild(new qt.M(`creatures/${e.creatures[0]}`));n.type="creature-epoch";let{a:r,tx:s,ty:o}=t.sprite.transform.worldTransform;r*=Ko.app.renderer.resolution,s*=Ko.app.renderer.resolution,o*=Ko.app.renderer.resolution,n.scale.set(0),n.alpha=0,n.position.set(s,o);let a=i.getBounds(),h=(a.x+.5*a.width)*Ko.app.renderer.resolution,l=(a.y+.5*a.height)*Ko.app.renderer.resolution;Jt.gsap.timeline().delay(.3).to(n,{pixi:{scale:r,alpha:1},duration:.5},0).to(n,{pixi:{scale:1.5*r},duration:.3},">").to(n,{pixi:{scale:.1*r},duration:.6},">").to(n,{pixi:{alpha:0},duration:.1},">").to(n,{x:h,duration:.9,ease:"sine.out"},.5).to(n,{y:l,duration:.9,ease:"sine.in"},.5).eventCallback("onComplete",(()=>{this.container.removeChild(n)}))}async tapChallengeStartBanner(){let t=Vo.utils.TextureCache["offers/ribbon"];if(!t)return;let{width:e,height:i}=Ko.app.viewport,n=.8*Ko.app.viewport.width,r=n*t.height/t.width,s=new Vo.Rectangle(.5*(e-n),.25*i,n,r),o=new qt.M("offers/ribbon");o.fitRect(s),o.pivot.y=.25*i+s.height,this.container.addChild(o);let a=o.addChild(new $t.g(Ko.Localizator.Get("tap_challenge_title_info")));s=o.getLocalBounds(),s.height*=.75,s.pad(.2*-s.width,0),a.fitLayout(s),Jt.gsap.timeline().set(o,{pixi:{pivotY:.5*i}},0).to(o,{pixi:{pivotY:0},duration:.5,ease:"back.out(1.7)"},0).to(o,{pixi:{pivotY:.5*i},duration:.5,ease:"back.in(2.7)"},"+=0.5").eventCallback("onComplete",(()=>{this.container.removeChild(o)}))}}var qo=i(2494);class $o extends T.p{Awake(){super.Awake()}async Init(t){this.Initialized=this.Initialized||!1,this.app=t,this.Localizator=new Pt,this.Localizator.Init(this.app.loader.resources.LOCALIZATION.data),this.Auth=new Dt,this.Store=new Gt,this.Audio=r.di.get("AudioManager"),this.Time=new Ot,this.Timers=new kt,this.Boosters=new Rt,this.Ads=r.di.get("AdsProviderCommon"),this.Analytics=new Et,this.Notifications=new xt,this.Vibro=new gt,this.Player=new nt,this.GameData=new E,this.LocalSettings=new Xt,this.UI=new Cs,this.VFX=new Yo,this.savePlayerDataTimer=0,this.savePlayerDataDelta=60,this._waitingCoroutines=[],this.onPlayerDataChanged=this.onPlayerDataChanged.bind(this),this.tick=this.tick.bind(this),await this.GameData.Init(),await this.Auth.LoadLocal(),await this.Time.Init(),await this.UI.Init(),await this.Store.Init(),await this.Audio.Init(),await this.Timers.Init(),await this.Boosters.Init(),await this.Ads.Init(),this.Initialized||(this.Player.on("Changed",this.onPlayerDataChanged),Zt.T.PAUSE_MANAGAMENT_DIRECTLY_ALLOWED&&document.addEventListener("visibilitychange",(()=>{"visible"!==document.visibilityState&&this.SetPause(!0)}))),this.Initialized=!0,this.Player.emit("Changed"),this.Auth.once("AuthComplete",this.onAuthComplete.bind(this))}SetPause(t,e=!1){this.Initialized&&(this.app.paused=!!t,this.Audio.SetMuted(!!t),t?(e||this.UI.pausePopup.Show(),Jt.gsap.globalTimeline.pause()):(this.UI.pausePopup.Hide(),Jt.gsap.globalTimeline.resume()))}Authenticate(){this.Auth.Authenticate()}tick(t){for(let e=this._waitingCoroutines.length-1;e>=0;e--)if(this._waitingCoroutines[e].seconds-=t,this._waitingCoroutines[e].seconds<=0){let{action:t}=this._waitingCoroutines[e];this._waitingCoroutines.splice(e,1),t()}this.savePlayerDataTimer-=t,this.savePlayerDataTimer<=0&&(this.Auth.SaveLocal(),this.savePlayerDataTimer=this.savePlayerDataDelta),this.Timers.Update(),this.UI.Update(),this.Player.EmitOnChanged(),this.emit("Updated")}WaitBefore(t,e){this._waitingCoroutines.push({seconds:t,action:e})}DeleteAllPlayerPrefs(){b.g.DeleteKey("wuyfn283rtycn83etfc3rt4c"),b.g.DeleteKey("ueicyn5784t35yc83457cty"),b.g.DeleteKey("ruy3n874xz3948rymx34r"),b.g.DeleteKey("o54iubym4u59846vm345"),b.g.DeleteKey("43v89netyc8nert3cn834crt"),b.g.DeleteKey("eruycberuwtfxb832tb46tr384"),b.g.DeleteKey("starterpack"),b.g.DeleteKey("gdpr"),b.g.DeleteKey("eruicty8n574t6yvn34yxt23"),b.g.DeleteKey("uewytn86b382txr7b2z23ex23"),b.g.DeleteKey("vippopup"),b.g.DeleteKey("timeOfLastBubbleSpawn"),b.g.DeleteKey("timeOfLastBubbleChargeSpawn"),b.g.DeleteKey("ruetvhnruivghrnite"),b.g.DeleteKey("cr2tbct34bc72tbx32dx56v3r"),b.g.DeleteKey("2ctynyv5vb4n572c4334"),b.g.DeleteKey("tutorPressDropPod"),b.g.DeleteKey("difygc34ne98rtycnerfcefcr1"),b.g.DeleteKey("difygc34ne98rtycnerfcefcr2"),b.g.DeleteKey("difygc34ne98rtycnerfcefcr3"),b.g.DeleteKey("difygc34ne98rtycnerfcefcr4"),b.g.DeleteKey("difygc34ne98rtycnerfcefcr5"),b.g.DeleteKey("difygc34ne98rtycnerfcefcr6");for(let t of this.GameData.Planets.planets)b.g.DeleteKey("timeOfLastBubbleSpawn"+t.id)}onPlayerDataChanged(){this.Auth.SaveLocal()}onAuthComplete(t){this.Auth.off("AuthComplete",this.onAuthComplete),this.Time.Init()}onGameSceneLoaded(){this.VFX.Init(this.app.vfx),this.UI.SetState(y.Su.Game),this.Initialized=!0,this.Audio.PlayLobbyTheme(),this.UI.moneyBox.Check(),this.UI.vipDailyReward.Check(),this.WaitBefore(2,(()=>{this.UI.vip.ShowAgressive()})),this.UI.gdpr.Trigger(),this.Auth.SaveLocal()}OnApplicationQuit(){this.Player.Initialized&&this.Auth.SaveLocal()}OnApplicationPause(t){this.Player.Initialized&&this.Auth.SaveLocal()}async Reset(){this.SetPause(!0,!0),await b.g.Reset(),await this.Auth.Reset(),await this.Store.Reset(),await this.Audio.Reset(),this.app&&(this.app.destroy(!0),this.app=window.app=null),this.Initialized=void 0,qo.utils.clearTextureCache();let t=document.createElement("canvas");t.setAttribute("id",r.CANVAS_ID),document.getElementById("game-root").appendChild(t);const{Application:e}=await Promise.all([i.e(368),i.e(375)]).then(i.bind(i,7375));this.app=window.app=e.create(),await this.app.load(),St.g.reset(),await this.app.run(),this.UI.settings.hideResetBtn(),this.SetPause(!1)}}const Ko=new $o},3795:(t,e,i)=>{"use strict";i.d(e,{GameManager:()=>N,$:()=>M});var n=i(5603),r=i(792),s=i.n(r);class o extends(s()){creatureId=0;creatureData;epoch;Init(t,e){this.creatureId=t,this.epoch=e,this.creatureData=n.Core.GameData.Creatures.Get(t)}RemoveCreature(){this.epoch.RemoveCreature(this),this.emit("CreatureRemoved")}}class a{gameController;epochId=0;epochData;bubblesNumber=0;creatures=[];get EnoughSpaceForSpawn(){return this.creatures.length+this.bubblesNumber<16}IsEnoughSpaceForMerge(){return this.creatures.length+this.bubblesNumber-2<16}Init(t,e){this.gameController=e,this.creatures=[],this.epochId=t,this.epochData=n.Core.GameData.Epochs.GetById(t)}ClearAll(){for(;this.bubblesNumber>0;)this.DespawnBubble();for(let t=this.creatures.length-1;t>=0;t--)this.creatures[t].RemoveCreature()}SpawnBubble(){return!!this.EnoughSpaceForSpawn&&(this.bubblesNumber++,N.Prespawn||n.Core.Player.PlanetsSave.AddBubble(),!0)}DespawnBubble(){this.bubblesNumber>0&&(this.bubblesNumber--,N.Prespawn||n.Core.Player.PlanetsSave.RemoveBubble())}GetMoneySoftSpeed(){let t=0n;for(let e of this.creatures)t+=BigInt(~~e.creatureData.GetSoftPerSecond());return t}AddCreature(t,e){if(this.EnoughSpaceForSpawn||!e){let e=new o;return e.Init(t,this),this.creatures.push(e),N.Prespawn||n.Core.Player.PlanetsSave.CurrentPlanet.AddCreature(t),e}return null}RemoveCreature(t){let e=this.creatures.indexOf(t);e>=0&&this.creatures.splice(e,1),this.gameController.OnCreatureRemoved(),N.Prespawn||n.Core.Player.PlanetsSave.RemoveCreature(t.creatureId)}}var h=i(170);class l extends(s()){epochById=new Map;epochsList=[];MoneySoftSpeed=0n;MoneySoftSpeedStr="0";Init(){this.onPlayerChanged=this.onPlayerChanged.bind(this);let t=n.Core.GameData.Epochs.epochs.length;this.epochById=new Map,this.epochsList=[];for(let e=0;e<t;e++){let t=new a;t.Init(n.Core.GameData.Epochs.epochs[e].id,this),this.epochById.set(t.epochId,t),this.epochsList.push(t)}n.Core.Player.on("Changed",this.onPlayerChanged)}ClearAll(){for(let t of this.epochsList)t.ClearAll()}onPlayerChanged(){n.Core.Player.Initialized&&this.updateMoneySoftSpeed()}updateMoneySoftSpeed(){this.MoneySoftSpeed=0n;for(let t of this.epochsList)this.MoneySoftSpeed+=t.GetMoneySoftSpeed();n.Core.Boosters.IsIncome2Active?this.MoneySoftSpeed*=4n:n.Core.Boosters.IsIncomeActive&&(this.MoneySoftSpeed*=2n),this.MoneySoftSpeedStr=this.MoneySoftSpeed.toString(),this.emit("MoneySoftSpeedUpdated")}EnoughSpaceForCreature(t,e){let i=n.Core.GameData.Epochs.GetByCreatureId(e),r=n.Core.GameData.Epochs.GetByCreatureId(t),s=this.epochById.get(r.id);return r.id==i.id||s.EnoughSpaceForSpawn}addCreature(t,e){let i=n.Core.GameData.Epochs.GetByCreatureId(t),r=this.epochById.get(i.id).AddCreature(t,e);return r&&this.updateMoneySoftSpeed(),r}AddCreatureFromBubble(t){this.epochById.get(1).DespawnBubble();let e=n.Core.Player.PlanetsSave.GetUpgradeProgress(h.Tq.BubbleCreature),i=n.Core.GameData.Upgrades.UpgradeByType(h.Tq.BubbleCreature).TotalValue(e.upgradeIndex),r=n.Core.GameData.Epochs.GetById(1).creatures[i],s=this.addCreature(r,!1);s&&N.gameView.SpawnCreature(s,t,!1)}AddCreature(t,e,i,r,s){let o=this.addCreature(t,s);if(o){let s=N.gameView.SpawnCreature(o,e,i);return r&&n.Core.UI.adsEvolve.Show(t,s),!0}return!1}AddCreatureRandomPosition(t,e=!0,i=!0){return this.AddCreature(t,N.GetRandomPointInCameraView(),i,!1,e)}OnCreatureRemoved(){this.updateMoneySoftSpeed()}Step(t){let e=this.MoneySoftSpeed*BigInt(~~t);n.Core.Player.AddMoney(h.zc.Soft,e)}}var c=i(3162),u=i(7547);class d{IsWin=!1;Score=0;TargetScore=0;TimeSpent=0;IsReplay=!1}class p extends c.p{get IsFinished(){return this._isFinished}get IsActive(){return this._isActive}get IsInProgress(){return this._isInProgress&&this._isActive}get TimeRemains(){return this.IsFinished?0:this._duration-(u.g.time-this._timeStart)}get CurrentScore(){return this._currentScore}set CurrentScore(t){this._currentScore=t,this.emit("ScoreUpdated",t)}get TargetScore(){return this._targetScore}Awake(){this._isFinished=!1,this._isActive=!1,this._isInProgress=!1,this._duration=20,this._isReplay=!1,this._currentScore=0,this._targetScore=0,this._timeStart=0,this._settings=n.Core.GameData.TapChallenge}AddScore(t){this.CurrentScore++,this.CurrentScore>=this._targetScore&&this.StopChallenge(!0)}GetScoreProgress(){return this.CurrentScore/this._targetScore}GetTimeProgress(){return this.TimeRemains/this._duration}ActivateChallenge(){this._isActive=!0,this.emit("Activated",!0)}DisableChallenge(){this._isActive=!1,this.emit("Activated",!1)}StartChallenge(t,e=!1){this._isReplay=!!e,this._isReplay?(this.CurrentScore=t.Score,this._targetScore=t.TargetScore,this._duration=this._settings.additionalTime):(this.CurrentScore=0,this._targetScore=this._settings.baseClickCount+t.challengesWinedCount*this._settings.victoryDurationIncrease-t.challengesLostCount*this._settings.lostDurationDecrease,this._targetScore=Math.max(this._settings.baseClickCount,Math.min(this._settings.maxClickAmount,this._targetScore)),this._duration=this._settings.duration),this.RunChallengeTimer(),this.emit("Started")}PauseChallenge(){return this._isInProgress=!this._isInProgress,this._isInProgress}Update(){this._isInProgress&&this.GetTimeProgress()<=0&&this.StopChallenge(!1)}StopChallenge(t){let e=this._isFinished;if(this._isFinished=!0,this._isInProgress=!1,!e){let e=Object.assign(new d,{IsWin:t,Score:this.CurrentScore,TargetScore:this._targetScore,TimeSpent:this._settings.duration-(u.g.time-this._timeStart),IsReplay:this._isReplay});console.log("TAP CHALLENGE RESULT",t,e),this.emit("Finished",e)}}RunChallengeTimer(){this._isReplay||(this._currentScore=0),this._isFinished=!1,this._isInProgress=!0,this._timeStart=u.g.time}}var f=i(9677),m=i(2774),g=i(1527),_=i(7706),y=i(2494);class v extends _.M{Awake(){this.pointerId=null,this.wrapper=this.addChild(new y.Container),this.sprite=this.wrapper.addChild(new _.M),this.fitLayout(Core.app.viewport)}fitLayout(t){this.wrapper.scale.set(t.width/6/120)}Place(t){this.position.copyFrom(t)}canInteract(t=null){return!!this.Active&&(!t||this.containsPoint(t))}canMerge(t=null,e=!1){return!1}containsPoint(t,e=!0){const i={x:0,y:0};this.sprite.worldTransform.applyInverse(t,i);const{width:n,height:r}=this.sprite._texture.orig,s=-n*this.sprite.anchor.x,o=-r*this.sprite.anchor.y;if(i.x<s||i.x>s+n||i.y<o||i.y>o+r)return!1;if(!e)return!0;const a=this.sprite.texture,h=a.baseTexture,l=h.resolution;if(!h.hitmap&&!function(t,e){if(!t.resource||!t.resource.source)return!1;const i=t.resource.source;let n=null,r=null;if(i.getContext)n=i,r=n.getContext("2d");else{if(!(i instanceof Image))return!1;n=document.createElement("canvas"),n.width=i.width,n.height=i.height,r=n.getContext("2d"),r.drawImage(i,0,0)}const s=n.width,o=n.height;let a=r.getImageData(0,0,s,o),h=t.hitmap=new Uint32Array(Math.ceil(s*o/32));for(let t=0;t<s*o;t++){let i=t%32,n=t/32|0,r=a.data[4*t+3];0!==r&&r>=e&&(h[n]=h[n]|1<<i)}return!0}(h,255))return!0;const c=h.hitmap;let u=Math.round((i.x-s+a.frame.x)*l)+Math.round((i.y-o+a.frame.y)*l)*h.realWidth,d=u%32;return!!(c[u/32|0]&1<<d)}mouseDown(t){}mouseMove(t){}mouseUp(t){}Update(){this.offsetStartInited||(this.offsetStartX=this.x)}CompareTo(t){return t&&this.y-t.y||0}}var b=i(7373);class w extends v{Awake(){super.Awake(),this.pivot.y=1e3,this.sprite.setImage("creatures/bubble")}mouseDown(){this.spawnParticles(),n.Core.Vibro.Vibrate(),N.gameController.AddCreatureFromBubble(this.position),this.emit("Opened"),this.RemoveView(),n.Core.Audio.Play("BubbleOpen"),n.Core.Player.PlanetsSave.TutorSave.bubbles<2&&n.Core.Player.PlanetsSave.TutorSave.bubbles++}spawnParticles(){}SpawnTo(t){let e=N.gameView.selectedEpochId==n.Core.Player.PlanetsSave.CurrentPlanet.StartEpoch;if(this.position.copyFrom(t),e){this.pivot.y=n.Core.app.viewport.height,g.gsap.timeline().to(this.pivot,{y:0,duration:.5,ease:"power3.in"},"+="+b.o.Range(0,.5)).to(this.sprite.scale,{y:.7,duration:.2,ease:"power3.in"},"-=0.3").to(this.sprite.scale,{y:1,duration:.7,ease:"elastic.out"},"+=0").eventCallback("onComplete",(()=>{this.Idle()}))}else this.pivot.y=0}Idle(){this._idleAnimation=g.gsap.timeline().repeat(-1).to(this.sprite.scale,{x:1.05,y:.9,duration:1,ease:"power1.out"},"+=0").to(this.sprite.scale,{x:1,y:1,duration:1,ease:"power1.in"},"+=0")}Update(){super.Update()}RemoveView(){this._idleAnimation&&this._idleAnimation.kill(),N.gameView.RemoveBubbleView(this)}}var S=i(9135),T=i(8449),x=i(2494);class E extends T.L{static ShowCoins(t,e){if(!GameManager.gameView||!GameManager.gameView.vfxContainer)return;GameManager.gameView.vfxContainer.addChild(new this)._showNormal(S.c.FormatMoney(t),e)}static ShowTapChallenge(){}Awake(){this._kill=this._kill.bind(this)}_kill(){this.parent&&this.parent.removeChild(this)}_showNormal(t,e){this.position.copyFrom(e);let i=.05*n.Core.app.viewport.width,r=4*i,s=i;this.addChild(new T.L({label:t,icon:"ico-gold",iconSize:1})).fitLayout(new x.Rectangle(.5*-r,.5*-s,r,s)),this.alpha=0,g.gsap.timeline().eventCallback("onComplete",this._kill).eventCallback("onInterrupt",this._kill).set(this,{alpha:1},.1).to(this,{duration:2,ease:"power3.out",y:this.y-200},.1).to(this,{duration:1,ease:"power3.out",alpha:0},1.1)}_showTapChallenge(t){}}var A=i(1684),I=i(2494);class C extends v{Awake(){super.Awake(),this.levelField=this.addChild(new A.g("")),this.creatureController=null,this.timeFromPreviousClick=0,this.stayTime=0,this._walking=null,this.isMerging=!1,this.inBox=!1,this.initTime=0}Init(t,e){this.onCreatureRemoved=this.onCreatureRemoved.bind(this),this.initTime=u.g.time,this.creatureController=t,this.SetBox(e),this.creatureController.on("CreatureRemoved",this.onCreatureRemoved),this.timeFromPreviousClick=b.o.Range(-3,3),this.stayTime=b.o.Range(3,10),this._walking=null,this.pointerOffset=new I.Point(0,0),this.levelField.text=""}SetBox(t){this.inBox=t,this.inBox?(this.sprite.setImage("box"),this.scale.set(1)):(this.sprite.setImage("creatures/"+this.creatureController.creatureId),this.levelField.y=.5*this.sprite.height,this.scale.set(.7))}SetLevel(t){this.levelField.text=t}onCreatureRemoved(){this.creatureController.off("CreatureRemoved",this.onCreatureRemoved),this.creatureController=null,N.gameView.RemoveCreatureView(this)}_startWalking(){if(N.tutorialState<M.MERGED)return this._stopWalking();let t=N.GetRandomPointInCameraView();this._walking=g.gsap.to(this,{x:t.x,y:t.y,duration:2,ease:"power5.out",onComplete:()=>{this._stopWalking()},onInterrupt:()=>{this._stopWalking()}})}_stopWalking(){this._walking&&this._walking.isActive()&&this._walking.kill(),this._walking=null,this.stayTime=b.o.Range(4,7)}Idle(){g.gsap.timeline().to(this.sprite.scale,{y:.8,duration:.1,ease:"power3.in"},"+=0").to(this.sprite.scale,{y:1,duration:.7,ease:"elastic.out"},"+=0")}Update(){super.Update(),this.inBox||this.isMerging||(this.timeFromPreviousClick+=u.g.deltaTime,this.timeFromPreviousClick>5&&this.click(!0),null===this.pointerId&&(this._walking&&!this._walking.isActive()&&this._stopWalking(),this._walking||(this.stayTime-=u.g.deltaTime,this.stayTime<=0&&this._startWalking())))}OpenBox(){this.creatureController&&(n.Core.Audio.Play("BoxOpen"),n.Core.Vibro.Vibrate(),this.SetBox(!1),n.Core.Player.PlanetsSave.CurrentPlanet.RemoveBoxCreature(this.creatureController.creatureData.id),this.Idle())}canInteract(t=null){return!!super.canInteract(t)&&(this.inBox||!this.isMerging)}mouseDown(t){if(n.Core.UI.state!=h.Su.Game)return;if(u.g.time-this.initTime<.1)return;if(this.isMerging)return;this._stopWalking();let{resolution:e}=n.Core.app.renderer;if(this.pointerOffset.set(t.x*e-this.x,t.y*e-this.y),this.inBox)return this.OpenBox();this.click(!1,t)}mouseMove(t){if(!this.creatureController||this.inBox)return;if(n.Core.UI.state!=h.Su.Game)return;if(u.g.time-this.initTime<.1)return;let{resolution:e}=n.Core.app.renderer;this.position.set(Math.max(0,Math.min(n.Core.app.viewport.width,t.x*e-this.pointerOffset.x)),Math.max(0,Math.min(n.Core.app.viewport.height,t.y*e-this.pointerOffset.y)))}mouseUp(t){this.creatureController&&!this.inBox&&n.Core.UI.state==h.Su.Game&&(u.g.time-this.initTime<.1||this.tryMerge())}click(t){if(!this.creatureController||this.inBox||this.isMerging)return;let e=this.creatureController.creatureData.GetSoftPerSecond();if(b.o.Range(0,1)<.2){let t=b.o.Range(2,4);e*=BigInt(~~t)}n.Core.Boosters.IsIncome2Active?e*=4n:n.Core.Boosters.IsIncomeActive&&(e*=2n),e*=BigInt(~~n.Core.GameData.Planets.GetPlanet(n.Core.Player.PlanetsSave.CurrentPlanet.planetId).tapIncomeMultiplayer),n.Core.Player.AddMoney(h.zc.Soft,e),t||N.emit("CreatureClick",this.creatureController,e),this.Active&&(N.TapChallengeMode.IsActive?E.ShowTapChallenge(this.position):E.ShowCoins(e,this.position)),!t&&N.TapChallengeMode.IsActive&&n.Core.UI.tapChallenge.RunTapParticles(this.position),this.Idle(),n.Core.UI.IsSomethingFullScreenOpened||(t?this.Active&&n.Core.Audio.Play("PassiveCoin"):n.Core.Audio.Play("CreatureClick")),this.timeFromPreviousClick=0,t||this._stopWalking()}spawnMergeParticles(){n.Core.VFX.creatureMerge(this.x,this.y)}canMerge(t=null,e=!1){return!this.inBox&&!this.isMerging&&(!t||!(!this.creatureController||!t.creatureController)&&(this.creatureController!==t.creatureController&&(this.creatureController.creatureId===t.creatureController.creatureId&&(!e||this.getBounds().intersects(t.getBounds())))))}tryMerge(t=null,e=!1){if(N.TapChallengeMode.IsInProgress)return!1;if(this.isMerging)return!1;if(this.creatureController.creatureData.IsFinalForm)return!1;if(t||(t=N.gameView.GetCreatureForMerge(this,e)),!t)return!1;let i=this.creatureController.epoch.epochData,r=i.creatures.indexOf(this.creatureController.creatureId);if(r<i.creatures.length-1){let e=i.creatures[r+1];return this.mergeCreatures(t,e),!0}let s=this.creatureController.epoch.epochData.nextEpochs.filter((t=>n.Core.Player.PlanetsSave.EpochCanBeChosen(t)));if(!s.length){let e=this.creatureController.epoch.epochData.nextEpochs.find((t=>n.Core.Player.PlanetsSave.CurrentPlanet.epochs.includes(t)));return!!e&&(this.epochSelected(t,e),!0)}if(1==s.length)return this.epochSelected(t,s[0]),!0;let o=s.find((t=>n.Core.Player.PlanetsSave.CurrentPlanet.epochs.includes(t)));return void 0!==o?(this.epochSelected(t,o),!0):(n.Core.UI.nextEpochSelection.Show((e=>{this.epochSelected(t,s[e])}),s.map((t=>n.Core.GameData.Epochs.GetById(t)))),!0)}mergeCreatures(t,e){if(!N.gameController.EnoughSpaceForCreature(e,this.creatureController.creatureData.id)){let t=n.Core.GameData.Epochs.GetByCreatureId(e).id;return n.Core.UI.noSpace.Show(t),!1}this.isMerging=!0,this._stopWalking(),t.isMerging=!0,t._stopWalking();let i=this.x-t.x,r=this.y-t.y,s=new I.Point(this.x-.5*i,this.y-.5*r);return g.gsap.to([this,t],{x:s.x,y:s.y,duration:.3,ease:"power3.out",onComplete:()=>{this.creatureController.epoch.epochData.creatures.indexOf(this.creatureController.creatureData.id)==this.creatureController.epoch.epochData.creatures.length-1&&n.Core.UI.lastMonsterAnimation.Show(e,this.position),this.creatureController.RemoveCreature(),t.creatureController.RemoveCreature(),N.gameController.AddCreature(e,this.position,!1,!0,!0),n.Core.Audio.Play("CreatureMerge"),n.Core.Vibro.Vibrate(),n.Core.Player.PlanetsSave.CurrentPlanet.AddMergeProgress(),this.spawnMergeParticles(),5==N.tutorialState&&(n.Core.Analytics.SendTutorialEvent(5),N.tutorialState++)}}),n.Core.Player.PlanetsSave.TutorSave.merged=!0,!0}epochSelected(t,e){let i=n.Core.GameData.Epochs.GetById(e);this.mergeCreatures(t,i.creatures[0])&&(n.Core.Player.PlanetsSave.CurrentPlanet.epochs.includes(e)?n.Core.VFX.newCreatureNextEpoch(this,i):n.Core.Player.PlanetsSave.CurrentPlanet.AddEpoch(e))}Evolve(t){this.creatureController.epoch.epochData.creatures.indexOf(this.creatureController.creatureData.id)==this.creatureController.epoch.epochData.creatures.length-1&&n.Core.UI.lastMonsterAnimation.Show(t,this.t.position),this.creatureController.RemoveCreature(),N.gameController.AddCreature(t,this.position,!1,!0,!1),n.Core.Audio.Play("CreatureMerge"),n.Core.Player.PlanetsSave.CurrentPlanet.AddMergeProgress()}}var P=i(9279),R=i(2494);class O extends m.e{sortingTimer=0;sortingPeriod=.25;Awake(){super.Awake(),this.background=null,this.epochsController=null,this.creatureViews=[],this.bubbleViews=[],this.allEntities=[],this.creaturesInBox=[],this.pointerEntities=new Map,this.selectedEpochId=0,this.backgroundAlpha=0}Init(t){this.epochsController=t,this.creatureViews=[],this.bubbleViews=[],this.allEntities=[],this.pointerEntities=new Map,this.background=this.addChild(new _.M),this.entitiesContainer=this.addChild(new R.Container),this.vfxContainer=this.addChild(new R.Container),this.SelectEpoch(n.Core.Player.PlanetsSave.CurrentPlanet.StartEpoch,!1,0),this.InitInteraction()}_getTopPointEntity(t){let e=this._getPointEntities(t);return e.length>0?e[0]:null}_getPointEntities(t){let e=[];for(let i of this.entitiesContainer.children)this.allEntities.includes(i)&&i.canInteract(t)&&e.unshift(i);return e}_releasePointer(t){for(let e of this.allEntities)e.pointerId===t&&(e.pointerId=null);this.pointerEntities.delete(t)}_releasePointers(){this.pointerEntities.clear();for(let t of this.allEntities)t.pointerId=null}_pinPointer(t,e){this.pointerEntities.set(t,e),e.pointerId=t}_handlePointerDown(t){let{global:e,identifier:i}=t.data;this._releasePointer(i);let n=this._getPointEntities(e);for(;n.length>0;){let t=n.shift();if(t.canInteract())return this._pinPointer(i,t),void t.mouseDown(e)}this._epochChangePointer=new R.Point(e.x,e.y)}_handlePointerMove(t){let{global:e,identifier:i}=t.data,r=this.pointerEntities.get(i);if(r)r.mouseMove(e);else if(this._epochChangePointer){let t=this._epochChangePointer.x-e.x;if(Math.abs(t)>=.5*n.Core.app.viewport.width/n.Core.app.renderer.resolution)return this._epochChangePointer=null,t>0?this.SelectNextEpoch():this.SelectPrevEpoch()}}_handlePointerUp(t){let{global:e,identifier:i}=t.data;this._epochChangePointer=null;let n=this.pointerEntities.get(i);this._releasePointer(i),n&&n.mouseUp(e)}InitInteraction(){this.interactive=!0,this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this.on("pointerdown",this._handlePointerDown),this.on("pointermove",this._handlePointerMove),this.on("pointerup",this._handlePointerUp),this.on("pointerupoutside",this._handlePointerUp),N.TapChallengeMode.on("Finished",(()=>{this._releasePointers()}))}_prevViewport=null;fitLayout(t){let{width:e,height:i}=t;this.background.position.set(.5*e,.5*i),this.background.scale.set(Math.max(e/this.background.texture.width,i/this.background.texture.height)),P.T.LANDSCAPE_MODE_NEEDED&&(this.allEntities.forEach((e=>{const i=e.position.clone();let n=1,r=1;this._prevViewport&&(n=t.width/this._prevViewport.width,r=t.height/this._prevViewport.height),e.fitLayout(t),e.x=i.x*n,e.y=i.y*r})),this._prevViewport=t.clone())}ClearBubbles(){for(let t=this.bubbleViews.length-1;t>=0;t--)this.bubbleViews[t].RemoveView()}SpawnBubble(){let t=this.entitiesContainer.addChild(new w);t.SpawnTo(N.GetRandomPointInCameraView()),this.bubbleViews.push(t),this.allEntities.push(t),this.sortingTimer=0,this.updateCreaturesVisibility()}GetTopActiveCreature(){let t=0,e=null;for(let i of this.creatureViews)i.creatureController&&i.creatureController.epoch.epochId==this.selectedEpochId&&t<i.creatureController.creatureId&&(t=i.creatureController.creatureId,e=i);return e}SpawnCreature(t,e,i){let n=this.entitiesContainer.addChild(new C);return n.Place(e),n.Init(t,i),this.creatureViews.push(n),this.allEntities.push(n),this.sortingTimer=0,this.updateCreaturesVisibility(),n}RemoveCreatureView(t){let e;e=this.creatureViews.indexOf(t),e>=0&&this.creatureViews.splice(e,1),e=this.allEntities.indexOf(t),e>=0&&this.allEntities.splice(e,1),t.parent&&t.parent.removeChild(t)}RemoveBubbleView(t){let e;e=this.bubbleViews.indexOf(t),e>=0&&this.bubbleViews.splice(e,1),e=this.allEntities.indexOf(t),e>=0&&this.allEntities.splice(e,1),t.parent&&t.parent.removeChild(t)}GetCreatureForMerge(t,e=!1){for(let i of this.creatureViews)if(i.canMerge(t,!e))return i;return null}SelectEpoch(t,e,i){this.selectedEpochId=t,this.updateCreaturesVisibility(),this.updateEpochBackground(e,i),N.callOnEpochSelected(t)}SelectNextEpoch(){for(let t of n.Core.Player.PlanetsSave.CurrentPlanet.epochs)if(t>this.selectedEpochId){this.SelectEpoch(t,!0,1);break}}SelectPrevEpoch(){for(let t=n.Core.Player.PlanetsSave.CurrentPlanet.epochs.length-1;t>0;t--){if(n.Core.Player.PlanetsSave.CurrentPlanet.epochs[t]==this.selectedEpochId){this.SelectEpoch(n.Core.Player.PlanetsSave.CurrentPlanet.epochs[t-1],!0,-1);break}}}updateEpochBackground(t,e){if(t){let t=this.addChildAt(new _.M(this.background.texture),0);t.scale.copyFrom(this.background.scale),t.position.copyFrom(this.background.position);let i=.5*this.background.getBounds().width*-e;this.background.setImage(`epochs/${this.selectedEpochId}`),this.background.alpha=0,this.background.pivot.x=i;let n=this.allEntities.filter((t=>t.Active));for(let t of n)t.alpha=0,t.pivot.x=i;let r=.3,s=g.gsap.timeline().to(this.background,{alpha:1,duration:r,ease:"power3.in"},0).to(this.background.pivot,{x:0,duration:r,ease:"power3.in"},0).eventCallback("onComplete",(()=>{this.removeChild(t)}));for(let t of n)s.to(t,{alpha:1,duration:r,ease:"power3.in"},0).to(t.pivot,{x:0,duration:r,ease:"back.out"},0)}else this.background.setImage(`epochs/${this.selectedEpochId}`)}updateCreaturesVisibility(){let t=null,e=0;this.creaturesInBox.splice(0),n.Core.Player.PlanetsSave.CurrentPlanet.creaturesInBox&&this.creaturesInBox.push(...n.Core.Player.PlanetsSave.CurrentPlanet.creaturesInBox);for(let i of this.creatureViews){if(i.creatureController.creatureData.IsFinalForm){if(t){i.SetActive(!1),e++;continue}t=i,e++}i.SetActive(i.creatureController.epoch.epochId==this.selectedEpochId),i.creatureController.creatureData.IsFinalForm||this.creaturesInBox.includes(i.creatureController.creatureData.id)&&(i.SetBox(!0),this.creaturesInBox.splice(this.creaturesInBox.indexOf(i.creatureController.creatureData.id),1))}t&&t.SetLevel(e);for(let t of this.bubbleViews)t.SetActive(this.selectedEpochId==n.Core.Player.PlanetsSave.CurrentPlanet.StartEpoch)}Update(){for(let t of this.allEntities)t.Update();this.sortingTimer-=u.g.deltaTime,this.sortingTimer<=0&&(this.sortingTimer=this.sortingPeriod,this.entitiesContainer.children.sort(((t,e)=>t.sprite.getBounds().bottom-e.sprite.getBounds().bottom)))}}var k=i(2494);const M={BUBBLE1:1,WAIT_BUBBLE1:2,BUBBLE2:3,WAIT_BUBBLE2:4,MERGE:5,MERGED:6,BUBBLE3:7};class D extends c.p{get tutorialState(){return f.g.GetInt("eruycberuwtfxb832tb46tr384",-1)}set tutorialState(t){f.g.SetInt("eruycberuwtfxb832tb46tr384",t)}get timeOfLastBubbleSpawn(){return~~f.g.GetInt("timeOfLastBubbleSpawn"+this.currentPlanetId,u.g.time-this.bubbleSpawnPeriod)}set timeOfLastBubbleSpawn(t){f.g.SetInt("timeOfLastBubbleSpawn"+this.currentPlanetId,t||0)}get timeFromLastBubbleSpawn(){return u.g.time-this.timeOfLastBubbleSpawn}callOnEpochSelected(t){this.emit("EpochSelected",t)}UpdateCurrentPlanet(){n.Core.Player.PlanetsSave.CurrentPlanet&&(this.currentPlanetId=n.Core.Player.PlanetsSave.CurrentPlanet.planetId,this.initializePlanet(n.Core.Player.PlanetsSave.CurrentPlanet),this.gameView.SelectEpoch(n.Core.Player.PlanetsSave.CurrentPlanet.StartEpoch,!1,0),this.updateTimers(),this.onPlayerChanged())}GetRandomPointInCameraView(){let{width:t,height:e}=n.Core.app.viewport,i=.1;return this.tutorialState===M.BUBBLE1?new k.Point(.5*t,.6*e):this.tutorialState===M.BUBBLE2?new k.Point(.4*t,.4*e):new k.Point(b.o.Range(t*i,.8*t),b.o.Range(e*i,.8*e))}Awake(){this.TapChallengeMode=null,this.gameView=null,this.Prespawn=!1,this.cam=null,this.bubbleSpawnPeriod=0,this.currentPlanetId=0,this.timeFromLastUpdate=0,this.ticksInMillisecond=1e4,this.ticksInSecond=1e3*this.ticksInMillisecond,this.touchStartPosition=null,this.touchId=0,this.tutorialTimer=0,this.HandleCreatureClick=this.HandleCreatureClick.bind(this),this.HandleTapChallengeActivated=this.HandleTapChallengeActivated.bind(this),this.HandleTapChallengeStarted=this.HandleTapChallengeStarted.bind(this),this.onPlayerChanged=this.onPlayerChanged.bind(this),this.OnUIStateChange=this.OnUIStateChange.bind(this),this.UpdateCurrentPlanet=this.UpdateCurrentPlanet.bind(this)}Init(){this.gameController=new l,this.TapChallengeMode=new p,this.TapChallengeMode.on("Activated",this.HandleTapChallengeActivated),this.TapChallengeMode.on("Started",this.HandleTapChallengeStarted),this.gameController.Init(),this.gameView=new O,this.gameView.Init(this.gameController),n.Core.Player.on("Changed",this.onPlayerChanged),this.UpdateCurrentPlanet(),-1==this.tutorialState&&(this.tutorialState=n.Core.Player.DefaultData?1:0),n.Core.UI.on("StateChanged",this.OnUIStateChange),n.Core.Player.on("CurrentPlanetChanged",this.UpdateCurrentPlanet)}HandleTapChallengeStarted(){if(0==this.gameController.epochById.get(this.gameView.selectedEpochId).creatures.length){let t=n.Core.GameData.Epochs.GetById(this.gameView.selectedEpochId).creatures[0];this.gameController.AddCreature(t,this.GetRandomPointInCameraView(),!1,!1,!1)}}HandleTapChallengeActivated(t){t?(n.Core.UI.game.Hide(),n.Core.UI.moneyButtons.Hide(),this.on("CreatureClick",this.HandleCreatureClick)):(n.Core.UI.game.Show(),n.Core.UI.moneyButtons.Show(),this.off("CreatureClick",this.HandleCreatureClick))}HandleCreatureClick(t,e=0n){this.TapChallengeMode.IsInProgress&&this.TapChallengeMode.AddScore(e)}OnUIStateChange(t){let e=t==h.Su.BankHard||t==h.Su.BankSoft||t==h.Su.Boosters;this.gameView.SetActive(t==h.Su.Game||e)}OnDestroy(){n.Core.Player.off("Changed",this.onPlayerChanged),n.Core.UI.off("StateChanged",this.OnUIStateChange),this.off("CreatureClick",this.HandleCreatureClick)}onPlayerChanged(){}initializePlanet(t){this.Prespawn=!0,this.gameView.ClearBubbles(),this.gameController.ClearAll();for(let e of t.creatures)this.gameController.AddCreature(e,this.GetRandomPointInCameraView(),!1,!1,!1);for(let e=0;e<t.bubbles;e++)this.spawnBubble();this.Prespawn=!1}tick(t){this.Update()}Update(){n.Core.UI.gdpr&&n.Core.UI.gdpr.shown&&(this.updateGame(),0==this.tutorialState?this.updateBubbles():this.updateTutorial(),this.updateSpinsTimer(),this.TapChallengeMode.Update(),this.gameView.Update())}updateSpinsTimer(){if(!n.Core.Time||!n.Core.Time.Initialized)return;if(!n.Core.Player||!n.Core.Player.Initialized)return;if(n.Core.Player.SpinsNumber>=n.Core.Player.MaxSpinsNumber)return;n.Core.Player.Timers.TicksFromLastSpinsRestore/1e3>n.Core.GameData.Config.spinsRestorePeriod&&(n.Core.Player.AddMoney(h.zc.Spins,n.Core.GameData.Slots.restoreSpinsNumberByTime),n.Core.Player.Timers.LastSpinsRestoreTicks+=1e3*n.Core.GameData.Config.spinsRestorePeriod)}_tutorialBubbleSpawn(){n.Core.UI.tutorial.SetHandActive(!1),this.spawnBubble(),console.log("SPAWN BUBBLE",this.tutorialState),this.tutorialState++,this.tutorialTimer=0}_tutorialBubbleWait(t=1){if(2===n.Core.Player.PlanetsSave.TutorSave.bubbles)return n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState++;this.tutorialTimer+=u.g.deltaTime,this.gameView.bubbleViews&&(this.gameView.bubbleViews.length||(this.spawnBubble(),this.tutorialTimer=0),this.tutorialTimer>t&&this.gameView.bubbleViews&&this.gameView.bubbleViews.length>0&&!n.Core.UI.tutorial.hand.Active&&(n.Core.UI.tutorial.ShowObjectHand(this.gameView.bubbleViews[0],this.gameView.vfxContainer),this.gameView.bubbleViews[0].once("Opened",(()=>{this.tutorialState++,n.Core.UI.tutorial.HideObjectHand()}))))}_tutorialMergeWait(t){if(n.Core.Player.PlanetsSave.TutorSave.merged)return n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState++;this.tutorialTimer+=u.g.deltaTime,this.tutorialTimer>t&&0===this.gameView.pointerEntities.size?this.gameView.creatureViews&&this.gameView.creatureViews.length>1&&!n.Core.UI.tutorial.hand.Active&&(n.Core.UI.tutorial.SetHandActive(!0),n.Core.UI.tutorial.HandPointToFrom(this.gameView.creatureViews[0],this.gameView.creatureViews[1],this.gameView.vfxContainer),this.gameView.once("pointerdown",(()=>{this.tutorialTimer=0,n.Core.UI.tutorial.SetHandActive(!1)}))):n.Core.UI.tutorial.SetHandActive(!1)}updateTutorial(){switch(n.Core.UI.tutorial.isShowingSomething&&n.Core.UI.tutorial.UpdateObjectHand(),this.tutorialState){case M.BUBBLE1:n.Core.Player.PlanetsSave.TutorSave.bubbles>0?(n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState=M.BUBBLE2):this._tutorialBubbleSpawn();break;case M.WAIT_BUBBLE1:n.Core.Player.PlanetsSave.TutorSave.bubbles>1?(n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState=M.BUBBLE2):this._tutorialBubbleWait(2);break;case M.BUBBLE2:n.Core.Player.PlanetsSave.TutorSave.bubbles>1?(n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState=M.MERGE):this._tutorialBubbleSpawn();break;case M.WAIT_BUBBLE2:n.Core.Player.PlanetsSave.TutorSave.bubbles>1?(n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState=M.MERGE):this._tutorialBubbleWait(1.5);break;case M.MERGE:n.Core.Player.PlanetsSave.TutorSave.bubbles=3,n.Core.Player.PlanetsSave.TutorSave.merged?this.tutorialState++:this._tutorialMergeWait(1);break;case M.MERGED:n.Core.Player.PlanetsSave.TutorSave.merged=!0,n.Core.UI.tutorial.SetHandActive(!1),this.tutorialState++,this.timeOfLastBubbleSpawn=u.g.time;break;case M.BUBBLE3:this.spawnBubble(),this.tutorialState++;break;case 300:this.spawnBubble(),this.spawnBubble(),this.tutorialState++;break;case 600:this.spawnBubble(),this.tutorialState++;break;case 900:this.spawnBubble(),this.spawnBubble(),this.tutorialState++;break;case 1300:this.spawnBubble(),this.tutorialState++;break;case 1600:this.spawnBubble(),this.tutorialState=0;break;default:this.tutorialState>M.BUBBLE3&&this.tutorialState++}this.tutorialState>7&&this.updateBubbles()}updateBubbles(){this.timeFromLastBubbleSpawn<0&&(this.timeOfLastBubbleSpawn=u.g.time);let t=~~(this.timeFromLastBubbleSpawn/this.bubbleSpawnPeriod);for(let e=0;e<t&&this.spawnBubble();e++)this.timeOfLastBubbleSpawn=u.g.time}spawnBubble(){return!!this.gameController.epochById.get(1).SpawnBubble()&&(this.gameView.SpawnBubble(),this.updateTimers(),!0)}spawnEventCreature(t,e,i,n){}updateTimers(){let t=n.Core.GameData.Upgrades.UpgradeByType(h.Tq.BubbleTime),e=n.Core.Player.PlanetsSave.GetUpgradeProgress(h.Tq.BubbleTime);this.bubbleSpawnPeriod=t.TotalValue(e.upgradeIndex),n.Core.Boosters.IsBubbleActive&&(this.bubbleSpawnPeriod*=.5)}updateGame(){let t=u.g.deltaTime;this.timeFromLastUpdate+=t,this.timeFromLastUpdate>=1&&(this.gameController.Step(1),this.timeFromLastUpdate-=1)}}const N=new D;window.GameManager=N},2774:(t,e,i)=>{"use strict";i.d(e,{e:()=>r});i(6116);var n=i(2494);class r extends n.Sprite{constructor(...t){super(...t),this.Active=!0,this.HideWithBackButton=!1,this.Awake()}}},8449:(t,e,i)=>{"use strict";i.d(e,{L:()=>a});var n=i(7706),r=i(1684),s=i(7693),o=i(2494);class a extends n.M{constructor(t){super(),"string"==typeof t&&(t={label:t}),"object"!=typeof t&&(t=null);let{label:e="",icon:i="",iconAlign:a="left",iconSize:h=.5,textProps:l={},backgroundColor:c=0,backgroundAlpha:u=0}=t||{};this._back=this.addChild(new s.z("bg-rounding-16px")),this._back.tint=c,this._back.alpha=u,this._label=this.addChild(new r.g(e||"",l||{}));let d=i;i&&"string"!=typeof i||(d=new n.M(i)),this._icon=this.addChild(d),this._rect=new o.Rectangle,this.iconAlign=a,this.iconSize=h,this._icon.SetActive(!!i),this._initialFit()}_initialFit(){let t=this._label.textHeight,e=this._label.textWidth;this._icon.Active&&(this._icon.fitRect(new o.Rectangle(0,0,t,t)),e+=this._icon.width),this.fitLayout(new o.Rectangle(0,0,e,t))}get backgroundColor(){return this._back.tint}set backgroundColor(t){this._back.tint=t}get backgroundAlpha(){return this._back.alpha}set backgroundAlpha(t){this._back.alpha=t}get label(){return String(this._label.text)}set label(t){this._label.text=String(t),this.fitLayout()}get text(){return this.label}set text(t){this.label=t}get icon(){return this._icon.texture}set icon(t){this._icon.setImage(t),this.fitLayout()}_fitChildren(){this._icon.SetActive(this._icon.texture!==o.Texture.EMPTY);let t=this.iconAlign.split("-").pop(),e=this.iconAlign.startsWith("absolute-"),i=this._rect.clone();i.x=i.y=0,this._back.fitLayout(i);let n=new o.Rectangle(0,0,0,0),r=new o.Rectangle(0,0,0,0),s=this._icon.Active?Math.min(.05*i.width,10):0;if(this._icon.Active){let t=i.height*this.iconSize,e=Math.min(t/this._icon.texture.width,t/this._icon.texture.height);r.width=this._icon.texture.width*e,r.height=this._icon.texture.height*e,r.x=.5*(i.width-r.width),r.y=.5*(i.height-r.height)}if(this._label.text.length&&(n.width=i.width-r.width-s,n.height=i.height,this._label.fitLayout(n),n.width=this._label.textWidth*this._label.scale.x,n.height=this._label.getLocalBounds().height*this._label.scale.y,n.x=.5*(i.width-n.width),n.y=.5*(i.height-n.height)),e)r.x="right"===t?i.width-r.width:0,n.x="right"===t?0:r.x+r.width+s;else{let e="right"===t?[n,r]:[r,n],o=e.reduce(((t,{width:e})=>t+e),0)+(e.length-1)*s,a=i.x+.5*(i.width-o);for(let t of e)t.x=a,a+=t.width+s}this._icon.fitRect(r),this._label.fitLayout(n)}fitLayout(t=this._rect){this._rect.copyFrom(t),this.position.copyFrom(t),this._fitChildren()}}},7693:(t,e,i)=>{"use strict";i.d(e,{z:()=>s});var n=i(6116),r=i(2494);class s extends r.NineSlicePlane{constructor(t,...e){if(t=(0,n.T)(t),0===e.length){let i=Math.max(0,Math.ceil(.5*t.width)-1),n=Math.max(0,Math.ceil(.5*t.height)-1);e.push(i,n,i,n)}super((0,n.T)(t),...e),this.Active=!1,this.HideWithBackButton=!1,this.Awake()}setImage(t){this.texture=(0,n.T)(t)}fitLayout(t){this.position.copyFrom(t),this.width=t.width,this.height=t.height}}},7706:(t,e,i)=>{"use strict";i.d(e,{M:()=>s});var n=i(6116),r=i(2774);class s extends r.e{constructor(t){super((0,n.T)(t)),this.anchor.set(.5)}setImage(t){this.texture=(0,n.T)(t)}fitRect(t,e=!1){let i=[t.width/this.texture.width,t.height/this.texture.height];this.scale.set(e?Math.max(...i):Math.min(...i)),this.position.set(t.x+t.width*this.anchor.x,t.y+t.height*this.anchor.y)}}},1684:(t,e,i)=>{"use strict";i.d(e,{g:()=>a});var n=i(2494);const r={fontName:"GameFont",fill:16777215,align:"center",textBaseline:"middle",fontSize:64,lineHeight:64,leading:0,wordWrap:!1,dropShadow:!0,dropShadowAlpha:.75,dropShadowAngle:.6*Math.PI,dropShadowBlur:1,dropShadowColor:0,dropShadowDistance:2};let s;const o=new Map;class a extends n.BitmapText{_rect=new n.Rectangle(0,0,1,1);get fill(){return this.tint}set fill(t){this.tint=t}constructor(t="",e=r){super(t,e=Object.assign({},r,e||{})),this.anchor.set(.5);let{fontSize:i=64,autoFitPadding:n=0,fitTextTemplate:s="",wordWrap:o=!1,fill:a=r.fill}=e||{};this.autoFitProps={autoFitPadding:n,fitTextTemplate:s,wordWrap:o},this.fill=a,this.initialFontSize=i}_fitLayoutMultiline(){let t=this._rect.clone().pad(-this.autoFitProps.autoFitPadding||0);this.position.set(t.x+t.width*this.anchor.x,t.y+t.height*this.anchor.y),this.maxWidth=t.width,this.fontSize=this.initialFontSize,t.height<this.textHeight&&(this.fontSize*=Math.min(1,t.height/this.textHeight))}fitLayout(t=this._rect){if(this._rect=t.clone(),this.autoFitProps.wordWrap)return this._fitLayoutMultiline();this.maxWidth=0,t=this._rect.clone().pad(-this.autoFitProps.autoFitPadding||0);let{textWidth:e,textHeight:i}=this;if(this.autoFitProps.fitTextTemplate){let t=function(t){if(!o.has(t)){s=s||new n.BitmapText(t,r),s.text=t;let{textWidth:e,textHeight:i}=s;o.set(t,{textWidth:e,textHeight:i})}return o.get(t)}(this.autoFitProps.fitTextTemplate);e=t.textWidth,i=t.textHeight}this.scale.set(Math.min(1,t.width/e,t.height/i)),this.position.set(t.x+t.width*this.anchor.x,t.y+t.height*this.anchor.y),this.y-=.5*(this.getLocalBounds().height-this.textHeight)*this.scale.y}}},6116:(t,e,i)=>{"use strict";i.d(e,{T:()=>o});var n=i(5603),r=i(2494);const s=new Set;function o(t){return t&&"string"==typeof t&&(r.utils.TextureCache[t]||(s.has(t)||console.warn(`TEXTURE not in cache: ${t}`),s.add(t)),t=r.utils.TextureCache[t]),t||r.Texture.EMPTY}window._MISSING_TEXTURES=s,r.DisplayObject.prototype.Init=function(){},r.DisplayObject.prototype.Awake=function(){},r.DisplayObject.prototype.Start=function(){},r.DisplayObject.prototype.Update=function(){},r.DisplayObject.prototype.OnEnable=function(){},r.DisplayObject.prototype.OnDisable=function(){},r.DisplayObject.prototype.OnDestroy=function(){},r.DisplayObject.prototype.Show=function(){this.visible=!0,this.Active||(this.Active=!0,this.emit("Show"),this.emit("ActiveChanged",this.Active))},r.DisplayObject.prototype.Hide=function(){this.visible=!1,this.Active&&(this.Active=!1,this.emit("Hide"),this.emit("ActiveChanged",this.Active))},r.DisplayObject.prototype.SetActive=function(t){t?this.Show():this.Hide()},r.DisplayObject.prototype.fitLayout=function(t=n.Core.app&&n.Core.app.viewport||new r.Rectangle(0,0,1,1)){},r.Container.prototype._debug=function(t=this,e=!1){return this._g=this._g||t.addChild(new r.Graphics),e&&this._g.clear(),this._g},r.Container.prototype._debugRect=function(t,e=16711680){this._debug().lineStyle(1,e).drawRect(t.x,t.y,t.width,t.height)},r.Container.prototype._clearTapHighlight=function(){this.off("pointerdown",this._setTapHighlight),this.off("pointerup",this._removeTapHighlight),this.off("pointerupoutside",this._removeTapHighlight),this.off("pointerleave",this._removeTapHighlight),this.off("pointerout",this._removeTapHighlight),this.off("pointercancel",this._removeTapHighlight),this.tapHighlightTarget=null},r.Container.prototype._initTapHighlight=function(t=this.tapHighlightTarget||this){this._clearTapHighlight(),t&&(this.on("pointerdown",this._setTapHighlight,this),this.on("pointerup",this._removeTapHighlight,this),this.on("pointerupoutside",this._removeTapHighlight,this),this.on("pointerleave",this._removeTapHighlight,this),this.on("pointerout",this._removeTapHighlight,this),this.on("pointercancel",this._removeTapHighlight,this),this.tapHighlightTarget=t)},r.Container.prototype._setTapHighlight=function(){this.tapHighlightTarget&&(this._tapHighlightPrevTint=this.tapHighlightTarget.tint,this.tapHighlightTarget.tint=10066329)},r.Container.prototype._removeTapHighlight=function(){this.tapHighlightTarget&&(this.tapHighlightTarget.tint=void 0!==this._tapHighlightPrevTint?this._tapHighlightPrevTint:16777215)},Object.defineProperty(r.DisplayObject.prototype,"activeInHierarchy",{get:function(){let t=this;if(t.visible)return!0;for(;t.parent;){if(!t.parent.visible)return!1;t=t.parent}return!0}});r.Text},9135:(t,e,i)=>{"use strict";i.d(e,{c:()=>n});class n{static compare=[BigInt("1000"),BigInt("1000000"),BigInt("1000000000"),BigInt("1000000000000"),BigInt("1000000000000000"),BigInt("1000000000000000000"),BigInt("1000000000000000000000"),BigInt("1000000000000000000000000"),BigInt("1000000000000000000000000000"),BigInt("1000000000000000000000000000000"),BigInt("1000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000000000000000000"),BigInt("1000000000000000000000000000000000000000000000000000000000")];static divider=[BigInt("100"),BigInt("100000"),BigInt("100000000"),BigInt("100000000000"),BigInt("100000000000000"),BigInt("100000000000000000"),BigInt("100000000000000000000"),BigInt("100000000000000000000000"),BigInt("100000000000000000000000000"),BigInt("100000000000000000000000000000"),BigInt("100000000000000000000000000000000"),BigInt("100000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000000000000000000"),BigInt("100000000000000000000000000000000000000000000000000000000")];static letter=["K","M","B","T","aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao"];static FormatMoney(t){if((t=BigInt(~~t))<this.compare[0])return t.toString();for(let e=0;e<this.compare.length-1;e++)if(t>=this.compare[e]&&t<this.compare[e+1]){let i=(t/this.divider[e]).toString(),n=i.substr(0,i.length-1),r=i.substr(-1);return n+("0"===r?"":"."+r)+this.letter[e]}return"Inf."}static stringsToBigInts(t){return t.map((t=>BigInt(t||"0")))}static bigIntsToStrings(t){return t.map((t=>(t||0).toString()))}static FormatSecondsToTimeArray(t){return[Math.floor(t/3600),Math.floor(t%3600/60),~~(t%60)]}static FormatSecondsToTime(t){t=Math.abs(t);let[e,i,n]=this.FormatSecondsToTimeArray(t),r="";return t>=3600&&(r+=String(e)+"h "),t>=60&&(r+=String(i).padStart(2,"0")+"m "),r+=String(n).padStart(2,"0")+"s",r}}window.NUtils=n},3162:(t,e,i)=>{"use strict";i.d(e,{p:()=>s});var n=i(792),r=i.n(n);class s extends(r()){static EVENT=Object.freeze({START:"appStart",UPDATE:"appUpdate",FIXED_UPDATE:"appFixedUpdate",LATE_UPDATE:"appLateUpdate",GUI:"appOnGUI",DISABLE:"monoOnDisable",ENABLE:"monoOnEnable"});static events=new(r());#i=!0;constructor(){super(),this.__Start=this.__Start.bind(this),this.__Update=this.__Update.bind(this),this.__FixedUpdate=this.__FixedUpdate.bind(this),this.__LateUpdate=this.__LateUpdate.bind(this),this.__OnGUI=this.__OnGUI.bind(this),this.__OnDisable=this.__OnDisable.bind(this),this.__OnEnable=this.__OnEnable.bind(this),this.__addMonoBehaviourListeners(),this.__Awake()}get enabled(){return this.#i}set enabled(t){let e=(t=!!t)^this.enabled;this.#i=t,e&&this.emit(t?s.EVENT.ENABLE:s.EVENT.DISABLE)}get isActiveAndEnabled(){return this.#i}static emit(t,...e){return this.events.emit(t,...e)}__addMonoBehaviourListeners(){s.events.on(s.EVENT.START,this.__Start),s.events.on(s.EVENT.UPDATE,this.__Update),s.events.on(s.EVENT.FIXED_UPDATE,this.__FixedUpdate),s.events.on(s.EVENT.LATE_UPDATE,this.__LateUpdate),s.events.on(s.EVENT.GUI,this.__OnGUI),this.on(s.EVENT.DISABLE,this.__OnDisable),this.on(s.EVENT.ENABLE,this.__OnEnable)}__removeMonoBehaviourListeners(){s.events.off(s.EVENT.START,this.__Start),s.events.off(s.EVENT.UPDATE,this.__Update),s.events.off(s.EVENT.FIXED_UPDATE,this.__FixedUpdate),s.events.off(s.EVENT.LATE_UPDATE,this.__LateUpdate),s.events.off(s.EVENT.GUI,this.__OnGUI),this.off(s.EVENT.DISABLE,this.__OnDisable),this.off(s.EVENT.ENABLE,this.__OnEnable)}__Awake(...t){this.Awake&&this.Awake(...t)}__Start(...t){this.Start&&this.Start(...t)}__Update(...t){this.Update&&this.Update(...t)}__FixedUpdate(...t){this.FixedUpdate&&this.FixedUpdate(...t)}__LateUpdate(...t){this.LateUpdate&&this.LateUpdate(...t)}__OnGUI(...t){this.OnGUI&&this.OnGUI(...t)}__OnDisable(...t){this.OnDisable&&this.OnDisable(...t)}__OnEnable(...t){this.OnEnable&&this.OnEnable(...t)}Awake(){}Start(){}Update(){}FixedUpdate(){}LateUpdate(){}OnGUI(){}OnDisable(){}OnEnable(){}}},9677:(t,e,i)=>{"use strict";i.d(e,{g:()=>h});var n=i(4643),r=i(7468);const s="homo-evolution-player-prefs";let o=null,a=!1;class h{#t=n.di.get(r.TypesSocial.cookie);static async Load(){try{const t=await n.di.get(r.TypesSocial.cookie);let e=await t.get([s]);o=e?e[s]:null}catch(t){console.log("PREFS LOAD ERROR",t),o=null}}static async Save(){if(!a)try{const t=n.di.get(r.TypesSocial.cookie);await t.save(s,o)}catch(t){console.log("PREFS SAVE ERROR",t)}}static Reset(){this.DeleteAll(),a=!0}static DeleteAll(){o=null,this.Save()}static DeleteKey(t){this.HasKey(t)&&(delete o[t],this.Save())}static _getItem(t,e){return this.HasKey(t)?o[t]:e}static GetFloat(t,e){return this.HasKey(t)?parseFloat(this._getItem(t)):e}static GetInt(t,e){return this.HasKey(t)?parseInt(this._getItem(t)):e}static GetString(t,e){return this.HasKey(t)?String(this._getItem(t)):e}static HasKey(t){return o&&o.hasOwnProperty(t)}static _setItem(t,e){o=o||{},o[t]=e,this.Save()}static SetFloat(t,e){this._setItem(t,parseFloat(e))}static SetInt(t,e){this._setItem(t,parseInt(e))}static SetString(t,e){this._setItem(t,String(e))}}},7373:(t,e,i)=>{"use strict";i.d(e,{o:()=>n});class n{static get value(){return this._nextValue()}static _nextValue(){return Math.random()}static Range(t,e){let i=Math.max(t,e),n=Math.min(t,e);return i===n?n:n+this.value*(i-n)}}},7547:(t,e,i)=>{"use strict";i.d(e,{g:()=>n});class n{static _totalTime=0;static _lastDelta=0;static _timeScale=1;static tick(t){this._totalTime+=t,this._lastDelta=t}static reset(){this._totalTime=0,this._lastDelta=0,this._timeScale=1}static get captureFramerate(){}static set captureFramerate(t){}static get deltaTime(){return this._lastDelta}static get fixedDeltaTime(){return this._lastDelta}static get fixedTime(){return this._totalTime}static get fixedUnscaledDeltaTime(){return this._lastDelta}static get fixedUnscaledTime(){return this._totalTime}static get frameCount(){}static get inFixedTimeStep(){return!1}static get maximumDeltaTime(){}static set maximumDeltaTime(t){}static get maximumParticleDeltaTime(){}static set maximumParticleDeltaTime(t){}static get realtimeSinceStartup(){return this._totalTime}static get smoothDeltaTime(){return this._lastDelta}static get time(){return this._totalTime}static get timeScale(){return this._timeScale}static set timeScale(t){this._timeScale=t}static get timeSinceLevelLoad(){}static get unscaledDeltaTime(){return this._lastDelta}static get unscaledTime(){return this._totalTime}}},170:(t,e,i)=>{"use strict";function n(t=[],e=""){let i={};for(let e=0;e<t.length;e++)Object.defineProperty(i,String(t[e]),{configurable:!1,writable:!1,enumerable:!0,value:e}),Object.defineProperty(i,String(e),{configurable:!1,writable:!1,enumerable:!1,value:String(t[e])});return e&&(window[e]=window[e]||i),i}i.d(e,{nA:()=>o,DE:()=>s,JD:()=>r,zc:()=>h,E:()=>l,Wn:()=>c,fD:()=>d,Su:()=>u,Tq:()=>a});const r=n(["game","monsters","upgrades","boosters","collection","map","missions","empty","vip","slots"],"GameScreen"),s=n(["upgrade","monster","coins","planet","booster","empty","slots","game_event"],"GameCategory"),o=n(["Income","CreaturesDiscount","BubbleTime","IncomeX4"],"BoosterType"),a=n(["BubbleTime","MoneyBox","Magnet","MergeBonus","BubbleCreature","PlayerDamage","EventBubbleTime","EventBubbleMaxCharge","EnemiesLevel","TapChallengeMergeBonus"],"UpgradeType"),h=n(["Soft","Hard","Spins"],"MoneyType"),l=n(["MoneySoft","MoneyHard","NoAds","MoneySoftBySoftSpeed","MaxCreature","Vip","RandomCreatureFromCurrentEpoch","BoosterIncomeX4","BoosterCreaturesDiscount","Spins","CreatureFromCollectionWithOffset","LastShopCreature","BoosterIncomeX2","FirstCreatureOffer","SkipEpochsOffer","SpinsOffer1","SpinsOffer2"],"RewardType"),c=n(["MoneySoft1","MoneySoft2","Spin","MoneyHard","Creature1","Creature2"],"SlotItem"),u=n(["Loading","Game","BankSoft","BankHard","Boosters","Map"],"UIState"),d=n(["FirstLevel1","FirstLevel2","Second","Complete"],"SpinOfferType")},3966:()=>{},9442:(t,e,i)=>{"use strict";i.r(e),i.d(e,{deleteDB:()=>_,openDB:()=>g,unwrap:()=>m,wrap:()=>f});const n=(t,e)=>e.some((e=>t instanceof e));let r,s;const o=new WeakMap,a=new WeakMap,h=new WeakMap,l=new WeakMap,c=new WeakMap;let u={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("objectStoreNames"===e)return t.objectStoreNames||h.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return f(t[e])},set:(t,e,i)=>(t[e]=i,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function d(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),f(o.get(this))}:function(...e){return f(t.apply(m(this),e))}:function(e,...i){const n=t.call(m(this),e,...i);return h.set(n,e.sort?e.sort():[e]),f(n)}}function p(t){return"function"==typeof t?d(t):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),n()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));a.set(t,e)}(t),n(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,u):t)}function f(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(f(t.result)),n()},s=()=>{i(t.error),n()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&o.set(e,t)})).catch((()=>{})),c.set(e,t),e}(t);if(l.has(t))return l.get(t);const e=p(t);return e!==t&&(l.set(t,e),c.set(e,t)),e}const m=t=>c.get(t);function g(t,e,{blocked:i,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=f(o);return n&&o.addEventListener("upgradeneeded",(t=>{n(f(o.result),t.oldVersion,t.newVersion,f(o.transaction),t)})),i&&o.addEventListener("blocked",(t=>i(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}function _(t,{blocked:e}={}){const i=indexedDB.deleteDatabase(t);return e&&i.addEventListener("blocked",(t=>e(t.oldVersion,t))),f(i).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(b.get(e))return b.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,r=v.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!y.includes(i))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return n&&(o=o.index(e.shift())),(await Promise.all([o[i](...e),r&&s.done]))[0]};return b.set(e,s),s}u=(t=>({...t,get:(e,i,n)=>w(e,i)||t.get(e,i,n),has:(e,i)=>!!w(e,i)||t.has(e,i)}))(u)},8351:(t,e,i)=>{"use strict";var n,r,s,o,a,h,l,c,u,d,p,f,m,g,_,y,v,b,w,S;i.d(e,{B9:()=>o,E8:()=>f,Eq:()=>b,Gk:()=>m,Km:()=>n,M6:()=>d,OS:()=>_,Pk:()=>y,QE:()=>c,XZ:()=>u,_4:()=>a,dW:()=>l,fr:()=>g,h3:()=>r,hR:()=>h,he:()=>w,uR:()=>p,vg:()=>v,wn:()=>s,yw:()=>S}),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(n||(n={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(r||(r={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(c||(c={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(u||(u={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(_||(_={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(v||(v={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(b||(b={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(w||(w={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(S||(S={}))},997:(t,e,i)=>{"use strict";i.d(e,{$P:()=>ae,$Z:()=>xt,$f:()=>E,A4:()=>_e,A5:()=>A,A6:()=>et,Ag:()=>o.A,BP:()=>Mt,Bu:()=>S,Bw:()=>$t,CF:()=>re,CI:()=>v,D8:()=>he,ES:()=>ke,Eo:()=>be,FW:()=>m,GW:()=>R,Gj:()=>x,He:()=>ee,JH:()=>Ie,LE:()=>O,LQ:()=>Ae,Ln:()=>c,MT:()=>ve,Mt:()=>Dt,NW:()=>Ft,Nc:()=>u,O1:()=>B,OE:()=>k,OO:()=>K,Pt:()=>tt,RO:()=>te,Ru:()=>ce,SD:()=>Ee,Uw:()=>Nt,V2:()=>V,WD:()=>_t,WQ:()=>T,X1:()=>Y,XN:()=>lt,XO:()=>o.X,Y7:()=>L,_H:()=>ne,_J:()=>Qt,aV:()=>b,ah:()=>Ut,bD:()=>nt,cc:()=>Te,ch:()=>Oe,dJ:()=>Lt,dZ:()=>g,di:()=>I,gP:()=>N,hk:()=>Xt,hp:()=>G,hq:()=>Se,iH:()=>Vt,iQ:()=>we,iW:()=>Gt,jH:()=>w,k2:()=>$,kO:()=>X,kb:()=>ht,kp:()=>fe,lB:()=>le,n1:()=>ie,nV:()=>Ne,nW:()=>F,nj:()=>ot,oA:()=>Re,pq:()=>rt,q5:()=>ye,s9:()=>Wt,t5:()=>y,u3:()=>xe,u9:()=>Q,uC:()=>Rt,vB:()=>ue,xv:()=>Be});var n=i(4425),r=i(8351),s=i(8451),o=i(3585),a=i(257),h=i(161),l=i(5489);n.W0.PREFER_ENV=s.isMobile.any?r.Km.WEBGL:r.Km.WEBGL2,n.W0.STRICT_TEXTURE_CACHE=!1;var c=[];function u(t,e){if(!t)return null;var i="";if("string"==typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(i=n[1].toLowerCase())}for(var r=c.length-1;r>=0;--r){var s=c[r];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},d(t,e)};function p(t,e){function i(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var f=function(){return f=Object.assign||function(t){for(var e,i=arguments,n=1,r=arguments.length;n<r;n++)for(var s in e=i[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},f.apply(this,arguments)};var m=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new a.b("setRealSize"),this.onUpdate=new a.b("update"),this.onError=new a.b("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),g=function(t){function e(e,i){var n=this,r=i||{},s=r.width,o=r.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return(n=t.call(this,s,o)||this).data=e,n}return p(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.Gk.UNPACK);var s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(m),_={scaleMode:r.M6.NEAREST,format:r.hR.RGBA,alphaMode:r.Gk.NPM},y=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this,a=(i=i||{}).alphaMode,h=i.mipmap,l=i.anisotropicLevel,c=i.scaleMode,d=i.width,p=i.height,f=i.wrapMode,g=i.format,_=i.type,y=i.target,v=i.resolution,b=i.resourceOptions;return!e||e instanceof m||((e=u(e,b)).internal=!0),o.resolution=v||n.W0.RESOLUTION,o.width=Math.round((d||0)*o.resolution)/o.resolution,o.height=Math.round((p||0)*o.resolution)/o.resolution,o._mipmap=void 0!==h?h:n.W0.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==l?l:n.W0.ANISOTROPIC_LEVEL,o._wrapMode=f||n.W0.WRAP_MODE,o._scaleMode=void 0!==c?c:n.W0.SCALE_MODE,o.format=g||r.hR.RGBA,o.type=_||r.QE.UNSIGNED_BYTE,o.target=y||r.dW.TEXTURE_2D,o.alphaMode=void 0!==a?a:r.Gk.UNPACK,o.uid=(0,s.uid)(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=d>0&&p>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return p(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=(0,s.isPow2)(this.realWidth)&&(0,s.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete s.BaseTextureCache[this.cacheId],delete s.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,r){void 0===r&&(r=n.W0.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+(0,s.uid)()}a=t._pixiId}var l=s.BaseTextureCache[a];if(o&&r&&!l)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return l||((l=new e(t,i)).cacheId=a,e.addToCache(l,a)),l},e.fromBuffer=function(t,i,n,s){t=t||new Float32Array(i*n*4);var o=new g(t,{width:i,height:n}),a=t instanceof Float32Array?r.QE.FLOAT:r.QE.UNSIGNED_BYTE;return new e(o,Object.assign({},_,s||{width:i,height:n,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete s.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(s.EventEmitter),v=function(t){function e(e,i){var n=this,r=i||{},s=r.width,o=r.height;(n=t.call(this,s,o)||this).items=[],n.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new y;n.items.push(h),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return p(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof m?this.addResourceAt(t[i],i):this.addResourceAt(u(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,n=e.realHeight;return t.resize(i,n),Promise.resolve(t)})),this._load},e}(m),b=function(t){function e(e,i){var n,r,s=this,o=i||{},a=o.width,h=o.height;return Array.isArray(e)?(n=e,r=e.length):r=e,s=t.call(this,r,{width:a,height:h})||this,n&&s.initFromArray(n,i),s}return p(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=r.dW.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var n=this,r=n.length,s=n.itemDirtyIds,o=n.items,a=t.gl;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,e.format,i.type,null);for(var h=0;h<r;h++){var l=o[h];s[h]<l.dirtyId&&(s[h]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,l.resource.width,l.resource.height,1,e.format,i.type,l.resource.source))}return!0},e}(v),w=function(t){function e(e){var i=this,n=e,r=n.naturalWidth||n.videoWidth||n.width,s=n.naturalHeight||n.videoHeight||n.height;return(i=t.call(this,r,s)||this).source=e,i.noSubImage=!1,i}return p(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=(0,s.determineCrossOrigin)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,n){var s=t.gl,o=e.realWidth,a=e.realHeight;if((n=n||this.source)instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if(n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.Gk.UNPACK),this.noSubImage||e.target!==s.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,n)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(m),S=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(w),T=function(t){function e(i,n){var s=this,o=n||{},a=o.width,h=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");s=t.call(this,6,{width:a,height:h})||this;for(var u=0;u<e.SIDES;u++)s.items[u].target=r.dW.TEXTURE_CUBE_MAP_POSITIVE_X+u;return s.linkBaseTexture=!1!==c,i&&s.initFromArray(i,n),!1!==l&&s.load(),s}return p(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=r.dW.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=r.dW.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,n){for(var r=this.itemDirtyIds,s=0;s<e.SIDES;s++){var o=this.items[s];(r[s]<o.dirtyId||n.dirtyId<i.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,n),r[s]=o.dirtyId):r[s]<-1&&(t.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),r[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(v),x=function(t){function e(e,i){var r=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;w.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return r=t.call(this,e)||this,!e.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=e.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==i.createBitmap?i.createBitmap:n.W0.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,r.bitmap=null,r._load=null,!1!==i.autoLoad&&r.load(),r}return p(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var n=e.source;e.url=n.src;var r=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?r():(n.onload=r,n.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var i=globalThis.createImageBitmap,n=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(n){return i(n,0,0,e.width,e.height,{premultiplyAlpha:null===t.alphaMode||t.alphaMode===r.Gk.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,i,n){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var r=!0,s=i._glTextures;for(var o in s){var a=s[o];if(a!==n&&a.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(w),E=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,n.W0.ADAPTER.createCanvas())||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return p(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;w.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,n=e.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var r=i*t.scale,o=n*t.scale;(t._overrideWidth||t._overrideHeight)&&(r=t._overrideWidth||t._overrideHeight/n*i,o=t._overrideHeight||t._overrideWidth/i*n),r=Math.round(r),o=Math.round(o);var a=t.source;a.width=r,a.height=o,a._pixiId="canvas_"+(0,s.uid)(),a.getContext("2d").drawImage(e,0,0,i,n,0,0,r,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return"svg"===i||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(w),A=function(t){function e(i,n){var r=this;if(n=n||{},!(i instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var o=i[0].src||i[0];w.crossOrigin(s,o,n.crossorigin);for(var a=0;a<i.length;++a){var h=document.createElement("source"),l=i[a],c=l.src,u=l.mime,d=(c=c||i[a]).split("?").shift().toLowerCase(),p=d.slice(d.lastIndexOf(".")+1);u=u||e.MIME_TYPES[p]||"video/"+p,h.src=c,h.type=u,s.appendChild(h)}i=s}return(r=t.call(this,i)||this).noSubImage=!0,r._autoUpdate=!0,r._isConnectedToTicker=!1,r._updateFPS=n.updateFPS||0,r._msToNextUpdate=0,r.autoPlay=!1!==n.autoPlay,r._load=null,r._resolve=null,r._onCanPlay=r._onCanPlay.bind(r),r._onError=r._onError.bind(r),!1!==n.autoLoad&&r.load(),r}return p(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=h.Rv.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){return this.source.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(h.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(h.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(h.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(h.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(h.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(w),I=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},e}(w);c.push(x,I,S,A,E,g,T,b);var C={__proto__:null,Resource:m,BaseImageResource:w,INSTALLED:c,autoDetectResource:u,AbstractMultiResource:v,ArrayResource:b,BufferResource:g,CanvasResource:S,CubeResource:T,ImageResource:x,SVGResource:E,VideoResource:A,ImageBitmapResource:I},P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===r.Gk.UNPACK);var s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?n.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,n.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0},e}(g),R=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new a.b("disposeFramebuffer"),this.multisample=r.he.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new y(null,{scaleMode:r.M6.NEAREST,resolution:1,mipmap:r.E8.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new y(new P(null,{width:this.width,height:this.height}),{scaleMode:r.M6.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:r.E8.OFF,format:r.hR.DEPTH_COMPONENT,type:r.QE.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],r=n.resolution;n.setSize(t/r,e/r)}if(this.depthTexture){r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),O=function(t){function e(e){void 0===e&&(e={});var i=this;"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:r.he.NONE,(i=t.call(this,null,e)||this).mipmap=r.E8.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new R(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return p(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(y),k=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var s=t.width/2/n,o=t.height/2/r,a=t.x/n+s,h=t.y/r+o;i=l.ER.add(i,l.ER.NW),this.x0=a+s*l.ER.uX(i),this.y0=h+o*l.ER.uY(i),i=l.ER.add(i,2),this.x1=a+s*l.ER.uX(i),this.y1=h+o*l.ER.uY(i),i=l.ER.add(i,2),this.x2=a+s*l.ER.uX(i),this.y2=h+o*l.ER.uY(i),i=l.ER.add(i,2),this.x3=a+s*l.ER.uX(i),this.y3=h+o*l.ER.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),M=new k;function D(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var N=function(t){function e(i,n,r,s,o,a){var h=t.call(this)||this;if(h.noFrame=!1,n||(h.noFrame=!0,n=new l.M_(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=n,h.trim=s,h.valid=!1,h._uvs=M,h.uvMatrix=null,h.orig=r||n,h._rotate=Number(o||0),!0===o)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=a?new l.bR(a.x,a.y):new l.bR(0,0),h._updateID=0,h.textureCacheIds=[],i.valid?h.noFrame?i.valid&&h.onBaseTextureUpdated(i):h.frame=n:i.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&i.on("update",h.onBaseTextureUpdated,h),h}return p(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&s.TextureCache[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},e.prototype.updateUvs=function(){this._uvs===M&&(this._uvs=new k),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,r){void 0===i&&(i={}),void 0===r&&(r=n.W0.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else if(t instanceof y){if(!t.cacheId){var h=i&&i.pixiIdPrefix||"pixiid";t.cacheId=h+"-"+(0,s.uid)(),y.addToCache(t,t.cacheId)}a=t.cacheId}else{if(!t._pixiId){h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+(0,s.uid)()}a=t._pixiId}var l=s.TextureCache[a];if(o&&r&&!l)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return l||t instanceof y?!l&&t instanceof y&&(l=new e(t),e.addToCache(l,a)):(i.resolution||(i.resolution=(0,s.getResolutionOfUrl)(t)),(l=new e(new y(t,i))).baseTexture.cacheId=a,y.addToCache(l.baseTexture,a),e.addToCache(l,a)),l},e.fromURL=function(t,i){var n=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),r=e.from(t,Object.assign({resourceOptions:n},i),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then((function(){return Promise.resolve(r)}))},e.fromBuffer=function(t,i,n,r){return new e(y.fromBuffer(t,i,n,r))},e.fromLoader=function(t,i,r,o){var a=new y(t,Object.assign({scaleMode:n.W0.SCALE_MODE,resolution:(0,s.getResolutionOfUrl)(i)},o)),h=a.resource;h instanceof x&&(h.url=i);var l=new e(a);return r||(r=i),y.addToCache(l.baseTexture,r),e.addToCache(l,r),r!==i&&(y.addToCache(l.baseTexture,i),e.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise((function(t){l.baseTexture.once("loaded",(function(){return t(l)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),s.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)s.TextureCache[t.textureCacheIds[n]]===t&&delete s.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,s=e+n>this.baseTexture.width,o=i+r>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,l="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=n&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new y),D(e._EMPTY),D(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=n.W0.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(y.from(t)),D(e._WHITE),D(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(s.EventEmitter),L=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return p(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var n=this.baseTexture.resolution,r=Math.round(t*n)/n,s=Math.round(e*n)/n;this.valid=r>0&&s>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(r,s),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,n=[],r=1;r<arguments.length;r++)n[r-1]=i[r];return"number"==typeof t&&((0,s.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new O(t))},e}(N),B=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,i){void 0===i&&(i=r.he.NONE);var n=new O(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new L(n)},t.prototype.getOptimalTexture=function(t,e,i,n){var o;void 0===i&&(i=1),void 0===n&&(n=r.he.NONE),t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=n>1?-n:-1:(o=((65535&(t=(0,s.nextPow2)(t)))<<16|65535&(e=(0,s.nextPow2)(e)))>>>0,n>1&&(o+=4294967296*n)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=o,a.setResolution(i),a},t.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||r.he.NONE);return n.filterFrame=t.filterFrame,n},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),F=function(){function t(t,e,i,n,s,o,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=r.QE.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=o,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,n,r,s){return new t(e,i,n,r,s)},t}(),U=0,G=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=U++,this.disposeRunner=new a.b("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===r.yw.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?r.yw.ELEMENT_ARRAY_BUFFER:r.yw.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),j={Float32Array,Uint32Array,Int32Array,Uint8Array};var H={5126:4,5123:2,5121:1},z=0,W={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},V=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=z++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new a.b("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,n,r,s,o,a){if(void 0===i&&(i=0),void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof G||(e instanceof Array&&(e=new Float32Array(e)),e=new G(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,n,r);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new F(c,i,n,r,s,o,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof G||(t instanceof Array&&(t=new Uint16Array(t)),t=new G(t)),t.type=r.yw.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new G;for(t in this.attributes){var r=this.attributes[t],o=this.buffers[r.buffer];e.push(o.data),i.push(r.size*H[r.type]/4),r.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,r={},o=0;o<t.length;o++)n+=e[o],i+=t[o].length;var a=new ArrayBuffer(4*i),h=null,l=0;for(o=0;o<t.length;o++){var c=e[o],u=t[o],d=(0,s.getBufferType)(u);r[d]||(r[d]=new j[d](a)),h=r[d];for(var p=0;p<u.length;p++)h[(p/c|0)*n+l+p%c]=u[p];l+=c}return new Float32Array(a)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new G(this.buffers[i].data.slice(0));for(var i in this.attributes){var n=this.attributes[i];e.attributes[i]=new F(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=r.yw.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var i,n=new t,o=[],a=[],h=[],l=0;l<e.length;l++){i=e[l];for(var c=0;c<i.buffers.length;c++)a[c]=a[c]||0,a[c]+=i.buffers[c].data.length,h[c]=0}for(l=0;l<i.buffers.length;l++)o[l]=new(W[(0,s.getBufferType)(i.buffers[l].data)])(a[l]),n.buffers[l]=new G(o[l]);for(l=0;l<e.length;l++){i=e[l];for(c=0;c<i.buffers.length;c++)o[c].set(i.buffers[c].data,h[c]),h[c]+=i.buffers[c].data.length}if(n.attributes=i.attributes,i.indexBuffer){n.indexBuffer=n.buffers[i.buffers.indexOf(i.indexBuffer)],n.indexBuffer.type=r.yw.ELEMENT_ARRAY_BUFFER;var u=0,d=0,p=0,f=0;for(l=0;l<i.buffers.length;l++)if(i.buffers[l]!==i.indexBuffer){f=l;break}for(var l in i.attributes){var m=i.attributes[l];(0|m.buffer)===f&&(d+=m.size*H[m.type]/4)}for(l=0;l<e.length;l++){var g=e[l].indexBuffer.data;for(c=0;c<g.length;c++)n.indexBuffer.data[c+p]+=u;u+=e[l].buffers[f].data.length/d,p+=g.length}}return n},t}(),X=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return p(e,t),e}(V),Y=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new G(e.vertices),e.uvBuffer=new G(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return p(e,t),e.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(V),q=0,$=function(){function t(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=q++,this.static=!!e,this.ubo=!!i,t instanceof G?(this.buffer=t,this.buffer.type=r.yw.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new G(new Float32Array(1)),this.buffer.type=r.yw.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,i,n){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(i,n)},t.from=function(e,i,n){return new t(e,i,n)},t.uboFrom=function(e,i){return new t(e,null==i||i,!0)},t}(),K=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=r.he.NONE,this.sourceFrame=new l.M_,this.destinationFrame=new l.M_,this.bindingSourceFrame=new l.M_,this.bindingDestinationFrame=new l.M_,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),J=[new l.bR,new l.bR,new l.bR,new l.bR],Z=new l.uq,Q=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new B,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new X,this.quadUv=new Y,this.tempRect=new l.M_,this.activeState={},this.globalUniforms=new $({outputFrame:new l.M_,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var i,n,r=this.renderer,s=this.defaultFilterStack,o=this.statePool.pop()||new K,a=this.renderer.renderTexture,h=e[0].resolution,l=e[0].multisample,c=e[0].padding,u=e[0].autoFit,d=null===(i=e[0].legacy)||void 0===i||i,p=1;p<e.length;p++){var f=e[p];h=Math.min(h,f.resolution),l=Math.min(l,f.multisample),c=this.useMaxPadding?Math.max(c,f.padding):c+f.padding,u=u&&f.autoFit,d=d||null===(n=f.legacy)||void 0===n||n}1===s.length&&(this.defaultFilterStack[0].renderTexture=a.current),s.push(o),o.resolution=h,o.multisample=l,o.legacy=d,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(c);var m=this.tempRect.copyFrom(a.sourceFrame);r.projection.transform&&this.transformAABB(Z.copyFrom(r.projection.transform).invert(),m),u?(o.sourceFrame.fit(m),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(m)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,a.current?a.current.resolution:r.resolution,a.sourceFrame,a.destinationFrame,r.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,h,l),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var g=this.tempRect;g.x=0,g.y=0,g.width=o.sourceFrame.width,g.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(a.sourceFrame),o.bindingDestinationFrame.copyFrom(a.destinationFrame),o.transform=r.projection.transform,r.projection.transform=null,a.bind(o.renderTexture,o.sourceFrame,g),r.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,o=n.inputPixel,a=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,r.fr.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,e.resolution);u.filterFrame=c.filterFrame;var d=0;for(d=0;d<i.length-1;++d){1===d&&e.multisample>1&&((u=this.getOptimalFilterTexture(c.width,c.height,e.resolution)).filterFrame=c.filterFrame),i[d].apply(this,c,u,r.fr.CLEAR,e);var p=c;c=u,u=p}i[d].apply(this,c,l.renderTexture,r.fr.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=r.fr.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&s.stateId||this.forceClear;(e===r.fr.CLEAR||e===r.fr.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(r._4.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(r._4.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,r=i.destinationFrame,s=e._texture.orig,o=t.set(r.width,0,0,r.height,n.x,n.y),a=e.worldTransform.copyTo(l.uq.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i,n){return void 0===i&&(i=1),void 0===n&&(n=r.he.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},t.prototype.getFilterTexture=function(t,e,i){if("number"==typeof t){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||r.he.NONE);return s.filterFrame=t.filterFrame,s},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var i=J[0],n=J[1],r=J[2],s=J[3];i.set(e.left,e.top),n.set(e.left,e.bottom),r.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(r,r),t.apply(s,s);var o=Math.min(i.x,n.x,r.x,s.x),a=Math.min(i.y,n.y,r.y,s.y),h=Math.max(i.x,n.x,r.x,s.x),l=Math.max(i.y,n.y,r.y,s.y);e.x=o,e.y=a,e.width=h-o,e.height=l-a},t.prototype.roundFrame=function(t,e,i,n,r){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(r){var s=r.a,o=r.b,a=r.c,h=r.d;if((Math.abs(o)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(h)>1e-4))return}(r=r?Z.copyFrom(r):Z.identity()).translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(r,t),t.ceil(e),this.transformAABB(r.invert(),t)}},t}(),tt=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),et=function(){function t(t){this.renderer=t,this.emptyRenderer=new tt(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},t.prototype.boundArray=function(t,e,i,n){for(var r=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var l=r[h],c=l._batchLocation;if(c>=0&&c<n&&e[c]===l)s[h]=c;else for(;a<n;){var u=e[a];if(!u||u._batchEnabled!==i||u._batchLocation!==a){s[h]=a,l._batchLocation=a,e[a]=l;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),it=0,nt=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=it++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=it++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(n.W0.PREFER_ENV>=r.Km.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=r.he.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},st=new l.M_,ot=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new R(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new l.M_,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;n.W0.PREFER_ENV===r.Km.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,i){void 0===i&&(i=0);var n=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,r.mipLevel=i),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,r.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var o=t.colorTextures[s];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>i,h=e.height>>i,l=a/e.width;this.setViewport(e.x*l,e.y*l,a,h)}else{a=t.width>>i,h=t.height>>i;this.setViewport(0,0,a,h)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,n){var r=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),r.width===i&&r.height===n&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,i,n,s){void 0===s&&(s=r.wn.COLOR|r.wn.DEPTH);var o=this.gl;o.clearColor(t,e,i,n),o.clear(s)},t.prototype.initFramebuffer=function(t){var e=this.gl,i=new rt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,r=n.length;e.drawBuffers||(r=Math.min(r,1));for(var s=0;s<r;s++){var o=n[s],a=o.parentTextureArray||o;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures,s=r.length;i.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var o=[],a=0;a<s;a++){var h=r[a],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),0===a&&n.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+a,h.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+a))}if((o.length>1&&i.drawBuffers(o),t.depthTexture)&&this.writeDepthTexture){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,i=r.he.NONE;if(t<=1||null===e)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return 1===i&&(i=r.he.NONE),i},t.prototype.blit=function(t,e,i){var n=this,r=n.current,s=n.renderer,o=n.gl,a=n.CONTEXT_UID;if(2===s.context.webGLVersion&&r){var h=r.glFramebuffers[a];if(h){if(!t){if(!h.msaaBuffer)return;var l=r.colorTextures[0];if(!l)return;h.blitFramebuffer||(h.blitFramebuffer=new R(r.width,r.height),h.blitFramebuffer.addColorTexture(0,l)),(t=h.blitFramebuffer).colorTextures[0]!==l&&(t.colorTextures[0]=l,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=st).width=r.width,e.height=r.height),i||(i=e);var c=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var r=this.managedFramebuffers.indexOf(t);r>=0&&this.managedFramebuffers.splice(r,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var i=t.width,n=t.height,r=this.gl,s=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,s),e.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,e.multisample,r.DEPTH24_STENCIL8,i,n):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i,n),e.stencil=s,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,s)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new l.M_},t.prototype.destroy=function(){this.renderer=null},t}(),at={5126:4,5123:2,5121:1},ht=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;n.W0.PREFER_ENV===r.Km.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,n,r){return s.drawElementsInstancedANGLE(t,e,i,n,r)},t.drawArraysInstanced=function(t,e,i,n){return s.drawArraysInstancedANGLE(t,e,i,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],r=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},r=!0);var s=n[e.program.id]||this.initGeometryVao(t,e,r);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?i.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var r in n)if(!i[r])throw new Error('shader and geometry incompatible, geometry missing the "'+r+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,r=["g",t.id];for(var s in i)n[s]&&r.push(s,n[s].location);return r.join("-")},t.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var n=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.program;o.glPrograms[r]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var a=this.getSignature(t,o),h=t.glVertexArrayObjects[this.CONTEXT_UID],l=h[a];if(l)return h[o.id]=l,l;var c=t.buffers,u=t.attributes,d={},p={};for(var f in c)d[f]=0,p[f]=0;for(var f in u)!u[f].size&&o.attributeData[f]?u[f].size=o.attributeData[f].size:u[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[u[f].buffer]+=u[f].size*at[u[f].type];for(var f in u){var m=u[f],g=m.size;void 0===m.stride&&(d[m.buffer]===g*at[m.type]?m.stride=0:m.stride=d[m.buffer]),void 0===m.start&&(m.start=p[m.buffer],p[m.buffer]+=g*at[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var _=0;_<c.length;_++){var y=c[_];s.bind(y),i&&y._glBuffers[r].refCount++}return this.activateVao(t,o),this._activeVao=l,h[o.id]=l,h[a]=l,l},t.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=t.buffers,o=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),n){if(o)for(var a=0;a<s.length;a++){var h=s[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,0!==h.refCount||e||o.dispose(s[a],e))}if(!e)for(var l in n)if("g"===l[0]){var c=n[l];this._activeVao===c&&this.unbind(),r.deleteVertexArray(c)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,r=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);var a=null;for(var h in o){var l=o[h],c=s[l.buffer],u=c._glBuffers[n];if(e.attributeData[h]){a!==u&&(r.bind(c),a=u);var d=e.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,i,n){var r=this.gl,s=this._activeGeometry;if(s.indexBuffer){var o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?r.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(i||0)*o,n||1):r.drawElements(t,e||s.indexBuffer.data.length,a,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?r.drawArraysInstanced(t,i,e||s.getSize(),n||1):r.drawArrays(t,i,e||s.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),lt=function(){function t(t){void 0===t&&(t=null),this.type=r.vg.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=n.W0.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=r.vg.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ct(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}function ut(t,e){var i=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),n=t.getShaderInfoLog(e),r=n.split("\n"),s={},o=r.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||s[t])&&(s[t]=!0,!0)})),a=[""];o.forEach((function(t){i[t-1]="%c"+i[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var h=i.join("\n");a[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function dt(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function pt(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return dt(2*e);case"bvec3":return dt(3*e);case"bvec4":return dt(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ft,mt={},gt=mt;function _t(){if(gt===mt||gt&&gt.isContextLost()){var t=n.W0.ADAPTER.createCanvas(),e=void 0;n.W0.PREFER_ENV>=r.Km.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),gt=e}return gt}function yt(t,e,i){if("precision"!==t.substring(0,9)){var n=e;return e===r.Pk.HIGH&&i!==r.Pk.HIGH&&(n=r.Pk.MEDIUM),"precision "+n+" float;\n"+t}return i!==r.Pk.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var vt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function bt(t){return vt[t]}var wt=null,St={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Tt(t,e){if(!wt){var i=Object.keys(St);wt={};for(var n=0;n<i.length;++n){var r=i[n];wt[t[r]]=St[r]}}return wt[e]}var xt=[{test:function(t){return"float"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t,e){return!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture)},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Et={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},At={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var It,Ct=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Pt(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function Rt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=Ct.replace(/%forloop%/gi,Pt(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Ot=0,kt={},Mt=function(){function t(e,i,s){void 0===s&&(s="pixi-shader"),this.id=Ot++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(s=s.replace(/\s+/g,"-"),kt[s]?(kt[s]++,s+="-"+kt[s]):kt[s]=1,this.vertexSrc="#define SHADER_NAME "+s+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+s+"\n"+this.fragmentSrc,this.vertexSrc=yt(this.vertexSrc,n.W0.PRECISION_VERTEX,r.Pk.HIGH),this.fragmentSrc=yt(this.fragmentSrc,n.W0.PRECISION_FRAGMENT,function(){if(!ft){ft=r.Pk.MEDIUM;var t=_t();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);ft=e.precision?r.Pk.HIGH:r.Pk.MEDIUM}}return ft}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,n){var r=e+i,o=s.ProgramCache[r];return o||(s.ProgramCache[r]=o=new t(e,i,n)),o},t}(),Dt=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof $?e:new $(e):new $({}),this.disposeRunner=new a.b("disposeShader")}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,n){return new t(Mt.from(e,i),n)},t}(),Nt=function(){function t(){this.data=0,this.blendMode=r.B9.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==r.B9.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Lt=function(t){function e(i,r,s){var o=this,a=Mt.from(i||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=t.call(this,a,s)||this).padding=0,o.resolution=n.W0.FILTER_RESOLUTION,o.multisample=n.W0.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Nt,o}return p(e,t),e.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Dt),Bt=new l.uq,Ft=function(){function t(t,e){this._texture=t,this.mapCoord=new l.uq,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(Bt.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Bt));var s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},t}(),Ut=function(t){function e(e,i,n){var r=this,s=null;return"string"!=typeof e&&void 0===i&&void 0===n&&(s=e,e=void 0,i=void 0,n=void 0),(r=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",i||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n)||this).maskSprite=s,r.maskMatrix=new l.uq,r}return p(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,i,n){var r=this._maskSprite,s=r._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Ft(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))},e}(Lt),Gt=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new lt;n.pooled=!0,n.maskObject=e,i=n}var s=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==r.vg.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case r.vg.SCISSOR:this.renderer.scissor.push(i);break;case r.vg.STENCIL:this.renderer.stencil.push(i);break;case r.vg.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case r.vg.COLOR:this.pushColorMask(i)}i.type===r.vg.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case r.vg.SCISSOR:this.renderer.scissor.pop(e);break;case r.vg.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case r.vg.SPRITE:this.popSpriteMask(e);break;case r.vg.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var i=this.maskStack[this.maskStack.length-1];i.type===r.vg.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=r.vg.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=r.vg.SCISSOR:t.type=r.vg.STENCIL:t.type=r.vg.COLOR},t.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,r=t._target,s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex])||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new Ut]);var o,a,h=this.renderer,l=h.renderTexture;if(l.current){var c=l.current;o=t.resolution||c.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:c.multisample}else o=t.resolution||h.resolution,a=null!==(i=t.multisample)&&void 0!==i?i:h.multisample;s[0].resolution=o,s[0].multisample=a,s[0].maskSprite=n;var u=r.filterArea;r.filterArea=n.getBounds(!0),h.filter.push(r,s),r.filterArea=u,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(t){var e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))},t.prototype.popColorMask=function(t){var e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))},t.prototype.destroy=function(){this.renderer=null},t}(),jt=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Ht=new l.uq,zt=[],Wt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=n.W0.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return p(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var e;if(!t._scissorRectLocal){var i=t._scissorRect,n=t.maskObject,r=this.renderer,s=r.renderTexture,o=n.getBounds(!0,null!==(e=zt.pop())&&void 0!==e?e:new l.M_);this.roundFrameToPixels(o,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),i&&o.fit(i),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,i=t.b,n=t.c,r=t.d;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(r)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect())return!1;if(e.isMatrixRotated(i.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0},e.prototype.roundFrameToPixels=function(t,i,n,r,s){e.isMatrixRotated(s)||((s=s?Ht.copyFrom(s):Ht.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.renderer.filter.transformAABB(s,t),t.fit(r),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;t&&zt.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(jt),Vt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=n.W0.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return p(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var r=t._colorMask;0!==r&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(t._colorMask=r,i.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))),this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;0!==n&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==n&&(i._colorMask=n,e.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(jt),Xt=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new l.uq,this.transform=null}return t.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,n){var r=this.projectionMatrix,s=n?-1:1;r.identity(),r.a=1/e.width*2,r.d=s*(1/e.height*2),r.tx=-1-e.x*r.a,r.ty=-s-e.y*r.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Yt=new l.M_,qt=new l.M_,$t=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new l.M_,this.destinationFrame=new l.M_,this.viewportFrame=new l.M_}return t.prototype.bind=function(t,e,i){void 0===t&&(t=null);var n,r,s,o=this.renderer;this.current=t,t?(s=(n=t.baseTexture).resolution,e||(Yt.width=t.frame.width,Yt.height=t.frame.height,e=Yt),i||(qt.x=t.frame.x,qt.y=t.frame.y,qt.width=e.width,qt.height=e.height,i=qt),r=n.framebuffer):(s=o.resolution,e||(Yt.width=o.screen.width,Yt.height=o.screen.height,e=Yt),i||((i=Yt).width=e.width,i.height=e.height));var a=this.viewportFrame;a.x=i.x*s,a.y=i.y*s,a.width=i.width*s,a.height=i.height*s,t||(a.y=o.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(r,a),this.renderer.projection.update(i,e,s,!r),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,r=i.width!==n.width||i.height!==n.height;if(r){var s=this.viewportFrame,o=s.x,a=s.y,h=s.width,l=s.height;o=Math.round(o),a=Math.round(a),h=Math.round(h),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,h,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),r&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Kt(t,e,i,n,r){i.buffer.update(r)}var Jt={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Zt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Qt(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),i=0,n=0,r=0,s=0;s<e.length;s++){var o=e[s];if(i=Zt[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,n%i!=0&&n<16){var a=n%i%16;n+=a,r+=a}n+i>16?(r=16*Math.ceil(r/16),o.offset=r,r+=i,n=i):(o.offset=r,n+=i,r+=i)}return{uboElements:e,size:r=16*Math.ceil(r/16)}}function te(t,e){var i=[];for(var n in t)e[n]&&i.push(e[n]);return i.sort((function(t,e){return t.index-e.index})),i}function ee(t,e){if(!t.autoManage)return{size:0,syncFunc:Kt};for(var i=Qt(te(t.uniforms,e)),n=i.uboElements,r=i.size,s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],o=0;o<n.length;o++){for(var a=n[o],h=t.uniforms[a.data.name],l=a.data.name,c=!1,u=0;u<xt.length;u++){var d=xt[u];if(d.codeUbo&&d.test(a.data,h)){s.push("offset = "+a.offset/4+";",xt[u].codeUbo(a.data.name,h)),c=!0;break}}if(!c)if(a.data.size>1){var p=bt(a.data.type),f=Math.max(Zt[a.data.type]/16,1),m=p/f,g=(4-m%4)%4;s.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*f+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+g+";\n                }\n\n                ")}else{var _=Jt[a.data.type];s.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n                "+_+";\n                ")}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}var ie=function(){},ne=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function re(t,e){var i=ct(t,t.VERTEX_SHADER,e.vertexSrc),n=ct(t,t.FRAGMENT_SHADER,e.fragmentSrc),r=t.createProgram();if(t.attachShader(r,i),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||function(t,e,i,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||ut(t,i),t.getShaderParameter(n,t.COMPILE_STATUS)||ut(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,r,i,n),e.attributeData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var s=e.getActiveAttrib(t,r);if(0!==s.name.indexOf("gl_")){var o=Tt(e,s.type),a={type:o,name:s.name,size:bt(o),location:e.getAttribLocation(t,s.name)};i[s.name]=a}}return i}(r,t),e.uniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),h=Tt(e,s.type);i[o]={name:o,index:r,type:h,size:s.size,isArray:a,value:pt(h,s.size)}}return i}(r,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var s=Object.keys(e.attributeData);s.sort((function(t,e){return t>e?1:-1}));for(var o=0;o<s.length;o++)e.attributeData[s[o]].location=o,t.bindAttribLocation(r,o,s[o]);t.linkProgram(r)}t.deleteShader(i),t.deleteShader(n);var a={};for(var o in e.uniformData){var h=e.uniformData[o];a[o]={location:t.getUniformLocation(r,o),value:pt(h.type,h.size)}}return new ne(r,a)}var se=0,oe={textureCount:0,uboCount:0},ae=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=se++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof It)return It;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");It=!0===t({a:"b"},"a","b")}catch(t){It=!1}return It}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(oe.textureCount=0,oe.uboCount=0,this.syncUniformGroup(t.uniformGroup,oe)),n},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},t.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i,n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var r in t.uniforms){var s=e[r];if(s){for(var o=t.uniforms[r],a=!1,h=0;h<xt.length;h++)if(xt[h].test(s,o)){n.push(xt[h].code(r,o)),a=!0;break}if(!a){var l=(1!==s.size||s.isArray?At:Et)[s.type].replace("location",'ud["'+r+'"].location');n.push('\n            cu = ud["'+r+'"];\n            cv = cu.value;\n            v = uv["'+r+'"];\n            '+l+";")}}else(null===(i=t.uniforms[r])||void 0===i?void 0:i.group)&&(t.uniforms[r].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+r+", '"+r+"');\n                    "):n.push("\n                        renderer.shader.syncUniformGroup(uv."+r+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,oe,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var r=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,r,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[s];if(o||(o=this._uboCache[s]=ee(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(o.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,i){var n=t.uniforms,r=[i+"-"];for(var s in n)r.push(s),e[s]&&r.push(e[s].type);return r.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=re(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var he=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=r.B9.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Nt,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[r.B9.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.ADD]=[t.ONE,t.ONE],e[r.B9.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.NONE]=[0,0],e[r.B9.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[r.B9.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.B9.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[r.B9.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[r.B9.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[r.B9.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[r.B9.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[r.B9.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[r.B9.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[r.B9.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[r.B9.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),le=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=n.W0.GC_MAX_IDLE,this.checkCountMax=n.W0.GC_MAX_CHECK_COUNT,this.mode=n.W0.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==r.OS.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){var s=0;for(n=0;n<e.length;n++)null!==e[n]&&(e[s++]=e[n]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},t.prototype.destroy=function(){this.renderer=null},t}();var ce=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=r.QE.UNSIGNED_BYTE,this.internalFormat=r.hR.RGBA,this.samplerType=0},ue=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new y,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,i,n,s,o,a,h,l,c,u,d,p,f,m,g,_,y,v,b,w,S,T,x;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[r.QE.UNSIGNED_BYTE]=((i={})[r.hR.RGBA]=t.RGBA8,i[r.hR.RGB]=t.RGB8,i[r.hR.RG]=t.RG8,i[r.hR.RED]=t.R8,i[r.hR.RGBA_INTEGER]=t.RGBA8UI,i[r.hR.RGB_INTEGER]=t.RGB8UI,i[r.hR.RG_INTEGER]=t.RG8UI,i[r.hR.RED_INTEGER]=t.R8UI,i[r.hR.ALPHA]=t.ALPHA,i[r.hR.LUMINANCE]=t.LUMINANCE,i[r.hR.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),e[r.QE.BYTE]=((n={})[r.hR.RGBA]=t.RGBA8_SNORM,n[r.hR.RGB]=t.RGB8_SNORM,n[r.hR.RG]=t.RG8_SNORM,n[r.hR.RED]=t.R8_SNORM,n[r.hR.RGBA_INTEGER]=t.RGBA8I,n[r.hR.RGB_INTEGER]=t.RGB8I,n[r.hR.RG_INTEGER]=t.RG8I,n[r.hR.RED_INTEGER]=t.R8I,n),e[r.QE.UNSIGNED_SHORT]=((s={})[r.hR.RGBA_INTEGER]=t.RGBA16UI,s[r.hR.RGB_INTEGER]=t.RGB16UI,s[r.hR.RG_INTEGER]=t.RG16UI,s[r.hR.RED_INTEGER]=t.R16UI,s[r.hR.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,s),e[r.QE.SHORT]=((o={})[r.hR.RGBA_INTEGER]=t.RGBA16I,o[r.hR.RGB_INTEGER]=t.RGB16I,o[r.hR.RG_INTEGER]=t.RG16I,o[r.hR.RED_INTEGER]=t.R16I,o),e[r.QE.UNSIGNED_INT]=((a={})[r.hR.RGBA_INTEGER]=t.RGBA32UI,a[r.hR.RGB_INTEGER]=t.RGB32UI,a[r.hR.RG_INTEGER]=t.RG32UI,a[r.hR.RED_INTEGER]=t.R32UI,a[r.hR.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[r.QE.INT]=((h={})[r.hR.RGBA_INTEGER]=t.RGBA32I,h[r.hR.RGB_INTEGER]=t.RGB32I,h[r.hR.RG_INTEGER]=t.RG32I,h[r.hR.RED_INTEGER]=t.R32I,h),e[r.QE.FLOAT]=((l={})[r.hR.RGBA]=t.RGBA32F,l[r.hR.RGB]=t.RGB32F,l[r.hR.RG]=t.RG32F,l[r.hR.RED]=t.R32F,l[r.hR.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[r.QE.HALF_FLOAT]=((c={})[r.hR.RGBA]=t.RGBA16F,c[r.hR.RGB]=t.RGB16F,c[r.hR.RG]=t.RG16F,c[r.hR.RED]=t.R16F,c),e[r.QE.UNSIGNED_SHORT_5_6_5]=((u={})[r.hR.RGB]=t.RGB565,u),e[r.QE.UNSIGNED_SHORT_4_4_4_4]=((d={})[r.hR.RGBA]=t.RGBA4,d),e[r.QE.UNSIGNED_SHORT_5_5_5_1]=((p={})[r.hR.RGBA]=t.RGB5_A1,p),e[r.QE.UNSIGNED_INT_2_10_10_10_REV]=((f={})[r.hR.RGBA]=t.RGB10_A2,f[r.hR.RGBA_INTEGER]=t.RGB10_A2UI,f),e[r.QE.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[r.hR.RGB]=t.R11F_G11F_B10F,m),e[r.QE.UNSIGNED_INT_5_9_9_9_REV]=((g={})[r.hR.RGB]=t.RGB9_E5,g),e[r.QE.UNSIGNED_INT_24_8]=((_={})[r.hR.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,_),e[r.QE.FLOAT_32_UNSIGNED_INT_24_8_REV]=((y={})[r.hR.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,y),x=e):((v={})[r.QE.UNSIGNED_BYTE]=((b={})[r.hR.RGBA]=t.RGBA,b[r.hR.RGB]=t.RGB,b[r.hR.ALPHA]=t.ALPHA,b[r.hR.LUMINANCE]=t.LUMINANCE,b[r.hR.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),v[r.QE.UNSIGNED_SHORT_5_6_5]=((w={})[r.hR.RGB]=t.RGB,w),v[r.QE.UNSIGNED_SHORT_4_4_4_4]=((S={})[r.hR.RGBA]=t.RGBA,S),v[r.QE.UNSIGNED_SHORT_5_5_5_1]=((T={})[r.hR.RGBA]=t.RGBA,T),x=v),x}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new ce(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ce(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)},t.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=i[o];if(a)a._glTextures[s].samplerType!==r.XZ.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new ce(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=null!==(n=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==n?n:t.format,2===this.webGLVersion&&t.type===r.QE.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==r.XZ.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,o=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,o.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&(0,s.removeItems)(this.managedTextures,n,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==r.E8.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=r.uR.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==r.E8.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===r.M6.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===r.M6.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===r.M6.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===r.M6.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),de={__proto__:null,FilterSystem:Q,BatchSystem:et,ContextSystem:nt,FramebufferSystem:ot,GeometrySystem:ht,MaskSystem:Gt,ScissorSystem:Wt,StencilSystem:Vt,ProjectionSystem:Xt,RenderTextureSystem:$t,ShaderSystem:ae,StateSystem:he,TextureGCSystem:le,TextureSystem:ue},pe=new l.uq,fe=function(t){function e(e,i){void 0===e&&(e=r.h3.UNKNOWN);var o=t.call(this)||this;return i=Object.assign({},n.W0.RENDER_OPTIONS,i),o.options=i,o.type=e,o.screen=new l.M_(0,0,i.width,i.height),o.view=i.view||n.W0.ADAPTER.createCanvas(),o.resolution=i.resolution||n.W0.RESOLUTION,o.useContextAlpha=i.useContextAlpha,o.autoDensity=!!i.autoDensity,o.preserveDrawingBuffer=i.preserveDrawingBuffer,o.clearBeforeRender=i.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=i.backgroundColor||o._backgroundColor,o.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&((0,s.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=i.transparent,o.backgroundAlpha=i.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return p(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var i=this.view.width/this.resolution,n=this.view.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=n+"px"),this.emit("resize",i,n)},e.prototype.generateTexture=function(t,e,i,n){void 0===e&&(e={}),"number"==typeof e&&((0,s.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:n});var r=e.region,o=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}(e,["region"]);0===(n=r||t.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);var a=L.create(f({width:n.width,height:n.height},o));return pe.tx=-n.x,pe.ty=-n.y,this.render(t,{renderTexture:a,clear:!1,transform:pe,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=r.h3.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,s.hex2string)(t),(0,s.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(s.EventEmitter),me=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},ge=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,n=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)},t.prototype.bindBufferBase=function(t,e){var i=this.gl,n=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var r=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,r.buffer)}},t.prototype.bindBufferRange=function(t,e,i){var n=this.gl,r=this.CONTEXT_UID;i=i||0;var s=t._glBuffers[r]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,s.buffer,256*i,256)},t.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,n=t._glBuffers[i];if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new me(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),_e=function(t){function e(i){var n=t.call(this,r.h3.WEBGL,i)||this;return i=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new a.b("destroy"),contextChange:new a.b("contextChange"),reset:new a.b("reset"),update:new a.b("update"),postrender:new a.b("postrender"),prerender:new a.b("prerender"),resize:new a.b("resize")},n.runners.contextChange.add(n),n.globalUniforms=new $({projectionMatrix:new l.uq},!0),n.addSystem(Gt,"mask").addSystem(nt,"context").addSystem(he,"state").addSystem(ae,"shader").addSystem(ue,"texture").addSystem(ge,"buffer").addSystem(ht,"geometry").addSystem(ot,"framebuffer").addSystem(Wt,"scissor").addSystem(Vt,"stencil").addSystem(Xt,"projection").addSystem(le,"textureGC").addSystem(Q,"filter").addSystem($t,"renderTexture").addSystem(et,"batch"),n.initPlugins(e.__plugins),n.multisample=void 0,i.context?n.context.initFromContext(i.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:i.antialias,premultipliedAlpha:n.useContextAlpha&&"notMultiplied"!==n.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,(0,s.sayHello)(2===n.context.webGLVersion?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return p(e,t),e.create=function(t){if((0,s.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}t>=r.he.HIGH?this.multisample=r.he.HIGH:t>=r.he.MEDIUM?this.multisample=r.he.MEDIUM:t>=r.he.LOW?this.multisample=r.he.LOW:this.multisample=r.he.NONE},e.prototype.addSystem=function(t,e){var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=i,this.runners)this.runners[n].add(i);return this},e.prototype.render=function(t,e){var i,n,r,o;if(e&&(e instanceof L?((0,s.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),i=e,n=arguments[2],r=arguments[3],o=arguments[4]):(i=e.renderTexture,n=e.clear,r=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(i||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,i,n,r){void 0===i&&(i={});var s=t.prototype.generateTexture.call(this,e,i,n,r);return this.framebuffer.blit(),s},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return(0,s.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,e){(0,s.deprecation)("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),o.X.add({name:t,type:o.A.RendererPlugin,ref:e})},e.__plugins={},e}(fe);function ye(t){return _e.create(t)}o.X.handleByMap(o.A.RendererPlugin,_e.__plugins);var ve="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",be="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",we=function(){function t(t){(0,s.deprecation)("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),Se=function(){this.texArray=null,this.blend=0,this.type=r._4.TRIANGLES,this.start=0,this.size=0,this.data=null},Te=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),xe=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Ee=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Nt.for2d(),i.size=4*n.W0.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return p(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;n.W0.PREFER_ENV===r.Km.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n.W0.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Rt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,n=this.size/4,r=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new Se);for(;i.length<r;)i.push(new Te);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,n=e._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++y._globalBatch,h=0,l=n[0],c=0;r.copyBoundTextures(s,i);for(var u=0;u<this._bufferSize;++u){var d=t[u];t[u]=null,d._batchEnabled!==a&&(l.count>=i&&(r.boundArray(l,s,a,i),this.buildDrawCalls(l,c,u),c=u,l=n[++h],++a),d._batchEnabled=a,d.touched=o,l.elements[l.count++]=d)}l.count>0&&(r.boundArray(l,s,a,i),this.buildDrawCalls(l,c,this._bufferSize),++h,++a);for(u=0;u<s.length;u++)s[u]=null;y._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,n){var r=this,o=r._bufferedElements,a=r._attributeBuffer,h=r._indexBuffer,l=r.vertexSize,c=e._drawCallPool,u=this._dcIndex,d=this._aIndex,p=this._iIndex,f=c[u];f.start=this._iIndex,f.texArray=t;for(var m=i;m<n;++m){var g=o[m],_=g._texture.baseTexture,y=s.premultiplyBlendMode[_.alphaMode?1:0][g.blendMode];o[m]=null,i<m&&f.blend!==y&&(f.size=p-f.start,i=m,(f=c[++u]).texArray=t,f.start=p),this.packInterleavedGeometry(g,a,h,d,p),d+=g.vertexData.length/2*l,p+=g.indices.length,f.blend=y}i<n&&(f.size=p-f.start,++u),this._dcIndex=u,this._aIndex=d,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,i=t._attributeBuffer,r=t._indexBuffer;n.W0.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,n=i.gl,r=i.state,s=e._drawCallPool,o=null,a=0;a<t;a++){var h=s[a],l=h.texArray,c=h.type,u=h.size,d=h.start,p=h.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,r.set(this.state),n.drawElements(c,u,n.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),n.W0.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=(0,s.nextPow2)(Math.ceil(t/8)),i=(0,s.log2)(e),n=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._aBuffers[n];return r||(this._aBuffers[n]=r=new xe(n*this.vertexSize*4)),r},e.prototype.getIndexBuffer=function(t){var e=(0,s.nextPow2)(Math.ceil(t/12)),i=(0,s.log2)(e),n=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var r=this._iBuffers[i];return r||(this._iBuffers[i]=r=new Uint16Array(n)),r},e.prototype.packInterleavedGeometry=function(t,e,i,n,r){for(var o=e.uint32View,a=e.float32View,h=n/this.vertexSize,l=t.uvs,c=t.indices,u=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?(0,s.premultiplyTint)(t._tintRGB,p):t._tintRGB+(255*p<<24),m=0;m<u.length;m+=2)a[n++]=u[m],a[n++]=u[m+1],a[n++]=l[m],a[n++]=l[m+1],o[n++]=f,a[n++]=d;for(m=0;m<c.length;m++)i[r++]=h+c[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(tt),Ae=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=$.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Mt(this.vertexSrc,n)}var r={tint:new Float32Array([1,1,1,1]),translationMatrix:new l.uq,default:this.defaultGroupCache[t]};return new Dt(this.programCache[t],r)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),Ie=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new G(null,e,!1),i._indexBuffer=new G(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,r.QE.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,r.QE.FLOAT).addAttribute("aColor",i._buffer,4,!0,r.QE.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,r.QE.FLOAT).addIndex(i._indexBuffer),i}return p(e,t),e}(V),Ce="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Pe="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Re=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Ce,fragment:Pe,geometryClass:Ie,vertexSize:6},t),i=e.vertex,n=e.fragment,r=e.vertexSize,s=e.geometryClass;return function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new Ae(i,n),o.geometryClass=s,o.vertexSize=r,o}return p(e,t),e}(Ee)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Ce},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Pe},enumerable:!1,configurable:!0}),t}(),Oe=Re.create();Object.assign(Oe,{extension:{name:"batch",type:o.A.RendererPlugin}});var ke={},Me=function(t){Object.defineProperty(ke,t,{get:function(){return(0,s.deprecation)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),C[t]}})};for(var De in C)Me(De);var Ne={},Le=function(t){Object.defineProperty(Ne,t,{get:function(){return(0,s.deprecation)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),de[t]}})};for(var De in de)Le(De);var Be="6.5.8"},5825:(t,e,i)=>{"use strict";i.d(e,{cz:()=>a,dC:()=>u,mc:()=>p,q9:()=>c});var n=i(4425),r=i(5489),s=i(8451),o=i(8351);n.W0.SORTABLE_CHILDREN=!1;var a=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.M_.EMPTY:((t=t||new r.M_(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,r=t.c,s=t.d,o=t.tx,a=t.ty,h=i*e.x+r*e.y+o,l=n*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,n=s>n?s:n,r=o>r?o:r,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,n=s>n?s:n,r=o>r?o:r,e=(s=t[6])<e?s:e,i=(o=t[7])<i?o:i,n=s>n?s:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){this.addFrameMatrix(t.worldTransform,e,i,n,r)},t.prototype.addFrameMatrix=function(t,e,i,n,r){var s=t.a,o=t.b,a=t.c,h=t.d,l=t.tx,c=t.ty,u=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=s*e+a*i+l,g=o*e+h*i+c;u=m<u?m:u,d=g<d?g:d,p=m>p?m:p,f=g>f?g:f,u=(m=s*n+a*i+l)<u?m:u,d=(g=o*n+h*i+c)<d?g:d,p=m>p?m:p,f=g>f?g:f,u=(m=s*e+a*r+l)<u?m:u,d=(g=o*e+h*r+c)<d?g:d,p=m>p?m:p,f=g>f?g:f,u=(m=s*n+a*r+l)<u?m:u,d=(g=o*n+h*r+c)<d?g:d,p=m>p?m:p,f=g>f?g:f,this.minX=u,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,i){for(var n=this.minX,r=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2){var h=t[a],l=t[a+1];n=h<n?h:n,r=l<r?l:r,s=h>s?h:s,o=l>o?l:o}this.minX=n,this.minY=r,this.maxX=s,this.maxY=o},t.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},t.prototype.addVerticesMatrix=function(t,e,i,n,r,s){void 0===r&&(r=0),void 0===s&&(s=r);for(var o=t.a,a=t.b,h=t.c,l=t.d,c=t.tx,u=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,g=i;g<n;g+=2){var _=e[g],y=e[g+1],v=o*_+h*y+c,b=l*y+a*_+u;d=Math.min(d,v-r),f=Math.max(f,v+r),p=Math.min(p,b-s),m=Math.max(m,b+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,n,r,s){t-=r,e-=s,i+=r,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},t}(),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h(t,e)};function l(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new r.dL,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new a,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return l(e,t),e.mixin=function(t){for(var i=Object.keys(t),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new r.M_),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new r.M_),t=this._localBoundsRect),this._localBounds||(this._localBounds=new a);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new u),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*r.bO},set:function(t){this.transform.rotation=t*r.Td},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var e;if(this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1));if(this._mask=t,this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}},enumerable:!1,configurable:!0}),e}(s.EventEmitter),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return l(e,t),e}(c);function d(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}c.prototype.displayObjectUpdateTransform=c.prototype.updateTransform;var p=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=n.W0.SORTABLE_CHILDREN,e.sortDirty=!1,e}return l(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var n=0;n<e.length;n++)this.addChild(e[n]);else{var r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var n=0;n<e.length;n++)this.removeChild(e[n]);else{var r=e[0],o=this.children.indexOf(r);if(-1===o)return null;r.parent=null,r.transform._parentID=-1,(0,s.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),r.emit("removed",this),this.emit("childRemoved",r,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,n=t,r=e-n;if(r>0&&r<=e){i=this.children.splice(n,r);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(d),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var n=t.prototype.getLocalBounds.call(this,e);if(!i)for(var r=0,s=this.children.length;r<s;++r){var o=this.children[r];o.visible&&o.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var i=t.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var n,r;if(this.cullArea?(n=this.cullArea,r=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0)),n&&i.intersects(n,r))this._render(t);else if(this.cullArea)return;for(var s=0,o=this.children.length;s<o;++s){var a=this.children[s],h=a.cullable;a.cullable=h||!this.cullArea,a.render(t),a.cullable=h}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n])}var r=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==o.vg.NONE));if(r&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);n=0;for(var s=this.children.length;n<s;++n)this.children[n].render(t)}r&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(c);p.prototype.containerUpdateTransform=p.prototype.updateTransform},3585:(t,e,i)=>{"use strict";i.d(e,{A:()=>n,X:()=>o});var n,r=function(){return r=Object.assign||function(t){for(var e,i=arguments,n=1,r=arguments.length;n<r;n++)for(var s in e=i[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},r.apply(this,arguments)};!function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"}(n||(n={}));var s=function(t){if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e="object"!=typeof t.extension?{type:t.extension}:t.extension;t=r(r({},e),{ref:t})}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t=r({},t)).type&&(t.type=[t.type]),t},o={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,i=[],n=0;n<arguments.length;n++)i[n]=t[n];return i.map(s).forEach((function(t){t.type.forEach((function(i){var n,r;return null===(r=(n=e._removeHandlers)[i])||void 0===r?void 0:r.call(n,t)}))})),this},add:function(){for(var t=arguments,e=this,i=[],n=0;n<arguments.length;n++)i[n]=t[n];return i.map(s).forEach((function(t){t.type.forEach((function(i){var n=e._addHandlers,r=e._queue;n[i]?n[i](t):(r[i]=r[i]||[],r[i].push(t))}))})),this},handle:function(t,e,i){var n=this._addHandlers=this._addHandlers||{},r=this._removeHandlers=this._removeHandlers||{};if(n[t]||r[t])throw new Error("Extension type "+t+" already has a handler");n[t]=e,r[t]=i;var s=this._queue;return s[t]&&(s[t].forEach((function(t){return e(t)})),delete s[t]),this},handleByMap:function(t,e){return this.handle(t,(function(t){e[t.name]=t.ref}),(function(t){delete e[t.name]}))},handleByList:function(t,e){return this.handle(t,(function(i){var r,s;e.push(i.ref),t===n.Loader&&(null===(s=(r=i.ref).add)||void 0===s||s.call(r))}),(function(t){var i=e.indexOf(t.ref);-1!==i&&e.splice(i,1)}))}}},5489:(t,e,i)=>{"use strict";i.d(e,{ER:()=>T,HY:()=>n,M_:()=>l,Pp:()=>u,TE:()=>p,TO:()=>r,Td:()=>o,bO:()=>s,bR:()=>a,dL:()=>x,jl:()=>c,oA:()=>f,tS:()=>d,uq:()=>m});var n,r=2*Math.PI,s=180/Math.PI,o=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(n||(n={}));var a=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),h=[new a,new a,new a,new a],l=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=n.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.intersects=function(t,e){if(!e){var i=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=i)return!1;var n=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>n}var r=this.left,s=this.right,o=this.top,a=this.bottom;if(s<=r||a<=o)return!1;var l=h[0].set(t.left,t.top),c=h[1].set(t.left,t.bottom),u=h[2].set(t.right,t.top),d=h[3].set(t.right,t.bottom);if(u.x<=l.x||c.y<=l.y)return!1;var p=Math.sign(e.a*e.d-e.b*e.c);if(0===p)return!1;if(e.apply(l,l),e.apply(c,c),e.apply(u,u),e.apply(d,d),Math.max(l.x,c.x,u.x,d.x)<=r||Math.min(l.x,c.x,u.x,d.x)>=s||Math.max(l.y,c.y,u.y,d.y)<=o||Math.min(l.y,c.y,u.y,d.y)>=a)return!1;var f=p*(c.y-l.y),m=p*(l.x-c.x),g=f*r+m*o,_=f*s+m*o,y=f*r+m*a,v=f*s+m*a;if(Math.max(g,_,y,v)<=f*l.x+m*l.y||Math.min(g,_,y,v)>=f*d.x+m*d.y)return!1;var b=p*(l.y-u.y),w=p*(u.x-l.x),S=b*r+w*o,T=b*s+w*o,x=b*r+w*a,E=b*s+w*a;return!(Math.max(S,T,x,E)<=b*l.x+w*l.y||Math.min(S,T,x,E)>=b*d.x+w*d.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=r-n,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),c=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=n.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new l(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),u=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=n.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new l(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),d=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var s=[],o=0,a=r.length;o<a;o++)s.push(r[o].x,r[o].y);r=s}this.points=r,this.type=n.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),p=function(){function t(t,e,i,r,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===s&&(s=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s,this.type=n.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var n=t-(this.x+i),r=e-(this.y+i),s=i*i;if(n*n+r*r<=s)return!0;if((n=t-(this.x+this.width-i))*n+r*r<=s)return!0;if(n*n+(r=e-(this.y+this.height-i))*r<=s)return!0;if((n=t-(this.x+i))*n+r*r<=s)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),f=function(){function t(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),m=function(){function t(t,e,i,n,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new a;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(r-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*s),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],_=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],y=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],v=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],b=[],w=[],S=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];b.push(e);for(var i=0;i<16;i++)for(var n=S(g[t]*g[i]+y[t]*_[i]),r=S(_[t]*g[i]+v[t]*_[i]),s=S(g[t]*y[i]+y[t]*v[i]),o=S(_[t]*y[i]+v[t]*v[i]),a=0;a<16;a++)if(g[a]===n&&_[a]===r&&y[a]===s&&v[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new m;h.set(g[t],_[t],y[t],v[t],0,0),w.push(h)}}();var T={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return g[t]},uY:function(t){return _[t]},vX:function(t){return y[t]},vY:function(t){return v[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return b[t][e]},sub:function(t,e){return b[t][T.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?T.S:T.N:2*Math.abs(e)<=Math.abs(t)?t>0?T.E:T.W:e>0?t>0?T.SE:T.SW:t>0?T.NE:T.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=w[T.inv(e)];r.tx=i,r.ty=n,t.append(r)}},x=function(){function t(){this.worldTransform=new m,this.localTransform=new m,this.position=new f(this.onChange,this,0,0),this.scale=new f(this.onChange,this,1,1),this.pivot=new f(this.onChange,this,0,0),this.skew=new f(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},257:(t,e,i)=>{"use strict";i.d(e,{b:()=>n});var n=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,n,r,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this.name,l=this.items;this._aliasCount++;for(var c=0,u=l.length;c<u;c++)l[c][h](t,e,i,n,r,s,o,a);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(n.prototype,{dispatch:{value:n.prototype.emit},run:{value:n.prototype.emit}})},4425:(t,e,i)=>{"use strict";i.d(e,{Fr:()=>w,OF:()=>r,W0:()=>S});var n=i(8351),r={createCanvas:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},s=/iPhone/i,o=/iPod/i,a=/iPad/i,h=/\biOS-universal(?:.+)Mac\b/i,l=/\bAndroid(?:.+)Mobile\b/i,c=/Android/i,u=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,p=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,m=/BlackBerry/i,g=/BB10/i,_=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,b=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};var w=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var r=function(t){return function(e){return e.test(t)}}(i),w={apple:{phone:r(s)&&!r(p),ipod:r(o),tablet:!r(s)&&(r(a)||b(e))&&!r(p),universal:r(h),device:(r(s)||r(o)||r(a)||r(h)||b(e))&&!r(p)},amazon:{phone:r(u),tablet:!r(u)&&r(d),device:r(u)||r(d)},android:{phone:!r(p)&&r(u)||!r(p)&&r(l),tablet:!r(p)&&!r(u)&&!r(l)&&(r(d)||r(c)),device:!r(p)&&(r(u)||r(d)||r(l)||r(c))||r(/\bokhttp\b/i)},windows:{phone:r(p),tablet:r(f),device:r(p)||r(f)},other:{blackberry:r(m),blackberry10:r(g),opera:r(_),firefox:r(v),chrome:r(y),device:r(m)||r(g)||r(_)||r(v)||r(y)},any:!1,phone:!1,tablet:!1};return w.any=w.apple.device||w.android.device||w.windows.device||w.other.device,w.phone=w.apple.phone||w.android.phone||w.windows.phone,w.tablet=w.apple.tablet||w.android.tablet||w.windows.tablet,w}(globalThis.navigator);var S={ADAPTER:r,MIPMAP_TEXTURES:n.E8.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:n.he.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(w.tablet||w.phone){var i;if(w.apple.device)if(i=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(i[1],10)<11&&(e=!1);if(w.android.device)if(i=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(i[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:n.OS.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:n.uR.CLAMP,SCALE_MODE:n.M6.LINEAR,PRECISION_VERTEX:n.Pk.HIGH,PRECISION_FRAGMENT:w.apple.device?n.Pk.HIGH:n.Pk.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!w.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},8857:(t,e,i)=>{"use strict";i.d(e,{k:()=>d});var n=i(8351),r=i(997),s=i(5825),o=i(5489),a=i(4425),h=i(8451),l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},l(t,e)};var c=new o.bR,u=new Uint16Array([0,1,2,0,2,3]),d=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new o.oA(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=n.B9.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||r.gP.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=u,i.pluginName="batch",i.isSprite=!0,i._roundPixels=a.W0.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,h=e.ty,l=this.vertexData,c=t.trim,u=t.orig,d=this._anchor,p=0,f=0,m=0,g=0;if(c?(p=(f=c.x-d._x*u.width)+c.width,m=(g=c.y-d._y*u.height)+c.height):(p=(f=-d._x*u.width)+u.width,m=(g=-d._y*u.height)+u.height),l[0]=i*f+r*g+o,l[1]=s*g+n*f+h,l[2]=i*p+r*g+o,l[3]=s*g+n*p+h,l[4]=i*p+r*m+o,l[5]=s*m+n*p+h,l[6]=i*f+r*m+o,l[7]=s*m+n*f+h,this._roundPixels)for(var _=a.W0.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*_|0)/_)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,c=r.ty,u=-n._x*i.width,d=u+i.width,p=-n._y*i.height,f=p+i.height;e[0]=s*u+a*p+l,e[1]=h*p+o*u+c,e[2]=s*d+a*p+l,e[3]=h*p+o*d+c,e[4]=s*d+a*f+l,e[5]=h*f+o*d+c,e[6]=s*u+a*f+l,e[7]=h*f+o*u+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new s.cz),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.M_),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return c.x>=n&&c.x<n+e&&(r=-i*this.anchor.y,c.y>=r&&c.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof r.gP?t:r.gP.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||r.gP.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(s.mc)},161:(t,e,i)=>{"use strict";i.d(e,{Rv:()=>a,dQ:()=>n,y:()=>h});var n,r=i(4425),s=i(3585);r.W0.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(n||(n={}));var o=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),a=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new o(null,null,1/0),this.deltaMS=1/r.W0.TARGET_FPMS,this.elapsedMS=1/r.W0.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new o(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new o(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.W0.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,r.W0.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),h=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,n.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?a.shared:new a,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t.extension=s.A.Application,t}()},8451:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BaseTextureCache:()=>z,CanvasRenderTarget:()=>X,DATA_URI:()=>$,EventEmitter:()=>r,ProgramCache:()=>j,TextureCache:()=>H,clearTextureCache:()=>V,correctBlendMode:()=>x,createIndicesForQuads:()=>C,decomposeDataUri:()=>K,deprecation:()=>G,destroyTextureCache:()=>W,determineCrossOrigin:()=>J,earcut:()=>s,getBufferType:()=>P,getResolutionOfUrl:()=>Z,hex2rgb:()=>v,hex2string:()=>b,interleaveTypedArrays:()=>O,isMobile:()=>n.Fr,isPow2:()=>M,isWebGLSupported:()=>_,log2:()=>D,nextPow2:()=>k,path:()=>u,premultiplyBlendMode:()=>T,premultiplyRgba:()=>E,premultiplyTint:()=>A,premultiplyTintToRgba:()=>I,removeItems:()=>N,rgb2hex:()=>S,sayHello:()=>g,sign:()=>L,skipHello:()=>m,string2hex:()=>w,trimCanvas:()=>Y,uid:()=>F,url:()=>h});var n=i(4425),r=i(4272),s=i(5230),o=i(9983),a=i(8351),h={parse:o.qg,format:o.GP,resolve:o.hd};function l(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function c(t){return t.split("?")[0].split("#")[0]}var u={toPosix:function(t){return e="\\",i="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var e,i},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){l(t),t=this.toPosix(t);var e="",i=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),r=/^[^/:]+:\//.exec(t);if(i||n||r){var s=(null==i?void 0:i[0])||(null==n?void 0:n[0])||(null==r?void 0:r[0]);e=s,t=t.slice(s.length)}return e},toAbsolute:function(t,e,i){if(this.isDataUrl(t))return t;var r=c(this.toPosix(null!=e?e:n.W0.ADAPTER.getBaseUrl())),s=c(this.toPosix(null!=i?i:this.rootname(r)));return l(t),(t=this.toPosix(t)).startsWith("/")?u.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize:function(t){if(l(t=this.toPosix(t)),0===t.length)return".";var e="",i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var n=t.endsWith("/");return(t=function(t,e){for(var i,n="",r=0,s=-1,o=0,a=0;a<=t.length;++a){if(a<t.length)i=t.charCodeAt(a);else{if(47===i)break;i=47}if(47===i){if(s===a-1||1===o);else if(s!==a-1&&2===o){if(n.length<2||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var h=n.lastIndexOf("/");if(h!==n.length-1){-1===h?(n="",r=0):r=(n=n.slice(0,h)).length-1-n.lastIndexOf("/"),s=a,o=0;continue}}else if(2===n.length||1===n.length){n="",r=0,s=a,o=0;continue}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,o=0}else 46===i&&-1!==o?++o:o=-1}return n}(t,!1)).length>0&&n&&(t+="/"),i?"/"+t:e+t},isAbsolute:function(t){return l(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join:function(){for(var t,e,i=arguments,n=[],r=0;r<arguments.length;r++)n[r]=i[r];if(0===n.length)return".";for(var s=0;s<n.length;++s){var o=n[s];if(l(o),o.length>0)if(void 0===e)e=o;else{var a=null!==(t=n[s-1])&&void 0!==t?t:"";this.extname(a)?e+="/../"+o:e+="/"+o}}return void 0===e?".":this.normalize(e)},dirname:function(t){if(l(t),0===t.length)return".";for(var e=(t=this.toPosix(t)).charCodeAt(0),i=47===e,n=-1,r=!0,s=this.getProtocol(t),o=t,a=(t=t.slice(s.length)).length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!r){n=a;break}}else r=!1;return-1===n?i?"/":this.isUrl(o)?s+t:s:i&&1===n?"//":s+t.slice(0,n)},rootname:function(t){l(t);var e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){var i=t.indexOf("/",e.length);(e=-1!==i?t.slice(0,i):t).endsWith("/")||(e+="/")}return e},basename:function(t,e){l(t),e&&l(e),t=this.toPosix(t);var i,n=0,r=-1,s=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var o=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){var h=t.charCodeAt(i);if(47===h){if(!s){n=i+1;break}}else-1===a&&(s=!1,a=i+1),o>=0&&(h===e.charCodeAt(o)?-1==--o&&(r=i):(o=-1,r=a))}return n===r?r=a:-1===r&&(r=t.length),t.slice(n,r)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!s){n=i+1;break}}else-1===r&&(s=!1,r=i+1);return-1===r?"":t.slice(n,r)},extname:function(t){l(t);for(var e=-1,i=0,n=-1,r=!0,s=0,o=(t=this.toPosix(t)).length-1;o>=0;--o){var a=t.charCodeAt(o);if(47!==a)-1===n&&(r=!1,n=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!r){i=o+1;break}}return-1===e||-1===n||0===s||1===s&&e===n-1&&e===i+1?"":t.slice(e,n)},parse:function(t){l(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var i,n=(t=this.toPosix(t)).charCodeAt(0),r=this.isAbsolute(t);e.root=this.rootname(t),i=r||this.hasProtocol(t)?1:0;for(var s=-1,o=0,a=-1,h=!0,c=t.length-1,u=0;c>=i;--c)if(47!==(n=t.charCodeAt(c)))-1===a&&(h=!1,a=c+1),46===n?-1===s?s=c:1!==u&&(u=1):-1!==s&&(u=-1);else if(!h){o=c+1;break}return-1===s||-1===a||0===u||1===u&&s===a-1&&s===o+1?-1!==a&&(e.base=e.name=0===o&&r?t.slice(1,a):t.slice(o,a)):(0===o&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};n.W0.RETINA_PREFIX=/@([0-9\.]+)x/,n.W0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var d,p=!1,f="6.5.8";function m(){p=!0}function g(t){var e;if(!p){if(n.W0.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS "+f+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,i)}else globalThis.console&&globalThis.console.log("PixiJS "+f+" - "+t+" - http://www.pixijs.com/");p=!0}}function _(){return void 0===d&&(d=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:n.W0.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!n.W0.ADAPTER.getWebGLRenderingContext())return!1;var e=n.W0.ADAPTER.createCanvas(),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch(t){return!1}}()),d}var y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function b(t){var e=t.toString(16);return"#"+(e="000000".substring(0,6-e.length)+e)}function w(t){return"string"==typeof t&&"#"===(t=y[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}function S(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var T=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[a.B9.NORMAL_NPM]=a.B9.NORMAL,t[a.B9.ADD_NPM]=a.B9.ADD,t[a.B9.SCREEN_NPM]=a.B9.SCREEN,e[a.B9.NORMAL]=a.B9.NORMAL_NPM,e[a.B9.ADD]=a.B9.ADD_NPM,e[a.B9.SCREEN]=a.B9.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function x(t,e){return T[e?1:0][t]}function E(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function A(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)}function I(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function C(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function P(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var R={Float32Array,Uint32Array,Int32Array,Uint8Array};function O(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(s=0;s<t.length;s++){var l=e[s],c=t[s],u=P(c);r[u]||(r[u]=new R[u](o)),a=r[u];for(var d=0;d<c.length;d++){a[(d/l|0)*n+h+d%l]=c[d]}h+=l}return new Float32Array(o)}function k(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function M(t){return!(t&t-1||!t)}function D(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function N(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var s=r-(i=e+i>r?r-e:i);for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}}function L(t){return 0===t?0:t<0?-1:1}var B=0;function F(){return++B}var U={};function G(t,e,i){if(void 0===i&&(i=3),!U[e]){var n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),U[e]=!0}}var j={},H=Object.create(null),z=Object.create(null);function W(){var t;for(t in H)H[t].destroy();for(t in z)z[t].destroy()}function V(){var t;for(t in H)delete H[t];for(t in z)delete z[t]}var X=function(){function t(t,e,i){this.canvas=n.W0.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||n.W0.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function Y(t){var e,i,n,r=t.width,s=t.height,o=t.getContext("2d",{willReadFrequently:!0}),a=o.getImageData(0,0,r,s).data,h=a.length,l={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%r,n=~~(e/4/r),null===l.top&&(l.top=n),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<n)&&(l.bottom=n));return null!==l.top&&(r=l.right-l.left,s=l.bottom-l.top+1,c=o.getImageData(l.left,l.top,r,s)),{height:s,width:r,data:c}}var q,$=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function K(t){var e=$.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function J(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,q||(q=document.createElement("a")),q.href=t;var i=h.parse(q.href),n=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&n&&i.protocol===e.protocol?"":"anonymous"}function Z(t,e){var i=n.W0.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}},7668:(t,e,i)=>{"use strict";var n;i.r(e),i.d(e,{log:()=>l});var r=2,s=((n={})[1]=["fatal",["#7c002a"],console.error],n[2]=["info",["#4454FF","#7e86de"],console.info],n[3]=["error",["#f31"],console.error],n[4]=["warn",["#ffcd84"],console.warn],n[5]=["debug",["#168d21","#168d21"],console.log],n[6]=["trace",["#aaa"],console.log],n),o=function(t){switch(typeof t){case"string":return"%s";case"boolean":return"%o";case"number":return(0^t)===t?"%i":"%f";default:return"%O"}},a=function(t,e){return void 0===e&&(e=""),function(i){if(r>=t&&s[t]){var n=s[t],a=n[0],h=n[1];n[2].apply(null,[e+" %c #%s %c "+i.map(o).join(" "),"background-color:"+(h[0]||"")+";color:white;",a,h[1]?"color:"+h[1]+";":""].concat(i))}}},h=function(t){return{trace:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(6,t)(e)},debug:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(5,t)(e)},warn:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(4,t)(e)},error:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(3,t)(e)},info:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(2,t)(e)},fatal:function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return a(1,t)(e)}}},l=Object.assign(h(),{scope:h,setLevel:function(t){return r=t}})},1827:(t,e,i)=>{"use strict";i.r(e),i.d(e,{deleteDB:()=>_,openDB:()=>g,unwrap:()=>m,wrap:()=>f});const n=(t,e)=>e.some((e=>t instanceof e));let r,s;const o=new WeakMap,a=new WeakMap,h=new WeakMap,l=new WeakMap,c=new WeakMap;let u={get(t,e,i){if(t instanceof IDBTransaction){if("done"===e)return a.get(t);if("objectStoreNames"===e)return t.objectStoreNames||h.get(t);if("store"===e)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return f(t[e])},set:(t,e,i)=>(t[e]=i,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function d(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(m(this),e),f(o.get(this))}:function(...e){return f(t.apply(m(this),e))}:function(e,...i){const n=t.call(m(this),e,...i);return h.set(n,e.sort?e.sort():[e]),f(n)}}function p(t){return"function"==typeof t?d(t):(t instanceof IDBTransaction&&function(t){if(a.has(t))return;const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),n()},s=()=>{i(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));a.set(t,e)}(t),n(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,u):t)}function f(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,i)=>{const n=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(f(t.result)),n()},s=()=>{i(t.error),n()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&o.set(e,t)})).catch((()=>{})),c.set(e,t),e}(t);if(l.has(t))return l.get(t);const e=p(t);return e!==t&&(l.set(t,e),c.set(e,t)),e}const m=t=>c.get(t);function g(t,e,{blocked:i,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=f(o);return n&&o.addEventListener("upgradeneeded",(t=>{n(f(o.result),t.oldVersion,t.newVersion,f(o.transaction))})),i&&o.addEventListener("blocked",(()=>i())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}function _(t,{blocked:e}={}){const i=indexedDB.deleteDatabase(t);return e&&i.addEventListener("blocked",(()=>e())),f(i).then((()=>{}))}const y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function w(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(b.get(e))return b.get(e);const i=e.replace(/FromIndex$/,""),n=e!==i,r=v.includes(i);if(!(i in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!y.includes(i))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return n&&(o=o.index(e.shift())),(await Promise.all([o[i](...e),r&&s.done]))[0]};return b.set(e,s),s}u=(t=>({...t,get:(e,i,n)=>w(e,i)||t.get(e,i,n),has:(e,i)=>!!w(e,i)||t.has(e,i)}))(u)},2494:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ALPHA_MODES:()=>ut.Gk,AbstractBatchRenderer:()=>A.SD,AbstractMultiResource:()=>A.CI,AbstractRenderer:()=>A.kp,AccessibilityManager:()=>P,AnimatedSprite:()=>En,AppLoaderPlugin:()=>rt,Application:()=>fn,ArrayResource:()=>A.aV,Attribute:()=>A.nW,BLEND_MODES:()=>ut.B9,BUFFER_BITS:()=>ut.wn,BUFFER_TYPE:()=>ut.yw,BaseImageResource:()=>A.jH,BasePrepare:()=>li,BaseRenderTexture:()=>A.LE,BaseTexture:()=>A.t5,BatchDrawCall:()=>A.hq,BatchGeometry:()=>A.JH,BatchPluginFactory:()=>A.oA,BatchRenderer:()=>A.ch,BatchShaderGenerator:()=>A.LQ,BatchSystem:()=>A.A6,BatchTextureArray:()=>A.cc,BitmapFont:()=>Hi,BitmapFontData:()=>Mi,BitmapFontLoader:()=>Yi,BitmapText:()=>Xi,BlobResource:()=>vt,Bounds:()=>E.cz,BrowserAdapter:()=>ct.OF,Buffer:()=>A.hp,BufferResource:()=>A.dZ,CLEAR_MODES:()=>ut.fr,COLOR_MASK_BITS:()=>ut.Eq,CanvasResource:()=>A.Bu,Circle:()=>R.jl,CompressedTextureLoader:()=>wt,CompressedTextureResource:()=>bt,Container:()=>E.mc,ContextSystem:()=>A.bD,CountLimiter:()=>ei,CubeResource:()=>A.WQ,DDSLoader:()=>ie,DEG_TO_RAD:()=>R.Td,DRAW_MODES:()=>ut._4,DisplayObject:()=>E.q9,ENV:()=>ut.Km,Ellipse:()=>R.Pp,ExtensionType:()=>A.Ag,Extract:()=>j,FORMATS:()=>ut.hR,FORMATS_TO_COMPONENTS:()=>Zt,FillStyle:()=>de,Filter:()=>A.dJ,FilterState:()=>A.OO,FilterSystem:()=>A.u9,Framebuffer:()=>A.GW,FramebufferSystem:()=>A.nj,GC_MODES:()=>ut.OS,GLFramebuffer:()=>A.pq,GLProgram:()=>A._H,GLTexture:()=>A.Ru,GRAPHICS_CURVES:()=>ue,Geometry:()=>A.V2,GeometrySystem:()=>A.kb,Graphics:()=>Ge,GraphicsData:()=>De,GraphicsGeometry:()=>Le,IGLUniformData:()=>A.n1,INSTALLED:()=>A.Ln,INTERNAL_FORMATS:()=>lt,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>dt,ImageBitmapResource:()=>A.di,ImageResource:()=>A.Gj,InteractionData:()=>k,InteractionEvent:()=>D,InteractionManager:()=>U,InteractionTrackingData:()=>N,KTXLoader:()=>ne,LINE_CAP:()=>ae,LINE_JOIN:()=>oe,LineStyle:()=>Be,Loader:()=>nt,LoaderResource:()=>J,MASK_TYPES:()=>ut.vg,MIPMAP_MODES:()=>ut.E8,MSAA_QUALITY:()=>ut.he,MaskData:()=>A.XN,MaskSystem:()=>A.iW,Matrix:()=>R.uq,Mesh:()=>Pi,MeshBatchUvs:()=>Ai,MeshGeometry:()=>Oi,MeshMaterial:()=>Ri,NineSlicePlane:()=>Sn,ObjectRenderer:()=>A.Pt,ObservablePoint:()=>R.oA,PI_2:()=>R.TO,PRECISION:()=>ut.Pk,ParticleContainer:()=>he,ParticleRenderer:()=>ce,PlaneGeometry:()=>_n,Point:()=>R.bR,Polygon:()=>R.tS,Prepare:()=>pi,Program:()=>A.BP,ProjectionSystem:()=>A.hk,Quad:()=>A.kO,QuadUv:()=>A.X1,RAD_TO_DEG:()=>R.bO,RENDERER_TYPE:()=>ut.h3,Rectangle:()=>R.M_,RenderTexture:()=>A.Y7,RenderTexturePool:()=>A.O1,RenderTextureSystem:()=>A.Bw,Renderer:()=>A.A4,ResizePlugin:()=>pn,Resource:()=>A.FW,RopeGeometry:()=>yn,RoundedRectangle:()=>R.TE,Runner:()=>Tn.b,SAMPLER_TYPES:()=>ut.XZ,SCALE_MODES:()=>ut.M6,SHAPES:()=>R.HY,SVGResource:()=>A.$f,ScissorSystem:()=>A.s9,Shader:()=>A.Mt,ShaderSystem:()=>A.$P,SimpleMesh:()=>wn,SimplePlane:()=>bn,SimpleRope:()=>vn,Sprite:()=>He.k,SpriteMaskFilter:()=>A.ah,Spritesheet:()=>mi,SpritesheetLoader:()=>gi,State:()=>A.Uw,StateSystem:()=>A.D8,StencilSystem:()=>A.iH,System:()=>A.iQ,TARGETS:()=>ut.dW,TEXT_GRADIENT:()=>Ae,TYPES:()=>ut.QE,TYPES_TO_BYTES_PER_COMPONENT:()=>Jt,TYPES_TO_BYTES_PER_PIXEL:()=>Qt,TemporaryDisplayObject:()=>E.dC,Text:()=>Qe,TextFormat:()=>Di,TextMetrics:()=>Je,TextStyle:()=>Xe,Texture:()=>A.gP,TextureGCSystem:()=>A.lB,TextureLoader:()=>st,TextureMatrix:()=>A.NW,TextureSystem:()=>A.vB,TextureUvs:()=>A.OE,Ticker:()=>O.Rv,TickerPlugin:()=>O.y,TilingSprite:()=>bi,TilingSpriteRenderer:()=>Ti,TimeLimiter:()=>fi,Transform:()=>R.dL,UPDATE_PRIORITY:()=>O.dQ,UniformGroup:()=>A.k2,VERSION:()=>A.xv,VideoResource:()=>A.A5,ViewableBuffer:()=>A.u3,WRAP_MODES:()=>ut.uR,XMLFormat:()=>Ni,XMLStringFormat:()=>Li,accessibleTarget:()=>I,autoDetectFormat:()=>Fi,autoDetectRenderer:()=>A.q5,autoDetectResource:()=>A.Nc,checkMaxIfStatementsInShader:()=>A.uC,createUBOElements:()=>A._J,defaultFilterVertex:()=>A.Eo,defaultVertex:()=>A.MT,extensions:()=>A.XO,filters:()=>An,generateProgram:()=>A.CF,generateUniformBufferSync:()=>A.He,getTestContext:()=>A.WD,getUBOData:()=>A.RO,graphicsUtils:()=>je,groupD8:()=>R.ER,interactiveTarget:()=>B,isMobile:()=>ct.Fr,parseDDS:()=>Xt,parseKTX:()=>te,resources:()=>A.ES,settings:()=>ct.W0,systems:()=>A.nV,uniformParsers:()=>A.$Z,utils:()=>x});const n=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))};const r=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var r=n.length;function s(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var o=i.then;if("function"==typeof o)return void o.call(i,(function(e){s(t,e)}),(function(i){n[t]={status:"rejected",reason:i},0==--r&&e(n)}))}n[t]={status:"fulfilled",value:i},0==--r&&e(n)}for(var o=0;o<n.length;o++)s(o,n[o])}))};function s(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}s.prototype=Error.prototype;const o=function(t){var e=this;return new e((function(i,n){if(!t||void 0===t.length)return n(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return n();for(var o=[],a=0;a<r.length;a++)try{e.resolve(r[a]).then(i).catch((function(t){o.push(t),o.length===r.length&&n(new s(o,"All promises were rejected"))}))}catch(t){n(t)}}))};var a=setTimeout;function h(t){return Boolean(t&&void 0!==t.length)}function l(){}function c(t){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,c._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){return void p(e.promise,t)}d(e.promise,n)}else(1===t._state?d:p)(e.promise,t._value)}))):t._deferreds.push(e)}function d(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof c)return t._state=3,t._value=e,void f(t);if("function"==typeof i)return void g((n=i,r=e,function(){n.apply(r,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){p(t,e)}var n,r}function p(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&c._immediateFn((function(){t._handled||c._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)u(t,t._deferreds[e]);t._deferreds=null}function m(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function g(t,e){var i=!1;try{t((function(t){i||(i=!0,d(e,t))}),(function(t){i||(i=!0,p(e,t))}))}catch(t){if(i)return;i=!0,p(e,t)}}c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){var i=new this.constructor(l);return u(this,new m(t,e,i)),i},c.prototype.finally=n,c.all=function(t){return new c((function(e,i){if(!h(t))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var r=n.length;function s(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(e){s(t,e)}),i)}n[t]=o,0==--r&&e(n)}catch(t){i(t)}}for(var o=0;o<n.length;o++)s(o,n[o])}))},c.any=o,c.allSettled=r,c.resolve=function(t){return t&&"object"==typeof t&&t.constructor===c?t:new c((function(e){e(t)}))},c.reject=function(t){return new c((function(e,i){i(t)}))},c.race=function(t){return new c((function(e,i){if(!h(t))return i(new TypeError("Promise.race accepts an array"));for(var n=0,r=t.length;n<r;n++)c.resolve(t[n]).then(e,i)}))},c._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){a(t,0)},c._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const _=c;var y=i(1664);"undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:"undefined"!=typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=_),Object.assign||(Object.assign=y);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var v=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-v}}for(var b=Date.now(),w=["ms","moz","webkit","o"],S=0;S<w.length&&!globalThis.requestAnimationFrame;++S){var T=w[S];globalThis.requestAnimationFrame=globalThis[T+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[T+"CancelAnimationFrame"]||globalThis[T+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+b-e;return i<0&&(i=0),b=e,globalThis.self.setTimeout((function(){b=Date.now(),t(performance.now())}),i)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array);var x=i(8451),E=i(5825),A=i(997),I={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};E.q9.mixin(I);var C=100,P=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(x.isMobile.tablet||x.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=C+"px",e.style.height=C+"px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(x.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,n=e.top,r=e.width,s=e.height,o=this.renderer,a=o.width,h=o.height,l=o.resolution,c=r/a*l,u=s/h*l,d=this.div;d.style.left=i+"px",d.style.top=n+"px",d.style.width=a+"px",d.style.height=h+"px";for(var p=0;p<this.children.length;p++){var f=this.children[p];if(f.renderId!==this.renderId)f._accessibleActive=!1,(0,x.removeItems)(this.children,p,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,p--;else{d=f._accessibleDiv;var m=f.hitArea,g=f.worldTransform;f.hitArea?(d.style.left=(g.tx+m.x*g.a)*c+"px",d.style.top=(g.ty+m.y*g.d)*u+"px",d.style.width=m.width*g.a*c+"px",d.style.height=m.height*g.d*u+"px"):(m=f.getBounds(),this.capHitArea(m),d.style.left=m.x*c+"px",d.style.top=m.y*u+"px",d.style.width=m.width*c+"px",d.style.height=m.height*u+"px",d.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&d.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===d.title&&f.tabIndex===d.tabIndex||(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,n=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=C+"px",e.style.height=C+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"click",n),e.dispatchEvent(i,"pointertap",n),e.dispatchEvent(i,"tap",n)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseover",n)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseout",n)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[A.Ag.RendererPlugin,A.Ag.CanvasRendererPlugin]},t}(),R=i(5489),O=i(161),k=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new R.bR,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),M=function(t,e){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},M(t,e)};var D=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),N=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return!!(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return!!(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return!!(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),L=function(){function t(){this._tempPoint=new R.bR}return t.prototype.recursiveFindHit=function(t,e,i,n,r){var s;if(!e||!e.visible)return!1;var o=t.data.global,a=!1,h=r=e.interactive||r,l=!0;if(e.hitArea)n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,l=!1)),h=!1;else if(e._mask&&n){var c=e._mask.isMaskData?e._mask.maskObject:e._mask;c&&!(null===(s=c.containsPoint)||void 0===s?void 0:s.call(c,o))&&(n=!1)}if(l&&e.interactiveChildren&&e.children)for(var u=e.children,d=u.length-1;d>=0;d--){var p=u[d],f=this.recursiveFindHit(t,p,i,n,h);if(f){if(!p.parent)continue;h=!1,f&&(t.target&&(n=!1),a=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),i&&i(t,e,!!a))),a},t.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)},t}(),B={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};E.q9.mixin(B);var F={target:null,data:{global:null}},U=function(t){function e(e,i){var n=t.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new k,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new D,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new L,n._tempDisplayObject=new E.dC,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(t,e){function i(){this.constructor=t}M(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return F.target=null,F.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(F,e,null,!0),F.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(O.Rv.system.add(this.tickerUpdate,this,O.dQ.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(O.Rv.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var r=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n){var r=this.search.findHit(t,e,i,n),s=this.delayedEvents;if(!s.length)return r;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],l=h.displayObject,c=h.eventString,u=h.eventData;u.stopsPropagatingAt===l&&(u.stopPropagationHint=!0),this.dispatchEvent(l,c,u)}return r},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new N(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){var n=this.normalizeToPointerData(t),r=n.length,s=t.target;t.composedPath&&t.composedPath().length>0&&(s=t.composedPath()[0]);for(var o=s!==this.interactionDOMElement?"outside":"",a=0;a<r;a++){var h=n[a],l=this.getInteractionDataForPointerId(h),c=this.configureInteractionEventForDOMEvent(this.eventData,h,l);if(c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,c),"mouse"===h.pointerType||"pen"===h.pointerType){var u=2===h.button;this.emit(u?"rightup"+o:"mouseup"+o,c)}else"touch"===h.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(h.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,s=e.trackedPointers[r],o="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(a){var l=2===n.button,c=N.FLAGS,u=l?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==s&&s.flags&u;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):d&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),s&&(l?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new N(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)}},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new k).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[A.Ag.RendererPlugin,A.Ag.CanvasRendererPlugin]},e}(x.EventEmitter),G=new R.M_,j=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e,i){var n,r,s=this.renderer,o=!1,a=!1;e&&(e instanceof A.Y7?r=e:(r=this.renderer.generateTexture(e),a=!0)),r?(n=r.baseTexture.resolution,i=null!=i?i:r.frame,o=!1,s.renderTexture.bind(r)):(n=s.resolution,i||((i=G).width=s.width,i.height=s.height),o=!0,s.renderTexture.bind(null));var h=Math.round(i.width*n),l=Math.round(i.height*n),c=new x.CanvasRenderTarget(h,l,1),u=new Uint8Array(4*h*l),d=s.gl;d.readPixels(Math.round(i.x*n),Math.round(i.y*n),h,l,d.RGBA,d.UNSIGNED_BYTE,u);var p=c.context.getImageData(0,0,h,l);if(t.arrayPostDivide(u,p.data),c.context.putImageData(p,0,0),o){var f=new x.CanvasRenderTarget(c.width,c.height,1);f.context.scale(1,-1),f.context.drawImage(c.canvas,0,-l),c.destroy(),c=f}return a&&r.destroy(!0),c.canvas},t.prototype.pixels=function(e,i){var n,r,s=this.renderer,o=!1;e&&(e instanceof A.Y7?r=e:(r=this.renderer.generateTexture(e),o=!0)),r?(n=r.baseTexture.resolution,i=null!=i?i:r.frame,s.renderTexture.bind(r)):(n=s.resolution,i||((i=G).width=s.width,i.height=s.height),s.renderTexture.bind(null));var a=Math.round(i.width*n),h=Math.round(i.height*n),l=new Uint8Array(4*a*h),c=s.gl;return c.readPixels(Math.round(i.x*n),Math.round(i.y*n),a,h,c.RGBA,c.UNSIGNED_BYTE,l),o&&r.destroy(!0),t.arrayPostDivide(l,l),l},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t.extension={name:"extract",type:A.Ag.RendererPlugin},t}(),H=function(){function t(t,e,i){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function z(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var W,V=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},t.prototype.has=function(t){if(!(t instanceof H))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,e),n=n._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return z(this,new H(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return z(this,new H(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof H))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function X(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,n){e&&(r[i.q.name][e]=n)})),r}var Y=null;function q(){}function $(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function K(t){return t.toString().replace("object ","")}var J=function(){function t(e,i,n){if(this._dequeue=q,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=q,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new V,this.onProgress=new V,this.onComplete=new V,this.onAfterMiddleware=new V}return t.setExtensionLoadType=function(e,i){$(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){$(t._xhrTypeMap,e,i)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:void 0===W&&(W=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),W&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(K(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(K(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(K(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Y||(Y=document.createElement("a")),Y.href=t;var i=X(Y.href,{strictMode:!0}),n=!i.port&&""===e.port||i.port===e.port,r=i.protocol?i.protocol+":":"";return i.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function Z(){}function Q(t){return function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,i)}}!function(t){var e,i,n,r;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(i=t.TYPE||(t.TYPE={}))[i.UNKNOWN=0]="UNKNOWN",i[i.JSON=1]="JSON",i[i.XML=2]="XML",i[i.IMAGE=3]="IMAGE",i[i.AUDIO=4]="AUDIO",i[i.VIDEO=5]="VIDEO",i[i.TEXT=6]="TEXT",(n=t.LOAD_TYPE||(t.LOAD_TYPE={}))[n.XHR=1]="XHR",n[n.IMAGE=2]="IMAGE",n[n.AUDIO=3]="AUDIO",n[n.VIDEO=4]="VIDEO",(r=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",r.BUFFER="arraybuffer",r.BLOB="blob",r.DOCUMENT="document",r.JSON="json",r.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,avif:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,avif:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(J||(J={}));var tt=function(t,e){this.data=t,this.callback=e},et=function(){function t(t,e){var i=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=Z,this.unsaturated=Z,this.empty=Z,this.drain=Z,this.error=Z,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,n){if(n&&"function"!=typeof n)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var r=new tt(t,"function"==typeof n?n:Z);e?i._tasks.unshift(r):i._tasks.push(r),setTimeout(i.process,1)}},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(t.data,Q(i._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var i=arguments,n=[],r=0;r<arguments.length;r++)n[r]=i[r];e.workers-=1,t.callback.apply(t,n),null!=n[0]&&e.error(n[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=Z,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,i,n){var r=0,s=t.length;!function o(a){a||r===s?i&&i(a):n?setTimeout((function(){e(t[r++],o)}),1):e(t[r++],o)}()},t.queue=function(e,i){return new t(e,i)},t}(),it=/(#[\w-]+)?$/,nt=function(){function t(e,i){var n=this;void 0===e&&(e=""),void 0===i&&(i=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=et.queue(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new V,this.onError=new V,this.onLoad=new V,this.onStart=new V,this.onComplete=new V;for(var r=0;r<t._plugins.length;++r){var s=t._plugins[r],o=s.pre,a=s.use;o&&this.pre(o),a&&this.use(a)}this._protected=!1}return t.prototype._add=function(t,e,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new J(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var r=i.parentResource,s=[],o=0;o<r.children.length;++o)r.children[o].isComplete||s.push(r.children[o]);var a=r.progressChunk*(s.length+1)/(s.length+2);r.children.push(this.resources[t]),r.progressChunk=a;for(o=0;o<s.length;++o)s[o].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if((0,x.deprecation)("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,i=X(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=it.exec(e)[0];-1!==(e=e.slice(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,et.eachSeries(this._beforeMiddleware,(function(e,n){e.call(i,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),et.eachSeries(this._afterMiddleware,(function(i,n){i.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return(0,x.deprecation)("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),A.XO.add({type:A.Ag.Loader,ref:e}),t},t._plugins=[],t}();A.XO.handleByList(A.Ag.Loader,nt._plugins),nt.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(i=t,n=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof i&&(n=i,i=null),this._add(t,e,i,n)};var rt=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?nt.shared:new nt},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=A.Ag.Application,t}(),st=function(){function t(){}return t.add=function(){J.setExtensionLoadType("svg",J.LOAD_TYPE.XHR),J.setExtensionXhrType("svg",J.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==J.TYPE.IMAGE&&"svg"!==t.extension)e();else{var i=t.data,n=t.url,r=t.name,s=t.metadata;A.gP.fromLoader(i,n,r,s).then((function(i){t.texture=i,e()})).catch(e)}},t.extension=A.Ag.Loader,t}();function ot(t,e){if(t.data){if(t.xhr&&t.xhrType===J.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=globalThis.URL||globalThis.webkitURL,n=i.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=J.TYPE.IMAGE,void(t.data.onload=function(){i.revokeObjectURL(n),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],s=0;s<n.length;++s)i<t.length?n[s]=255&t.charCodeAt(i++):n[s]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(s=0;s<r.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[s])}return e}(t.xhr.responseText),t.type=J.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}var at=function(){function t(){}return t.extension=A.Ag.Loader,t.use=ot,t}();A.XO.add(st,at);var ht,lt,ct=i(4425),ut=i(8351);!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(lt||(lt={}));var dt=((ht={})[lt.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ht[lt.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ht[lt.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ht[lt.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ht[lt.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ht[lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ht[lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ht[lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ht[lt.COMPRESSED_R11_EAC]=.5,ht[lt.COMPRESSED_SIGNED_R11_EAC]=.5,ht[lt.COMPRESSED_RG11_EAC]=1,ht[lt.COMPRESSED_SIGNED_RG11_EAC]=1,ht[lt.COMPRESSED_RGB8_ETC2]=.5,ht[lt.COMPRESSED_RGBA8_ETC2_EAC]=1,ht[lt.COMPRESSED_SRGB8_ETC2]=.5,ht[lt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ht[lt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ht[lt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ht[lt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ht[lt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ht[lt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ht[lt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ht[lt.COMPRESSED_RGB_ETC1_WEBGL]=.5,ht[lt.COMPRESSED_RGB_ATC_WEBGL]=.5,ht[lt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ht[lt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ht[lt.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,ht),pt=function(t,e){return pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},pt(t,e)};function ft(t,e){function i(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function mt(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}function gt(t,e){var i,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&s[0]?n.return:s[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}var _t,yt,vt=function(t){function e(e,i){void 0===i&&(i={width:1,height:1,autoLoad:!0});var n,r,s=this;return"string"==typeof e?(n=e,r=new Uint8Array):(n=null,r=e),(s=t.call(this,r,i)||this).origin=n,s.buffer=r?new A.u3(r):null,s.origin&&!1!==i.autoLoad&&s.load(),r&&r.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return ft(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return mt(this,void 0,Promise,(function(){var t;return gt(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new A.u3(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))}))},e}(A.dZ),bt=function(t){function e(i,n){var r=t.call(this,i,n)||this;return r.format=n.format,r.levels=n.levels||1,r._width=n.width,r._height=n.height,r._extension=e._formatToExtension(r.format),(n.levelBuffers||r.buffer)&&(r._levelBuffers=n.levelBuffers||e._createLevelBuffers(i instanceof Uint8Array?i:r.buffer.uint8View,r.format,r.levels,4,4,r.width,r.height)),r}return ft(e,t),e.prototype.upload=function(t,e,i){var n=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var r=0,s=this.levels;r<s;r++){var o=this._levelBuffers[r],a=o.levelID,h=o.levelWidth,l=o.levelHeight,c=o.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,h,l,0,c)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,i,n,r,s,o){for(var a=new Array(i),h=t.byteOffset,l=s,c=o,u=l+n-1&~(n-1),d=c+r-1&~(r-1),p=u*d*dt[e],f=0;f<i;f++)a[f]={levelID:f,levelWidth:i>1?l:u,levelHeight:i>1?c:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,p=(u=(l=l>>1||1)+n-1&~(n-1))*(d=(c=c>>1||1)+r-1&~(r-1))*dt[e];return a},e}(vt),wt=function(){function t(){}return t.use=function(e,i){var n=e.data;if(e.type===J.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var r=n.textures,s=void 0,o=void 0,a=0,h=r.length;a<h;a++){var l=r[a],c=l.src,u=l.format;if(u||(o=c),t.textureFormats[u]){s=c;break}}if(!(s=s||o))return void i(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void i(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=x.url.resolve(e.url.replace(this.baseUrl,""),s),f=n.cacheID;this.add(f,p,d,(function(t){if(t.error)i(t.error);else{var n=t.texture,r=void 0===n?null:n,s=t.textures,o=void 0===s?{}:s;Object.assign(e,{texture:r,textures:o}),i()}}))}else i()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=ct.W0.ADAPTER.createCanvas().getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var i in t._textureFormats={},e){var n=e[i];n&&Object.assign(t._textureFormats,Object.getPrototypeOf(n))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=A.Ag.Loader,t}();function St(t,e,i){var n={textures:{},texture:null};return e?(e.map((function(t){return new A.gP(new A.t5(t,Object.assign({mipmap:ut.E8.OFF,alphaMode:ut.Gk.NO_PREMULTIPLIED_ALPHA},i)))})).forEach((function(e,i){var r=e.baseTexture,s=t+"-"+(i+1);A.t5.addToCache(r,s),A.gP.addToCache(e,s),0===i&&(A.t5.addToCache(r,t),A.gP.addToCache(e,t),n.texture=e),n.textures[s]=e})),n):n}var Tt,xt,Et=4,At=124,It=32,Ct=20,Pt=542327876,Rt={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Ot={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},kt={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Tt||(Tt={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(xt||(xt={}));var Mt,Dt,Nt,Lt=1,Bt=2,Ft=4,Ut=64,Gt=512,jt=131072,Ht=808540228,zt=4,Wt=((_t={})[827611204]=lt.COMPRESSED_RGBA_S3TC_DXT1_EXT,_t[861165636]=lt.COMPRESSED_RGBA_S3TC_DXT3_EXT,_t[894720068]=lt.COMPRESSED_RGBA_S3TC_DXT5_EXT,_t),Vt=((yt={})[Tt.DXGI_FORMAT_BC1_TYPELESS]=lt.COMPRESSED_RGBA_S3TC_DXT1_EXT,yt[Tt.DXGI_FORMAT_BC1_UNORM]=lt.COMPRESSED_RGBA_S3TC_DXT1_EXT,yt[Tt.DXGI_FORMAT_BC2_TYPELESS]=lt.COMPRESSED_RGBA_S3TC_DXT3_EXT,yt[Tt.DXGI_FORMAT_BC2_UNORM]=lt.COMPRESSED_RGBA_S3TC_DXT3_EXT,yt[Tt.DXGI_FORMAT_BC3_TYPELESS]=lt.COMPRESSED_RGBA_S3TC_DXT5_EXT,yt[Tt.DXGI_FORMAT_BC3_UNORM]=lt.COMPRESSED_RGBA_S3TC_DXT5_EXT,yt[Tt.DXGI_FORMAT_BC1_UNORM_SRGB]=lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,yt[Tt.DXGI_FORMAT_BC2_UNORM_SRGB]=lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,yt[Tt.DXGI_FORMAT_BC3_UNORM_SRGB]=lt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,yt);function Xt(t){var e=new Uint32Array(t);if(e[0]!==Pt)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,At/Uint32Array.BYTES_PER_ELEMENT),n=i[Rt.HEIGHT],r=i[Rt.WIDTH],s=i[Rt.MIPMAP_COUNT],o=new Uint32Array(t,Rt.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,It/Uint32Array.BYTES_PER_ELEMENT),a=o[Lt];if(a&Ft){var h=o[Ot.FOURCC];if(h!==Ht){var l=Wt[h],c=new Uint8Array(t,Et+At);return[new bt(c,{format:l,width:r,height:n,levels:s})]}var u=Et+At,d=new Uint32Array(e.buffer,u,Ct/Uint32Array.BYTES_PER_ELEMENT),p=d[kt.DXGI_FORMAT],f=d[kt.RESOURCE_DIMENSION],m=d[kt.MISC_FLAG],g=d[kt.ARRAY_SIZE],_=Vt[p];if(void 0===_)throw new Error("DDSParser cannot parse texture data with DXGI format "+p);if(m===zt)throw new Error("DDSParser does not support cubemap textures");if(f===xt.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var y=new Array,v=Et+At+Ct;if(1===g)y.push(new Uint8Array(t,v));else{for(var b=dt[_],w=0,S=r,T=n,x=0;x<s;x++){w+=Math.max(1,S+3&-4)*Math.max(1,T+3&-4)*b,S>>>=1,T>>>=1}var E=v;for(x=0;x<g;x++)y.push(new Uint8Array(t,E,w)),E+=w}return y.map((function(t){return new bt(t,{format:_,width:r,height:n,levels:s})}))}if(a&Ut)throw new Error("DDSParser does not support uncompressed texture data.");if(a&Gt)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(a&jt)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(a&Bt)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Yt=[171,75,84,88,32,49,49,187,13,10,26,10],qt=67305985,$t={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Kt=64,Jt=((Mt={})[ut.QE.UNSIGNED_BYTE]=1,Mt[ut.QE.UNSIGNED_SHORT]=2,Mt[ut.QE.INT]=4,Mt[ut.QE.UNSIGNED_INT]=4,Mt[ut.QE.FLOAT]=4,Mt[ut.QE.HALF_FLOAT]=8,Mt),Zt=((Dt={})[ut.hR.RGBA]=4,Dt[ut.hR.RGB]=3,Dt[ut.hR.RG]=2,Dt[ut.hR.RED]=1,Dt[ut.hR.LUMINANCE]=1,Dt[ut.hR.LUMINANCE_ALPHA]=2,Dt[ut.hR.ALPHA]=1,Dt),Qt=((Nt={})[ut.QE.UNSIGNED_SHORT_4_4_4_4]=2,Nt[ut.QE.UNSIGNED_SHORT_5_5_5_1]=2,Nt[ut.QE.UNSIGNED_SHORT_5_6_5]=2,Nt);function te(t,e,i){void 0===i&&(i=!1);var n=new DataView(e);if(!function(t,e){for(var i=0;i<Yt.length;i++)if(e.getUint8(i)!==Yt[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}(t,n))return null;var r=n.getUint32($t.ENDIANNESS,!0)===qt,s=n.getUint32($t.GL_TYPE,r),o=n.getUint32($t.GL_FORMAT,r),a=n.getUint32($t.GL_INTERNAL_FORMAT,r),h=n.getUint32($t.PIXEL_WIDTH,r),l=n.getUint32($t.PIXEL_HEIGHT,r)||1,c=n.getUint32($t.PIXEL_DEPTH,r)||1,u=n.getUint32($t.NUMBER_OF_ARRAY_ELEMENTS,r)||1,d=n.getUint32($t.NUMBER_OF_FACES,r),p=n.getUint32($t.NUMBER_OF_MIPMAP_LEVELS,r),f=n.getUint32($t.BYTES_OF_KEY_VALUE_DATA,r);if(0===l||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==u)throw new Error("WebGL does not support array textures");var m,g=h+3&-4,_=l+3&-4,y=new Array(u),v=h*l;if(0===s&&(v=g*_),void 0===(m=0!==s?Jt[s]?Jt[s]*Zt[o]:Qt[s]:dt[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=i?function(t,e,i){var n=new Map,r=0;for(;r<e;){var s=t.getUint32(Kt+r,i),o=Kt+r+4,a=3-(s+3)%4;if(0===s||s>e-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var h=0;h<s&&0!==t.getUint8(o+h);h++);if(-1===h){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var l=(new TextDecoder).decode(new Uint8Array(t.buffer,o,h)),c=new DataView(t.buffer,o+h+1,s-h-1);n.set(l,c),r+=4+s+a}return n}(n,f,r):null,w=v*m,S=h,T=l,x=g,E=_,I=Kt+f,C=0;C<p;C++){for(var P=n.getUint32(I,r),R=I+4,O=0;O<u;O++){var k=y[O];k||(k=y[O]=new Array(p)),k[C]={levelID:C,levelWidth:p>1||0!==s?S:x,levelHeight:p>1||0!==s?T:E,levelBuffer:new Uint8Array(e,R,w)},R+=w}I=(I+=P+4)%4!=0?I+4-I%4:I,w=(x=(S=S>>1||1)+4-1&-4)*(E=(T=T>>1||1)+4-1&-4)*m}return 0!==s?{uncompressed:y.map((function(t){var e=t[0].levelBuffer,i=!1;return s===ut.QE.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):s===ut.QE.UNSIGNED_INT?(i=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):s===ut.QE.INT&&(i=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new A.dZ(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:s,format:i?ee(o):o}})),kvData:b}:{compressed:y.map((function(t){return new bt(null,{format:a,width:h,height:l,levels:p,levelBuffers:t})})),kvData:b}}function ee(t){switch(t){case ut.hR.RGBA:return ut.hR.RGBA_INTEGER;case ut.hR.RGB:return ut.hR.RGB_INTEGER;case ut.hR.RG:return ut.hR.RG_INTEGER;case ut.hR.RED:return ut.hR.RED_INTEGER;default:return t}}J.setExtensionXhrType("dds",J.XHR_RESPONSE_TYPE.BUFFER);var ie=function(){function t(){}return t.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,St(t.name||t.url,Xt(t.data),t.metadata))}catch(t){return void e(t)}e()},t.extension=A.Ag.Loader,t}();J.setExtensionXhrType("ktx",J.XHR_RESPONSE_TYPE.BUFFER);var ne=function(){function t(){}return t.use=function(t,e){if("ktx"===t.extension&&t.data)try{var i=t.name||t.url,n=te(i,t.data,this.loadKeyValueData),r=n.compressed,s=n.uncompressed,o=n.kvData;if(r){var a=St(i,r,t.metadata);if(o&&a.textures)for(var h in a.textures)a.textures[h].baseTexture.ktxKeyValueData=o;Object.assign(t,a)}else if(s){var l={};s.forEach((function(t,e){var n=new A.gP(new A.t5(t.resource,{mipmap:ut.E8.OFF,alphaMode:ut.Gk.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),r=i+"-"+(e+1);o&&(n.baseTexture.ktxKeyValueData=o),A.t5.addToCache(n.baseTexture,r),A.gP.addToCache(n,r),0===e&&(l[i]=n,A.t5.addToCache(n.baseTexture,i),A.gP.addToCache(n,i)),l[r]=n})),Object.assign(t,{textures:l})}}catch(t){return void e(t)}e()},t.extension=A.Ag.Loader,t.loadKeyValueData=!1,t}(),re=function(t,e){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},re(t,e)};function se(t,e){function i(){this.constructor=t}re(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var oe,ae,he=function(t){function e(e,i,n,r){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===r&&(r=!1);var s=t.call(this)||this;return n>16384&&(n=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=ut.B9.NORMAL,s.autoResize=r,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return se(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,(0,x.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(E.mc),le=function(){function t(t,e,i){this.geometry=new A.V2,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||ut.QE.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new A.hp((0,x.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){(o=this.dynamicProperties[i]).offset=e,e+=o.size,this.dynamicStride+=o.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new A.hp(this.dynamicData,!1,!1);var r=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;++i){(o=this.staticProperties[i]).offset=r,r+=o.size,this.staticStride+=o.size}var s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new A.hp(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];t.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===ut.QE.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(i=0;i<this.staticProperties.length;++i){o=this.staticProperties[i];t.addAttribute(o.attributeName,this.staticBuffer,0,o.type===ut.QE.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.type===ut.QE.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.type===ut.QE.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),ce=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new R.uq,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ut.QE.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=A.Mt.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=A.Uw.for2d(),i}return se(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,s=e.length;if(0!==s){s>i&&!t.autoResize&&(s=i);var o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture,h=a.alphaMode>0;this.state.blendMode=(0,x.correctBlendMode)(t.blendMode,h),r.state.set(this.state);var l=r.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=(0,x.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var u=!1,d=0,p=0;d<s;d+=n,p+=1){var f=s-d;f>n&&(f=n),p>=o.length&&o.push(this._generateOneMoreBuffer(t));var m=o[p];m.uploadDynamic(e,d,f);var g=t._bufferUpdateIDs[p]||0;(u=u||m._updateID<g)&&(m._updateID=t._updateID,m.uploadStatic(e,d,f)),r.geometry.bind(m.geometry),l.drawElements(l.TRIANGLES,6*f,l.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,r=t._properties,s=0;s<i;s+=n)e.push(new le(this.properties,r,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new le(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o=0,a=0,h=0,l=0,c=0;c<i;++c){var u=t[e+c],d=u._texture,p=u.scale.x,f=u.scale.y,m=d.trim,g=d.orig;m?(o=(a=m.x-u.anchor.x*g.width)+m.width,h=(l=m.y-u.anchor.y*g.height)+m.height):(o=g.width*(1-u.anchor.x),a=g.width*-u.anchor.x,h=g.height*(1-u.anchor.y),l=g.height*-u.anchor.y),n[s]=a*p,n[s+1]=l*f,n[s+r]=o*p,n[s+r+1]=l*f,n[s+2*r]=o*p,n[s+2*r+1]=h*f,n[s+3*r]=a*p,n[s+3*r+1]=h*f,s+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o],h=a._texture.baseTexture.alphaMode>0,l=a.alpha,c=l<1&&h?(0,x.premultiplyTint)(a._tintRGB,l):a._tintRGB+(255*l<<24);n[s]=c,n[s+r]=c,n[s+2*r]=c,n[s+3*r]=c,s+=4*r}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:A.Ag.RendererPlugin},e}(A.Pt);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(oe||(oe={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(ae||(ae={}));var ue={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},de=function(){function t(){this.color=16777215,this.alpha=1,this.texture=A.gP.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=A.gP.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),pe=function(t,e){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},pe(t,e)};function fe(t,e){function i(){this.constructor=t}pe(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function me(t,e){var i,n;void 0===e&&(e=!1);var r=t.length;if(!(r<6)){for(var s=0,o=0,a=t[r-2],h=t[r-1];o<r;o+=2){var l=t[o],c=t[o+1];s+=(l-a)*(c+h),a=l,h=c}if(!e&&s>0||e&&s<=0){var u=r/2;for(o=u+u%2;o<r;o+=2){var d=r-o-2,p=r-o-1,f=o,m=o+1;i=[t[f],t[d]],t[d]=i[0],t[f]=i[1],n=[t[m],t[p]],t[p]=n[0],t[m]=n[1]}}}}var ge={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,r=e.points,s=e.indices;if(i.length>=6){me(i,!1);for(var o=[],a=0;a<n.length;a++){var h=n[a];me(h.points,!0),o.push(i.length/2),i=i.concat(h.points)}var l=(0,x.earcut)(i,o,2);if(!l)return;var c=r.length/2;for(a=0;a<l.length;a+=3)s.push(l[a]+c),s.push(l[a+1]+c),s.push(l[a+2]+c);for(a=0;a<i.length;a++)r.push(i[a])}}},_e={build:function(t){var e,i,n,r,s,o,a=t.points;if(t.type===R.HY.CIRC){var h=t.shape;e=h.x,i=h.y,s=o=h.radius,n=r=0}else if(t.type===R.HY.ELIP){var l=t.shape;e=l.x,i=l.y,s=l.width,o=l.height,n=r=0}else{var c=t.shape,u=c.width/2,d=c.height/2;e=c.x+u,i=c.y+d,n=u-(s=o=Math.max(0,Math.min(c.radius,Math.min(u,d)))),r=d-o}if(s>=0&&o>=0&&n>=0&&r>=0){var p=Math.ceil(2.3*Math.sqrt(s+o)),f=8*p+(n?4:0)+(r?4:0);if(a.length=f,0!==f){if(0===p)return a.length=8,a[0]=a[6]=e+n,a[1]=a[3]=i+r,a[2]=a[4]=e-n,void(a[5]=a[7]=i-r);var m=0,g=4*p+(n?2:0)+2,_=g,y=f,v=e+(E=n+s),b=e-E,w=i+(A=r);if(a[m++]=v,a[m++]=w,a[--g]=w,a[--g]=b,r){var S=i-A;a[_++]=b,a[_++]=S,a[--y]=S,a[--y]=v}for(var T=1;T<p;T++){var x=Math.PI/2*(T/p);v=e+(E=n+Math.cos(x)*s),b=e-E,w=i+(A=r+Math.sin(x)*o),S=i-A;a[m++]=v,a[m++]=w,a[--g]=w,a[--g]=b,a[_++]=b,a[_++]=S,a[--y]=S,a[--y]=v}var E,A;v=e+(E=n),b=e-E,w=i+(A=r+o),S=i-A;a[m++]=v,a[m++]=w,a[--y]=S,a[--y]=v,n&&(a[m++]=b,a[m++]=w,a[--y]=S,a[--y]=b)}}else a.length=0},triangulate:function(t,e){var i=t.points,n=e.points,r=e.indices;if(0!==i.length){var s,o,a=n.length/2,h=a;if(t.type!==R.HY.RREC){var l=t.shape;s=l.x,o=l.y}else{var c=t.shape;s=c.x+c.width/2,o=c.y+c.height/2}var u=t.matrix;n.push(t.matrix?u.a*s+u.c*o+u.tx:s,t.matrix?u.b*s+u.d*o+u.ty:o),a++,n.push(i[0],i[1]);for(var d=2;d<i.length;d+=2)n.push(i[d],i[d+1]),r.push(a++,h,a);r.push(h+1,h,a)}}},ye={build:function(t){var e=t.shape,i=e.x,n=e.y,r=e.width,s=e.height,o=t.points;o.length=0,o.push(i,n,i+r,n,i+r,n+s,i,n+s)},triangulate:function(t,e){var i=t.points,n=e.points,r=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}};function ve(t,e,i){return t+(e-t)*i}function be(t,e,i,n,r,s,o){void 0===o&&(o=[]);for(var a=o,h=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0;f<=20;++f)h=ve(t,i,m=f/20),l=ve(e,n,m),c=ve(i,r,m),u=ve(n,s,m),d=ve(h,c,m),p=ve(l,u,m),0===f&&a[a.length-2]===d&&a[a.length-1]===p||a.push(d,p);return a}var we={build:function(t){if(Ge.nextRoundedRectBehavior)_e.build(t);else{var e=t.shape,i=t.points,n=e.x,r=e.y,s=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));i.length=0,a?(be(n,r+a,n,r,n+a,r,i),be(n+s-a,r,n+s,r,n+s,r+a,i),be(n+s,r+o-a,n+s,r+o,n+s-a,r+o,i),be(n+a,r+o,n,r+o,n,r+o-a,i)):i.push(n,r,n+s,r,n+s,r+o,n,r+o)}},triangulate:function(t,e){if(Ge.nextRoundedRectBehavior)_e.triangulate(t,e);else{for(var i=t.points,n=e.points,r=e.indices,s=n.length/2,o=(0,x.earcut)(i,null,2),a=0,h=o.length;a<h;a+=3)r.push(o[a]+s),r.push(o[a+1]+s),r.push(o[a+2]+s);for(a=0,h=i.length;a<h;a++)n.push(i[a],i[++a])}}};function Se(t,e,i,n,r,s,o,a){var h,l;o?(h=n,l=-i):(h=-n,l=i);var c=t-i*r+h,u=e-n*r+l,d=t+i*s+h,p=e+n*s+l;return a.push(c,u),a.push(d,p),2}function Te(t,e,i,n,r,s,o,a){var h=i-t,l=n-e,c=Math.atan2(h,l),u=Math.atan2(r-t,s-e);a&&c<u?c+=2*Math.PI:!a&&c>u&&(u+=2*Math.PI);var d=c,p=u-c,f=Math.abs(p),m=Math.sqrt(h*h+l*l),g=1+(15*f*Math.sqrt(m)/Math.PI|0),_=p/g;if(d+=_,a){o.push(t,e),o.push(i,n);for(var y=1,v=d;y<g;y++,v+=_)o.push(t,e),o.push(t+Math.sin(v)*m,e+Math.cos(v)*m);o.push(t,e),o.push(r,s)}else{o.push(i,n),o.push(t,e);for(y=1,v=d;y<g;y++,v+=_)o.push(t+Math.sin(v)*m,e+Math.cos(v)*m),o.push(t,e);o.push(r,s),o.push(t,e)}return 2*g}function xe(t,e){t.lineStyle.native?function(t,e){var i=0,n=t.shape,r=t.points||n.points,s=n.type!==R.HY.POLY||n.closeStroke;if(0!==r.length){var o=e.points,a=e.indices,h=r.length/2,l=o.length/2,c=l;for(o.push(r[0],r[1]),i=1;i<h;i++)o.push(r[2*i],r[2*i+1]),a.push(c,c+1),c++;s&&a.push(c,l)}}(t,e):function(t,e){var i=t.shape,n=t.points||i.points.slice(),r=e.closePointEps;if(0!==n.length){var s=t.lineStyle,o=new R.bR(n[0],n[1]),a=new R.bR(n[n.length-2],n[n.length-1]),h=i.type!==R.HY.POLY||i.closeStroke,l=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(h){n=n.slice(),l&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var c=.5*(o.x+a.x),u=.5*(a.y+o.y);n.unshift(c,u),n.push(c,u)}var d=e.points,p=n.length/2,f=n.length,m=d.length/2,g=s.width/2,_=g*g,y=s.miterLimit*s.miterLimit,v=n[0],b=n[1],w=n[2],S=n[3],T=0,x=0,E=-(b-S),A=v-w,I=0,C=0,P=Math.sqrt(E*E+A*A);E/=P,A/=P,E*=g,A*=g;var O=s.alignment,k=2*(1-O),M=2*O;h||(s.cap===ae.ROUND?f+=Te(v-E*(k-M)*.5,b-A*(k-M)*.5,v-E*k,b-A*k,v+E*M,b+A*M,d,!0)+2:s.cap===ae.SQUARE&&(f+=Se(v,b,E,A,k,M,!0,d))),d.push(v-E*k,b-A*k),d.push(v+E*M,b+A*M);for(var D=1;D<p-1;++D){v=n[2*(D-1)],b=n[2*(D-1)+1],w=n[2*D],S=n[2*D+1],T=n[2*(D+1)],x=n[2*(D+1)+1],E=-(b-S),A=v-w,E/=P=Math.sqrt(E*E+A*A),A/=P,E*=g,A*=g,I=-(S-x),C=w-T,I/=P=Math.sqrt(I*I+C*C),C/=P,I*=g,C*=g;var N=w-v,L=b-S,B=w-T,F=x-S,U=N*B+L*F,G=L*B-F*N,j=G<0;if(Math.abs(G)<.001*Math.abs(U))d.push(w-E*k,S-A*k),d.push(w+E*M,S+A*M),U>=0&&(s.join===oe.ROUND?f+=Te(w,S,w-E*k,S-A*k,w-I*k,S-C*k,d,!1)+4:f+=2,d.push(w-I*M,S-C*M),d.push(w+I*k,S+C*k));else{var H=(-E+v)*(-A+S)-(-E+w)*(-A+b),z=(-I+T)*(-C+S)-(-I+w)*(-C+x),W=(N*z-B*H)/G,V=(F*H-L*z)/G,X=(W-w)*(W-w)+(V-S)*(V-S),Y=w+(W-w)*k,q=S+(V-S)*k,$=w-(W-w)*M,K=S-(V-S)*M,J=j?k:M;X<=Math.min(N*N+L*L,B*B+F*F)+J*J*_?s.join===oe.BEVEL||X/_>y?(j?(d.push(Y,q),d.push(w+E*M,S+A*M),d.push(Y,q),d.push(w+I*M,S+C*M)):(d.push(w-E*k,S-A*k),d.push($,K),d.push(w-I*k,S-C*k),d.push($,K)),f+=2):s.join===oe.ROUND?j?(d.push(Y,q),d.push(w+E*M,S+A*M),f+=Te(w,S,w+E*M,S+A*M,w+I*M,S+C*M,d,!0)+4,d.push(Y,q),d.push(w+I*M,S+C*M)):(d.push(w-E*k,S-A*k),d.push($,K),f+=Te(w,S,w-E*k,S-A*k,w-I*k,S-C*k,d,!1)+4,d.push(w-I*k,S-C*k),d.push($,K)):(d.push(Y,q),d.push($,K)):(d.push(w-E*k,S-A*k),d.push(w+E*M,S+A*M),s.join===oe.ROUND?f+=j?Te(w,S,w+E*M,S+A*M,w+I*M,S+C*M,d,!0)+2:Te(w,S,w-E*k,S-A*k,w-I*k,S-C*k,d,!1)+2:s.join===oe.MITER&&X/_<=y&&(j?(d.push($,K),d.push($,K)):(d.push(Y,q),d.push(Y,q)),f+=2),d.push(w-I*k,S-C*k),d.push(w+I*M,S+C*M),f+=2)}}v=n[2*(p-2)],b=n[2*(p-2)+1],w=n[2*(p-1)],E=-(b-(S=n[2*(p-1)+1])),A=v-w,E/=P=Math.sqrt(E*E+A*A),A/=P,E*=g,A*=g,d.push(w-E*k,S-A*k),d.push(w+E*M,S+A*M),h||(s.cap===ae.ROUND?f+=Te(w-E*(k-M)*.5,S-A*(k-M)*.5,w-E*k,S-A*k,w+E*M,S+A*M,d,!1)+2:s.cap===ae.SQUARE&&(f+=Se(w,S,E,A,k,M,!1,d)));var Z=e.indices,Q=ue.epsilon*ue.epsilon;for(D=m;D<f+m-2;++D)v=d[2*D],b=d[2*D+1],w=d[2*(D+1)],S=d[2*(D+1)+1],T=d[2*(D+2)],x=d[2*(D+2)+1],Math.abs(v*(S-x)+w*(x-b)+T*(b-S))<Q||Z.push(D,D+1,D+2)}}(t,e)}var Ee,Ae,Ie=function(){function t(){}return t.curveTo=function(t,e,i,n,r,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,l=n-e,c=i-t,u=Math.abs(a*c-h*l);if(u<1e-8||0===r)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var d=a*a+h*h,p=l*l+c*c,f=a*l+h*c,m=r*Math.sqrt(d)/u,g=r*Math.sqrt(p)/u,_=m*f/d,y=g*f/p,v=m*c+g*h,b=m*l+g*a,w=h*(g+_),S=a*(g+_),T=c*(m+y),x=l*(m+y);return{cx:v+t,cy:b+e,radius:r,startAngle:Math.atan2(S-b,w-v),endAngle:Math.atan2(x-b,T-v),anticlockwise:h*l>c*a}},t.arc=function(t,e,i,n,r,s,o,a,h){for(var l=o-s,c=ue._segmentsCount(Math.abs(l)*r,40*Math.ceil(Math.abs(l)/R.TO)),u=l/(2*c),d=2*u,p=Math.cos(u),f=Math.sin(u),m=c-1,g=m%1/m,_=0;_<=m;++_){var y=u+s+d*(_+g*_),v=Math.cos(y),b=-Math.sin(y);h.push((p*v+f*b)*r+i,(p*-b+f*v)*r+n)}},t}(),Ce=function(){function t(){}return t.curveLength=function(t,e,i,n,r,s,o,a){for(var h=0,l=0,c=0,u=0,d=0,p=0,f=0,m=0,g=0,_=0,y=0,v=t,b=e,w=1;w<=10;++w)_=v-(m=(f=(p=(d=1-(l=w/10))*d)*d)*t+3*p*l*i+3*d*(c=l*l)*r+(u=c*l)*o),y=b-(g=f*e+3*p*l*n+3*d*c*s+u*a),v=m,b=g,h+=Math.sqrt(_*_+y*y);return h},t.curveTo=function(e,i,n,r,s,o,a){var h=a[a.length-2],l=a[a.length-1];a.length-=2;var c=ue._segmentsCount(t.curveLength(h,l,e,i,n,r,s,o)),u=0,d=0,p=0,f=0,m=0;a.push(h,l);for(var g=1,_=0;g<=c;++g)p=(d=(u=1-(_=g/c))*u)*u,m=(f=_*_)*_,a.push(p*h+3*d*_*e+3*u*f*n+m*s,p*l+3*d*_*i+3*u*f*r+m*o)},t}(),Pe=function(){function t(){}return t.curveLength=function(t,e,i,n,r,s){var o=t-2*i+r,a=e-2*n+s,h=2*i-2*t,l=2*n-2*e,c=4*(o*o+a*a),u=4*(o*h+a*l),d=h*h+l*l,p=2*Math.sqrt(c+u+d),f=Math.sqrt(c),m=2*c*f,g=2*Math.sqrt(d),_=u/f;return(m*p+f*u*(p-g)+(4*d*c-u*u)*Math.log((2*f+_+p)/(_+g)))/(4*m)},t.curveTo=function(e,i,n,r,s){for(var o=s[s.length-2],a=s[s.length-1],h=ue._segmentsCount(t.curveLength(o,a,e,i,n,r)),l=0,c=0,u=1;u<=h;++u){var d=u/h;l=o+(e-o)*d,c=a+(i-a)*d,s.push(l+(e+(n-e)*d-l)*d,c+(i+(r-i)*d-c)*d)}},t}(),Re=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Oe=((Ee={})[R.HY.POLY]=ge,Ee[R.HY.CIRC]=_e,Ee[R.HY.ELIP]=_e,Ee[R.HY.RECT]=ye,Ee[R.HY.RREC]=we,Ee),ke=[],Me=[],De=function(){function t(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Ne=new R.bR,Le=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new E.cz,e.boundsDirty=-1,e}return fe(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Me.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),ke.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var r=new De(t,e,i,n);return this.graphicsData.push(r),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new De(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,Ne):Ne.copyFrom(t),n.shape.contains(Ne.x,Ne.y)))){var r=!1;if(n.holes)for(var s=0;s<n.holes.length;s++){if(n.holes[s].shape.contains(Ne.x,Ne.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,n=null;this.batches.length>0&&(n=(i=this.batches[this.batches.length-1]).style);for(var r=this.shapeIndex;r<e.length;r++){this.shapeIndex++;var s=e[r],o=s.fillStyle,a=s.lineStyle;Oe[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(o.visible||a.visible)&&this.processHoles(s.holes);for(var h=0;h<2;h++){var l=0===h?o:a;if(l.visible){var c=l.texture.baseTexture,u=this.indices.length,d=this.points.length/2;c.wrapMode=ut.uR.REPEAT,0===h?this.processFill(s):this.processLine(s);var p=this.points.length/2-d;0!==p&&(i&&!this._compareStyles(n,l)&&(i.end(u,d),i=null),i||((i=ke.pop()||new Re).begin(l,u,d),this.batches.push(i),n=l),this.addUvs(this.points,t,l.texture,d,p,l.matrix))}}}var f=this.indices.length,m=this.points.length/2;if(i&&i.end(f,m),0!==this.batches.length){var g=m>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&g===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,r=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(r&&!r.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],r=0;r<n.size;r++){var s=n.start+r;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++A.t5._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Me.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,r=Me.pop();r||((r=new A.hq).texArray=new A.cc),r.texArray.count=0,r.start=0,r.size=0,r.type=ut._4.TRIANGLES;var s=0,o=null,a=0,h=!1,l=ut._4.TRIANGLES,c=0;this.drawCalls.push(r);for(e=0;e<this.batches.length;e++){var u=this.batches[e],d=u.style,p=d.texture.baseTexture;h!==!!d.native&&(l=(h=!!d.native)?ut._4.LINES:ut._4.TRIANGLES,o=null,s=8,t++),o!==p&&(o=p,p._batchEnabled!==t&&(8===s&&(t++,s=0,r.size>0&&((r=Me.pop())||((r=new A.hq).texArray=new A.cc),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=s,p.wrapMode=ut.uR.REPEAT,r.texArray.elements[r.texArray.count++]=p,s++)),r.size+=u.size,c+=u.size,a=p._batchLocation,this.addColors(i,d.color,d.alpha,u.attribSize,u.attribStart),this.addTextureIds(n,a,u.attribSize,u.attribStart)}A.t5._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),o=new Uint32Array(r),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=i[h],s[a++]=n[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?ge.triangulate(t,this):Oe[t.type].triangulate(t,this)},e.prototype.processLine=function(t){xe(t,this);for(var e=0;e<t.holes.length;e++)xe(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];Oe[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],r=t[2*i+1];t[2*i]=e.a*n+e.c*r+e.tx,t[2*i+1]=e.b*n+e.d*r+e.ty}},e.prototype.addColors=function(t,e,i,n,r){void 0===r&&(r=0);var s=(e>>16)+(65280&e)+((255&e)<<16),o=(0,x.premultiplyTint)(s,i);t.length=Math.max(t.length,r+n);for(var a=0;a<n;a++)t[r+a]=o},e.prototype.addTextureIds=function(t,e,i,n){void 0===n&&(n=0),t.length=Math.max(t.length,n+i);for(var r=0;r<i;r++)t[n+r]=e},e.prototype.addUvs=function(t,e,i,n,r,s){void 0===s&&(s=null);for(var o=0,a=e.length,h=i.frame;o<r;){var l=t[2*(n+o)],c=t[2*(n+o)+1];if(s){var u=s.a*l+s.c*c+s.tx;c=s.b*l+s.d*c+s.ty,l=u}o++,e.push(l/h.width,c/h.height)}var d=i.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,i,a,r)},e.prototype.adjustUvs=function(t,e,i,n){for(var r=e.baseTexture,s=1e-6,o=i+2*n,a=e.frame,h=a.width/r.width,l=a.height/r.height,c=a.x/a.width,u=a.y/a.height,d=Math.floor(t[i]+s),p=Math.floor(t[i+1]+s),f=i+2;f<o;f+=2)d=Math.min(d,Math.floor(t[f]+s)),p=Math.min(p,Math.floor(t[f+1]+s));c-=d,u-=p;for(f=i;f<o;f+=2)t[f]=(t[f]+c)*h,t[f+1]=(t[f+1]+u)*l},e.BATCHABLE_SIZE=100,e}(A.JH),Be=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=ae.BUTT,e.join=oe.MITER,e.miterLimit=10,e}return fe(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(de),Fe=new Float32Array(3),Ue={},Ge=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new de,i._lineStyle=new Be,i._matrix=null,i._holeMode=!1,i.state=A.Uw.for2d(),i._geometry=e||new Le,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=ut.B9.NORMAL,i}return fe(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,i,n,r){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=.5),void 0===r&&(r=!1),"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:n,native:r}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:A.gP.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ae.BUTT,join:oe.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new R.tS,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new R.tS,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),Pe.curveTo(t,e,i,n,r),this},e.prototype.bezierCurveTo=function(t,e,i,n,r,s){return this._initCurve(),Ce.curveTo(t,e,i,n,r,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,n,r){this._initCurve(t,e);var s=this.currentPath.points,o=Ie.curveTo(t,e,i,n,r,s);if(o){var a=o.cx,h=o.cy,l=o.radius,c=o.startAngle,u=o.endAngle,d=o.anticlockwise;this.arc(a,h,l,c,u,d)}return this},e.prototype.arc=function(t,e,i,n,r,s){if(void 0===s&&(s=!1),n===r)return this;if(!s&&r<=n?r+=R.TO:s&&n<=r&&(n+=R.TO),0===r-n)return this;var o=t+Math.cos(n)*i,a=e+Math.sin(n)*i,h=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var c=Math.abs(l[l.length-2]-o),u=Math.abs(l[l.length-1]-a);c<h&&u<h||l.push(o,a)}else this.moveTo(o,a),l=this.currentPath.points;return Ie.arc(o,a,t,e,i,n,r,s,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:A.gP.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:A.gP.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new R.M_(t,e,i,n))},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new R.TE(t,e,i,n,r))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new R.jl(t,e,i))},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new R.Pp(t,e,i,n))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var r=!0,s=i[0];s.points?(r=s.closeStroke,t=s.points):t=Array.isArray(i[0])?i[0]:i;var o=new R.tS(t);return o.closeStroke=r,this.drawShape(o),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==R.HY.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var n=0;n<i;n++){var r=t.batches[n],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),h={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:(0,x.hex2rgb)(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=h}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,n=this.tint,r=this.worldAlpha,s=e.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*r,s.tint[1]=(n>>8&255)/255*r,s.tint[2]=(255&n)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,n=e.type,r=e.size,s=e.start,o=i.count,a=0;a<o;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(n,r,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!Ue[i]){for(var n=t.plugins[i].MAX_TEXTURES,r=new Int32Array(n),s=0;s<n;s++)r[s]=s;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new R.uq,default:A.k2.from({uSamplers:r},!0)},a=t.plugins[i]._shader.program;Ue[i]=new A.Mt(a,o)}e=Ue[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,n=e.minY,r=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,i,n,r,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=(0,x.hex2rgb)(this.tint,Fe),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,r=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this._geometry.points,l=this.vertexData,c=0,u=0;u<h.length;u+=2){var d=h[u],p=h[u+1];l[c++]=i*d+r*p+o,l[c++]=s*p+n*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new R.bR,e}(E.mc),je={buildPoly:ge,buildCircle:_e,buildRectangle:ye,buildRoundedRectangle:we,buildLine:xe,ArcUtils:Ie,BezierUtils:Ce,QuadraticUtils:Pe,BatchPart:Re,FILL_COMMANDS:Oe,BATCH_POOL:ke,DRAW_CALL_POOL:Me},He=i(8857),ze=function(t,e){return ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ze(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Ae||(Ae={}));var We={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ae.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ve=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Xe=function(){function t(t){this.styleID=0,this.reset(),$e(this,t,t)}return t.prototype.clone=function(){var e={};return $e(e,this,We),new t(e)},t.prototype.reset=function(){$e(this,We,We)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=qe(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=qe(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=qe(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Ve.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Ye(t){return"number"==typeof t?(0,x.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function qe(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Ye(t[e]);return t}return Ye(t)}function $e(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var Ke={willReadFrequently:!0},Je=function(){function t(t,e,i,n,r,s,o,a,h){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=r,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,i,n,r){void 0===r&&(r=t._canvas),n=null==n?i.wordWrap:n;var s=i.toFontString(),o=t.measureFont(s);0===o.fontSize&&(o.fontSize=i.fontSize,o.ascent=i.fontSize);var a=r.getContext("2d",Ke);a.font=s;for(var h=(n?t.wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),c=0,u=0;u<h.length;u++){var d=a.measureText(h[u]).width+(h[u].length-1)*i.letterSpacing;l[u]=d,c=Math.max(c,d)}var p=c+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||o.fontSize+i.strokeThickness,m=Math.max(f,o.fontSize+i.strokeThickness)+(h.length-1)*(f+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,p,m,h,l,f+i.leading,c,o)},t.wordWrap=function(e,i,n){void 0===n&&(n=t._canvas);for(var r=n.getContext("2d",Ke),s=0,o="",a="",h=Object.create(null),l=i.letterSpacing,c=i.whiteSpace,u=t.collapseSpaces(c),d=t.collapseNewlines(c),p=!u,f=i.wordWrapWidth+l,m=t.tokenize(e),g=0;g<m.length;g++){var _=m[g];if(t.isNewline(_)){if(!d){a+=t.addLine(o),p=!u,o="",s=0;continue}_=" "}if(u){var y=t.isBreakingSpace(_),v=t.isBreakingSpace(o[o.length-1]);if(y&&v)continue}var b=t.getFromCache(_,l,h,r);if(b>f)if(""!==o&&(a+=t.addLine(o),o="",s=0),t.canBreakWords(_,i.breakWords))for(var w=t.wordWrapSplit(_),S=0;S<w.length;S++){for(var T=w[S],x=1;w[S+x];){var E=w[S+x],A=T[T.length-1];if(t.canBreakChars(A,E,_,S,i.breakWords))break;T+=E,x++}S+=T.length-1;var I=t.getFromCache(T,l,h,r);I+s>f&&(a+=t.addLine(o),p=!1,o="",s=0),o+=T,s+=I}else{o.length>0&&(a+=t.addLine(o),o="",s=0);var C=g===m.length-1;a+=t.addLine(_,!C),p=!1,o="",s=0}else b+s>f&&(p=!1,a+=t.addLine(o),o="",s=0),(o.length>0||!t.isBreakingSpace(_)||p)&&(o+=_,s+=b)}return a+=t.addLine(o,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if("number"!=typeof r){var s=t.length*e;r=n.measureText(t).width+s,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,i){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var s=e[r],o=e[r+1];t.isBreakingSpace(s,o)||t.isNewline(s)?(""!==n&&(i.push(n),n=""),i.push(s)):n+=s}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},n=t._canvas,r=t._context;r.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(r.measureText(s).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,n.width=o,n.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,a);var l=r.getImageData(0,0,o,h).data,c=l.length,u=4*o,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var m=0;m<u;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p+=u}for(i.ascent=a-d,p=c-u,f=!1,d=h;d>a;--d){for(m=0;m<u;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p-=u}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var i=new OffscreenCanvas(0,0),n=i.getContext("2d",Ke);if(n&&n.measureText)return t.__canvas=i,i;e=ct.W0.ADAPTER.createCanvas()}catch(t){e=ct.W0.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d",Ke)),t.__context},enumerable:!1,configurable:!0}),t}();Je._fonts={},Je.METRICS_STRING="|ÉqÅ",Je.BASELINE_SYMBOL="M",Je.BASELINE_MULTIPLIER=1.4,Je.HEIGHT_MULTIPLIER=2,Je._newlines=[10,13],Je._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ze={texture:!0,children:!1,baseTexture:!0},Qe=function(t){function e(e,i,n){var r=this,s=!1;n||(n=ct.W0.ADAPTER.createCanvas(),s=!0),n.width=3,n.height=3;var o=A.gP.from(n);return o.orig=new R.M_,o.trim=new R.M_,(r=t.call(this,o)||this)._ownCanvas=s,r.canvas=n,r.context=n.getContext("2d",{willReadFrequently:!0}),r._resolution=ct.W0.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=e,r.style=i,r.localStyleID=-1,r}return function(t,e){function i(){this.constructor=t}ze(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,r,s=this.context,o=Je.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,h=o.height,l=o.lines,c=o.lineHeight,u=o.lineWidths,d=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,h)+2*i.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var f=i.dropShadow?2:1,m=0;m<f;++m){var g=i.dropShadow&&0===m,_=g?Math.ceil(Math.max(1,h)+2*i.padding):0,y=_*this._resolution;if(g){s.fillStyle="black",s.strokeStyle="black";var v=i.dropShadowColor,b=(0,x.hex2rgb)("number"==typeof v?v:(0,x.string2hex)(v)),w=i.dropShadowBlur*this._resolution,S=i.dropShadowDistance*this._resolution;s.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+i.dropShadowAlpha+")",s.shadowBlur=w,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*S,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*S+y}else s.fillStyle=this._generateFillStyle(i,l,o),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var T=(c-p.fontSize)/2;(!e.nextLineHeightBehavior||c-p.fontSize<0)&&(T=0);for(var E=0;E<l.length;E++)n=i.strokeThickness/2,r=i.strokeThickness/2+E*c+p.ascent+T,"right"===i.align?n+=d-u[E]:"center"===i.align&&(n+=(d-u[E])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[E],n+i.padding,r+i.padding-_,!0),i.fill&&this.drawLetterSpacing(l[E],n+i.padding,r+i.padding-_)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,i,n,r){void 0===r&&(r=!1);var s=this._style.letterSpacing,o=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===s||o)return o&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),void(r?this.context.strokeText(t,i,n):this.context.fillText(t,i,n));for(var a=i,h=Array.from?Array.from(t):t.split(""),l=this.context.measureText(t).width,c=0,u=0;u<h.length;++u){var d=h[u];r?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);for(var p="",f=u+1;f<h.length;++f)p+=h[f];a+=l-(c=this.context.measureText(p).width)+s,l=c}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,x.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,s=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(e,i){return this.updateText(!0),-1===this._textureID&&(e=!1),t.prototype.getBounds.call(this,e,i)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var n,r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,h=this.canvas.height/this._resolution-s-2*o,l=r.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var u=l.length+1,d=1;d<u;++d)c.push(d/u);if(l.unshift(r[0]),c.unshift(0),l.push(r[r.length-1]),c.push(1),t.fillGradientType===Ae.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,o,a/2,h+o);var p=i.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var f=i.lineHeight*(d-1)+p,m=i.lineHeight*d,g=m;d>0&&f>m&&(g=(m+f)/2);var _=m+p,y=i.lineHeight*(d+1),v=_;d+1<e.length&&y<_&&(v=(_+y)/2);for(var b=(v-g)/h,w=0;w<l.length;w++){var S=0;S="number"==typeof c[w]?c[w]:w/l.length;var T=Math.min(1,Math.max(0,g/h+S*b));T=Number(T.toFixed(5)),n.addColorStop(T,l[w])}}}else{n=this.context.createLinearGradient(o,h/2,a+o,h/2);var x=l.length+1,E=1;for(d=0;d<l.length;d++){var A=void 0;A="number"==typeof c[d]?c[d]:E/x,n.addColorStop(A,l[d]),E++}}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Ze,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,x.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,x.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Xe?t:new Xe(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(He.k);ct.W0.UPLOADS_PER_FRAME=4;var ti=function(t,e){return ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ti(t,e)};var ei=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function ii(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof A.gP){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function ni(t,e){if(t.baseTexture instanceof A.t5){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function ri(t,e){if(t._texture&&t._texture instanceof A.gP){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function si(t,e){return e instanceof Qe&&(e.updateText(!0),!0)}function oi(t,e){if(e instanceof Xe){var i=e.toFontString();return Je.measureFont(i),!0}return!1}function ai(t,e){if(t instanceof Qe){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function hi(t,e){return t instanceof Xe&&(-1===e.indexOf(t)&&e.push(t),!0)}var li=function(){function t(t){var e=this;this.limiter=new ei(ct.W0.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(ai),this.registerFindHook(hi),this.registerFindHook(ii),this.registerFindHook(ni),this.registerFindHook(ri),this.registerUploadHook(si),this.registerUploadHook(oi)}return t.prototype.upload=function(t,e){var i=this;return"function"==typeof t&&(e=t,t=null),e&&(0,x.deprecation)("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise((function(n){t&&i.add(t);var r=function(){null==e||e(),n()};i.queue.length?(i.completes.push(r),i.ticking||(i.ticking=!0,O.Rv.system.addOnce(i.tick,i,O.dQ.UTILITY))):r()}))},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)O.Rv.system.addOnce(this.tick,this,O.dQ.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(i=0,n=r.length;i<n;i++)r[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof E.mc)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&O.Rv.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function ci(t,e){return e instanceof A.t5&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function ui(t,e){if(!(e instanceof Ge))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,r=0;r<n.length;r++){var s=n[r].style.texture;s&&ci(t,s.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function di(t,e){return t instanceof Ge&&(e.push(t),!0)}var pi=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(di),i.registerUploadHook(ci),i.registerUploadHook(ui),i}return function(t,e){function i(){this.constructor=t}ti(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.extension={name:"prepare",type:A.Ag.RendererPlugin},e}(li),fi=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),mi=function(){function t(t,e,i){void 0===i&&(i=null),this.linkedSheets=[],this._texture=t instanceof A.gP?t:null,this.baseTexture=t instanceof A.t5?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=(0,x.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){var i=this;return e&&(0,x.deprecation)("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise((function(n){i._callback=function(t){null==e||e(t),n(t)},i._batchIndex=0,i._frameKeys.length<=t.BATCH_SIZE?(i._processFrames(0),i._processAnimations(),i._parseComplete()):i._nextBatch()}))},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE;i-e<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],s=this._frames[r],o=s.frame;if(o){var a=null,h=null,l=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,c=new R.M_(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);a=s.rotated?new R.M_(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new R.M_(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(h=new R.M_(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new A.gP(this.baseTexture,a,c,h,s.rotated?2:0,s.anchor),A.gP.addToCache(this.textures[r],r)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),gi=function(){function t(){}return t.use=function(e,i){var n,r,s=this,o=e.name+"_image";if(e.data&&e.type===J.TYPE.JSON&&e.data.frames&&!s.resources[o]){var a=null===(r=null===(n=e.data)||void 0===n?void 0:n.meta)||void 0===r?void 0:r.related_multi_packs;if(Array.isArray(a))for(var h=function(t){if("string"!=typeof t)return"continue";var i=t.replace(".json",""),n=x.url.resolve(e.url.replace(s.baseUrl,""),t);if(s.resources[i]||Object.values(s.resources).some((function(t){return x.url.format(x.url.parse(t.url))===n})))return"continue";var r={crossOrigin:e.crossOrigin,loadType:J.LOAD_TYPE.XHR,xhrType:J.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(i,n,r)},l=0,c=a;l<c.length;l++){h(c[l])}var u={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,s.baseUrl);s.add(o,d,u,(function(t){if(t.error)i(t.error);else{var n=new mi(t.texture,e.data,e.url);n.parse().then((function(){e.spritesheet=n,e.textures=n.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:x.url.resolve(t.url.replace(e,""),t.data.meta.image)},t.extension=A.Ag.Loader,t}(),_i=function(t,e){return _i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},_i(t,e)};function yi(t,e){function i(){this.constructor=t}_i(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var vi=new R.bR,bi=function(t){function e(e,i,n){void 0===i&&(i=100),void 0===n&&(n=100);var r=t.call(this,e)||this;return r.tileTransform=new R.dL,r._width=i,r._height=n,r.uvMatrix=r.texture.uvMatrix||new A.NW(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}return yi(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new R.M_),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,vi);var e=this._width,i=this._height,n=-e*this.anchor._x;if(vi.x>=n&&vi.x<n+e){var r=-i*this.anchor._y;if(vi.y>=r&&vi.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof A.gP?t:A.gP.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(He.k),wi="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Si=new R.uq,Ti=function(t){function e(e){var i=t.call(this,e)||this;return e.runners.contextChange.add(i),i.quad=new A.X1,i.state=A.Uw.for2d(),i}return yi(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=A.Mt.from(wi,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?A.Mt.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):A.Mt.from(wi,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);var r=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(n=i.uvs)[0]=n[6]=-r,n[1]=n[3]=-s,n[2]=n[4]=1-r,n[5]=n[7]=1-s,i.invalidate();var o=t._texture,a=o.baseTexture,h=a.alphaMode>0,l=t.tileTransform.localTransform,c=t.uvMatrix,u=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;u&&(a._glTextures[e.CONTEXT_UID]?u=a.wrapMode!==ut.uR.CLAMP:a.wrapMode===ut.uR.CLAMP&&(a.wrapMode=ut.uR.REPEAT));var d=u?this.simpleShader:this.shader,p=o.width,f=o.height,m=t._width,g=t._height;Si.set(l.a*p/m,l.b*p/g,l.c*f/m,l.d*f/g,l.tx/m,l.ty/g),Si.invert(),u?Si.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=Si.toArray(!0),d.uniforms.uColor=(0,x.premultiplyTintToRgba)(t.tint,t.worldAlpha,d.uniforms.uColor,h),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=o,e.shader.bind(d),e.geometry.bind(i),this.state.blendMode=(0,x.correctBlendMode)(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:A.Ag.RendererPlugin},e}(A.Pt),xi=function(t,e){return xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},xi(t,e)};function Ei(t,e){function i(){this.constructor=t}xi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ai=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),Ii=new R.bR,Ci=new R.tS,Pi=function(t){function e(e,i,n,r){void 0===r&&(r=ut._4.TRIANGLES);var s=t.call(this)||this;return s.geometry=e,s.shader=i,s.state=n||A.Uw.for2d(),s.drawMode=r,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=ct.W0.ROUND_PIXELS,s.batchUvs=null,s}return Ei(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ut._4.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,r=n.a,s=n.b,o=n.c,a=n.d,h=n.tx,l=n.ty,c=this.vertexData,u=0;u<c.length/2;u++){var d=e[2*u],p=e[2*u+1];c[2*u]=r*d+o*p+h,c[2*u+1]=s*d+a*p+l}if(this._roundPixels){var f=ct.W0.RESOLUTION;for(u=0;u<c.length;++u)c[u]=Math.round((c[u]*f|0)/f)}this.vertexDirty=i}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Ai(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Ii);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=Ci.points,n=this.geometry.getIndex().data,r=n.length,s=4===this.drawMode?3:1,o=0;o+2<r;o+=s){var a=2*n[o],h=2*n[o+1],l=2*n[o+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[l],i[5]=e[l+1],Ci.contains(Ii.x,Ii.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(E.mc),Ri=function(t){function e(e,i){var n=this,r={uSampler:e,alpha:1,uTextureMatrix:R.uq.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(r,i.uniforms),(n=t.call(this,i.program||A.BP.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r)||this)._colorDirty=!1,n.uvMatrix=new A.NW(e),n.batchable=void 0===i.program,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Ei(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;(0,x.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(A.Mt),Oi=function(t){function e(e,i,n){var r=t.call(this)||this,s=new A.hp(e),o=new A.hp(i,!0),a=new A.hp(n,!0,!0);return r.addAttribute("aVertexPosition",s,2,!1,ut.QE.FLOAT).addAttribute("aTextureCoord",o,2,!1,ut.QE.FLOAT).addIndex(a),r._updateId=-1,r}return Ei(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(A.V2),ki=function(t,e){return ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ki(t,e)};var Mi=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},Di=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in e){var r=e[n].match(/^[a-z]+/gm)[0],s=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var a in s){var h=s[a].split("="),l=h[0],c=h[1].replace(/"/gm,""),u=parseFloat(c),d=isNaN(u)?c:u;o[l]=d}i[r].push(o)}var p=new Mi;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),i.distanceField.forEach((function(t){return p.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),p},t}(),Ni=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Mi,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),r=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField"),h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(h=0;h<n.length;h++)e.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(h=0;h<r.length;h++)e.page.push({id:parseInt(r[h].getAttribute("id"),10)||0,file:r[h].getAttribute("file")});for(h=0;h<s.length;h++){var l=s[h];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(h=0;h<o.length;h++)e.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});for(h=0;h<a.length;h++)e.distanceField.push({fieldType:a[h].getAttribute("fieldType"),distanceRange:parseInt(a[h].getAttribute("distanceRange"),10)});return e},t}(),Li=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Ni.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Ni.parse(e)},t}(),Bi=[Di,Ni,Li];function Fi(t){for(var e=0;e<Bi.length;e++)if(Bi[e].test(t))return Bi[e];return null}function Ui(t,e,i,n,r,s,o){var a=i.text,h=i.fontProperties;e.translate(n,r),e.scale(s,s);var l=o.strokeThickness/2,c=-o.strokeThickness/2;if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function(t,e,i,n,r,s){var o,a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var h=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,c=t.width/n-h-2*l,u=t.height/n-h-2*l,d=a.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),i.fillGradientType===Ae.LINEAR_VERTICAL){o=e.createLinearGradient(c/2,l,c/2,u+l);var g=0,_=(s.fontProperties.fontSize+i.strokeThickness)/u;for(m=0;m<r.length;m++)for(var y=s.lineHeight*m,v=0;v<d.length;v++){var b=y/u+("number"==typeof p[v]?p[v]:v/d.length)*_,w=Math.max(g,b);w=Math.min(w,1),o.addColorStop(w,d[v]),g=w}}else{o=e.createLinearGradient(l,u/2,c+l,u/2);var S=d.length+1,T=1;for(m=0;m<d.length;m++){var x=void 0;x="number"==typeof p[m]?p[m]:T/S,o.addColorStop(x,d[m]),T++}}return o}(t,e,o,s,[a],i),e.strokeStyle=o.stroke,o.dropShadow){var u=o.dropShadowColor,d=(0,x.hex2rgb)("number"==typeof u?u:(0,x.string2hex)(u)),p=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+o.dropShadowAlpha+")",e.shadowBlur=p,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,l,c+i.lineHeight-h.descent),o.fill&&e.fillText(a,l,c+i.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Gi(t){return Array.from?Array.from(t):t.split("")}function ji(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Hi=function(){function t(t,e,i){var n,r,s=t.info[0],o=t.common[0],a=t.page[0],h=t.distanceField[0],l=(0,x.getResolutionOfUrl)(a.file),c={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=o.lineHeight/l,this.chars={},this.pageTextures=c;for(var u=0;u<t.page.length;u++){var d=t.page[u],p=d.id,f=d.file;c[p]=e instanceof Array?e[u]:e[f],(null==h?void 0:h.fieldType)&&"none"!==h.fieldType&&(c[p].baseTexture.alphaMode=ut.Gk.NO_PREMULTIPLIED_ALPHA,c[p].baseTexture.mipmap=ut.E8.OFF)}for(u=0;u<t.char.length;u++){var m=t.char[u],g=(p=m.id,m.page),_=t.char[u],y=_.x,v=_.y,b=_.width,w=_.height,S=_.xoffset,T=_.yoffset,E=_.xadvance;y/=l,v/=l,b/=l,w/=l,S/=l,T/=l,E/=l;var I=new R.M_(y+c[g].frame.x/l,v+c[g].frame.y/l,b,w);this.chars[p]={xOffset:S,yOffset:T,xAdvance:E,kerning:{},texture:new A.gP(c[g].baseTexture,I),page:g}}for(u=0;u<t.kerning.length;u++){var C=t.kerning[u],P=C.first,O=C.second,k=C.amount;P/=l,O/=l,k/=l,this.chars[O]&&(this.chars[O].kerning[P]=k)}this.distanceFieldRange=null==h?void 0:h.distanceRange,this.distanceFieldType=null!==(r=null===(n=null==h?void 0:h.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==r?r:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,n){var r;if(e instanceof Mi)r=e;else{var s=Fi(e);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(e)}i instanceof A.gP&&(i=[i]);var o=new t(r,i,n);return t.available[o.font]=o,o},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},t.defaultOptions,n),s=r.chars,o=r.padding,a=r.resolution,h=r.textureWidth,l=r.textureHeight,c=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+r.length+".");var s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,Gi(r))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s),u=i instanceof Xe?i:new Xe(i),d=h,p=new Mi;p.info[0]={face:u.fontFamily,size:u.fontSize},p.common[0]={lineHeight:u.fontSize};for(var f,m,g,_=0,y=0,v=0,b=[],w=0;w<c.length;w++){f||((f=ct.W0.ADAPTER.createCanvas()).width=h,f.height=l,m=f.getContext("2d"),g=new A.t5(f,{resolution:a}),b.push(new A.gP(g)),p.page.push({id:b.length-1,file:""}));var S=c[w],T=Je.measureText(S,u,!1,f),x=T.width,E=Math.ceil(T.height),I=Math.ceil(("italic"===u.fontStyle?2:1)*x);if(y>=l-E*a){if(0===y)throw new Error("[BitmapFont] textureHeight "+l+"px is too small (fontFamily: '"+u.fontFamily+"', fontSize: "+u.fontSize+"px, char: '"+S+"')");--w,f=null,m=null,g=null,y=0,_=0,v=0}else if(v=Math.max(E+T.fontProperties.descent,v),I*a+_>=d){if(0===_)throw new Error("[BitmapFont] textureWidth "+h+"px is too small (fontFamily: '"+u.fontFamily+"', fontSize: "+u.fontSize+"px, char: '"+S+"')");--w,y+=v*a,y=Math.ceil(y),_=0,v=0}else{Ui(f,m,T,_,y,a,u);var C=ji(T.text);p.char.push({id:C,page:b.length-1,x:_/a,y:y/a,width:I,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(x-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),_+=(I+2*o)*a,_=Math.ceil(_)}}w=0;for(var P=c.length;w<P;w++)for(var R=c[w],O=0;O<P;O++){var k=c[O],M=m.measureText(R).width,D=m.measureText(k).width,N=m.measureText(R+k).width-(M+D);N&&p.kerning.push({first:ji(R),second:ji(k),amount:N})}var L=new t(p,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=L,L},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),zi=[],Wi=[],Vi=[],Xi=function(t){function e(i,n){void 0===n&&(n={});var r=t.call(this)||this;r._tint=16777215;var s=Object.assign({},e.styleDefaults,n),o=s.align,a=s.tint,h=s.maxWidth,l=s.letterSpacing,c=s.fontName,u=s.fontSize;if(!Hi.available[c])throw new Error('Missing BitmapFont "'+c+'"');return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=o,r._tint=a,r._font=void 0,r._fontName=c,r._fontSize=u,r.text=i,r._maxWidth=h,r._maxLineHeight=0,r._letterSpacing=l,r._anchor=new R.oA((function(){r.dirty=!0}),r,0,0),r._roundPixels=ct.W0.ROUND_PIXELS,r.dirty=!0,r._resolution=ct.W0.RESOLUTION,r._autoResolution=!0,r._textureCache={},r}return function(t,e){function i(){this.constructor=t}ki(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=Hi.available[this._fontName],i=this.fontSize,n=i/e.size,r=new R.bR,s=[],o=[],a=[],h=Gi(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/i,c="none"===e.distanceFieldType?zi:Wi,u=null,d=0,p=0,f=0,m=-1,g=0,_=0,y=0,v=0,b=0;b<h.length;b++){var w=ji(W=h[b]);if(/(?:\s)/.test(W)&&(m=b,g=d,v++),"\r"!==W&&"\n"!==W){var S=e.chars[w];if(S){u&&S.kerning[u]&&(r.x+=S.kerning[u]);var T=Vi.pop()||{texture:A.gP.EMPTY,line:0,charCode:0,prevSpaces:0,position:new R.bR};T.texture=S.texture,T.line=f,T.charCode=w,T.position.x=r.x+S.xOffset+this._letterSpacing/2,T.position.y=r.y+S.yOffset,T.prevSpaces=v,s.push(T),d=T.position.x+Math.max(S.xAdvance-S.xOffset,S.texture.orig.width),r.x+=S.xAdvance+this._letterSpacing,y=Math.max(y,S.yOffset+S.texture.height),u=w,-1!==m&&l>0&&r.x>l&&(++_,(0,x.removeItems)(s,1+m-_,1+b-m),b=m,m=-1,o.push(g),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,g),f++,r.x=0,r.y+=e.lineHeight,u=null,v=0)}}else o.push(d),a.push(-1),p=Math.max(p,d),++f,++_,r.x=0,r.y+=e.lineHeight,u=null,v=0}var E=h[h.length-1];"\r"!==E&&"\n"!==E&&(/(?:\s)/.test(E)&&(d=g),o.push(d),p=Math.max(p,d),a.push(-1));var I=[];for(b=0;b<=f;b++){var C=0;"right"===this._align?C=p-o[b]:"center"===this._align?C=(p-o[b])/2:"justify"===this._align&&(C=a[b]<0?0:(p-o[b])/a[b]),I.push(C)}var P=s.length,O={},k=[],M=this._activePagesMeshData;c.push.apply(c,M);for(b=0;b<P;b++){var D=(X=s[b].texture).baseTexture.uid;if(!O[D]){if(!(Q=c.pop())){var N=new Oi,L=void 0,B=void 0;"none"===e.distanceFieldType?(L=new Ri(A.gP.EMPTY),B=ut.B9.NORMAL):(L=new Ri(A.gP.EMPTY,{program:A.BP.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),B=ut.B9.NORMAL_NPM);var F=new Pi(N,L);F.blendMode=B,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:F,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;var U=this._textureCache;U[D]=U[D]||new A.gP(X.baseTexture),Q.mesh.texture=U[D],Q.mesh.tint=this._tint,k.push(Q),O[D]=Q}O[D].total++}for(b=0;b<M.length;b++)-1===k.indexOf(M[b])&&this.removeChild(M[b].mesh);for(b=0;b<k.length;b++)k[b].mesh.parent!==this&&this.addChild(k[b].mesh);for(var b in this._activePagesMeshData=k,O){var G=(Q=O[b]).total;if(!((null===(t=Q.indices)||void 0===t?void 0:t.length)>6*G)||Q.vertices.length<2*Pi.BATCHABLE_SIZE)Q.vertices=new Float32Array(8*G),Q.uvs=new Float32Array(8*G),Q.indices=new Uint16Array(6*G);else for(var j=Q.total,H=Q.vertices,z=4*j*2;z<H.length;z++)H[z]=0;Q.mesh.size=6*G}for(b=0;b<P;b++){var W,V=(W=s[b]).position.x+I[W.line]*("justify"===this._align?W.prevSpaces:1);this._roundPixels&&(V=Math.round(V));var X,Y=V*n,q=W.position.y*n,$=O[(X=W.texture).baseTexture.uid],K=X.frame,J=X._uvs,Z=$.index++;$.indices[6*Z+0]=0+4*Z,$.indices[6*Z+1]=1+4*Z,$.indices[6*Z+2]=2+4*Z,$.indices[6*Z+3]=0+4*Z,$.indices[6*Z+4]=2+4*Z,$.indices[6*Z+5]=3+4*Z,$.vertices[8*Z+0]=Y,$.vertices[8*Z+1]=q,$.vertices[8*Z+2]=Y+K.width*n,$.vertices[8*Z+3]=q,$.vertices[8*Z+4]=Y+K.width*n,$.vertices[8*Z+5]=q+K.height*n,$.vertices[8*Z+6]=Y,$.vertices[8*Z+7]=q+K.height*n,$.uvs[8*Z+0]=J.x0,$.uvs[8*Z+1]=J.y0,$.uvs[8*Z+2]=J.x1,$.uvs[8*Z+3]=J.y1,$.uvs[8*Z+4]=J.x2,$.uvs[8*Z+5]=J.y2,$.uvs[8*Z+6]=J.x3,$.uvs[8*Z+7]=J.y3}for(var b in this._textWidth=p*n,this._textHeight=(r.y+e.lineHeight)*n,O){var Q=O[b];if(0!==this.anchor.x||0!==this.anchor.y)for(var tt=0,et=this._textWidth*this.anchor.x,it=this._textHeight*this.anchor.y,nt=0;nt<Q.total;nt++)Q.vertices[tt++]-=et,Q.vertices[tt++]-=it,Q.vertices[tt++]-=et,Q.vertices[tt++]-=it,Q.vertices[tt++]-=et,Q.vertices[tt++]-=it,Q.vertices[tt++]-=et,Q.vertices[tt++]-=it;this._maxLineHeight=y*n;var rt=Q.mesh.geometry.getBuffer("aVertexPosition"),st=Q.mesh.geometry.getBuffer("aTextureCoord"),ot=Q.mesh.geometry.getIndex();rt.data=Q.vertices,st.data=Q.uvs,ot.data=Q.indices,rt.update(),st.update(),ot.update()}for(b=0;b<s.length;b++)Vi.push(s[b]);this._font=e,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var i=Hi.available[this._fontName],n=i.distanceFieldRange,r=i.distanceFieldType,s=i.size;if("none"!==r)for(var o=this.worldTransform,a=o.a,h=o.b,l=o.c,c=o.d,u=Math.sqrt(a*a+h*h),d=Math.sqrt(l*l+c*c),p=(Math.abs(u)+Math.abs(d))/2,f=this.fontSize/s,m=0,g=this._activePagesMeshData;m<g.length;m++){g[m].mesh.shader.uniforms.uFWidth=p*n*f*this._resolution}t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=Hi.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Hi.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return null!==(t=this._fontSize)&&void 0!==t?t:Hi.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var i=this._textureCache,n="none"===Hi.available[this._fontName].distanceFieldType?zi:Wi;n.push.apply(n,this._activePagesMeshData);for(var r=0,s=this._activePagesMeshData;r<s.length;r++){var o=s[r];this.removeChild(o.mesh)}for(var a in this._activePagesMeshData=[],n.filter((function(t){return i[t.mesh.texture.baseTexture.uid]})).forEach((function(t){t.mesh.texture=A.gP.EMPTY})),i){i[a].destroy(),delete i[a]}this._font=null,this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(E.mc),Yi=function(){function t(){}return t.add=function(){J.setExtensionXhrType("fnt",J.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var n=Fi(e.data);if(n)for(var r=t.getBaseUrl(this,e),s=n.parse(e.data),o={},a=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=Hi.install(s,o,!0),i())},h=0;h<s.page.length;++h){var l=s.page[h].file,c=r+l,u=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===c){p.metadata.pageFile=l,p.texture?a(p):p.onAfterMiddleware.add(a),u=!0;break}}if(!u){var f={crossOrigin:e.crossOrigin,loadType:J.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(c,f,a)}}else i()},t.getBaseUrl=function(e,i){var n=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===n&&(n=""),e.baseUrl&&n&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(n+="/")),(n=n.replace(e.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t.extension=A.Ag.Loader,t}(),qi=function(t,e){return qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},qi(t,e)};var $i=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,A.MT,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}qi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(A.dJ),Ki=function(t,e){return Ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Ki(t,e)};function Ji(t,e){function i(){this.constructor=t}Ki(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Zi={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Qi=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var tn=function(t){function e(e,i,n,r,s){void 0===i&&(i=8),void 0===n&&(n=4),void 0===r&&(r=ct.W0.FILTER_RESOLUTION),void 0===s&&(s=5);var o=this,a=function(t,e){var i,n=Math.ceil(t/2),r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=i.replace("%index%",o.toString());s+=a=a.replace("%sampleIndex%",o-(n-1)+".0"),s+="\n"}return(r=r.replace("%blur%",s)).replace("%size%",t.toString())}(s,e),h=function(t){for(var e,i=Zi[t],n=i.length,r=Qi,s="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=n&&(e=t-o-1),s+=a=a.replace("%value%",i[e].toString()),s+="\n"}return(r=r.replace("%blur%",s)).replace("%size%",t.toString())}(s);return(o=t.call(this,a,h)||this).horizontal=e,o.resolution=r,o._quality=0,o.quality=n,o.blur=i,o}return Ji(e,t),e.prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var r=t.getFilterTexture(),s=t.renderer,o=e,a=r;this.state.blend=!1,t.applyFilter(this,o,a,ut.fr.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,ut.fr.BLIT),this.uniforms.uSampler=a;var l=a;a=o,o=l,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,n),t.returnFilterTexture(r)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(A.dJ),en=function(t){function e(e,i,n,r){void 0===e&&(e=8),void 0===i&&(i=4),void 0===n&&(n=ct.W0.FILTER_RESOLUTION),void 0===r&&(r=5);var s=t.call(this)||this;return s.blurXFilter=new tn(!0,e,i,n,r),s.blurYFilter=new tn(!1,e,i,n,r),s.resolution=n,s.quality=i,s.blur=e,s.repeatEdgePixels=!1,s}return Ji(e,t),e.prototype.apply=function(t,e,i,n){var r=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(r&&s){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,ut.fr.CLEAR),this.blurYFilter.apply(t,o,i,n),t.returnFilterTexture(o)}else s?this.blurYFilter.apply(t,e,i,n):this.blurXFilter.apply(t,e,i,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(A.dJ),nn=function(t,e){return nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},nn(t,e)};var rn=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,A.Eo,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}nn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.tint=function(t,e){var i=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,s=(0,Math.sqrt)(r),o=[i+(1-i)*r,r*(1-i)-s*n,r*(1-i)+s*n,0,0,r*(1-i)+s*n,i+r*(1-i),r*(1-i)-s*n,0,0,r*(1-i)-s*n,r*(1-i)+s*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((n=n||3375104)>>16&255)/255,l=(n>>8&255)/255,c=(255&n)/255,u=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,l,c,e=e||.15,0,s-h,o-l,a-c,0,0];this._loadMatrix(u,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(A.dJ);rn.prototype.grayscale=rn.prototype.greyscale;var sn=function(t,e){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},sn(t,e)};var on=function(t){function e(e,i){var n=this,r=new R.uq;return e.renderable=!1,(n=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,n.maskMatrix=r,null==i&&(i=20),n.scale=new R.bR(i,i),n}return function(t,e){function i(){this.constructor=t}sn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.worldTransform,s=Math.sqrt(r.a*r.a+r.b*r.b),o=Math.sqrt(r.c*r.c+r.d*r.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=r.a/s,this.uniforms.rotation[1]=r.b/s,this.uniforms.rotation[2]=r.c/o,this.uniforms.rotation[3]=r.d/o),t.applyFilter(this,e,i,n)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(A.dJ),an=function(t,e){return an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},an(t,e)};var hn=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}an(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(A.dJ),ln=function(t,e){return ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},ln(t,e)};var cn=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var n=t.call(this,A.Eo,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return function(t,e){function i(){this.constructor=t}ln(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(A.dJ),un=new R.uq;E.q9.prototype._cacheAsBitmap=!1,E.q9.prototype._cacheData=null,E.q9.prototype._cacheAsBitmapResolution=null,E.q9.prototype._cacheAsBitmapMultisample=ut.he.NONE;var dn=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(E.q9.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new dn),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),E.q9.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},E.q9.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var i=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var r=this.filters[0].padding;n.pad(r)}n.ceil(ct.W0.RESOLUTION);var s=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,l=A.Y7.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),c="cacheAsBitmap_"+(0,x.uid)();this._cacheData.textureCacheId=c,A.t5.addToCache(l.baseTexture,c),A.gP.addToCache(l,c);var u=this.transform.localTransform.copyTo(un).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=h,t.renderTexture.bind(s,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var d=new He.k(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},E.q9.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},E.q9.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,r=t._projTransform;e.ceil(ct.W0.RESOLUTION);var s=A.Y7.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+(0,x.uid)();this._cacheData.textureCacheId=o,A.t5.addToCache(s.baseTexture,o),A.gP.addToCache(s,o);var a=un;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=n,t._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var h=new He.k(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},E.q9.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},E.q9.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},E.q9.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,A.t5.removeFromCache(this._cacheData.textureCacheId),A.gP.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},E.q9.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},E.q9.prototype.name=null,E.mc.prototype.getChildByName=function(t,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,n=this.children.length;i<n;i++){var r=this.children[i];if(r.getChildByName){var s=r.getChildByName(t,!0);if(s)return s}}return null},E.q9.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new R.bR),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var pn=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{var n=e._resizeTo;t=n.clientWidth,i=n.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=A.Ag.Application,t}(),fn=function(){function t(e){var i=this;this.stage=new E.mc,e=Object.assign({forceCanvas:!1},e),this.renderer=(0,A.q5)(e),t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(t){(0,x.deprecation)("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),A.XO.add({type:A.Ag.Application,ref:t})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var n=this,r=t._plugins.slice(0);r.reverse(),r.forEach((function(t){t.destroy.call(n)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();A.XO.handleByList(A.Ag.Application,fn._plugins),A.XO.add(pn);var mn=function(t,e){return mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},mn(t,e)};function gn(t,e){function i(){this.constructor=t}mn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var _n=function(t){function e(e,i,n,r){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=10),void 0===r&&(r=10);var s=t.call(this)||this;return s.segWidth=n,s.segHeight=r,s.width=e,s.height=i,s.build(),s}return gn(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],n=[],r=this.segWidth-1,s=this.segHeight-1,o=this.width/r,a=this.height/s,h=0;h<t;h++){var l=h%this.segWidth,c=h/this.segWidth|0;e.push(l*o,c*a),i.push(l/r,c/s)}var u=r*s;for(h=0;h<u;h++){var d=h%r,p=h/r|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,g=(p+1)*this.segWidth+d,_=(p+1)*this.segWidth+d+1;n.push(f,m,g,m,_,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Oi),yn=function(t){function e(e,i,n){void 0===e&&(e=200),void 0===n&&(n=0);var r=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return r.points=i,r._width=e,r.textureScale=n,r.build(),r}return gn(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var r=i.data,s=n.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,l=t.length,c=0;c<l;c++){var u=4*c;if(this.textureScale>0){var d=a.x-t[c].x,p=a.y-t[c].y,f=Math.sqrt(d*d+p*p);a=t[c],o+=f/h}else o=c/(l-1);r[u]=o,r[u+1]=0,r[u+2]=o,r[u+3]=1}var m=0;for(c=0;c<l-1;c++){u=2*c;s[m++]=u,s[m++]=u+1,s[m++]=u+2,s[m++]=u+2,s[m++]=u+1,s[m++]=u+3}i.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],n=0,r=0,s=this.buffers[0].data,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;r=-((e=a<t.length-1?t[a+1]:h).x-i.x),n=e.y-i.y;var c=Math.sqrt(n*n+r*r),u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=c,r/=c,n*=u,r*=u,s[l]=h.x+n,s[l+1]=h.y+r,s[l+2]=h.x-n,s[l+3]=h.y-r,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Oi),vn=function(t){function e(e,i,n){void 0===n&&(n=0);var r=this,s=new yn(e.height,i,n),o=new Ri(e);return n>0&&(e.baseTexture.wrapMode=ut.uR.REPEAT),(r=t.call(this,s,o)||this).autoUpdate=!0,r}return gn(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(Pi),bn=function(t){function e(e,i,n){var r=this,s=new _n(e.width,e.height,i,n),o=new Ri(A.gP.WHITE);return(r=t.call(this,s,o)||this).texture=e,r.autoResize=!0,r}return gn(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,i=e.width,n=e.height;!this.autoResize||t.width===i&&t.height===n||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(Pi),wn=function(t){function e(e,i,n,r,s){void 0===e&&(e=A.gP.EMPTY);var o=this,a=new Oi(i,n,r);a.getBuffer("aVertexPosition").static=!1;var h=new Ri(e);return(o=t.call(this,a,h,null,s)||this).autoUpdate=!0,o}return gn(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(Pi),Sn=function(t){function e(e,i,n,r,s){void 0===i&&(i=10),void 0===n&&(n=10),void 0===r&&(r=10),void 0===s&&(s=10);var o=t.call(this,A.gP.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=i,o._rightWidth=r,o._topHeight=n,o._bottomHeight=s,o.texture=e,o}return gn(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,n=this._height>i?1:this._height/i;return Math.min(e,n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(bn),Tn=i(257),xn=function(t,e){return xn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},xn(t,e)};var En=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this,e[0]instanceof A.gP?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return function(t,e){function i(){this.constructor=t}xn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(O.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(O.Rv.shared.add(this.update,this,O.dQ.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(A.gP.from(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(A.gP.from(t[n]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof A.gP)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(O.Rv.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(O.Rv.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(He.k);A.XO.add(P,j,U,ce,pi,A.ch,Ti,Yi,wt,ie,ne,gi,O.y,rt);var An={AlphaFilter:$i,BlurFilter:en,BlurFilterPass:tn,ColorMatrixFilter:rn,DisplacementFilter:on,FXAAFilter:hn,NoiseFilter:cn}},4629:(t,e,i)=>{"use strict";i.r(e),i.d(e,{__addDisposableResource:()=>N,__assign:()=>s,__asyncDelegator:()=>E,__asyncGenerator:()=>x,__asyncValues:()=>A,__await:()=>T,__awaiter:()=>f,__classPrivateFieldGet:()=>k,__classPrivateFieldIn:()=>D,__classPrivateFieldSet:()=>M,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>B,__esDecorate:()=>l,__exportStar:()=>_,__extends:()=>r,__generator:()=>m,__importDefault:()=>O,__importStar:()=>R,__makeTemplateObject:()=>I,__metadata:()=>p,__param:()=>h,__propKey:()=>u,__read:()=>v,__rest:()=>o,__rewriteRelativeImportExtension:()=>F,__runInitializers:()=>c,__setFunctionName:()=>d,__spread:()=>b,__spreadArray:()=>S,__spreadArrays:()=>w,__values:()=>y,default:()=>U});var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},n(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var s=function(){return s=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function o(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}function a(t,e,i,n){var r,s=arguments.length,o=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}function h(t,e){return function(i,n){e(i,n,t)}}function l(t,e,i,n,r,s){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=n.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?n.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d=!1,p=i.length-1;p>=0;p--){var f={};for(var m in n)f[m]="access"===m?{}:n[m];for(var m in n.access)f.access[m]=n.access[m];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(t||null))};var g=(0,i[p])("accessor"===h?{get:u.get,set:u.set}:u[l],f);if("accessor"===h){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=o(g.get))&&(u.get=a),(a=o(g.set))&&(u.set=a),(a=o(g.init))&&r.unshift(a)}else(a=o(g))&&("field"===h?r.unshift(a):u[l]=a)}c&&Object.defineProperty(c,n.name,u),d=!0}function c(t,e,i){for(var n=arguments.length>2,r=0;r<e.length;r++)i=n?e[r].call(t,i):e[r].call(t);return n?i:void 0}function u(t){return"symbol"==typeof t?t:"".concat(t)}function d(t,e,i){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,i,n){return new(i||(i=Promise))((function(r,s){function o(t){try{h(n.next(t))}catch(t){s(t)}}function a(t){try{h(n.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((n=n.apply(t,e||[])).next())}))}function m(t,e){var i,n,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(h){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,h])}}}var g=Object.create?function(t,e,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]};function _(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||g(e,t,i)}function y(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function w(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n}function S(t,e,i){if(i||2===arguments.length)for(var n,r=0,s=e.length;r<s;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}function T(t){return this instanceof T?(this.v=t,this):new T(t)}function x(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=i.apply(t,e||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(t){return function(e){return Promise.resolve(e).then(t,l)}})),n[Symbol.asyncIterator]=function(){return this},n;function o(t,e){r[t]&&(n[t]=function(e){return new Promise((function(i,n){s.push([t,e,i,n])>1||a(t,e)}))},e&&(n[t]=e(n[t])))}function a(t,e){try{(i=r[t](e)).value instanceof T?Promise.resolve(i.value.v).then(h,l):c(s[0][2],i)}catch(t){c(s[0][3],t)}var i}function h(t){a("next",t)}function l(t){a("throw",t)}function c(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function E(t){var e,i;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,r){e[n]=t[n]?function(e){return(i=!i)?{value:T(t[n](e)),done:!1}:r?r(e):e}:r}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=y(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=t[i]&&function(e){return new Promise((function(n,r){(function(t,e,i,n){Promise.resolve(n).then((function(e){t({value:e,done:i})}),e)})(n,r,(e=t[i](e)).done,e.value)}))}}}function I(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var C=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},P=function(t){return P=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},P(t)};function R(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=P(t),n=0;n<i.length;n++)"default"!==i[n]&&g(e,t,i[n]);return C(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function k(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}function M(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i}function D(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}function N(t,e,i){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var n,r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],i&&(r=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");r&&(n=function(){try{r.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:n,async:i})}else i&&t.stack.push({async:!0});return e}var L="function"==typeof SuppressedError?SuppressedError:function(t,e,i){var n=new Error(i);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function B(t){function e(e){t.error=t.hasError?new L(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var i,n=0;return function r(){for(;i=t.stack.pop();)try{if(!i.async&&1===n)return n=0,t.stack.push(i),Promise.resolve().then(r);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(s).then(r,(function(t){return e(t),r()}))}else n|=1}catch(t){e(t)}if(1===n)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function F(t,e){return"string"==typeof t&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(t,i,n,r,s){return i?e?".jsx":".js":!n||r&&s?n+r+"."+s.toLowerCase()+"js":t})):t}const U={__extends:r,__assign:s,__rest:o,__decorate:a,__param:h,__esDecorate:l,__runInitializers:c,__propKey:u,__setFunctionName:d,__metadata:p,__awaiter:f,__generator:m,__createBinding:g,__exportStar:_,__values:y,__read:v,__spread:b,__spreadArrays:w,__spreadArray:S,__await:T,__asyncGenerator:x,__asyncDelegator:E,__asyncValues:A,__makeTemplateObject:I,__importStar:R,__importDefault:O,__classPrivateFieldGet:k,__classPrivateFieldSet:M,__classPrivateFieldIn:D,__addDisposableResource:N,__disposeResources:B,__rewriteRelativeImportExtension:F}}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var s=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>t+".js",n.miniCssF=t=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},n.l=(e,i,r,s)=>{if(t[e])t[e].push(i);else{var o,a;if(void 0!==r)for(var h=document.getElementsByTagName("script"),l=0;l<h.length;l++){var c=h[l];if(c.getAttribute("src")==e){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=e),t[e]=[i];var u=(i,n)=>{o.onerror=o.onload=null,clearTimeout(d);var r=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((t=>t(n))),i)return i(n)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),a&&document.head.appendChild(o)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t={792:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((i,n)=>r=t[e]=[i,n]));i.push(r[2]=s);var o=n.p+n.u(e),a=new Error;n.l(o,(i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var r,s,[o,a,h]=i,l=0;if(o.some((e=>0!==t[e]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(h)h(n)}for(e&&e(i);l<o.length;l++)s=o[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunk=self.webpackChunk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";n(4937);var t=n(4643),e=n(4135),i=n(4639),r=n(7468),s=n(3339),o=n(5603);class a extends t.Action{async execute(t){o.Core.SetPause(t)}}(0,s.decorate)((0,s.injectable)(),a);var h=n(7547),l=n(3795),c=n(9279);class u{static initialized=!1;static showing=!1;static lastRewardedVideoTime=-100;static lastInterstitialTime=-100;static interstitialTimeout=120;static rewardedAd=null;static rewardedAdReady=!0;static rewardedAdRetry=0;static interstitialAd=null;static interstitialAdReady=!0;static interstitialAdRetry=0;static get nextInterstitialTime(){return this.lastInterstitialTime+~~this.interstitialTimeout}static get nextInterstitialDelay(){return this.nextInterstitialTime-h.g.time}static get interstitialPaused(){return this.nextInterstitialDelay>0}static get nextRewardedTimeout(){if(!o.Core.GameData.Config.timeoutBetweenRewardedAds)return 0;let t=h.g.time-this.lastRewardedVideoTime;return Math.max(0,o.Core.GameData.Config.timeoutBetweenRewardedAds-t)}static async showRewardedAd(){let e=!1;try{const i=t.di.get(r.TypesAds.manager);this.showing=!0,o.Core.SetPause(!0),console.log("show rewarded"),e=await i.showRewardAd("427004178938893_487160856256558"),this.lastRewardedVideoTime=h.g.time}catch(t){console.log("ADS: Rewarded error",t)}return o.Core.SetPause(!1),this.showing=!1,this.rewardedAd=null,this.rewardedAdReady=!0,console.log(e),e}static async showInterstitialAd(){let e=!1;if(!c.T.INTER_AD_ALLOWED)return e;try{const i=t.di.get(r.TypesAds.manager);this.showing=!0,o.Core.SetPause(!0),console.log("show interstitial"),e=r.AdResponse.PLAYED===await i.showAd("427004178938893_487160786256565"),this.lastInterstitialTime=h.g.time}catch(t){console.log("ADS: Interstitial error",t),e=!1}return console.error("Interstitial play result:",e),o.Core.SetPause(!1),this.showing=!1,this.interstitialAd=null,this.interstitialAdReady=!0,console.log(e),e}static setInterstitialTimeout(t){this.interstitialTimeout=Math.max(this.interstitialTimeout,~~t)}static Init(){this.initialized||(this.interstitialTimeout=o.Core.GameData.Config.startTimeout,this.onEpochSelected=this.onEpochSelected.bind(this),l.GameManager.on("EpochSelected",this.onEpochSelected),this.initialized=!0)}static onEpochSelected(t){h.g.time>15&&this.TriggerInterstitial()}static async TriggerInterstitial(){if(console.log("TriggerInterstitial"),this.interstitialPaused)return void console.log("ADS: paused for",this.nextInterstitialDelay);if(!o.Core.GameData.Config.interstitialAdsCollectionSize||o.Core.Player.PlanetsSave.collection.length<o.Core.GameData.Config.interstitialAdsCollectionSize)return void console.log("ADS: too early! Small collection.");if(o.Core.Player.NoAds||o.Core.Store.VipActive)return void console.log("ADS: VIP, periodic ads off");console.log("ADS: Periodic ads triggered");let t=await this.showInterstitialAd();this.resetInterstitialTimeout(),t&&o.Core.WaitBefore(.1,(()=>{o.Core.UI.interstitialRewardRandom.Show()}))}static resetInterstitialTimeout(){let t=o.Core.GameData.Config.defaultTimeout,e=o.Core.Player.PlanetsSave.collection.length>0?o.Core.Player.PlanetsSave.collection[o.Core.Player.PlanetsSave.collection.length-1]:1,i=o.Core.GameData.Creatures.Get(e);i&&(t=~~o.Core.GameData.Config.GetTimeoutByCreature(i.creatureRank)),this.interstitialTimeout=t}static async TriggerRewarded(t){if(console.log("TriggerRewarded"),this.nextRewardedTimeout>0)return;let e=await this.showRewardedAd();this.lastRewardedVideoTime=h.g.time,e&&t&&t()}}(0,s.decorate)((0,s.injectable)(),u);var d=n(2494);class p extends t.Action{async fontsPreload(){let t="..";try{t=window.location.href.split("?")[0].split("/").slice(0,-1).join("/")}catch(t){console.log("url parse error:",t)}new FontFace("Rubik",`url(${t}/assets/fonts/Rubik-Bold.ttf)`).load().then((function(t){document.fonts.add(t),document.body.style.fontFamily='"Rubik"'})).catch((function(t){console.log("Error loading font:",t)}))}async preloadAndShareCodeAndLibs(){await n.e(437).then(n.bind(n,9437));const{Application:t}=await Promise.all([n.e(368),n.e(375)]).then(n.bind(n,7375)),{Core:e}=await Promise.resolve().then(n.bind(n,5603)),{GameManager:i}=await Promise.resolve().then(n.bind(n,3795)),{gsap:r}=await Promise.resolve().then(n.bind(n,1527)),{PixiPlugin:s}=await n.e(747).then(n.bind(n,6747));r.registerPlugin(s),d.utils.skipHello();let o=t.create();window.PIXI=d,window.app=o,window.Core=e,window.GameManager=i,window.gsap=r,window.appPIXI=o}async execute(){await this.preloadAndShareCodeAndLibs(),await this.fontsPreload(),await this.preloadGameAssets()}async preloadGameAssets(){console.log("Loading resources"),await app.load(),console.log("Application resources loaded")}}(0,s.decorate)((0,s.injectable)(),p);var f=n(9677);class m extends t.Action{async execute(){await f.g.Load(),window.addEventListener("unload",(function(){const e=t.di.get(r.TypesSocial.cookie),i=o.Core.Player.toJSON();e.save("homo-evolution-player-data",i),e.write()})),window.appPIXI.run(),console.log("Application is running")}}(0,s.decorate)((0,s.injectable)(),m);var g=n(3271);const _=new s.ContainerModule((()=>{t.di.bind(r.TypesFlow.assetsPreload).to(p),t.di.bind(r.TypesFlow.mainAction).to(m),t.di.bind("AudioManager").to(g.A).inSingletonScope()}));t.di.load(e.GameModuleBase);class y extends i.SocialModelBase{async startGameAsync(){return bridge.platform.sendMessage(bridge.PLATFORM_MESSAGE.GAME_READY),super.startGameAsync()}}class v extends i.UserDataBase{async write(t){const e=[],i=[];this.cache.forEach(((n,r)=>{t&&!t.includes(r)||(e.push(r),i.push("object"==typeof n?JSON.stringify(n):n))})),bridge.storage.isSupported&&bridge.storage.isAvailable&&await bridge.storage.set(e,i)}async read(t){if(t?.length>0&&bridge.storage.isSupported&&bridge.storage.isAvailable){let e=await bridge.storage.get(t);e&&t.forEach(((t,i)=>{let n=e[i];if("string"==typeof n)try{n=JSON.parse(n)}catch(t){}this.cache.set(t,n)})),this.lastSync=Date.now()}}async erase(t){return this.cache.set(t,null),this.canWrite()?this.internalWrite():(clearTimeout(this._uploadTimeout),this._uploadTimeout=setTimeout((()=>this.write()),i.UserDataBase.DEFAULT_UPLOAD_DELAY)),!0}}class b extends i.PaymentsModelBase{}class w extends t.EventDispatcher{}class S extends i.AdManagerBase{showAd(){return new Promise((t=>{bridge.advertisement.on(bridge.EVENT_NAME.INTERSTITIAL_STATE_CHANGED,(e=>{e!==bridge.INTERSTITIAL_STATE.FAILED&&e!==bridge.INTERSTITIAL_STATE.CLOSED||(bridge.advertisement.off(bridge.EVENT_NAME.INTERSTITIAL_STATE_CHANGED),t(e===bridge.INTERSTITIAL_STATE.CLOSED?r.AdResponse.PLAYED:r.AdResponse.FAILED))})),bridge.advertisement.showInterstitial()}))}showRewardAd(){return new Promise((t=>{bridge.advertisement.on(bridge.EVENT_NAME.REWARDED_STATE_CHANGED,(e=>{e!==bridge.REWARDED_STATE.FAILED&&e!==bridge.REWARDED_STATE.CLOSED||(bridge.advertisement.off(bridge.EVENT_NAME.REWARDED_STATE_CHANGED),t(e===bridge.REWARDED_STATE.CLOSED?r.AdResponse.PLAYED:r.AdResponse.FAILED))})),bridge.advertisement.showRewarded()}))}}t.di.bind(r.TypesSocial.model).to(y).inSingletonScope(),t.di.bind(r.TypesSocial.cookie).to(v).inSingletonScope(),t.di.bind(r.TypesSocial.payments).to(b),t.di.bind(r.TypesSocial.dummyUser).to(w),t.di.bind(r.TypesAds.manager).to(S),t.di.load(_),t.di.isBound(r.TypesSocial.pauseAction)?t.di.rebind(r.TypesSocial.pauseAction).to(a):t.di.bind(r.TypesSocial.pauseAction).to(a),t.di.bind("AdsProviderCommon").toConstantValue(u),(0,e.startGame)()})()})();
//# sourceMappingURL=main.js.map