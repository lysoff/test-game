(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",o={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return o.originalListener=t,a(r,e).push(o),r;function o(){i.call(r,e,o),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,o=a(r,e,!0);if(!o)return!1;var n=arguments.length;if(1===n)o.forEach((function(e){e.call(r)}));else if(2===n)o.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);o.forEach((function(e){e.apply(r,i)}))}return!!o.length}};function n(e){for(var t in o)e[t]=o[t];return e}function i(e,t){var o,n=this;if(arguments.length){if(t){if(o=a(n,e,!0)){if(!(o=o.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(n,e);n[r][e]=o}}else if((o=n[r])&&(delete o[e],!Object.keys(o).length))return i.call(n)}else delete n[r];return n}function a(e,t,o){if(!o||e[r]){var n=e[r]||(e[r]={});return n[t]||(n[t]=[])}}n(t.prototype),t.mixin=n}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",WORTAL:"wortal",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARD:"leaderboard",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements"},o={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed"},n={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},u={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},c={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},l={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},f={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",SET_LEADERBOARD_SCORE:"set_leaderboard_score",GET_LEADERBOARD_SCORE:"get_leaderboard_score",GET_LEADERBOARD_ENTRIES:"get_leaderboard_entries",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SHOW_LEADERBOARD_NATIVE_POPUP:"show_leaderboard_native_popup",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect"},p={message:"Before using the SDK you must initialize it"},d={message:"Storage not supported"},y={message:"Storage not available"},h={message:"GameDistribution Game ID is undefined"},m={message:"Y8 Game params are not found"},v={message:"OK Game params are not found"},_={message:"Lagged Game params are not found"},g={message:"Message is too long"};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function b(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:String(t)}function E(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function P(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,w(e,t,"set"),r),r}function A(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,w(e,t,"get"))}function w(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var O=new WeakMap,k=new WeakMap,D=new WeakMap;const R=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,O,{writable:!0,value:void 0}),E(this,k,{writable:!0,value:void 0}),E(this,D,{writable:!0,value:void 0}),P(this,O,new Promise((function(e,r){P(t,k,e),P(t,D,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return A(this,O)}},{key:"resolve",value:function(e){A(this,k).call(this,e)}},{key:"reject",value:function(e){A(this,D).call(this,e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function I(e){var t=function(e){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:String(t)}const L=function(){function e(t){var r,o,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=void 0,(o=I(o="_platformBridge"))in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,this._platformBridge=t}var t,r;return t=e,(r=[{key:"initialize",value:function(){return Promise.resolve()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,I(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function N(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:String(t)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function F(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var G=new WeakMap;const H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(o);if(n){var r=M(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(this,e)});function a(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return o={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=B(e=i.call.apply(i,[this].concat(s))),r=G),r.set(t,o),e}return t=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"sendMessage",value:function(e){if(e===l.GAME_READY){if(function(e,t){return t.get?t.get.call(e):t.value}(this,F(this,G,"get")))return Promise.reject();!function(e,t){!function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,F(e,t,"set"),!0)}(this,G)}return this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,N(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function U(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:String(t)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}const V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(o);if(n){var r=x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,U(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);var Y=r(258),Z=r.n(Y);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function J(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:String(t)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(s,e);var t,r,n,i,a=(n=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(n);if(i){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e))._platformBridge.on(o.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(o.VISIBILITY_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,J(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(L);Z().mixin(X.prototype);const Q=X;function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e){var t=function(e){if("object"!=ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:String(t)}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}const ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(o);if(n){var r=oe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var o=t[this._platformBridge.platformId];if(o)return this.get(e,o,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.getDataFromStorage(e,n,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var o=r[this._platformBridge.platformId];if(o)return this.set(e,t,o)}var n=r;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.setDataToStorage(e,t,n):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.deleteDataFromStorage(e,o):Promise.reject()}}],r&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,te(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e){var t=function(e){if("object"!=ie(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ie(t)?t:String(t)}function se(e,t){ce(e,t),t.add(e)}function ue(e,t,r){ce(e,t),t.set(e,r)}function ce(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function le(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function fe(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,de(e,t,"set"),r),r}function pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,de(e,t,"get"))}function de(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ye="created",he="completed",me=new WeakMap,ve=new WeakMap,_e=new WeakMap,ge=new WeakMap,Se=new WeakSet,be=new WeakSet,Ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se(this,be),se(this,Se),ue(this,me,{writable:!0,value:0}),ue(this,ve,{writable:!0,value:0}),ue(this,_e,{writable:!0,value:ye}),ue(this,ge,{writable:!0,value:0}),fe(this,me,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return pe(this,_e)}},{key:"start",value:function(){var e=this;pe(this,_e)!==ye&&pe(this,_e)!==he||(fe(this,ve,pe(this,me)),le(this,Se,Pe).call(this,"started"),fe(this,ge,setInterval((function(){fe(e,ve,pe(e,ve)-1),e.emit("time_left_changed",pe(e,ve)),pe(e,ve)<=0&&(le(e,be,Ae).call(e),le(e,Se,Pe).call(e,he))}),1e3)))}},{key:"stop",value:function(){le(this,be,Ae).call(this),le(this,Se,Pe).call(this,"stopped")}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ae(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pe(e){fe(this,_e,e),this.emit("state_changed",pe(this,_e))}function Ae(){fe(this,ve,0),clearInterval(pe(this,ge))}Z().mixin(Ee.prototype);const we=Ee;function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function ke(e){var t=function(e){if("object"!=Oe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:String(t)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ie(e,t){je(e,t),t.add(e)}function Le(e,t,r){je(e,t),t.set(e,r)}function je(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ne(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Me(e,t,"set"),r),r}function Ce(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Be(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Me(e,t,"get"))}function Me(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Fe=new WeakMap,Ge=new WeakMap,He=new WeakSet,ze=new WeakSet,Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(l,e);var t,r,n,u,c=(n=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(n);if(u){var r=Te(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Re(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ie(Re(t=c.call(this,e)),ze),Ie(Re(t),He),Le(Re(t),Fe,{writable:!0,value:void 0}),Le(Re(t),Ge,{writable:!0,value:60}),t._platformBridge.on(o.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&Be(Re(t),Ge)>0&&Ce(Re(t),He,We).call(Re(t)),t.emit(o.INTERSTITIAL_STATE_CHANGED,e)})),t._platformBridge.on(o.REWARDED_STATE_CHANGED,(function(e){return t.emit(o.REWARDED_STATE_CHANGED,e)})),t._platformBridge.on(o.BANNER_STATE_CHANGED,(function(e){return t.emit(o.BANNER_STATE_CHANGED,e)})),t}return t=l,(r=[{key:"isBannerSupported",get:function(){return this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return this._platformBridge.bannerState}},{key:"interstitialState",get:function(){return this._platformBridge.interstitialState}},{key:"rewardedState",get:function(){return this._platformBridge.rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return Be(this,Ge)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(void 0!==t)return void this.setMinimumDelayBetweenInterstitial(t)}var r=Oe(e),o=Be(this,Ge);switch(r){case"number":o=e;break;case"string":if(o=parseInt(e,10),Number.isNaN(o))return;break;default:return}Ne(this,Ge,o),Be(this,Fe)&&(Be(this,Fe).stop(),Ce(this,He,We).call(this))}},{key:"showBanner",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showBanner(t)}this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN&&(this._platformBridge._setBannerState(s.LOADING),this.isBannerSupported?this._platformBridge.showBanner(e):this._platformBridge._setBannerState(s.FAILED))}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"showInterstitial",value:function(e){if(!Ce(this,ze,xe).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showInterstitial(t)}var r=!1;e&&"boolean"==typeof e.ignoreDelay&&(r=e.ignoreDelay),this._platformBridge._setInterstitialState(i.LOADING),!Be(this,Fe)||Be(this,Fe).state===he||r?this._platformBridge.showInterstitial(e):this._platformBridge._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(e){if(!Ce(this,ze,xe).call(this)){if(e){var t=e[this._platformBridge.platformId];if(t)return void this.showRewarded(t)}this._platformBridge._setRewardedState(a.LOADING),this._platformBridge.showRewarded(e)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ke(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(L);function We(){Ne(this,Fe,new we(Be(this,Ge))),Be(this,Fe).start()}function xe(){return this.interstitialState===i.LOADING||this.interstitialState===i.OPENED||!![a.LOADING,a.OPENED,a.REWARDED].includes(this.rewardedState)}Z().mixin(Ue.prototype);const Ve=Ue;function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Ze(e){var t=function(e){if("object"!=Ye(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ye(t)?t:String(t)}function Ke(e,t){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ke(e,t)}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}const qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Je(o);if(n){var r=Je(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ze(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Xe(e){var t=function(e){if("object"!=$e(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$e(t)?t:String(t)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}const tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(o);if(n){var r=et(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Xe(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e){var t=function(e){if("object"!=rt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:String(t)}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nt(e,t)}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}const at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=it(o);if(n){var r=it(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:"isMultipleBoardsSupported",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:"isSetScoreSupported",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:"isGetScoreSupported",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:"isGetEntriesSupported",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:"setScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setScore(t)}return this._platformBridge.setLeaderboardScore(e)}},{key:"getScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getScore(t)}return this._platformBridge.getLeaderboardScore(e)}},{key:"getEntries",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getEntries(t)}return this._platformBridge.getLeaderboardEntries(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showLeaderboardNativePopup(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ot(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(e){var t=function(e){if("object"!=st(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==st(t)?t:String(t)}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ct(e,t)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}const ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lt(o);if(n){var r=lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"isGetCatalogSupported",get:function(){return this._platformBridge.isGetCatalogSupported}},{key:"isGetPurchasesSupported",get:function(){return this._platformBridge.isGetPurchasesSupported}},{key:"isConsumePurchaseSupported",get:function(){return this._platformBridge.isConsumePurchaseSupported}},{key:"purchase",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.purchase(t)}return this._platformBridge.purchase(e)}},{key:"getPurchases",value:function(){return this._platformBridge.getPaymentsPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.getPaymentsCatalog()}},{key:"consumePurchase",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.consumePurchase(t)}return this._platformBridge.consumePurchase(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ut(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function dt(e){var t=function(e){if("object"!=pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:String(t)}function yt(e,t){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yt(e,t)}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}const mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ht(o);if(n){var r=ht(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,dt(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function _t(e){var t=function(e){if("object"!=vt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vt(t)?t:String(t)}function gt(e,t){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gt(e,t)}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}const bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gt(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=St(o);if(n){var r=St(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_t(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Pt(e){var t=function(e){if("object"!=Et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Et(t)?t:String(t)}function At(e,t){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},At(e,t)}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}const Ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wt(o);if(n){var r=wt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Pt(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(L);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Rt(e,t,r){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){var t=function(e){if("object"!=kt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==kt(t)?t:String(t)}function It(e,t){var r=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Lt=new WeakMap,jt=function(){function t(e){var r,i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rt(this,"_isInitialized",!1),Rt(this,"_platformSdk",null),Rt(this,"_isPlayerAuthorized",!1),Rt(this,"_playerId",null),Rt(this,"_playerName",null),Rt(this,"_playerPhotos",[]),Rt(this,"_visibilityState",null),Rt(this,"_localStorage",null),Rt(this,"_defaultStorageType",u.LOCAL_STORAGE),Rt(this,"_platformStorageCachedData",null),Rt(this,"_isBannerSupported",!1),Rt(this,"_interstitialState",null),Rt(this,"_rewardedState",null),Rt(this,"_bannerState",null),i={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(this,r=Lt),r.set(this,i);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState="visible"===document.visibilityState?n.VISIBLE:n.HIDDEN,document.addEventListener("visibilitychange",(function(){a._visibilityState="visible"===document.visibilityState?n.VISIBLE:n.HIDDEN,a.emit(o.VISIBILITY_STATE_CHANGED,a._visibilityState)})),e&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){Rt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}var r,l;return r=t,(l=[{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"bannerState",get:function(){return this._bannerState}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return c.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return c.TABLET}return c.DESKTOP}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!1}},{key:"isLeaderboardSetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!1}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"isGetCatalogSupported",get:function(){return!1}},{key:"isGetPurchasesSupported",get:function(){return!1}},{key:"isConsumePurchaseSupported",get:function(){return!1}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.unixtime)})).catch((function(){t()}))}))}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){return e===u.LOCAL_STORAGE&&null!==this._localStorage}},{key:"isStorageAvailable",value:function(e){return e===u.LOCAL_STORAGE&&null!==this._localStorage}},{key:"getDataFromStorage",value:function(e,t,r){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var o=[],n=0;n<e.length;n++)o.push(this._getDataFromLocalStorage(e[n],r));return Promise.resolve(o)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(d)}return Promise.reject(d)}},{key:"setDataToStorage",value:function(e,t,r){if(r===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this._setDataToLocalStorage(e[o],t[o]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(d)}return Promise.reject(d)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===u.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(d)}return Promise.reject(d)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,o=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(o),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"setLeaderboardScore",value:function(){return Promise.reject()}},{key:"getLeaderboardScore",value:function(){return Promise.reject()}},{key:"getLeaderboardEntries",value:function(){return Promise.reject()}},{key:"showLeaderboardNativePopup",value:function(){return Promise.reject()}},{key:"purchase",value:function(){return Promise.reject()}},{key:"getPaymentsPurchases",value:function(){return Promise.reject()}},{key:"getPaymentsCatalog",value:function(){return Promise.reject()}},{key:"consumePurchase",value:function(){return Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===kt(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setInterstitialState",value:function(e){this._interstitialState===e&&e!==i.FAILED||(this._interstitialState=e,this.emit(o.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:"_setRewardedState",value:function(e){this._rewardedState===e&&e!==a.FAILED||(this._rewardedState=e,this.emit(o.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:"_setBannerState",value:function(e){this._bannerState===e&&e!==s.FAILED||(this._bannerState=e,this.emit(o.BANNER_STATE_CHANGED,this._bannerState))}},{key:"_createPromiseDecorator",value:function(e){var t=new R;return It(this,Lt)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return It(this,Lt)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){It(this,Lt)[e]&&(It(this,Lt)[e].resolve(t),delete It(this,Lt)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){It(this,Lt)[e]&&(It(this,Lt)[e].reject(t),delete It(this,Lt)[e])}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Tt(o.key),o)}}(r.prototype,l),Object.defineProperty(r,"prototype",{writable:!1}),t}();Z().mixin(jt.prototype);const Nt=jt;var Ct=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))},Bt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var o=window,n=0;n<t.length;n++){var i=o[t[n]];if(!i)return;o=i}e(),clearInterval(r)}),100)}))};function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Ft(e){var t=function(e){if("object"!=Mt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mt(t)?t:String(t)}function Gt(){return Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ut(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Gt.apply(this,arguments)}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Wt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Vt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Yt(e,t,"get"))}function Yt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Zt=new WeakMap,Kt=new WeakSet;function Jt(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,o).then((function(t){t[n]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const qt=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}(d,t);var r,o,n,l,p=(n=d,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ut(n);if(l){var r=Ut(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}(this,e)});function d(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return Wt(t=zt(e=p.call.apply(p,[this].concat(n))),r=Kt),r.add(t),function(e,t){Wt(e,t),t.set(e,{writable:!0,value:void 0})}(zt(e),Zt),e}return r=d,(o=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Gt(Ut(d.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):Gt(Ut(d.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){switch(Vt(this,Zt)){case"html5_ios":case"html5_android":case"html5_mobile":return c.MOBILE;case"web":return c.DESKTOP;default:return Gt(Ut(d.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===Vt(this,Zt)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return this.deviceType===c.MOBILE}},{key:"isLeaderboardNativePopupSupported",get:function(){return this.deviceType===c.MOBILE}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,o=this._getPromiseDecorator(f.INITIALIZE);if(!o){o=this._createPromiseDecorator(f.INITIALIZE);var n=new URL(window.location.href);n.searchParams.has("platform")&&(t=Zt,r=n.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(this,Yt(this,t,"set"),r)),Ct("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){Bt("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._isBannerSupported=!0,e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Gt(Ut(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Gt(Ut(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var i=Array.isArray(e)?e:[e];o._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(o){if(Array.isArray(e)){var n=[];return i.forEach((function(e){var t=o.keys.findIndex((function(t){return t.key===e}));if(t<0)n.push(null);else if(""!==o.keys[t].value){var i=o.keys[t].value;if(r)try{i=JSON.parse(o.keys[t].value)}catch(e){}n.push(i)}else n.push(null)})),void t(n)}if(""!==o.keys[0].value){var a=o.keys[0].value;if(r)try{a=JSON.parse(o.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?n(e.error_data.error_reason):n()}))})):Gt(Ut(d.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;if(r===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),n.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(n)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){o._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return Gt(Ut(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===u.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++)r.push(this.setDataToStorage(e[o],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return Gt(Ut(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r="bottom",o="resize",n=!1;e&&("string"==typeof e.position&&(r=e.position),"string"==typeof e.layoutType&&(o=e.layoutType),"boolean"==typeof e.canClose&&(n=e.canClose)),this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:r,layout_type:o,can_close:n}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return xt(this,Kt,Jt).call(this,f.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():xt(this,Kt,Jt).call(this,f.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),xt(this,Kt,Jt).call(this,f.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?xt(this,Kt,Jt).call(this,f.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return xt(this,Kt,Jt).call(this,f.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return"boolean"==typeof e.global&&(t.global=e.global?1:0),xt(this,Kt,Jt).call(this,f.SHOW_LEADERBOARD_NATIVE_POPUP,"VKWebAppShowLeaderBoardBox",t)}},{key:"clipboardWrite",value:function(e){return xt(this,Kt,Jt).call(this,f.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ft(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),d}(Nt);function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){var o,n,i;o=e,n=t,i=r[t],(n=er(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e){var t=function(e){if("object"!=$t(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$t(t)?t:String(t)}function tr(){return tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nr(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},tr.apply(this,arguments)}function rr(e,t){return rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rr(e,t)}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function ir(e,t,r){ar(e,t),t.set(e,r)}function ar(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,lr(e,t,"set"),r),r}function ur(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function cr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,lr(e,t,"get"))}function lr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var fr=new WeakMap,pr=new WeakMap,dr=new WeakMap,yr=new WeakMap,hr=new WeakSet;function mr(e){var t=this;return new Promise((function(r){var o={scopes:!1};e&&"boolean"==typeof e.scopes&&(o.scopes=e.scopes),t._platformSdk.getPlayer(o).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized="lite"!==e.getMode(),t._defaultStorageType=t._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE;var r=e.getName();""!==r&&(t._playerName=r),t._playerPhotos=[];var o=e.getPhoto("small"),n=e.getPhoto("medium"),i=e.getPhoto("large");return o&&t._playerPhotos.push(o),n&&t._playerPhotos.push(n),i&&t._playerPhotos.push(i),sr(t,pr,e),e.getData()})).then((function(e){t._platformStorageCachedData=e})).finally((function(){r()}))}))}const vr=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rr(e,t)}(y,t);var r,o,n,p,d=(n=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nr(n);if(p){var r=nr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return or(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return ar(t=or(e=d.call.apply(d,[this].concat(n))),r=hr),r.add(t),ir(or(e),fr,{writable:!0,value:!1}),ir(or(e),pr,{writable:!0,value:null}),ir(or(e),dr,{writable:!0,value:null}),ir(or(e),yr,{writable:!0,value:null}),e}return r=y,(o=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():tr(nr(y.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():tr(nr(y.prototype),"platformTld",this)}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case c.DESKTOP:return c.DESKTOP;case c.MOBILE:return c.MOBILE;case c.TABLET:return c.TABLET;case c.TV:return c.TV;default:return tr(nr(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return cr(this,fr)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isGetCatalogSupported",get:function(){return!0}},{key:"isGetPurchasesSupported",get:function(){return!0}},{key:"isConsumePurchaseSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("/sdk.js").then((function(){Bt("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t;var o=ur(e,hr,mr).call(e),n=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.20.0"}),i=e._platformSdk.shortcut.canShowPrompt().then((function(t){sr(e,fr,t.canShow)})),a=new Promise((function(e){setTimeout(e,1e3)})),u=Promise.race([i,a]),c=e._platformSdk.getLeaderboards().then((function(t){sr(e,dr,t)})),l=e._platformSdk.getPayments().then((function(t){sr(e,yr,t)}));e._isBannerSupported=!0;var p=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([o,n,u,c,l,p]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case l.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case l.GAMEPLAY_STOPPED:var o;return null===(o=this._platformSdk.features.GameplayAPI)||void 0===o||o.stop(),Promise.resolve();default:return tr(nr(y.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._isPlayerAuthorized?ur(this,hr,mr).call(this,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)})):this._platformSdk.auth.openAuthDialog().then((function(){ur(t,hr,mr).call(t,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||tr(nr(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:tr(nr(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(t){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++){var i=void 0===o._platformStorageCachedData[e[n]]?null:o._platformStorageCachedData[e[n]];r.push(i)}t(r)}else t(void 0===o._platformStorageCachedData[e]?null:o._platformStorageCachedData[e])})):Promise.reject():tr(nr(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(r,n){var i=null!==o._platformStorageCachedData?Qt({},o._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;cr(o,pr).setData(i).then((function(){o._platformStorageCachedData=i,r()})).catch((function(e){n(e)}))})):Promise.reject():tr(nr(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?this._isPlayerAuthorized?new Promise((function(t,o){var n=null!==r._platformStorageCachedData?Qt({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete n[e[i]];else delete n[e];cr(r,pr).setData(n).then((function(){r._platformStorageCachedData=n,t()})).catch((function(e){o(e)}))})):Promise.reject():tr(nr(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(f.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(f.RATE);return t||(t=this._createPromiseDecorator(f.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(f.RATE):e._rejectPromiseDecorator(f.RATE)})).catch((function(t){e._rejectPromiseDecorator(f.RATE,t)})):e._rejectPromiseDecorator(f.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(f.RATE,t)}))),t.promise}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(cr(this,dr)&&e&&e.score&&e.leaderboardName))return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),cr(this,dr).setLeaderboardScore(e.leaderboardName,"string"==typeof e.score?parseInt(e.score,10):e.score).then((function(){t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)})).catch((function(e){t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!cr(this,dr)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),cr(this,dr).getLeaderboardPlayerEntry(e.leaderboardName).then((function(e){t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,e.score)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!cr(this,dr)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!r){r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var o={};o.includeUser="boolean"==typeof e.includeUser&&e.includeUser,o.quantityAround="string"==typeof e.quantityAround?parseInt(e.quantityAround,10):e.quantityAround,Number.isNaN(o.quantityAround)&&(o.quantityAround=5),o.quantityTop="string"==typeof e.quantityTop?parseInt(e.quantityTop,10):e.quantityTop,Number.isNaN(o.quantityTop)&&(o.quantityTop=5),cr(this,dr).getLeaderboardEntries(e.leaderboardName,o).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){return{id:e.player.uniqueID,score:e.score,rank:e.rank,name:e.player.publicName,photo:e.player.getAvatarSrc("large")}}))),t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,e)}))}return r.promise}},{key:"purchase",value:function(e){var t=this;if(!cr(this,yr)||!e.id)return Promise.reject();var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),cr(this,yr).purchase(e).then((function(e){t._resolvePromiseDecorator(f.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.PURCHASE,e)}))),r.promise}},{key:"getPaymentsPurchases",value:function(){var e=this;if(!cr(this,yr))return Promise.reject();var t=this._getPromiseDecorator(f.GET_PURCHASES);return t||(t=this._createPromiseDecorator(f.GET_PURCHASES),cr(this,yr).getPurchases().then((function(t){var r=t.map((function(e){return{developerPayload:e.developerPayload,productID:e.productID,purchaseToken:e.purchaseToken}}));e._resolvePromiseDecorator(f.GET_PURCHASES,r)})).catch((function(t){e._rejectPromiseDecorator(f.GET_PURCHASES,t)}))),t.promise}},{key:"getPaymentsCatalog",value:function(){var e=this;if(!cr(this,yr))return Promise.reject();var t=this._getPromiseDecorator(f.GET_CATALOG);return t||(t=this._createPromiseDecorator(f.GET_CATALOG),cr(this,yr).getCatalog().then((function(t){var r=t.map((function(e){return{id:e.id,description:e.description,imageURI:e.imageURI,price:e.price,priceCurrencyCode:e.priceCurrencyCode,priceValue:e.priceValue,priceCurrencyImage:e.getPriceCurrencyImage("medium"),title:e.title}}));e._resolvePromiseDecorator(f.GET_CATALOG,r)})).catch((function(t){e._rejectPromiseDecorator(f.GET_CATALOG,t)}))),t.promise}},{key:"consumePurchase",value:function(e){var t=this;if(!cr(this,yr)||!e.purchaseToken)return Promise.reject();var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),cr(this,yr).consumePurchase(e.purchaseToken).then((function(e){t._resolvePromiseDecorator(f.CONSUME_PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)}))),r.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var o=this._getPromiseDecorator(f.GET_REMOTE_CONFIG);return o||(o=this._createPromiseDecorator(f.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(f.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(f.GET_REMOTE_CONFIG,e)}))),o.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(f.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(f.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(f.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(f.CLIPBOARD_WRITE,e)}))),r.promise}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,er(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),y}(Nt);class _r extends Error{}function gr(e){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(e)}function Sr(e){var t=function(e){if("object"!=gr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gr(t)?t:String(t)}function br(){return br="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ar(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},br.apply(this,arguments)}function Er(e,t){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Er(e,t)}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}function wr(e,t,r){Or(e,t),t.set(e,r)}function Or(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Dr(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Tr(e,t,"set"),r),r}function Rr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Tr(e,t,"get"))}function Tr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}_r.prototype.name="InvalidTokenError";var Ir="banner-container",Lr=new WeakMap,jr=new WeakMap,Nr=new WeakMap,Cr=new WeakSet;function Br(){var e=this;return Rr(this,jr)?new Promise((function(t,r){e._platformSdk.user.getUserToken().then((function(r){var o=function(e,t){if("string"!=typeof e)throw new _r("Invalid token specified: must be a string");t||(t={});const r=!0===t.header?0:1,o=e.split(".")[r];if("string"!=typeof o)throw new _r(`Invalid token specified: missing part #${r+1}`);let n;try{n=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return atob(t)}}(o)}catch(e){throw new _r(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(n)}catch(e){throw new _r(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}(r);e._isPlayerAuthorized=!0,e._defaultStorageType=u.PLATFORM_INTERNAL,o.userId&&(e._playerId=o.userId),o.username&&(e._playerName=o.username),o.profilePictureUrl&&(e._playerPhotos=[o.profilePictureUrl]),t()})).catch((function(e){r(e)}))})):Promise.reject()}const Mr=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Er(e,t)}(y,t);var r,o,n,p,d=(n=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ar(n);if(p){var r=Ar(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pr(e)}(this,e)});function y(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return Or(t=Pr(e=d.call.apply(d,[this].concat(n))),r=Cr),r.add(t),wr(Pr(e),Lr,{writable:!0,value:!1}),wr(Pr(e),jr,{writable:!0,value:!1}),wr(Pr(e),Nr,{writable:!0,value:{adStarted:function(){Rr(Pr(e),Lr)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){Rr(Pr(e),Lr)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){Rr(Pr(e),Lr)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=y,(o=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Rr(this,jr)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():br(Ar(y.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return Rr(this,jr)}},{key:"deviceType",get:function(){if(Rr(this,jr)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([c.DESKTOP,c.MOBILE,c.TABLET].includes(e))return e}return br(Ar(y.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){Bt("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=u.LOCAL_STORAGE,e._isBannerSupported=!0,e._platformSdk.init().then((function(){Dr(e,jr,e._platformSdk.user.isUserAccountAvailable);var t=kr(e,Cr,Br).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!Rr(this,jr))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){kr(e,Cr,Br).call(e).then((function(){e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case l.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case l.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return br(Ar(y.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||br(Ar(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||br(Ar(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var n=[];return e.forEach((function(e){var t=o._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}n.push(t)})),void t(n)}var i=o._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):br(Ar(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var n=0;n<e.length;n++){var i=t[n];"string"!=typeof t[n]&&(i=JSON.stringify(t[n])),o._platformSdk.data.setItem(e[n],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),o._platformSdk.data.setItem(e,a),r()}})):br(Ar(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):br(Ar(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(Ir);r||((r=document.createElement("div")).id=Ir,r.style.position="absolute",document.body.appendChild(r)),"top"===(null==e?void 0:e.position)?(r.style.top=0,r.style.height="90px",r.style.width="100%"):"left"===(null==e?void 0:e.position)?(r.style.left=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):"right"===(null==e?void 0:e.position)?(r.style.right=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):(r.style.bottom=0,r.style.height="90px",r.style.width="100%"),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([Ir]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=document.getElementById(Ir);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){Dr(this,Lr,!1),this._platformSdk.ad.requestAd("midgame",Rr(this,Nr))}},{key:"showRewarded",value:function(){Dr(this,Lr,!0),this._platformSdk.ad.requestAd("rewarded",Rr(this,Nr))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Sr(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),y}(Nt);function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(r),!0).forEach((function(t){var o,n,i;o=e,n=t,i=r[t],(n=zr(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zr(e){var t=function(e){if("object"!=Fr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fr(t)?t:String(t)}function Ur(){return Ur="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vr(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Ur.apply(this,arguments)}function Wr(e,t){return Wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Wr(e,t)}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vr(e)}var Yr=new WeakSet;function Zr(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var o=r[0];e._playerName=o.full_name,""!==o.avatar&&(e._playerPhotos=[o.avatar])}t()}))}))}const Kr=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wr(e,t)}(l,t);var r,o,n,s,c=(n=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vr(n);if(s){var r=Vr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xr(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=xr(e=c.call.apply(c,[this].concat(n))),r=Yr),r.add(t),e}return r=l,(o=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Yr,Zr).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,e._resolvePromiseDecorator(f.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Ur(Vr(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ur(Vr(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,r){if(o._platformStorageCachedData){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a=void 0===o._platformStorageCachedData[e[i]]?null:o._platformStorageCachedData[e[i]];n.push(a)}return void t(n)}t(void 0===o._platformStorageCachedData[e]?null:o._platformStorageCachedData[e])}else o._isPlayerAuthorized?o._platformSdk.getSaveData((function(n,i){if(null===i){if(o._platformStorageCachedData=n||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=void 0===o._platformStorageCachedData[e[s]]?null:o._platformStorageCachedData[e[s]];a.push(u)}return void t(a)}t(void 0===o._platformStorageCachedData[e]?null:o._platformStorageCachedData[e])}else r(i)})):r()})):Ur(Vr(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,n){if(o._isPlayerAuthorized){var i=null!==o._platformStorageCachedData?Hr({},o._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;o._platformSdk.setSaveData(i,(function(e,t){null===t&&(o._platformStorageCachedData=i,r()),n(t)}))}else n()})):Ur(Vr(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){if(r._isPlayerAuthorized){var n=null!==r._platformStorageCachedData?Hr({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete n[e[i]];else delete n[e];r._platformSdk.setSaveData(n,(function(e,i){null===i&&(r._platformStorageCachedData=n,t()),o(i)}))}else o()})):Ur(Vr(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,zr(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),l}(Nt);function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function qr(e){var t=function(e){if("object"!=Jr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Jr(t)?t:String(t)}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qr(e){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qr(e)}function eo(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ro(e,t,"set"),r),r}function to(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ro(e,t,"get"))}function ro(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var oo="banner-container",no=new WeakMap;const io=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(p,t);var r,o,n,c,l=(n=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qr(n);if(c){var r=Qr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xr(e)}(this,e)});function p(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=Xr(e=l.call.apply(l,[this].concat(i))),r=no),r.set(t,o),e}return r=p,(o=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(f.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(f.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._platformSdk.preloadAd("rewarded"),t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(f.INITIALIZE);break;case"SDK_GAME_START":to(t,no)?t._setRewardedState(a.CLOSED):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":to(t,no)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=u.LOCAL_STORAGE,this._isBannerSupported=!0,Ct("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(f.INITIALIZE,h);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(oo);r||((r=document.createElement("div")).id=oo,r.style.position="absolute",document.body.appendChild(r)),"top"===(null==e?void 0:e.position)?(r.style.top=0,r.style.height="90px",r.style.width="100%"):"left"===(null==e?void 0:e.position)?(r.style.left=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):"right"===(null==e?void 0:e.position)?(r.style.right=0,r.style.top=0,r.style.height="100%",r.style.width="90px"):(r.style.bottom=0,r.style.height="90px",r.style.width="100%"),r.style.display="block",this._platformSdk.showAd("display",{containerId:oo}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=document.getElementById(oo);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;eo(this,no,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;eo(this,no,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,qr(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),p}(Nt);function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){vo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function co(){return co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=po(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},co.apply(this,arguments)}function lo(e,t){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lo(e,t)}function fo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function po(e){return po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},po(e)}function yo(e,t){mo(e,t),t.add(e)}function ho(e,t,r){mo(e,t),t.set(e,r)}function mo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vo(e,t,r){return(t=_o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e){var t=function(e){if("object"!=ao(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ao(t)?t:String(t)}function go(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function So(e,t){var r=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var bo="AUTHORIZED",Eo={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},Po=new WeakMap,Ao=new WeakMap,wo=new WeakMap,Oo=new WeakSet,ko=new WeakSet,Do=new WeakSet,Ro=new WeakSet,To=new WeakSet,Io=new WeakSet,Lo=new WeakSet,jo=new WeakSet,No=new WeakSet,Co=new WeakSet,Bo=new WeakSet,Mo=new WeakSet,Fo=new WeakSet,Go=new WeakSet,Ho=new WeakSet,zo=new WeakSet;function Uo(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function Wo(){var e=this;return{userProfileCallback:function(t,r,o){return go(e,Oo,Vo).call(e,t,r,o)},hasValueAccessCallback:function(t,r,o){return go(e,Do,Zo).call(e,r,o)}}}function xo(){var e=this;return{showPermissions:function(){return go(e,Ro,Ko).call(e)},loadAd:function(t){return go(e,To,Jo).call(e,t)},showLoadedAd:function(t,r){return go(e,Io,qo).call(e,r)},showAd:function(t,r){return go(e,Lo,$o).call(e,r)},requestBannerAds:function(t,r){return go(e,jo,Xo).call(e,t,r)},showBannerAds:function(t,r){return go(e,Co,en).call(e,r)},hideBannerAds:function(t,r){return go(e,No,Qo).call(e,r)},setBannerFormat:function(t){return go(e,Bo,tn).call(e,t)},showInvite:function(t){return go(e,Mo,rn).call(e,t)},showRatingDialog:function(t,r){return go(e,Fo,on).call(e,t,r)},joinGroup:function(t,r){return go(e,Go,nn).call(e,t,r)},showLoginSuggestion:function(t,r){return go(e,ko,Yo).call(e,t,r)},postMediatopic:function(t,r){return go(e,Ho,an).call(e,t,r)},isAdBlockEnabled:function(t,r){return go(e,zo,sn).call(e,t,r)}}}function Vo(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(So(this,Po).hasAppPermission(Eo.VALUABLE_ACCESS),So(this,Ao).hasValueAccessCallback)}function Yo(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}function Zo(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?u.PLATFORM_INTERNAL:u.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(f.INITIALIZE);else{var t=Object.values(Eo).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function Ko(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(So(this,Po).hasAppPermission(Eo.VALUABLE_ACCESS),So(this,Ao).hasValueAccessCallback)}function Jo(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function qo(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function $o(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Xo(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds");break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Qo(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function en(e){e||this._setBannerState(s.FAILED)}function tn(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function rn(e){"error"===e?this._rejectPromiseDecorator(f.INVITE_FRIENDS):this._resolvePromiseDecorator(f.INVITE_FRIENDS)}function on(e,t){"error"===e?this._rejectPromiseDecorator(f.RATE,t):this._resolvePromiseDecorator(f.RATE)}function nn(e,t){"error"===e?this._rejectPromiseDecorator(f.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(f.JOIN_COMMUNITY)}function an(e,t){"error"===e?this._rejectPromiseDecorator(f.CREATE_POST,t):this._resolvePromiseDecorator(f.CREATE_POST)}function sn(e,t){"ok"===e?this._resolvePromiseDecorator(f.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(f.ADBLOCK_DETECT)}const un=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(l,t);var r,o,n,s,c=(n=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=po(n);if(s){var r=po(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fo(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return yo(fo(e=c.call.apply(c,[this].concat(r))),zo),yo(fo(e),Ho),yo(fo(e),Go),yo(fo(e),Fo),yo(fo(e),Mo),yo(fo(e),Bo),yo(fo(e),Co),yo(fo(e),No),yo(fo(e),jo),yo(fo(e),Lo),yo(fo(e),Io),yo(fo(e),To),yo(fo(e),Ro),yo(fo(e),Do),yo(fo(e),ko),yo(fo(e),Oo),ho(fo(e),wo,{get:xo,set:void 0}),ho(fo(e),Ao,{get:Wo,set:void 0}),ho(fo(e),Po,{get:Uo,set:void 0}),vo(fo(e),"_hasValuableAccessPermission",!1),vo(fo(e),"_hasValuableAccessPermissionShowed",!1),vo(fo(e),"_platformBannerOptions",{}),e}return r=l,(o=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("//api.ok.ru/js/fapi5.js").then((function(){Bt("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,o){return So(e,wo)[t](r,o)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===bo,e._isPlayerAuthorized?e._platformSdk.Client.call(So(e,Po).userProfile,So(e,Ao).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE))}),(function(){e._rejectPromiseDecorator(f.INITIALIZE)})):e._rejectPromiseDecorator(f.INITIALIZE,v)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(bo)),e.promise}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||co(po(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission:co(po(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,n){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};o._platformSdk.Client.call(a,(function(o,a,s){if(a){var u=a.data||{};if(Array.isArray(e)){var c=[];return i.forEach((function(e){if(""!==u[e]&&void 0!==u[e]){var t=u[e];if(r)try{t=JSON.parse(u[e])}catch(e){}c.push(t)}else c.push(null)})),void t(c)}if(""===u[e]||void 0===u[e])return void t(null);var l=u[e];if(r)try{l=JSON.parse(u[e])}catch(e){}t(l)}else n(s)}))})):Promise.reject(y):co(po(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;if(r===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(y);for(var n=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=n[c],t=i[c];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){o._platformSdk.Client.call(r,(function(r,o){o?e():t()}))}));a.push(s)},c=0;c<n.length;c++)s();return Promise.all(a)}return co(po(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===u.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(y);for(var o=Array.isArray(e)?e:[e],n=[],i=function(){var e={method:"storage.set",key:o[a]},t=new Promise((function(t,o){r._platformSdk.Client.call(e,(function(e,r){r?t():o()}))}));n.push(t)},a=0;a<o.length;a++)i();return Promise.all(n)}return co(po(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){if(e){if("string"==typeof e.layoutType)return this._platformBannerOptions=uo(uo({},e),{},{layoutType:null}),void this._platformSdk.invokeUIMethod("setBannerFormat",e.layoutType);if("string"==typeof e.position)return void this._platformSdk.invokeUIMethod("requestBannerAds",e.position)}this._platformSdk.invokeUIMethod("requestBannerAds","bottom")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(f.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(f.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(f.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(f.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(f.INVITE_FRIENDS,g):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(f.RATE);return e||(e=this._createPromiseDecorator(f.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(f.CREATE_POST);return r||(r=this._createPromiseDecorator(f.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(f.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(f.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_o(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),l}(Nt);function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function ln(e){var t=function(e){if("object"!=cn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cn(t)?t:String(t)}function fn(){return fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yn(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},fn.apply(this,arguments)}function pn(e,t){return pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pn(e,t)}function dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yn(e){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yn(e)}function hn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var mn=new WeakSet;function vn(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){e._playerId=t.id,e._isPlayerAuthorized=t.isAuthorized,e._playerName=t.name,e._playerPhotos=t.photos})).finally((function(){t()}))}))}const _n=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pn(e,t)}(l,t);var r,o,n,s,c=(n=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yn(n);if(s){var r=yn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dn(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=dn(e=c.call.apply(c,[this].concat(n))),r=mn),r.add(t),e}return r=l,(o=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://developer.playgama.com/sdk/v1.js").then((function(){Bt("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,hn(e,mn,vn).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"setDataToStorage",value:function(e,t,r){if(r===u.LOCAL_STORAGE){var o={};if(Array.isArray(e))for(var n=0;n<e.length;n++)o[e[n]]="string"!=typeof t[n]?JSON.stringify(t[n]):t[n];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),fn(yn(l.prototype),"setDataToStorage",this).call(this,e,t,r)}return Promise.reject(d)}},{key:"deleteDataFromStorage",value:function(e,t){return t===u.LOCAL_STORAGE?(this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),fn(yn(l.prototype),"deleteDataFromStorage",this).call(this,e,t)):Promise.reject(d)}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER),this._isPlayerAuthorized?hn(this,mn,vn).call(this,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){hn(t,mn,vn).call(t,e).then((function(){t._resolvePromiseDecorator(f.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(f.AUTHORIZE_PLAYER,e)}))),r.promise}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ln(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),l}(Nt);function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function Sn(){return Sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pn(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Sn.apply(this,arguments)}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}function En(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e){return Pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pn(e)}function An(e,t,r){return(t=wn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wn(e){var t=function(e){if("object"!=gn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gn(t)?t:String(t)}function On(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function kn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Rn(e,t,"set"),r),r}function Dn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Rn(e,t,"get"))}function Rn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Tn=new WeakMap,In=new WeakMap;const Ln=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(p,t);var r,o,n,s,c=(n=p,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pn(n);if(s){var r=Pn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return En(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return On(En(e=c.call.apply(c,[this].concat(r))),Tn,{writable:!0,value:void 0}),On(En(e),In,{writable:!0,value:void 0}),An(En(e),"_defaultStorageType",u.PLATFORM_INTERNAL),An(En(e),"_isPlayerAuthorized",!0),e}return r=p,(o=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return Dn(this,Tn)?Dn(this,Tn):Sn(Pn(p.prototype),"platformLanguage",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),window.addEventListener("message",(function t(r){var o=r.data;if(o&&o.playdeck){var n=o.playdeck;if("getUserProfile"===n.method){var i=n.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,kn(e,Tn,i.locale),kn(e,In,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case l.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return Sn(Pn(p.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var o=r.data,n=null==o?void 0:o.playdeck;if(n)switch(n.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var o=r.data,n=null==o?void 0:o.playdeck;if(n)switch(n.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Sn(Pn(p.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Sn(Pn(p.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===u.PLATFORM_INTERNAL?new Promise((function(t){var r={},o=Array.isArray(e)?e:[e];window.addEventListener("message",(function n(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&o.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===o.length){window.removeEventListener("message",n);var u=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(u)}}})),o.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):Sn(Pn(p.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===u.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],n=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:n[t]}},"*")})),r()})):Sn(Pn(p.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):Sn(Pn(p.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){window.parent.postMessage({playdeck:{method:"customShare",value:Dn(this,In)}},"*")}},{key:"purchase",value:function(e){var t=this,r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,o=null==r?void 0:r.playdeck;o&&"requestPayment"===o.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:o.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function e(r){var o=r.data,n=null==o?void 0:o.playdeck;n&&"invoiceClosed"===n.method&&("paid"===n.value.status?(window.removeEventListener("message",e),t._resolvePromiseDecorator(f.PURCHASE,n.value)):"cancelled"!==n.value.status&&"failed"!==n.value.status||(window.removeEventListener("message",e),t._rejectPromiseDecorator(f.PURCHASE,n.value)))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:e}},"*")),r.promise}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,wn(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),p}(Nt);function jn(e){return jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(e)}function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){var o,n,i;o=e,n=t,i=r[t],(n=Bn(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bn(e){var t=function(e){if("object"!=jn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=jn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jn(t)?t:String(t)}function Mn(){return Mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hn(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Mn.apply(this,arguments)}function Fn(e,t){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fn(e,t)}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hn(e){return Hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hn(e)}function zn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Un(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Wn(e,t,"get"))}function Wn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var xn=new WeakMap,Vn=new WeakSet;function Yn(){this._playerId=this._platformSdk.player.getId(),this._playerName=this._platformSdk.player.getName(),this._playerPhotos=[this._platformSdk.player.getPhoto()]}const Zn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fn(e,t)}(d,t);var r,o,n,c,p=(n=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Hn(n);if(c){var r=Hn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gn(e)}(this,e)});function d(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return zn(t=Gn(e=p.call.apply(p,[this].concat(n))),r=Vn),r.add(t),function(e,t){zn(e,t),t.set(e,{writable:!0,value:void 0})}(Gn(e),xn),e}return r=d,(o=[{key:"platformId",get:function(){return e.WORTAL}},{key:"platformLanguage",get:function(){if(this._platformSdk){var e=this._platformSdk.session.getLocale();if(e)return e.toLowerCase().slice(0,2)}return Mn(Hn(d.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){var e=this._platformSdk.session.getDevice();return e?e.toLowerCase():Mn(Hn(d.prototype),"deviceType",this)}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://storage.googleapis.com/cdn-wortal-ai/v2/wortal-core.js").then((function(){Bt("Wortal","initializeAsync").then((function(){window.Wortal.initializeAsync().then((function(){var t,r,o;e._platformSdk=window.Wortal,t=e,r=xn,o=e._platformSdk.getSupportedAPIs(),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,Wn(t,r,"set"),o),e._isBannerSupported=Un(e,xn).includes("ads.showBanner"),e._platformSdk.player.onLogin(function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Vn,Yn)),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAMEPLAY_STARTED:return this._platformSdk.session.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.session.gameplayStop(),Promise.resolve();case l.GAME_READY:return this._platformSdk.setLoadingProgress(100),this._platformSdk.startGameAsync(),Promise.resolve();case l.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.session.happyTime(),Promise.resolve();default:return Mn(Hn(d.prototype),"sendMessage",this).call(this,e)}}},{key:"showBanner",value:function(e){var t="bottom";e&&"string"==typeof e.position&&(t=e.position),this._platformSdk.ads.showBanner(!0,t),this._setBannerState(s.SHOWN)}},{key:"hideBanner",value:function(){this._platformSdk.ads.showBanner(!1),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(e){var t=this,r="next",o="NextLevel";e&&(e.placement&&(r=e.placement),e.description&&(o=e.description)),this._platformSdk.ads.showInterstitial(r,o,(function(){t._setInterstitialState(i.OPENED)}),(function(){t._setInterstitialState(i.CLOSED)}),(function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(e){var t=this,r="Bonus";e&&e.description&&(r=e.description),this._platformSdk.ads.showRewarded(r,(function(){t._setRewardedState(a.OPENED)}),(function(){t._setRewardedState(a.CLOSED)}),(function(){t._setRewardedState(a.CLOSED)}),(function(){t._setRewardedState(a.REWARDED)}),(function(){t._setRewardedState(a.FAILED)}))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.ads.isAdBlocked())}))}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL?Un(this,xn).includes("player.setDataAsync"):Mn(Hn(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?Un(this,xn).includes("player.setDataAsync"):Mn(Hn(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,r){var n=Array.isArray(e)?e:[e];o._platformSdk.player.getDataAsync(n).then((function(r){if(o._platformStorageCachedData||(o._platformStorageCachedData={}),Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a=void 0===r[e[i]]?null:r[e[i]];n.push(a),o._platformStorageCachedData[e[i]]=a}t(n)}else{var s=void 0===r[e]?null:r[e];o._platformStorageCachedData[e]=s,t(s)}})).catch((function(e){return r(e)}))})):Mn(Hn(d.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,n){var i=null!==o._platformStorageCachedData?Cn({},o._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;o._platformSdk.player.setDataAsync(i).then((function(){o._platformStorageCachedData=i,r()})).catch((function(e){return n(e)}))})):Mn(Hn(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){var n=null!==r._platformStorageCachedData?Cn({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete n[e[i]];else delete n[e];r._platformSdk.player.setDataAsync(n).then((function(){r._platformStorageCachedData=n,t()})).catch((function(e){return o(e)}))})):Mn(Hn(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Bn(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),d}(Nt);function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}function Jn(){return Jn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xn(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Jn.apply(this,arguments)}function qn(e,t){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qn(e,t)}function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}function Qn(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ei(e,t,r){return(t=ti(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ti(e){var t=function(e){if("object"!=Kn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kn(t)?t:String(t)}function ri(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ni(e,t,"set"),r),r}function oi(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ni(e,t,"get"))}function ni(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ii=new WeakMap,ai=new WeakMap,si=new WeakMap,ui=new WeakMap;const ci=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(d,t);var r,o,n,s,p=(n=d,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xn(n);if(s){var r=Xn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $n(e)}(this,e)});function d(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ei($n(e=p.call.apply(p,[this].concat(r))),"_defaultStorageType",u.PLATFORM_INTERNAL),ei($n(e),"_isPlayerAuthorized",!0),Qn($n(e),ii,{writable:!0,value:void 0}),Qn($n(e),ai,{writable:!0,value:void 0}),Qn($n(e),si,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),Qn($n(e),ui,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=d,(o=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:Jn(Xn(d.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){switch(oi(this,ii)){case"android":case"android_x":case"ios":return c.MOBILE;case"tdesktop":case"unigram":case"macos":return c.DESKTOP;default:return Jn(Xn(d.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],ri(e,ii,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?Ct("https://sad.adsgram.ai/js/sad.min.js").then((function(){ri(e,ai,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(f.INITIALIZE)})):e._resolvePromiseDecorator(f.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===l.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):Jn(Xn(d.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||Jn(Xn(d.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL||Jn(Xn(d.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){Array.isArray(e)?o._platformSdk.CloudStorage.getItems(e,(function(o,i){if(o)n(o);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):o._platformSdk.CloudStorage.getItem(e,(function(e,o){e&&n(e);var i=o;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):Jn(Xn(d.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return o._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):Jn(Xn(d.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):Jn(Xn(d.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;oi(this,ai)?(oi(this,ai).addEventListener("onStart",oi(this,ui).onStart),oi(this,ai).addEventListener("onSkip",oi(this,ui).onSkip),oi(this,ai).addEventListener("onError",oi(this,ui).onError),oi(this,ai).addEventListener("onBannerNotFound",oi(this,ui).onError),oi(this,ai).show().finally((function(){oi(e,ai).removeEventListener("onStart",oi(e,ui).onStart),oi(e,ai).removeEventListener("onSkip",oi(e,ui).onSkip),oi(e,ai).removeEventListener("onError",oi(e,ui).onError),oi(e,ai).removeEventListener("onBannerNotFound",oi(e,ui).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;oi(this,ai)?(oi(this,ai).addEventListener("onStart",oi(this,si).onStart),oi(this,ai).addEventListener("onSkip",oi(this,si).onSkip),oi(this,ai).addEventListener("onReward",oi(this,si).onReward),oi(this,ai).addEventListener("onError",oi(this,si).onError),oi(this,ai).addEventListener("onBannerNotFound",oi(this,si).onError),oi(this,ai).show().finally((function(){oi(e,ai).addEventListener("onStart",oi(e,si).onStart),oi(e,ai).addEventListener("onSkip",oi(e,si).onSkip),oi(e,ai).addEventListener("onReward",oi(e,si).onReward),oi(e,ai).addEventListener("onError",oi(e,si).onError),oi(e,ai).addEventListener("onBannerNotFound",oi(e,si).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(f.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(f.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(f.CLIPBOARD_READ,t):e._rejectPromiseDecorator(f.CLIPBOARD_READ)}))),t.promise}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ti(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),d}(Nt);var li=["player"];function fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(r),!0).forEach((function(t){var o,n,i;o=e,n=t,i=r[t],(n=yi(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function di(e){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(e)}function yi(e){var t=function(e){if("object"!=di(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==di(t)?t:String(t)}function hi(){return hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_i(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},hi.apply(this,arguments)}function mi(e,t){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mi(e,t)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e){return _i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_i(e)}function gi(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Si(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var bi="userData",Ei="6129580795478709",Pi=new WeakSet,Ai=new WeakSet;function wi(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:bi},(function(o){o.error&&"Key not found"!==o.error&&r(o);var n={};try{o.jsondata&&(n=JSON.parse(o.jsondata))}catch(e){}e._platformStorageCachedData=n,t(n)}))}))}function Oi(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=u.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,o=t.locale,n=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=o,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||n,this._playerPhotos=[];var c=s.thumb_url,l=s.medium_url,f=s.large_url;c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l),f&&this._playerPhotos.push(f)}}const ki=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mi(e,t)}(l,t);var r,o,n,s,c=(n=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_i(n);if(s){var r=_i(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vi(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return gi(vi(e=c.call.apply(c,[this].concat(r))),Ai),gi(vi(e),Pi),e}return r=l,(o=[{key:"platformId",get:function(){return e.Y8}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardNativePopupSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(f.INITIALIZE);return r||(r=this._createPromiseDecorator(f.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?Ct("https://cdn.y8.com/api/sdk.js").then((function(){Bt("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){var t,r,o,n,i,a;(t={hostId:"ca-host-pub-".concat(Ei),adsenseId:e._options.channelId?"ca-pub-".concat(Ei):e._options.adsenseId,channelId:e._options.channelId},r=t.hostId,o=t.adsenseId,n=t.channelId,i=t.adFrequencyHint,a=void 0===i?"180s":i,new Promise((function(e){var t=document.createElement("script");t.setAttribute("data-ad-client",o),n?t.setAttribute("data-ad-channel",n):r&&t.setAttribute("data-ad-host",r),t.setAttribute("data-ad-frequency-hint",a),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.addEventListener("load",e),document.head.appendChild(t)}))).then((function(){e._showAd=function(e){window.adsbygoogle.push(e)},window.adsbygoogle.push({preloadAdBreaks:"on",sound:"on",onReady:function(){}})})),e._platformSdk.getLoginStatus((function(t){Si(e,Ai,Oi).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(f.INITIALIZE,m)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(o){Si(e,Ai,Oi).call(e,o),"ok"===o.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL||hi(_i(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:hi(_i(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){Si(o,Pi,wi).call(o).then((function(o){var n=(Array.isArray(e)?e:[e]).map((function(e){var t=o[e];return r||"object"!==di(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(n)})).catch(n)})):hi(_i(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,n){Si(o,Pi,wi).call(o).then((function(i){var a=pi({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;o._platformSdk.api("user_data/submit","POST",{key:bi,value:JSON.stringify(a)},(function(e){"ok"===e.status?(o._platformStorageCachedData=a,r()):n(e)}))})).catch(n)})):hi(_i(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){Si(r,Pi,wi).call(r).then((function(n){var i=pi({},n);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:bi,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):o(e)}))})).catch(o)})):hi(_i(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"showLeaderboardNativePopup",value:function(e){return this._isPlayerAuthorized?e&&e.table?(this._platformSdk.GameAPI.Leaderboards.list(e),Promise.resolve()):Promise.reject(new Error("`table` property is not provided")):Promise.reject()}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.points||!e.table)return Promise.reject(new Error("`table` or `points` property is not provided"));var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),this._platformSdk.GameAPI.Leaderboards.save(e,(function(e){var r=e.success,o=e.errormessage;r?t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE):t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,o)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.table)return Promise.reject(new Error("`table` property is not provided"));var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),this._platformSdk.GameAPI.Leaderboards.listCustom(pi(pi({},e),{},{playerid:this.playerId}),(function(e){var r=e.scores,o=e.success,n=e.errormessage;o?t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,r[0]):t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,n)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.table)return Promise.reject(new Error("`table` property is not provided"));var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES),this._platformSdk.GameAPI.Leaderboards.listCustom(e,(function(e){var r=e.scores,o=e.success,n=e.errormessage;o?t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r):t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,n)}))),r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,o){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return pi(pi({},function(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,li)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):o(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,yi(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),l}(Nt);function Di(e){return Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Di(e)}function Ri(e){var t=function(e){if("object"!=Di(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Di(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Di(t)?t:String(t)}function Ti(){return Ti="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Li(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Ti.apply(this,arguments)}function Ii(e,t){return Ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ii(e,t)}function Li(e){return Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Li(e)}const ji=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ii(e,t)}(l,t);var r,o,n,s,c=(n=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Li(n);if(s){var r=Li(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return r=l,(o=[{key:"platformId",get:function(){return e.LAGGED}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?Ct("https://lagged.com/api/rev-share/lagged.js").then((function(){Bt("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,o=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},n=o.id,i=o.name,a=o.avatar;n>0&&(e._playerId=n,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))})):this._rejectPromiseDecorator(f.INITIALIZE,_)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==u.PLATFORM_INTERNAL&&Ti(Li(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==u.PLATFORM_INTERNAL&&Ti(Li(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(void 0===(null==e?void 0:e.score)||null==e||!e.boardId)return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);if(!r){r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE);var o={score:"string"==typeof e.score?parseInt(e.score,10):e.score,board:e.boardId};this._platformSdk.Scores.save(o,(function(e){e.success?t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE):t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e.errormsg)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,o){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):o(e.errormsg)}))})):Promise.reject()}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ri(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),l}(Nt);function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Ci(){return Ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fi(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Ci.apply(this,arguments)}function Bi(e,t){return Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Bi(e,t)}function Mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fi(e){return Fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fi(e)}function Gi(e,t,r){return(t=Hi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hi(e){var t=function(e){if("object"!=Ni(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ni(t)?t:String(t)}const zi=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bi(e,t)}(y,t);var r,o,n,p,d=(n=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fi(n);if(p){var r=Fi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mi(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Gi(Mi(e=d.call.apply(d,[this].concat(r))),"_contextId",null),Gi(Mi(e),"_placementId",null),Gi(Mi(e),"_leaderboardId",null),Gi(Mi(e),"_isPlayerAuthorized",!0),Gi(Mi(e),"_supportedApis",[]),e}return r=y,o=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"MOBILE_WEB":case"ANDROID":return c.MOBILE;case"WEB":return c.DESKTOP;default:return Ci(Fi(y.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"isBannerSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardSetScoreSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardGetScoreSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isLeaderboardGetEntriesSupported",get:function(){return this._supportedApis.includes("getLeaderboardAsync")}},{key:"isPaymentsSupported",get:function(){return this._supportedApis.includes("payments.purchaseAsync")}},{key:"isGetCatalogSupported",get:function(){return this._supportedApis.includes("payments.getCatalogAsync")}},{key:"isGetPurchasesSupported",get:function(){return this._supportedApis.includes("payments.getPurchasesAsync")}},{key:"isConsumePurchaseSupported",get:function(){return this._supportedApis.includes("payments.consumePurchaseAsync")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://connect.facebook.net/en_US/fbinstant.7.1.js").then((function(){return Bt("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){e._placementId=e._options.placementId,e._playerId=e._platformSdk.player.getID(),e._playerName=e._platformSdk.player.getName(),e._playerPhotos.push(e._platformSdk.player.getPhoto()),e._contextId=e._platformSdk.context.getID(),e._platformLanguage=e._platformSdk.getLocale(),e._supportedApis=e._platformSdk.getSupportedAPIs(),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)})).catch((function(t){return e._resolvePromiseDecorator(f.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===l.GAME_READY?(this._platformSdk.setLoadingProgress(100),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):Ci(Fi(y.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===u.PLATFORM_INTERNAL?this._supportedApis.includes("getDataAsync"):Ci(Fi(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===u.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ci(Fi(y.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var o=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,n){var i=Array.isArray(e)?e:[e];o._platformSdk.player.getDataAsync(i).then((function(e){var o=i.map((function(t){var o=e[t];return r||"object"!==Ni(o)||null===o?null!=o?o:null:JSON.stringify(o)}));t(o)})).catch(n)})):Ci(Fi(y.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===u.PLATFORM_INTERNAL?new Promise((function(r,n){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;o._platformSdk.player.setDataAsync(i).then(r).catch(n)})):Ci(Fi(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===u.PLATFORM_INTERNAL?new Promise((function(t,o){var n={};if(Array.isArray(e))for(var i=0;i<e.length;i++)n[e[i]]=null;else n[e]=null;r._platformSdk.player.setDataAsync(n).then(t).catch(o)})):Ci(Fi(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.loadBannerAdAsync(this._placementId,e).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"showInterstitial",value:function(){var e,t=this;this._platformSdk.getInterstitialAdAsync(this._placementId).then((function(t){return e=t,t.loadAsync()})).then((function(){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){t._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var e,t=this;this._platformSdk.getRewardedVideoAsync(this._placementId).then((function(t){return e=t,t.loadAsync()})).then((function(){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){t._setRewardedState(a.FAILED)}))}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.score||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE),this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function(t){return t.setScoreAsync(e.score,e.extraData?JSON.stringify(e.extraData):null)})).then((function(){t._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)})).catch((function(e){t._rejectPromiseDecorator(f.SET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_SCORE);return r||(r=this._createPromiseDecorator(f.GET_LEADERBOARD_SCORE),this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function(e){return e.getPlayerEntryAsync()})).then((function(e){t._resolvePromiseDecorator(f.GET_LEADERBOARD_SCORE,e.getScore())})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_SCORE,e)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!r){var o,n;r=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var i=[null!==(o=e.count)&&void 0!==o?o:5,null!==(n=e.offset)&&void 0!==n?n:0];this._platformSdk.getLeaderboardAsync(e.leaderboardName).then((function(e){return e.getConnectedPlayerEntriesAsync.apply(e,i)})).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){return{rank:e.rank,score:e.score,format_score:e.format_score,ts:e.ts,extra_data:e.extra_data,playerId:e.player.player_id,playerName:e.player.name,playerPhoto:e.player.photo}}))),t._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(f.GET_LEADERBOARD_ENTRIES,e)}))}return r.promise}},{key:"purchase",value:function(e){var t=this;if(!e.productID)return Promise.reject();var r=this._getPromiseDecorator(f.PURCHASE);return r||(r=this._createPromiseDecorator(f.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:e.productID,developerPayload:e.developerPayload?JSON.stringify(e.developerPayload):void 0}).then((function(e){t._resolvePromiseDecorator(f.PURCHASE,e)})).catch((function(e){t._rejectPromiseDecorator(f.PURCHASE,e)}))),r.promise}},{key:"getPaymentsPurchases",value:function(){var e=this,t=this._getPromiseDecorator(f.GET_PURCHASES);return t||(t=this._createPromiseDecorator(f.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){e._resolvePromiseDecorator(f.GET_PURCHASES,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_PURCHASES,t)}))),t.promise}},{key:"getPaymentsCatalog",value:function(){var e=this,t=this._getPromiseDecorator(f.GET_CATALOG);return t||(t=this._createPromiseDecorator(f.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(t){e._resolvePromiseDecorator(f.GET_CATALOG,t)})).catch((function(t){e._rejectPromiseDecorator(f.GET_CATALOG,t)}))),t.promise}},{key:"consumePurchase",value:function(e){var t=this;if(!e.purchaseToken)return Promise.reject();var r=this._getPromiseDecorator(f.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(f.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(e.purchaseToken).then((function(){t._resolvePromiseDecorator(f.CONSUME_PURCHASE)})).catch((function(e){t._rejectPromiseDecorator(f.CONSUME_PURCHASE,e)}))),r.promise}},{key:"inviteFriends",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.image||!e.text)return Promise.reject();try{window.btoa(e.image)}catch(e){return Promise.reject(e)}var t=this._getPromiseDecorator(f.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(f.INVITE_FRIENDS),this._platformSdk.inviteAsync(e)),t.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.media||!e.text)return Promise.reject();try{window.btoa(e.image)}catch(e){return Promise.reject(e)}return new Promise((function(r){t._platform.shareAsync(e).then(r)}))}}],o&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Hi(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),y}(Nt);function Ui(e){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(e)}function Wi(e){var t=function(e){if("object"!=Ui(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ui(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ui(t)?t:String(t)}var xi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Wi(o.key),o)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Zi(){return Zi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qi(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Zi.apply(this,arguments)}function Ki(e,t){return Ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ki(e,t)}function Ji(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qi(e){return qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qi(e)}function $i(e,t,r){return(t=Xi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xi(e){var t=function(e){if("object"!=Yi(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yi(t)?t:String(t)}function Qi(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ea(e,t){var r=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var ta="banner",ra="get_data_from_storage",oa="get_server_time",na="clipboard_read",ia="unlock_achievement",aa="get_achievements",sa="isStorageInternalSupported",ua="isStorageLocalSupported",ca=new WeakMap,la=new WeakMap;function fa(){return this._supportedFeatures.includes("isStorageRemoteLocalSupported")}const pa=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ki(e,t)}(y,r);var o,n,c,p,d=(c=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qi(c);if(p){var r=qi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ji(e)}(this,e)});function y(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Qi(Ji(e=d.call.apply(d,[this].concat(r))),ca,{get:fa,set:void 0}),Qi(Ji(e),la,{writable:!0,value:new xi}),$i(Ji(e),"_supportedFeatures",[]),e}return o=y,n=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isGetCatalogSupported",get:function(){return this._supportedFeatures.includes("isGetCatalogSupported")}},{key:"isGetPurchasesSupported",get:function(){return this._supportedFeatures.includes("isGetPurchasesSupported")}},{key:"isConsumePurchaseSupported",get:function(){return this._supportedFeatures.includes("isConsumePurchaseSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"isLeaderboardSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardSupported")}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardMultipleBoardsSupported")}},{key:"isLeaderboardSetScoreSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardSetScoreSupported")}},{key:"isLeaderboardGetScoreSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardGetScoreSupported")}},{key:"isLeaderboardGetEntriesSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardGetEntriesSupported")}},{key:"isLeaderboardNativePopupSupported",get:function(){return this._supportedFeatures.includes("isLeaderboardNativePopupSupported")}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(f.INITIALIZE);return r||(r=this._createPromiseDecorator(f.INITIALIZE),this._defaultStorageType=u.PLATFORM_INTERNAL,ea(this,la).addListener((function(r){var o,n,i,a,s=r.data;(null==s?void 0:s.type)===t.PLATFORM&&s.action===f.INITIALIZE&&(e._supportedFeatures=s.supportedFeatures||[],e._isBannerSupported=e._supportedFeatures.includes("isBannerSupported"),e._platformLanguage=null!==(o=null===(n=s.config)||void 0===n?void 0:n.platformLanguage)&&void 0!==o?o:Zi(qi(y.prototype),"platformLanguage",e),e._platformTld=null!==(i=null===(a=s.config)||void 0===a?void 0:a.platformTld)&&void 0!==i?i:Zi(qi(y.prototype),"platformTld",e),e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE),ea(e,la).send({type:"liveness",action:"ping",options:{version:"1.20.0"}}))})),ea(this,la).send({type:t.PLATFORM,action:f.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(){var e=this,r=this._getPromiseDecorator(f.AUTHORIZE_PLAYER);if(!r){r=this._createPromiseDecorator(f.AUTHORIZE_PLAYER);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;if((null==i?void 0:i.type)===t.PLAYER&&i.action===f.AUTHORIZE_PLAYER&&i.id===o){var a=i.player;e._isPlayerAuthorized=!0,e._playerId=a.userId,e._playerName=a.name,a.profilePictureUrl&&(e._playerPhotos=[a.profilePictureUrl]),e._resolvePromiseDecorator(f.AUTHORIZE_PLAYER),ea(e,la).removeListener(r)}})),ea(this,la).send({type:t.PLAYER,action:f.AUTHORIZE_PLAYER,id:o})}return r.promise}},{key:"sendMessage",value:function(e){return[l.GAME_READY,l.IN_GAME_LOADING_STARTED,l.IN_GAME_LOADING_STOPPED,l.GAMEPLAY_STARTED,l.GAMEPLAY_STOPPED,l.PLAYER_GOT_ACHIEVEMENT,l.GAME_OVER].includes(e)?(ea(this,la).send({type:t.PLATFORM,action:e}),Promise.resolve()):Zi(qi(y.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,o){var n,i=ea(e,la).generateMessageId(),a=function a(s){var u=s.data;if((null==u?void 0:u.type)===t.PLATFORM&&u.action===oa&&u.id===i){if(!u.time)return void o(new Error("Invalid server time"));clearTimeout(n),r(u.time),ea(e,la).removeListener(a)}};ea(e,la).addListener(a),ea(e,la).send({type:t.PLATFORM,action:oa,id:i}),n=setTimeout((function(){o(new Error("Server time request timeout")),ea(e,la).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return ea(this,la).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(sa))||!(e!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(ua))}},{key:"isStorageAvailable",value:function(e){return ea(this,la).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==u.PLATFORM_INTERNAL||!this._supportedFeatures.includes(sa))||!(e!==u.LOCAL_STORAGE||!this._supportedFeatures.includes(ua))}},{key:"getDataFromStorage",value:function(e,r,o){var n=this;if(r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE&&ea(this,ca)){var i=ea(this,la).generateMessageId();return new Promise((function(a){ea(n,la).addListener((function e(r){var o=r.data;if((null==o?void 0:o.type)===t.STORAGE&&o.action===ra&&o.id===i){var s=Object.values(o.storage);a(s),ea(n,la).removeListener(e)}})),ea(n,la).send({type:t.STORAGE,action:ra,id:i,options:{key:e,storageType:r,tryParseJson:o}})}))}return ea(this,la).send({type:t.STORAGE,action:ra,options:{key:e,storageType:r,tryParseJson:o}}),Zi(qi(y.prototype),"getDataFromStorage",this).call(this,e,r,o)}},{key:"setDataToStorage",value:function(e,r,o){return ea(this,la).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:o}}),o===u.PLATFORM_INTERNAL||o===u.LOCAL_STORAGE&&ea(this,ca)?Promise.resolve():Zi(qi(y.prototype),"setDataToStorage",this).call(this,e,r,o)}},{key:"deleteDataFromStorage",value:function(e,r){return ea(this,la).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),r===u.PLATFORM_INTERNAL||r===u.LOCAL_STORAGE&&ea(this,ca)?Promise.resolve():Zi(qi(y.prototype),"deleteDataFromStorage",this).call(this,e,r)}},{key:"showInterstitial",value:function(){var e=this;ea(this,la).addListener((function r(o){var n=o.data;if((null==n?void 0:n.type)===t.ADVERTISEMENT)switch(n.payload.status){case"start":e._setInterstitialState(i.LOADING);break;case"open":e._setInterstitialState(i.OPENED);break;case"close":e._setInterstitialState(i.CLOSED),ea(e,la).removeListener(r)}})),ea(this,la).send({type:t.ADVERTISEMENT,action:"interstitial"})}},{key:"showRewarded",value:function(){var e=this;ea(this,la).addListener((function r(o){var n=o.data;if((null==n?void 0:n.type)===t.ADVERTISEMENT)switch(n.payload.status){case"start":e._setRewardedState(a.LOADING);break;case"open":e._setRewardedState(a.OPENED);break;case"rewarded":e._setRewardedState(a.REWARDED);break;case"close":e._setRewardedState(a.CLOSED),ea(e,la).removeListener(r)}})),ea(this,la).send({type:t.ADVERTISEMENT,action:"reward"})}},{key:"showBanner",value:function(){this._setBannerState(s.SHOWN),ea(this,la).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:ta}})}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN),ea(this,la).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:ta}})}},{key:"checkAdBlock",value:function(){return ea(this,la).send({type:"check_adblock",action:f.ADBLOCK_DETECT}),Zi(qi(y.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){var e=this._getPromiseDecorator(f.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(f.INVITE_FRIENDS),this._resolvePromiseDecorator(f.INVITE_FRIENDS),ea(this,la).send({type:t.SOCIAL,action:f.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){var e=this._getPromiseDecorator(f.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(f.JOIN_COMMUNITY),this._resolvePromiseDecorator(f.JOIN_COMMUNITY),ea(this,la).send({type:t.SOCIAL,action:f.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){var e=this._getPromiseDecorator(f.SHARE);return e||(e=this._createPromiseDecorator(f.SHARE),this._resolvePromiseDecorator(f.SHARE),ea(this,la).send({type:t.SOCIAL,action:f.SHARE})),e.promise}},{key:"createPost",value:function(){var e=this._getPromiseDecorator(f.CREATE_POST);return e||(e=this._createPromiseDecorator(f.CREATE_POST),this._resolvePromiseDecorator(f.CREATE_POST),ea(this,la).send({type:t.SOCIAL,action:f.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){var e=this._getPromiseDecorator(f.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(f.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(f.ADD_TO_HOME_SCREEN),ea(this,la).send({type:t.SOCIAL,action:f.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){var e=this._getPromiseDecorator(f.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(f.ADD_TO_FAVORITES),this._resolvePromiseDecorator(f.ADD_TO_FAVORITES),ea(this,la).send({type:t.SOCIAL,action:f.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(f.RATE);return e||(e=this._createPromiseDecorator(f.RATE),this._resolvePromiseDecorator(f.RATE),ea(this,la).send({type:t.SOCIAL,action:f.RATE})),e.promise}},{key:"purchase",value:function(){var e=this,r=this._getPromiseDecorator(f.PURCHASE);if(!r){r=this._createPromiseDecorator(f.PURCHASE);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.PURCHASE&&i.id===o){if(!i.purchase||"object"!==Yi(i.purchase))return void e._rejectPromiseDecorator(f.PURCHASE,new Error("Invalid purchase"));e._resolvePromiseDecorator(f.PURCHASE,i.purchase),ea(e,la).removeListener(r)}})),ea(this,la).send({type:t.PAYMENTS,action:f.PURCHASE,id:o})}return r.promise}},{key:"getPaymentsPurchases",value:function(){var e=this,r=this._getPromiseDecorator(f.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(f.GET_PURCHASES);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;(null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.GET_PURCHASES&&i.id===o&&(e._resolvePromiseDecorator(f.GET_PURCHASES,i.purchases),ea(e,la).removeListener(r))})),ea(this,la).send({type:t.PAYMENTS,action:f.GET_PURCHASES,id:o})}return r.promise}},{key:"getPaymentsCatalog",value:function(){var e=this,r=this._getPromiseDecorator(f.GET_CATALOG);if(!r){r=this._createPromiseDecorator(f.GET_CATALOG);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;(null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.GET_CATALOG&&i.id===o&&(e._resolvePromiseDecorator(f.GET_CATALOG,i.catalog),ea(e,la).removeListener(r))})),ea(this,la).send({type:t.PAYMENTS,action:f.GET_CATALOG,id:o})}return r.promise}},{key:"consumePurchase",value:function(){var e=this,r=this._getPromiseDecorator(f.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(f.CONSUME_PURCHASE);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;(null==i?void 0:i.type)===t.PAYMENTS&&i.action===f.CONSUME_PURCHASE&&i.id===o&&(e._resolvePromiseDecorator(f.CONSUME_PURCHASE,i.result),ea(e,la).removeListener(r))})),ea(this,la).send({type:t.PAYMENTS,action:f.CONSUME_PURCHASE,id:o})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this,r=this._getPromiseDecorator(f.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(f.GET_REMOTE_CONFIG);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===f.GET_REMOTE_CONFIG&&i.id===o&&(e._resolvePromiseDecorator(f.GET_REMOTE_CONFIG,i.result),ea(e,la).removeListener(r))})),ea(this,la).send({type:t.REMOTE_CONFIG,action:f.GET_REMOTE_CONFIG,id:o})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this,o=this._getPromiseDecorator(f.CLIPBOARD_WRITE);if(!o){o=this._createPromiseDecorator(f.CLIPBOARD_WRITE);var n=ea(this,la).generateMessageId();ea(this,la).addListener((function e(o){var i=o.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===f.CLIPBOARD_WRITE&&i.id===n&&(r._resolvePromiseDecorator(f.CLIPBOARD_WRITE,!0),ea(r,la).removeListener(e))})),ea(this,la).send({type:t.CLIPBOARD,action:f.CLIPBOARD_WRITE,id:n,options:{text:e}})}return o.promise}},{key:"clipboardRead",value:function(){var e=this,r=this._getPromiseDecorator(na);if(!r){r=this._createPromiseDecorator(na);var o=ea(this,la).generateMessageId();ea(this,la).addListener((function r(n){var i=n.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===na&&i.id===o){var a=i.text;e._resolvePromiseDecorator(na,a),ea(e,la).removeListener(r)}})),ea(this,la).send({type:t.CLIPBOARD,action:na,id:o,options:{}})}return r.promise}},{key:"setLeaderboardScore",value:function(e){var r=this._getPromiseDecorator(f.SET_LEADERBOARD_SCORE);if(!r){r=this._createPromiseDecorator(f.SET_LEADERBOARD_SCORE);var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(r),!0).forEach((function(t){$i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);"string"==typeof o.score&&(o.score=parseInt(o.score,10)),ea(this,la).send({type:t.LEADERBOARD,action:f.SET_LEADERBOARD_SCORE,options:o}),this._resolvePromiseDecorator(f.SET_LEADERBOARD_SCORE)}return r.promise}},{key:"getLeaderboardScore",value:function(e){var r=this,o=Object.values(e||{}).find((function(e){return null==e?void 0:e.leaderboardName})),n=null==o?void 0:o.leaderboardName,i="".concat(f.GET_LEADERBOARD_SCORE,"_").concat(n),a=this._getPromiseDecorator(i);if(!a){a=this._createPromiseDecorator(i);var s=ea(this,la).generateMessageId();ea(this,la).addListener((function e(o){var a=o.data;(null==a?void 0:a.type)===t.LEADERBOARD&&a.action===f.GET_LEADERBOARD_SCORE&&a.id===s&&a.leaderboardName===n&&(r._resolvePromiseDecorator(i,a.score),ea(r,la).removeListener(e))})),ea(this,la).send({type:t.LEADERBOARD,action:f.GET_LEADERBOARD_SCORE,id:s,leaderboardName:n,options:e})}return a.promise}},{key:"getLeaderboardEntries",value:function(e){var r=this,o=this._getPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);if(!o){o=this._createPromiseDecorator(f.GET_LEADERBOARD_ENTRIES);var n=ea(this,la).generateMessageId();ea(this,la).addListener((function e(o){var i;(null===(i=o.data)||void 0===i?void 0:i.type)===t.LEADERBOARD&&o.data.action===f.GET_LEADERBOARD_ENTRIES&&o.data.id===n&&(r._resolvePromiseDecorator(f.GET_LEADERBOARD_ENTRIES,o.data.entries),ea(r,la).removeListener(e))})),ea(this,la).send({type:t.LEADERBOARD,action:f.GET_LEADERBOARD_ENTRIES,id:n,options:e})}return o.promise}},{key:"showLeaderboardNativePopup",value:function(e){var r=this._getPromiseDecorator(f.SHOW_LEADERBOARD_NATIVE_POPUP);return r||(r=this._createPromiseDecorator(f.SHOW_LEADERBOARD_NATIVE_POPUP),ea(this,la).send({type:t.LEADERBOARD,action:f.SHOW_LEADERBOARD_NATIVE_POPUP,options:e}),this._resolvePromiseDecorator(f.SHOW_LEADERBOARD_NATIVE_POPUP)),r.promise}},{key:"unlockAchievement",value:function(e){var r=this;return new Promise((function(o){var n=ea(r,la).generateMessageId();ea(r,la).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===ia&&a.id===n&&(o(a.result),ea(r,la).removeListener(e))})),ea(r,la).send({type:t.ACHIEVEMENTS,action:ia,id:n,options:e})}))}},{key:"getAchievementsList",value:function(e){var r=this;return new Promise((function(o){var n=ea(r,la).generateMessageId();ea(r,la).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===aa&&a.id===n&&(o(a.result),ea(r,la).removeListener(e))})),ea(r,la).send({type:t.ACHIEVEMENTS,action:aa,id:n,options:e})}))}},{key:"showAchievementsNativePopup",value:function(){return ea(this,la).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()}}],n&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Xi(o.key),o)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),y}(Nt);function da(e){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(e)}function ya(e){var t=function(e){if("object"!=da(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==da(t)?t:String(t)}function ha(){return ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=va(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},ha.apply(this,arguments)}function ma(e,t){return ma=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ma(e,t)}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}const _a=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ma(e,t)}(c,t);var r,o,n,s,u=(n=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=va(n);if(s){var r=va(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(o=[{key:"platformId",get:function(){return e.POKI}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(f.INITIALIZE);return t||(t=this._createPromiseDecorator(f.INITIALIZE),Ct("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){Bt("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(f.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case l.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case l.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case l.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return ha(va(c.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ya(o.key),o)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(Nt);function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function Sa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(r),!0).forEach((function(t){var o,n,i;o=e,n=t,i=r[t],(n=Ea(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ea(e){var t=function(e){if("object"!=ga(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ga(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ga(t)?t:String(t)}function Pa(e,t){wa(e,t),t.add(e)}function Aa(e,t,r){wa(e,t),t.set(e,r)}function wa(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oa(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ra(e,t,"set"),r),r}function ka(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Da(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ra(e,t,"get"))}function Ra(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ta=new WeakMap,Ia=new WeakMap,La=new WeakMap,ja=new WeakMap,Na=new WeakSet,Ca=new WeakSet,Ba=new WeakSet;function Ma(){var t,r=e.MOCK;this._options||(this._options={});var o=new URL(window.location.href);if(this._options.forciblySetPlatformId)r=ka(this,Ca,Fa).call(this,this._options.forciblySetPlatformId.toLowerCase());else{var n=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?r=ka(this,Ca,Fa).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(n)||o.hash.includes("yandex")?r=e.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?r=e.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?r=e.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?r=e.LAGGED:o.hostname.includes("wortal.ai")?r=e.WORTAL:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?r=e.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?r=e.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?r=e.PLAYDECK:o.hash.includes("tgWebAppData")?r=e.TELEGRAM:o.hostname.includes("y8")?r=e.Y8:o.hostname.includes("fbsbx")?r=e.FACEBOOK:(o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content"))&&(r=e.POKI)}var i=o.searchParams.get("game_id");!this._options.gameId&&i&&(this._options.gameId=i);var a=(null===(t=this._options.platforms)||void 0===t?void 0:t[r])||this._options;switch(r){case e.VK:Oa(this,La,new qt(a));break;case e.YANDEX:Oa(this,La,new vr(a));break;case e.CRAZY_GAMES:Oa(this,La,new Mr(a));break;case e.ABSOLUTE_GAMES:Oa(this,La,new Kr(a));break;case e.GAME_DISTRIBUTION:Oa(this,La,new io(a));break;case e.OK:Oa(this,La,new un(a));break;case e.PLAYGAMA:Oa(this,La,new _n(a));break;case e.WORTAL:Oa(this,La,new Zn(a));break;case e.PLAYDECK:Oa(this,La,new Ln(a));break;case e.TELEGRAM:Oa(this,La,new ci(a));break;case e.Y8:Oa(this,La,new ki(a));break;case e.LAGGED:Oa(this,La,new ji(a));break;case e.FACEBOOK:Oa(this,La,new zi(a));break;case e.POKI:Oa(this,La,new _a(a));break;case e.QA_TOOL:Oa(this,La,new pa(a));break;default:Oa(this,La,new Nt)}}function Fa(t){for(var r=Object.values(e),o=0;o<r.length;o++)if(t===r[o])return t;return e.MOCK}function Ga(e){return Da(this,Ta)||console.error(p),Da(this,ja)[e]}const Ha=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Pa(this,Ba),Pa(this,Ca),Pa(this,Na),Aa(this,Ta,{writable:!0,value:!1}),Aa(this,Ia,{writable:!0,value:null}),Aa(this,La,{writable:!0,value:null}),Aa(this,ja,{writable:!0,value:{}})}var f,p;return f=r,(p=[{key:"version",get:function(){return"1.20.0"}},{key:"isInitialized",get:function(){return Da(this,Ta)}},{key:"platform",get:function(){return ka(this,Ba,Ga).call(this,t.PLATFORM)}},{key:"player",get:function(){return ka(this,Ba,Ga).call(this,t.PLAYER)}},{key:"game",get:function(){return ka(this,Ba,Ga).call(this,t.GAME)}},{key:"storage",get:function(){return ka(this,Ba,Ga).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return ka(this,Ba,Ga).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return ka(this,Ba,Ga).call(this,t.SOCIAL)}},{key:"device",get:function(){return ka(this,Ba,Ga).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return ka(this,Ba,Ga).call(this,t.LEADERBOARD)}},{key:"payments",get:function(){return ka(this,Ba,Ga).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return ka(this,Ba,Ga).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return ka(this,Ba,Ga).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return ka(this,Ba,Ga).call(this,t.CLIPBOARD)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return l}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return o}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return u}},{key:"VISIBILITY_STATE",get:function(){return n}},{key:"DEVICE_TYPE",get:function(){return c}},{key:"initialize",value:function(e){var r=this;return Da(this,Ta)?Promise.resolve():(Da(this,Ia)||(Oa(this,Ia,new R),fetch("./playgama-bridge-config.json").then((function(e){return e.json()})).then((function(e){r._options=ba({},e)})).catch((function(){r._options=ba({},e)})).finally((function(){ka(r,Na,Ma).call(r),Da(r,La).initialize().then((function(){Da(r,ja)[t.PLATFORM]=new H(Da(r,La)),Da(r,ja)[t.PLAYER]=new V(Da(r,La)),Da(r,ja)[t.GAME]=new Q(Da(r,La)),Da(r,ja)[t.STORAGE]=new ne(Da(r,La)),Da(r,ja)[t.ADVERTISEMENT]=new Ve(Da(r,La)),Da(r,ja)[t.SOCIAL]=new qe(Da(r,La)),Da(r,ja)[t.DEVICE]=new tt(Da(r,La)),Da(r,ja)[t.LEADERBOARD]=new at(Da(r,La)),Da(r,ja)[t.PAYMENTS]=new ft(Da(r,La)),Da(r,ja)[t.REMOTE_CONFIG]=new mt(Da(r,La)),Da(r,ja)[t.CLIPBOARD]=new bt(Da(r,La)),Da(r,ja)[t.ACHIEVEMENTS]=new Ot(Da(r,La)),Oa(r,Ta,!0),console.info("%c PlaygamaBridge v.".concat(r.version," initialized. "),"background: #01A5DA; color: white"),Da(r,Ia)&&(Da(r,Ia).resolve(),Oa(r,Ia,null))}))}))),Da(this,Ia).promise)}}])&&function(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ea(o.key),o)}}(f.prototype,p),Object.defineProperty(f,"prototype",{writable:!1}),r}();window.bridge=new Ha,window.playgamaBridge=window.bridge})()})();